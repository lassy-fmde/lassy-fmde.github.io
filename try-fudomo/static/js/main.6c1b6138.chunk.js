(this["webpackJsonptry-fudomo"]=this["webpackJsonptry-fudomo"]||[]).push([[0],{1064:function(e,t){},1066:function(e,t){},1076:function(e,t){},1078:function(e,t){},1103:function(e,t){},1105:function(e,t){},1106:function(e,t){},1111:function(e,t){},1113:function(e,t){},1119:function(e,t){},1121:function(e,t){},1140:function(e,t){},1152:function(e,t){},1155:function(e,t){},122:function(e,t,n){var r=n(93),a=n(94),o=n(103),i=n(104),c=n(195),s=c.AbstractJSObjectLoader,u=c.AbstractOYAMLObjectLoader,l=c.CenteredModel,f=n(231).importModule,p=function(e){"use strict";o(n,e);var t=i(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"loadFromSource",value:function(e){var t=f(e);return this.loadFromData(t)}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Array.isArray(e))throw new Error("Root has to be Object, not Array");return(new JSObjectFactory).getObjectModel(new Root(e),t)}}]),n}(s),d=function(e){"use strict";o(n,e);var t=i(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"loadFromSource",value:function(e){return this.loadFromData(e)}}]),n}(u),m={js:new p,yaml:new d,oyaml:new d};e.exports={loaders:m,CenteredModel:l}},1432:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(420),i=n(31),c=n(1499),s=n(110),u=n(56),l=n(153),f=(n(485),n(3)),p=n.n(f),d=n(8),m=n(15),h=n(421),b=n(300),v=n.n(b),j=n(33),y=n(167),g=n(1),k={width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"var(--theme-neutral-500)"},x={color:"var(--theme-neutral-500)"};function w(e){return Object(g.jsxs)("div",{style:k,children:[Object(g.jsx)(y.a,{variant:"h3",style:x,children:e.message}),e.children]})}var O=n(222),S=n.n(O),C=n(312),_=Object(C.a)({root:{width:"100%",height:"100%",flexDirection:"column",alignItems:"stretch",boxSizing:"border-box",overflow:"hidden",padding:"1em"},container:{flexDirection:"column",border:"2px solid var(--theme-neutral-200)",borderRadius:"6px 6px 0 0",backgroundColor:"transparent",width:"calc(100% - 4px)",height:"calc(100% - 4px)",boxShadow:"2px 2px 12px rgba(0, 0, 0, 0.05)",boxSizing:"border-box",overflow:"hidden"},headerBox:{backgroundColor:"var(--theme-primary-300)",padding:"0.5rem 0.5rem 0.5rem 1rem",boxSizing:"border-box",overflow:"hidden",flexDirection:"row",width:"100%",minHeight:"3em",maxHeight:"3em",alignItems:"center"},header:{minWidth:"1em",overflow:"hidden",textOverflow:"ellipsis",flexGrow:99,flexShrink:99,fontSize:"large",fontWeight:"600",letterSpacing:"0.1em",color:"var(--theme-neutral-800)",textTransform:"uppercase",whiteSpace:"nowrap",cursor:"default"},content:{overflow:"hidden"}});function N(e){var t=Object(r.useCallback)((function(e,t){return a.a.Children.toArray(e).filter((function(e){return Object.keys(e.props).includes("tool")===t}))}),[]),n=_();return Object(g.jsx)(c.a,{display:"flex",className:n.root,children:Object(g.jsxs)(c.a,{display:"flex",className:n.container,children:[Object(g.jsxs)(c.a,{display:"flex",className:n.headerBox,children:[Object(g.jsx)(y.a,{className:n.header,children:e.title}),t(e.children,!0)]}),Object(g.jsx)(c.a,{width:"100%",height:"100%",className:n.content,children:t(e.children,!1)})]})})}var I=n(1472),E=Object(C.a)({button:{marginLeft:"0.5rem",paddingRight:"0.5rem",color:"var(--theme-neutral-800)"},label:{overflow:"hidden",textOverflow:"ellipsis",minWidth:"1em"},startIcon:{marginRight:0},buttonDisabled:{backgroundColor:"var(--theme-neutral-500) !important",color:"var(--theme-neutral-400) !important",cursor:"default"}});function P(e){var t=E(),n=Object(r.useMemo)((function(){return{backgroundColor:e.color}}),[e]),a=Object(r.useMemo)((function(){return{root:t.button,disabled:t.buttonDisabled,label:t.label,startIcon:t.startIcon}}),[t]);return Object(g.jsx)(I.a,{startIcon:e.startIcon,disabled:e.disabled,style:n,classes:a,size:"small",title:e.title,onClick:e.onClick,children:e.children})}var F=n(445),R=n(1476),T=n(448),A=n(1477),L=n(426),M=n.n(L),D=n(425),z=n.n(D),q=n(424),B=n.n(q),$=(n(495),n(910),n(911),n(912),n(913),n(914),n(915),n(916),n(917),n(1473)),V=(n(918),window.ResizeObserver||F.a),J={$blockScrolling:1/0},W={scrollPastEnd:1,tabSize:2,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0};function H(e){var t=e.editorId,n=e.value,a=e.disabled,o=e.markers,c=e.language,s=(e.theme,e.onChange),u=e.onQuickfixProposalClicked,l=e.onContextMenu,f=e.functionsRef,p=(o||[]).map((function(e){var t=(void 0!==e.markerContext?e.markerContext.location:e.location)||[[0,0],[0,1]];return{row:t[0][0],column:t[0][1],type:"error",text:e.message,fixes:e.fixes}})),d=(o||[]).map((function(e){var t=(void 0!==e.markerContext?e.markerContext.location:e.location)||[[0,0],[0,1]];return{startRow:t[0][0],startCol:t[0][1],endRow:t[1][0],endCol:t[1][1],type:"text",text:e.message,className:"error-marker"}})),h=Object($.a)((function(e){s&&s(e)}),100),b=Object(m.a)(h,1)[0],v=Object(r.useCallback)((function(e){b(e)}),[b]),j=Object(r.useRef)(),y=Object($.a)((function(e){e.resize()}),250),k=Object(m.a)(y,1)[0];Object(r.useEffect)((function(){if(null!==j.current){var e=new V((function(e){k(j.current.editor)}));return e.observe(j.current.refEditor),function(){e.disconnect()}}}),[j,k]);var x=Object(r.useState)(null),w=Object(m.a)(x,2),O=w[0],S=w[1],C=Object(r.useState)([]),_=Object(m.a)(C,2),N=_[0],I=_[1],E=Object(r.useCallback)((function(e){e.target.classList.contains("ace_error")&&function(){var t,n=j.current.editor.renderer.screenToTextCoordinates(e.clientX,e.clientY).row,r=j.current.editor.renderer.$gutterLayer.$annotations[n],a=[],o=Object(i.a)(p.filter((function(e){return e.row===n&&r.text.includes((""+e.text).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;"))})));try{for(o.s();!(t=o.n()).done;){var c=t.value;c.fixes&&a.push({error:c.text,proposals:c.fixes})}}catch(s){o.e(s)}finally{o.f()}I(a),a.length>0&&S(e.target)}()}),[j,p,S,I]),P=Object(r.useCallback)((function(e){if(l){var t=j.current.editor.renderer.screenToTextCoordinates(e.clientX,e.clientY);l(e,t)}}),[j,l]);Object(r.useEffect)((function(){var e=j.current.editor.renderer.$gutter,t=j.current.editor.container;return e.addEventListener("click",E),t.addEventListener("contextmenu",P),function(){t.removeEventListener("contextmenu",P),e.removeEventListener("click",E)}}),[j,E,P,l]);var F=Object(r.useCallback)((function(e){u&&u(e),S(null)}),[u,S]);return f&&(f.current={scrollToRow:function(e){j.current.editor.renderer.scrollToRow(e)}}),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(T.a,{anchorEl:O,getContentAnchorEl:null,anchorOrigin:{horizontal:"left",vertical:"bottom"},open:Boolean(O),onClose:function(e){return S(null)},children:N.map((function(e,t){return[Object(g.jsxs)(R.a,{disabled:!0,children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(z.a,{})}),e.error]},"fix-".concat(t)),e.proposals.map((function(e,n){return Object(g.jsxs)(R.a,{onClick:function(t){return F(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(M.a,{})}),e.description]},"fix-".concat(t,"-prop-").concat(n))}))]})).flat()}),Object(g.jsx)(B.a,{ref:j,mode:c||"text",value:n,annotations:p,markers:d,readOnly:a,theme:"chrome",onChange:v,fontSize:16,name:"ace_editor_"+t,editorProps:J,setOptions:W,width:"100%",height:"100%"})]})}var Z=a.a.memo(H);var Q=function(e){return Object(g.jsxs)(N,{title:"Metamodel",children:[Object(g.jsx)(P,{disabled:e.inferDisabled,startIcon:Object(g.jsx)(S.a,{}),tool:!0,color:"var(--theme-accent1-500)",title:"Infer Metamodel from Input Model",onClick:e.onInferMetamodelClicked,children:"Infer"}),Object(g.jsx)(Z,{editorId:"metamodel",value:e.value,disabled:e.disabled,language:"yaml",markers:e.markers,onChange:e.onChange})]})},G=n(118),U=n.n(G);function K(e){return Object(g.jsxs)(N,{title:"Transformation",children:[Object(g.jsx)(P,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:Object(g.jsx)(U.a,{}),title:"Validate Transformation wrt. Metamodel",onClick:e.onValidateTransformClicked,children:"Validate"}),Object(g.jsx)(Z,{editorId:"transformation",language:"fudomo",value:e.value,markers:e.markers,disabled:e.disabled,onChange:e.onChange,onQuickfixProposalClicked:e.onQuickfixProposalClicked,onContextMenu:e.onContextMenu,functionsRef:e.functionsRef})]})}var Y=n(1500),X=n(1478);function ee(e){var t=Object(r.useCallback)((function(t){e.onSelectedLanguageChanged&&e.onSelectedLanguageChanged(t.target.value)}),[e]);return Object(g.jsxs)(N,{title:"Decomp. Functions",children:[Object(g.jsx)(X.a,{tool:"true",children:Object(g.jsxs)(Y.a,{value:e.language||"",onChange:t,className:"FudomoSelect",children:[Object(g.jsx)(R.a,{disabled:e.languageSelectDisabled,value:"javascript",children:"JavaScript"}),Object(g.jsx)(R.a,{disabled:e.languageSelectDisabled,value:"python",children:"Python 3"})]})}),Object(g.jsx)(P,{disabled:e.generateDisabled,tool:!0,color:"var(--theme-accent1-500)",startIcon:Object(g.jsx)(S.a,{}),title:"Generate Decomposition Function Skeletons from Transformation",onClick:e.onGenerateSkeletonsClicked,children:"Generate"}),Object(g.jsx)(P,{disabled:e.validateDisabled,tool:!0,startIcon:Object(g.jsx)(U.a,{}),color:"var(--theme-accent2-500)",title:"Validate Decomposition Functions wrt. Transformation",onClick:e.onValidateFunctionsClicked,children:"Validate"}),Object(g.jsx)(Z,{editorId:"functions",value:e.value,onChange:e.onChange,disabled:e.disabled,language:e.language,markers:e.markers,onQuickfixProposalClicked:e.onQuickfixProposalClicked,onContextMenu:e.onContextMenu,functionsRef:e.functionsRef})]})}function te(e){return Object(g.jsxs)(N,{title:"Input Model",children:[Object(g.jsx)(P,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:Object(g.jsx)(U.a,{}),title:"Validate Input Model wrt. Metamodel",onClick:e.onValidateInputClicked,children:"Validate"}),Object(g.jsx)(Z,{editorId:"input",value:e.value,disabled:e.disabled,onChange:e.onChange,language:"oyaml",markers:e.markers,onQuickfixProposalClicked:e.onQuickfixProposalClicked})]})}var ne=n(224),re=n.n(ne),ae=(n(919),n(206)),oe={width:"100%",height:"100%"},ie={padding:"1em",fontFamily:"monospace",whiteSpace:"pre"},ce={width:"100%",height:"100%",padding:"0.5em",boxSizing:"border-box"};function se(e){var t=Object(r.useState)(null),n=Object(m.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(null),c=Object(m.a)(i,2),s=c[0],u=c[1],l=Object(r.useState)(null),f=Object(m.a)(l,2),p=f[0],d=f[1],h=Object(r.useCallback)((function(e){null!==e&&o(e)}),[]);return Object(r.useEffect)((function(){if(null!==a){var e=Object(ae.a)(a).graphviz({useWorker:!1}).attributer((function(e){"svg"===e.tag&&(e.attributes.style="width: 100%; height: 100%")})).onerror((function(e){d(String(e))}));u(e)}}),[a]),Object(r.useEffect)((function(){var t=null==e.dot||""===e.dot?"graph{}":e.dot;try{d(null),s.engine(e.engine||"dot").dot(t).render()}catch(p){d(String(p))}}),[e.dot,s,e.engine]),Object(g.jsxs)("div",{style:oe,children:[null!==p&&Object(g.jsx)("div",{style:ie,children:null!==p?String(p):""}),null===p&&Object(g.jsx)("div",{ref:h,style:ce})]})}var ue=0,le={width:"100%",height:"100%"},fe={boxSizing:"border-box",border:"none"};function pe(e){return Object(g.jsx)("div",{style:le,children:Object(g.jsx)("iframe",{title:"iframe".concat(ue++),srcDoc:e.html,width:"100%",height:"100%",style:fe})})}var de={padding:"1em",backgroundColor:"var(--theme-accent1-400)",hyphens:"auto"};function me(e){var t="string"===typeof e.value||e.value instanceof String;return Object(g.jsxs)(N,{title:"Output",children:[Object(g.jsxs)(Y.a,{tool:"true",value:e.format||"",onChange:e.onSelectedFormatChanged,className:"FudomoSelect",children:[Object(g.jsx)(R.a,{value:"text",children:"Text"}),Object(g.jsx)(R.a,{value:"graphviz-dot",children:"GraphViz (Dot)"}),Object(g.jsx)(R.a,{value:"graphviz-neato",children:"GraphViz (Neato)"}),Object(g.jsx)(R.a,{value:"html",children:"HTML"})]}),Object(g.jsx)(P,{tool:!0,disabled:e.transformDisabled,startIcon:Object(g.jsx)(re.a,{}),color:"var(--theme-accent1-500)",title:"Transform Input Model to Output",onClick:e.onTransformClicked,children:"Transform"}),t&&Object(g.jsxs)(g.Fragment,{children:["text"===e.format&&Object(g.jsx)(Z,{editorId:"output",value:e.value,disabled:e.disabled,format:"text"}),"graphviz-dot"===e.format&&Object(g.jsx)(se,{dot:e.value,engine:"dot"}),"graphviz-neato"===e.format&&Object(g.jsx)(se,{dot:e.value,engine:"neato"}),"html"===e.format&&Object(g.jsx)(pe,{html:e.value})]}),!t&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:de,children:"Warning: non-String value returned by the root decomposition. A converted result is shown below."}),Object(g.jsx)(Z,{editorId:"output",value:String(e.value),disabled:e.disabled,format:"text"})]})]})}var he=n(66),be=n(428),ve=n.n(be),je=n(1504),ye=n(1475),ge=n(1441),ke=n(225),xe=n.n(ke),we=n(1481),Oe={height:"100%",overflowY:"auto",color:"var(--theme-neutral-700)"};function Se(e){var t=e.project;return Object(g.jsxs)(N,{title:"Input Models",children:[Object(g.jsx)(P,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:Object(g.jsx)(U.a,{}),title:"Validate Input Models wrt. Metamodel",onClick:e.onValidateInputsClicked,children:"Validate"}),Object(g.jsx)(ye.a,{style:Oe,children:t.inputs.map((function(e,n){return Object(g.jsx)(he.b,{to:".."+t.url+"/"+e.name,className:"NoLinkStyling",children:Object(g.jsxs)(ge.a,{button:!0,children:[Object(g.jsx)(A.a,{className:"ListItemIcon",children:Object(g.jsx)(xe.a,{})}),Object(g.jsx)(we.a,{primary:e.name}),e.markers&&e.markers.length>0&&Object(g.jsx)(je.a,{placement:"top",arrow:!0,title:Object(g.jsx)("span",{style:{whiteSpace:"pre"},children:e.markers.map((function(e){return"- "+e.message})).join("\n")}),children:Object(g.jsx)(ve.a,{style:{color:"red"}})})]})},n)}))})]})}var Ce=n(1482),_e=n.n(Ce),Ne=n(1483),Ie=n.n(Ne),Ee=n(1484),Pe=n.n(Ee),Fe=n(1485),Re=n.n(Fe),Te=n(1486),Ae=n.n(Te),Le=n(69),Me=(n(922),n(923),_e.a),De=Ie.a,ze=Pe.a,qe=Re.a,Be=Ae.a,$e=_e.a,Ve=Ie.a,Je=Pe.a,We=Re.a,He={overflow:"hidden"},Ze={width:"100%",height:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box"};function Qe(e){var t=Object(r.useState)(!0),n=Object(m.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(!0),s=Object(m.a)(i,2),u=s[0],l=s[1],f=Object(r.useState)(!0),p=Object(m.a)(f,2),d=p[0],h=p[1],b=Object(r.useState)(!0),v=Object(m.a)(b,2),j=v[0],y=v[1],k=Object(r.useState)(!0),x=Object(m.a)(k,2),w=x[0],O=x[1],S=Object(r.useState)(!0),C=Object(m.a)(S,2),_=C[0],N=C[1],I=Object(r.useState)(!0),E=Object(m.a)(I,2),P=E[0],F=E[1],R=150;return Object(g.jsxs)(c.a,{width:"100%",height:"100%",boxSizing:"border-box",overflow:"hidden",children:[!a&&Object(g.jsx)("button",{title:"Show Top Row",className:"PaneButton ShowR1Button",onClick:function(){return o(!0)},children:Object(g.jsx)(qe,{})}),Object(g.jsxs)(Le.a,{orientation:"horizontal",style:Ze,children:[a&&Object(g.jsxs)(Le.b,{minSize:R,style:He,children:[u&&Object(g.jsx)("button",{title:"Hide Top Row",className:"PaneButton HideR1Button",onClick:function(){return o(!1)},children:Object(g.jsx)(Je,{})}),!d&&Object(g.jsx)("button",{title:"Show "+e.titles[0],className:"PaneButton ShowR1C1Button",onClick:function(){return h(!0)},children:Object(g.jsx)(De,{})}),Object(g.jsxs)(Le.a,{orientation:"vertical",children:[d&&Object(g.jsxs)(Le.b,{minSize:R,style:He,children:[(j||w)&&Object(g.jsx)("button",{title:"Hide "+e.titles[0],className:"PaneButton HideR1C1Button",onClick:function(){return h(!1)},children:Object(g.jsx)($e,{})}),e.children[0],!j&&Object(g.jsx)("button",{title:"Show "+e.titles[1],className:"PaneButton ShowR1C2Button1",onClick:function(){return y(!0)},children:Object(g.jsx)(Be,{})})]}),d&&(j||w)&&Object(g.jsx)(Le.c,{propagate:!0}),j&&Object(g.jsxs)(Le.b,{minSize:R,style:He,children:[(d||w)&&Object(g.jsx)("button",{title:"Hide "+e.titles[1],className:"PaneButton HideR1C2Button2",onClick:function(){return y(!1)},children:Object(g.jsx)(Ve,{})}),e.children[1]]}),j&&w&&Object(g.jsx)(Le.c,{propagate:!0}),w&&Object(g.jsxs)(Le.b,{minSize:R,style:He,children:[(d||j)&&Object(g.jsx)("button",{title:"Hide "+e.titles[2],className:"PaneButton HideR1C3Button",onClick:function(){return O(!1)},children:Object(g.jsx)(Ve,{})}),!j&&Object(g.jsx)("button",{title:"Show "+e.titles[1],className:"PaneButton ShowR1C2Button2",onClick:function(){return y(!0)},children:Object(g.jsx)(Be,{})}),e.children[2]]})]}),!w&&Object(g.jsx)("button",{title:"Show "+e.titles[2],className:"PaneButton ShowR1C3Button",onClick:function(){return O(!0)},children:Object(g.jsx)(Me,{})})]}),a&&u&&Object(g.jsx)(Le.c,{}),u&&Object(g.jsxs)(Le.b,{minSize:R,style:He,children:[a&&Object(g.jsx)("button",{title:"Hide Bottom Row",className:"PaneButton HideR2Button",onClick:function(){return l(!1)},children:Object(g.jsx)(We,{})}),Object(g.jsxs)(Le.a,{orientation:"vertical",children:[_&&Object(g.jsxs)(Le.b,{minSize:R,style:He,children:[_&&P&&Object(g.jsx)("button",{title:"Hide "+e.titles[3],className:"PaneButton HideR2C1Button",onClick:function(){return N(!1)},children:Object(g.jsx)($e,{})}),e.children[3]]}),_&&P&&Object(g.jsx)(Le.c,{}),P&&Object(g.jsxs)(Le.b,{minSize:R,style:He,children:[_&&P&&Object(g.jsx)("button",{title:"Hide "+e.titles[4],className:"PaneButton HideR2C2Button",onClick:function(){return F(!1)},children:Object(g.jsx)(Ve,{})}),e.children[4]]})]})]})]}),!_&&Object(g.jsx)("button",{title:"Show "+e.titles[3],className:"PaneButton ShowR2C1Button",onClick:function(){return N(!0)},children:Object(g.jsx)(De,{})}),!P&&Object(g.jsx)("button",{title:"Show "+e.titles[4],className:"PaneButton ShowR2C2Button",onClick:function(){return F(!0)},children:Object(g.jsx)(Me,{})}),!u&&Object(g.jsx)("button",{title:"Show Bottom Row",className:"PaneButton ShowR2Button",onClick:function(){return l(!0)},children:Object(g.jsx)(ze,{})})]})}function Ge(e){var t=e.position,n=e.onClose,r=e.items,a=null!==t,o=t?{top:t.y,left:t.x}:null;return Object(g.jsx)(T.a,{anchorReference:"anchorPosition",anchorPosition:o,open:a,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:r.map((function(e,t){return Object(g.jsx)(R.a,{onClick:e.onClick,children:e.label},t)}))})}var Ue=Object(r.createContext)();function Ke(e){var t=Object(l.useSnackbar)(),n=t.enqueueSnackbar,a=t.closeSnackbar,o=Object(r.useCallback)((function(e){e=Array.isArray(e)?e:[e];var t,r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(null!==o&&void 0!==o){var c="pre"===o.formatting?{whiteSpace:"pre"}:{},s="success"===o.type?"success":"error",u=o.message;"exception"===o.type&&(c.whiteSpace="pre",c.fontFamily="'Droid Sans Mono', monospace"),u&&function(){var e=n(Object(g.jsx)("p",{style:c,children:String(u)}),{variant:s,onClick:function(){return a(e)}})}()}}}catch(l){r.e(l)}finally{r.f()}}),[n,a]),c=Object(r.useCallback)((function(e){o([{type:"success",message:e}])}),[o]),s=Object(r.useCallback)((function(e){o([{type:"error",message:e}])}),[o]),u=Object(r.useCallback)((function(e){o([{type:"error",message:e,formatting:"pre"}])}),[o]),f=Object(r.useCallback)((function(e){o([{type:"exception",error:e}])}),[o]),p={showStatus:o,showSuccess:c,showError:s,showErrorPre:u,showException:f};return Object(g.jsx)(Ue.Provider,{value:p,children:e.children})}var Ye=n(21),Xe=n(98),et=n(101),tt=n.n(et),nt=n(432),rt=n(433);function at(e){return{type:"success",message:String(e)}}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"error",message:String(e),formatting:t}}function it(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"exception",message:e.toString(),formatting:t}}var ct=Object(Xe.b)({name:"status",initialState:[{type:"success",message:null}],reducers:{setStatus:function(e,t){return Array.isArray(t.payload)?t.payload:[t.payload]}}}),st=ct.actions.setStatus,ut=ct.reducer,lt=n(46),ft=n.n(lt),pt=n(84),dt=n(122),mt=n(231),ht=n(447),bt=n(35),vt=n(59),jt=n(60),yt=n(71),gt=n(86),kt=n(165),xt=n(212),wt=n(159),Ot=n.n(wt);function St(e){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=window.document.getElementsByTagName("head")[0],a=window.document.createElement("script");r.appendChild(a),a.onload=function(){e()},a.setAttribute("async",!0),a.setAttribute("type","text/javascript"),a.setAttribute("src",t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _t=n(1038),Nt=function(e){Object(yt.a)(n,e);var t=Object(gt.a)(n);function n(e){var r;if(Object(vt.a)(this,n),r=t.call(this),null==e)throw new Error("No exception provided");if(void 0===e.errorObj)throw new Error("No error object provided");return r.error=e.errorObj,r.message=e.message,r}return Object(jt.a)(n,[{key:"location",get:function(){if(0===this.error.stack.length)return null;var e=this.error.stack.slice(0).reverse()[0],t=e.startLine,n=e.startCol,r=e.endLine,a=e.endCol;return t===r&&n===a&&(a=n+e.line.slice(n).trim().length+1),[[t-1,n-1],[r-1,a-1]]}},{key:"toString",value:function(){var e,t="".concat(this.error.message,"\n"),n=this.error.stack.slice(0).reverse(),r=Object(i.a)(n);try{for(r.s();!(e=r.n()).done;){var a=e.value,o=a.line||"";t+="    at (PY) ".concat(o.trim()," (").concat(a.startLine,":").concat(a.startCol,")\n")}}catch(c){r.e(c)}finally{r.f()}return t.slice(0,-1)}}]),n}(kt.StackFrame),It=function(e){Object(yt.a)(n,e);var t=Object(gt.a)(n);function n(e){var r;Object(vt.a)(this,n),r=t.call(this);var a=window.load_python_module(e);if("ok"!==a){var o=JSON.parse(a),i=new kt.PythonError(o),c=[r.exceptionToStackFrame(i)];throw new lt.FudomoComputeException(c)}return r}return Object(jt.a)(n,[{key:"finalize",value:function(){}},{key:"hasFunction",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.has_function(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){return Object(xt.getSkeletonGenerator)("python")}},{key:"convertScalarValue",value:function(e,t){if("oyaml"===e){if(null==t)return null;if(t.kind!==_t.Kind.SCALAR)throw new Error("Expected Scalar YAML node");return t.valueObject instanceof Date?window.js_date_to_datetime(t.valueObject):_t.determineScalarType(t)===_t.ScalarType.string?t.value:t.valueObject}throw"js"===e?new Error("Not implemented"):new Error("Unsupported object model type "+e)}},{key:"wrapObject",value:function(e){var t=this;return e instanceof Set?{_type:"Set",values:Object(bt.a)(e).map((function(e){return t.wrapObject(e)}))}:e instanceof Array?e.map((function(e){return t.wrapObject(e)})):e}},{key:"unwrapObject",value:function(e){var t=this;return"Set"===e._type?new Set(e.values.map(this.unwrapObject)):e instanceof Array?e.map((function(e){return t.unwrapObject(e)})):void 0!==e.__class__&&"NoneType"===e.__class__.$infos.__name__?null:e}},{key:"callFunction",value:function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r,a,o,i,c,s,u=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.map((function(e){return u.wrapObject(e)})),a=window.call_function(t,r),o=Object(m.a)(a,2),i=o[0],c=o[1],!i){e.next=5;break}throw s=JSON.parse(c),new kt.PythonError(s);case 5:return e.abrupt("return",this.unwrapObject(c));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.to_string(this.wrapObject(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exceptionToStackFrame",value:function(e){return new Nt(e)}},{key:"getAppendNewFunctionSkeletonRange",value:function(e){return Object(pt.offsetToRange)(e,e.length,0)}},{key:"getFunctionSignatures",value:function(e){var t=Object(ht.a)(/(def[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)([0-9A-Z_a-z][0-9A-Z_a-z]*)([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\()([\n #,0-9A-Z_a-z]+)?(\)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*:)([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*#(?:(?!\n)[\s\S])*\n)?(([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?)(("""|'''|"|')(\n|.)*?(\10)))?/g,{fname:2,params:4,comment:9}),n=/(\s*)([\w\d_]+)([\s,]*)/g;return Object(pt.reMatchAll)(e,t).map((function(t){return{signature:t[0],signatureRange:t.groupRanges[0],funcName:t[2],funcNameRange:t.groupRanges[2],parameters:Object(pt.reMatchAll)(t[4]||"",n).map((function(n){return{name:n[2],nameRange:Object(pt.offsetToRange)(e,t.indices[4][0]+n.indices[2][0],n.indices[2][1]-n.indices[2][0])}})),parametersListRange:t.groupRanges[4],comment:t[9],commentRange:t.groupRanges[9]}}))}}],[{key:"init",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St("".concat(window.public_url,"/js/brython/brython.js"));case 2:return e.next=4,St("".concat(window.public_url,"/js/brython/brython_stdlib.js"));case 4:t=window.document.getElementsByTagName("head")[0],(n=window.document.createElement("script")).setAttribute("type","text/python3"),t.appendChild(n),n.textContent="\nfrom browser import run_script, window\nimport javascript\n\nimport inspect\nimport sys\nimport traceback\nimport re\nimport json\nimport datetime\n\n_source = '' # global state: current module source. Set by calling load_python_module.\n_mod = None  # global state: current module dict. Set by calling load_python_module.\n\ndef load_python_module(py):\n  global _mod\n  global _source\n  _source = py\n  scope = {}\n\n  try:\n    exec(py, scope)\n    _mod = scope\n    return 'ok' # string is passed easily to JS side\n  except Exception as e: # eg. SyntaxError\n    return encodeException(e)\n\nwindow.load_python_module = load_python_module\n\ndef validate_function(functionName, parameterNames):\n\n  func = _mod.get(functionName, None)\n\n  errors = []\n  if func is None:\n    errors.append(f'Expected implementation of decomposition function \"{functionName}\" not found.')\n  else:\n    sig = inspect.signature(func)\n    actualParamNames = [name for name in sig.parameters.keys()]\n    if parameterNames != actualParamNames:\n      errors.append(f'''Implementation of decomposition function \"{functionName}\" does not have expected parameters \"{', '.join(parameterNames)}\"''')\n    # TODO could check parameter type (keyword, *, **)\n  return errors\nwindow.validate_function = validate_function\n\ndef has_function(name):\n  return name in _mod\nwindow.has_function = has_function\n\ndef list_to_tuple(l):\n  if isinstance(l, list):\n    return tuple(l)\n  return l\n\ndef js_date_to_datetime(js_date):\n  year = js_date.getFullYear()\n  month = js_date.getMonth() + 1\n  day = js_date.getDate()\n  hour = js_date.getHours()\n  minute = js_date.getMinutes()\n  second = js_date.getSeconds()\n  milli = js_date.getMilliseconds()\n  tz_offset = js_date.getTimezoneOffset()\n  tz = datetime.timezone(datetime.timedelta(minutes=-tz_offset))\n  res = datetime.datetime(year, month, day, hour, minute, second, milli*1000, tz)\n  return res\nwindow.js_date_to_datetime = js_date_to_datetime\n\ndef datetime_to_js_date(dt):\n  dt = dt.astimezone(datetime.timezone.utc) # js works in UTC\n  return javascript.Date.new(dt.year, dt.month - 1, dt.day, dt.hour, dt.second, dt.microsecond/1000)\nwindow.datetime_to_js_date = datetime_to_js_date\n\ndef unwrapObject(o):\n  if getattr(o, '_type', None) == 'Set':\n    # lists can not be put into sets because they are not hashable.\n    # Here, we turn lists into tuples so that they can be put.\n    return set([unwrapObject(list_to_tuple(obj)) for obj in getattr(o, 'values')])\n  elif isinstance(o, list):\n    return [unwrapObject(obj) for obj in o]\n  elif hasattr(o, 'constructor') and o.constructor.name == 'Date':\n    # turn passed-in attributes that are Javascript Dates into Python datetime objects\n    return js_date_to_datetime(o)\n  return o\n\ndef wrapObject(o):\n  if isinstance(o, set):\n    return { '_type': 'Set', 'values': [wrapObject(obj) for obj in o] }\n  elif isinstance(o, list):\n    return [wrapObject(obj) for obj in o]\n  elif isinstance(o, datetime.datetime):\n    # Turn returned Python datetime instances into Javascript dates\n    return datetime_to_js_date(o)\n  return o\n\n# adapted from fudomo-transform/src/function_runner_base.py\ndef encodeException(e):\n  t, v, tb = sys.exc_info()\n  e_str = traceback.format_exception_only(t, v)[0].strip()\n  stack = traceback.extract_tb(tb)\n  if t == SyntaxError:\n    # quick and dirty special handling of syntax errrors\n    line_nr = int(e_str.split(' ')[-1]) # TODO handle format error\n    line = _source.split('\\n')[line_nr - 1]\n    message = 'SyntaxError: ' + str(e)\n    return json.dumps({ 'message': message, 'stack': [{ 'startLine': line_nr, 'endLine': line_nr, 'startCol': len(line)-len(line.lstrip()) + 1, 'endCol': len(line.rstrip()) + 1 }] })\n\n  processed_stack = []\n  for entry in stack:\n    if entry.filename != __file__:\n\n      orig_line = entry.line\n      if not orig_line:\n        try:\n          source_lines = _source.split('\\n')\n          orig_line = source_lines[entry.lineno - 1]\n        except IndexError:\n          orig_line = None\n\n      if orig_line:\n        start_col = len(re.match(r'^(\\s*)[^\\s]', orig_line).group(1)) + 1\n      else:\n        start_col = 0\n      e = { 'filename': entry.filename, 'startLine': entry.lineno, 'endLine': entry.lineno, 'startCol': start_col, 'endCol': start_col + len(entry.line) }\n      if orig_line is not None:\n        e['line'] = orig_line\n      processed_stack.append(e)\n\n  exc_obj = { 'message': e_str, 'stack': processed_stack }\n  return json.dumps(exc_obj)\n\ndef call_function(name, args):\n  args = [unwrapObject(a) for a in args]\n  f = _mod.get(name)\n  is_exception = False\n  try:\n    res = f(*args)\n  except Exception as e:\n    is_exception = True\n    res = encodeException(e)\n  return is_exception, wrapObject(res)\nwindow.call_function = call_function\n\ndef to_string(obj):\n  return str(unwrapObject(obj))\nwindow.to_string = to_string\n",window.brython();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(kt.DecompositionFunctionRunner),Et=It;function Pt(e,t){var n=[];try{var r=dt.loaders.oyaml.loadFromSource(e.inputs.find((function(e){return e.name===t})).input),a=new dt.CenteredModel(r,r);if(!e.metamodel)return[ot("Can not validate input: metamodel is empty")];var o=tt.a.parse(e.metamodel);n=new ft.a.DataValidator(o,a).errors}catch(i){if(void 0===i.markers)throw console.error(i),i;n=n.concat(i.markers)}return n}function Ft(e,t){try{var n=Pt(e,t);e.inputs.find((function(e){return e.name===t})).markers=n;var r=n.length>0?ot("Input validation error(s) found:\n"+n.map((function(e){return e.message})).join("\n"),"pre"):at("Input data validation successful.");e.status=r}catch(a){e.status=it(a)}return e}function Rt(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(d.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,"python"===t.functionsLanguage&&(n=new Et(t.functions)),"javascript"!==t.functionsLanguage){e.next=8;break}return r=Object(mt.getRunnerClassById)("javascript"),e.next=6,Object(mt.importModule)(t.functions);case 6:a=e.sent,n=new r(a);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function At(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(d.a)(p.a.mark((function e(t,n){var r,a,o,i,c,s,u,l,f,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,n(zt.setFunctionsMarkers([])),n(zt.setTransformationMarkers([])),a=null,e.prev=5,e.next=8,Rt(t);case 8:a=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),n(zt.setFunctionsMarkers([{message:e.t0.message,markerContext:{type:"functions",location:e.t0.location}}])),r.push(it(e.t0));case 15:if((o=ft.a.parseFudomo(t.transformation)).hasError&&(i=o.errors,n(zt.setTransformationMarkers(i)),r.push(ot("Transformation error(s) found:\n"+i.map((function(e){return e.error})).join("\n"),"pre")),o=null),null===a||null===o){e.next=30;break}return c=ft.a.getSkeletonGenerator(t.functionsLanguage),s=c.getFunctionValidationCriteria(o),e.next=22,a.validateFunctions(t.functions,s,o);case 22:return u=e.sent,l=u.filter((function(e){return"function"===e.markerContext.type})),f=u.filter((function(e){return"transformation"===e.markerContext.type})),n(zt.setFunctionsMarkers(l)),d=f.map((function(e){return{message:e.message,markerContext:{type:"transformation",location:o.getDecompositionBySignature(e.markerContext.decompositionQualifiedName).characterRange.toArray()},fixes:e.fixes}})),n(zt.setTransformationMarkers(d)),u.length>0&&r.push(ot("Decomposition function validation error(s) found:\n"+u.map((function(e){return e.message})).join("\n"),"pre")),e.abrupt("return",0===u.length);case 30:e.next=36;break;case 32:return e.prev=32,e.t1=e.catch(1),r.push(it(e.t1)),e.abrupt("return",!1);case 36:return e.prev=36,n(zt.setProjectStatus(r)),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[1,32,36,39],[5,11]])})))).apply(this,arguments)}var Mt=Object(Xe.b)({name:"project",initialState:null,reducers:{inferMetamodel:function(e){u.a.event({category:"Project",action:"Inferred Metamodel",label:e.url});try{var t,n=new ft.a.MetamodelInferer,r=[],a=Object(i.a)(e.inputs);try{for(a.s();!(t=a.n()).done;){var o=t.value;try{var c=dt.loaders.oyaml.loadFromSource(o.input);r.push(new dt.CenteredModel(c,c)),o.markers=[]}catch(l){return e.status=ot('Error in input "'.concat(o.name,'":\n').concat(l.message),"pre"),void(o.markers=l.markers)}}}catch(f){a.e(f)}finally{a.f()}var s=n.inferMetamodel(r);nt.nullOptions.nullStr="",e.metamodel=s.size>0?tt.a.stringify(s):"Root:",e.status=at("Metamodel successfully inferred.")}catch(l){e.status=it(l)}},generateSkeletons:function(e){u.a.event({category:"Project",action:"Generated Skeletons",label:e.url+" ("+e.functionsLanguage+")"});try{var t=ft.a.getSkeletonGenerator(e.functionsLanguage),n=ft.a.parseFudomo(e.transformation);if(n.hasError)e.transformationMarkers=n.errors,e.status=ot("Transformation has error(s): "+n.errors.map((function(e){return e.message})).join("\n"),"pre");else{var r=t.generateSkeleton(n);e.functions=r,e.functionMarkers=[],e.status=at("Decomposition function skeletons successfully generated.")}}catch(a){e.status=it(a)}},validateTransformation:function(e){u.a.event({category:"Project",action:"Validated Transformation",label:e.url});try{if(e.metamodel){var t=tt.a.parse(e.metamodel),n=ft.a.parseFudomo(e.transformation);if(n.hasError)e.transformationMarkers=n.errors,e.status=ot("Can not parse transformation");else{var r=new ft.a.TransformationValidator(t,n),a=r.errors.length>0?ot("Transformation validation error(s) found:\n"+r.errors.map((function(e){return e.message})).join("\n"),"pre"):at("Transform validation successful.");e.transformationMarkers=r.errors,e.status=a}}else e.status=ot("Can not validate transformation: metamodel is empty")}catch(o){e.status=it(o)}},validateInput:function(e,t){if(void 0===t.payload)throw new Error("inputId missing");u.a.event({category:"Project",action:"Validated Input",label:e.url+"."+t.payload}),Ft(e,t.payload)},validateInputs:function(e){u.a.event({category:"Project",action:"Validated Inputs",label:e.url}),function(e){var t,n=[],r=Object(i.a)(e.inputs);try{for(r.s();!(t=r.n()).done;){var a=t.value;try{var o=Pt(e,a.name);a.markers=o,o.length>0&&n.push('Input "'.concat(a.name,'" error(s):\n')+o.map((function(e){return"- "+e.message})).join("\n"))}catch(c){n.push(String(c))}}}catch(s){r.e(s)}finally{r.f()}e.status=0===n.length?at("Input data validation successful."):ot(n.join("\n"),"pre")}(e)},setMetamodel:function(e,t){e.metamodel=t.payload,e.status=null},setMetamodelMarkers:function(e,t){e.metamodelMarkers=t.payload,e.status=null},setTransformation:function(e,t){e.transformation=t.payload,e.status=null},setTransformationMarkers:function(e,t){e.transformationMarkers=t.payload,e.status=null},setFunctions:function(e,t){e.functions=t.payload,e.status=null},setFunctionsMarkers:function(e,t){e.functionsMarkers=t.payload,e.status=null},setFunctionsLanguage:function(e,t){e.functionsLanguage=t.payload,e.status=null},createInput:function(e,t){if(console.log(e,t),null===e)return e;t.payload.projectName===e.name&&(e.inputs.push({name:t.payload.name,input:t.payload.value||""}),e.status=null)},deleteInput:function(e,t){if(null===e)return e;t.payload.projectName===e.name&&(e.inputs.splice(e.inputs.findIndex((function(e){return e.name===t.payload.name})),1),e.status=null)},renameInput:function(e,t){if(null===e)return e;if(t.payload.projectName===e.name){var n,r=Object(i.a)(e.inputs);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.name===t.payload.name&&(a.name=t.payload.newName,e.status=null)}}catch(o){r.e(o)}finally{r.f()}}},setInput:function(e,t){if(void 0===t.payload.inputId)throw new Error("inputId missing");var n=e.inputs.find((function(e){return e.name===t.payload.inputId}));null!==n&&(n.input=t.payload.value),e.status=null},setInputMarkers:function(e,t){if(void 0===t.payload.inputId)throw new Error("inputId missing");e.inputs.find((function(e){return e.name===t.payload.inputId})).markers=t.payload.value,e.status=null},setOutput:function(e,t){e.output=t.payload,e.status=null},setOutputFormat:function(e,t){e.outputFormat=t.payload,e.status=null},setProject:function(e,t){var n=null;return t.payload&&((n=Object.assign({},t.payload)).status=null),n},setProjectStatus:function(e,t){e.status=Array.isArray(t.payload)?t.payload:[t.payload]},setHasUnsavedData:function(e,t){t.payload?e.hasUnsavedData=!0:delete e.hasUnsavedData}}}),Dt={transform:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(n,r){var a,o,i,c,s,l,f,d,m,h,b,v,j,y,g,k,x,w,O,S,C,_,N;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}throw new Error("inputId missing");case 2:return a=r().project,u.a.event({category:"Project",action:"Ran Transformation",label:a.url}),n(zt.setOutput("")),n(zt.setMetamodelMarkers([])),n(zt.setInputMarkers({inputId:e,value:[]})),n(zt.setFunctionsMarkers([])),n(zt.setTransformationMarkers([])),o=[],t.prev=10,i=!0,c=null,t.prev=13,t.next=16,Rt(a);case 16:c=t.sent,t.next=23;break;case 19:t.prev=19,t.t0=t.catch(13),o.push(it(t.t0)),i=!1;case 23:s=void 0;try{s=dt.loaders.oyaml.loadFromSource(a.inputs.find((function(t){return t.name===e})).input)}catch(p){n(zt.setInputMarkers({inputId:e,value:p.markers})),o.push(it(p)),i=!1}return(l=ft.a.parseFudomo(a.transformation)).hasError&&(f=l.errors,n(zt.setTransformationMarkers(f)),o.push(ot("Transformation error(s) found:\n"+f.map((function(e){return e.error})).join("\n"),"pre")),l=null,i=!1),t.next=29,At(a,n);case 29:t.sent||(i=!1),d=null;try{d=tt.a.parse(a.metamodel)}catch(p){m=p.message,h=[[0,0],[0,0]],p.source&&p.source.rangeAsLinePos&&(b=p.source.rangeAsLinePos,h=[[b.start.line-1,b.start.col-1],[b.end.line-1,b.end.col-1]]),n(zt.setMetamodelMarkers([{message:m,markerContext:{type:"metamodel",location:h}}])),o.push(it(p)),i=!1}if(0===a.metamodel.trim().length&&(v="Empty metamodel is not allowed. Click <Infer> to create metamodel for current input data.",n(zt.setMetamodelMarkers([{message:v,markerContext:{type:"metamodel",location:[[0,0],[0,0]]}}])),o.push(ot(v)),i=!1),void 0!==s&&null!==d&&(j=new dt.CenteredModel(s,s),(y=new ft.a.DataValidator(d,j)).errors.length>0&&(n(zt.setInputMarkers({inputId:e,value:y.errors})),g=ot("Input validation error(s) found:\n"+y.errors.map((function(e){return e.message})).join("\n"),"pre"),o.push(g),i=!1)),null!==l&&null!==d&&(l.hasError||(k=new ft.a.TransformationValidator(d,l)).errors.length>0&&(n(zt.setTransformationMarkers(k.errors)),x=ot("Transformation validation error(s) found:\n"+k.errors.map((function(e){return e.message})).join("\n"),"pre"),o.push(x),i=!1)),!i){t.next=56;break}return w=new dt.CenteredModel(s,s),O=new ft.a.TransformationContext(l,w,c),S=performance.now(),t.next=42,ft.a.transform(O);case 42:C=t.sent,_=performance.now(),console.log("Transformation took ".concat(_-S," ms")),t.prev=45,n(zt.setOutput(C)),t.next=55;break;case 49:return t.prev=49,t.t1=t.catch(45),t.next=53,c.toString(C);case 53:N=t.sent,n(zt.setOutput([N]));case 55:o.push(at("Transformation successful."));case 56:t.next=62;break;case 58:t.prev=58,t.t2=t.catch(10),t.t2.fudomoStack&&n(zt.setFunctionsMarkers([{message:t.t2.message,markerContext:{type:"functions",location:t.t2.location}}])),o.push(it(t.t2));case 62:return t.prev=62,n(zt.setProjectStatus(o)),t.finish(62);case 65:case"end":return t.stop()}}),t,null,[[10,58,62,65],[13,19],[45,49]])})));return function(e,n){return t.apply(this,arguments)}}()},applyQuickfix:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(n,r){var a,o,i,c,s,u;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r().project,o=pt.RangeReplaceQuickfixProposal.fromObj(e.proposal),i=null,"functions"!==o.appliesTo){t.next=7;break}i=a.functions,t.next=16;break;case 7:if("transformation"!==o.appliesTo){t.next=11;break}i=a.transformation,t.next=16;break;case 11:if("input"!==o.appliesTo){t.next=15;break}i=a.inputs.find((function(t){return t.name===e.inputId})).input,t.next=16;break;case 15:throw new Error;case 16:if(t.prev=16,c=o.applyToSource(i),"functions"===o.appliesTo?n(zt.setFunctions(c)):"transformation"===o.appliesTo?n(zt.setTransformation(c)):"input"===o.appliesTo&&n(zt.setInput({inputId:e.inputId,value:c})),s=Object(rt.a)(a),"functions"!==o.appliesTo){t.next=25;break}s.functions=c,At(s,n),t.next=36;break;case 25:if("transformation"!==o.appliesTo){t.next=28;break}t.next=36;break;case 28:if("input"!==o.appliesTo){t.next=35;break}(u=s.inputs.find((function(t){return t.name===e.inputId}))).input=c,Ft(s,e.inputId),n(zt.setInputMarkers({inputId:e.inputId,value:u.markers})),t.next=36;break;case 35:throw new Error("Not implemented");case 36:t.next=42;break;case 38:if(t.prev=38,t.t0=t.catch(16),t.t0 instanceof pt.QuickfixProposalNoLongerApplicableException){t.next=42;break}throw t.t0;case 42:case"end":return t.stop()}}),t,null,[[16,38]])})));return function(e,n){return t.apply(this,arguments)}}()},validateFunctions:function(){return function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n().project,u.a.event({category:"Project",action:"Validated Functions",label:r.url}),At(r,t)&&t(zt.setProjectStatus(at("Decomposition function validation successful.")));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},zt=Object(Ye.a)(Object(Ye.a)({},Mt.actions),Dt),qt=Mt.reducer,Bt={color:"var(--theme-neutral-500)",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5em",fontWeight:"500"},$t={position:"absolute",backgroundColor:"rgba(255, 255, 255, 0.85)",color:"var(--theme-neutral-500)",width:"100%",height:"100%",zIndex:1e4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5em",fontWeight:"500"},Vt=["Metamodel","Transformation","Functions","Input","Output"];function Jt(e){var t=Object(j.c)().dispatch,n=Object(j.b)((function(e){return e.project})),a=e.inputId||void 0,o=e.projectName,i=e.workspace,s=e.workspaceActions,u=Object(r.useContext)(Ue),l=u.showStatus,f=u.showError,b=Object(j.b)((function(e){var t;return null===(t=e.project)||void 0===t?void 0:t.status})),y=Object(j.b)((function(e){var t;return!0===(null===(t=e.project)||void 0===t?void 0:t.hasUnsavedData)})),k=Object(r.useState)(!1),x=Object(m.a)(k,2),O=x[0],S=x[1];Object(r.useEffect)((function(){l(b)}),[l,b]),Object(r.useEffect)((function(){O&&t(s.loadProject(o))}),[o,t,O,s]),Object(r.useEffect)((function(){S(i&&i.isInitialized)}),[i,S]);var C=Object(r.useCallback)((function(e){t(zt.setMetamodel(e))}),[t]),_=Object(r.useCallback)((function(e){t(zt.setTransformation(e))}),[t]),I=Object(r.useCallback)((function(e){t(zt.setFunctions(e))}),[t]),E=Object(r.useCallback)((function(e){t(zt.setFunctionsLanguage(e)),t(zt.setFunctions(""))}),[t]),P=Object(r.useCallback)((function(e){t(zt.setInput({inputId:a,value:e}))}),[t,a]),F=Object(r.useCallback)((function(e){t(zt.setOutput(e))}),[t]),R=Object(r.useCallback)((function(e){t(zt.setOutputFormat(e.target.value))}),[t]),T=Object(r.useCallback)((function(e){t(zt.inferMetamodel())}),[t]),A=Object(r.useCallback)((function(e){t(zt.generateSkeletons())}),[t]),L=Object(r.useCallback)((function(e){t(zt.transform(a))}),[t,a]),M=Object(r.useCallback)((function(e){t(zt.validateInput(a))}),[t,a]),D=Object(r.useCallback)((function(e){t(zt.validateInputs())}),[t]),z=Object(r.useCallback)((function(e){t(zt.validateTransformation())}),[t]),q=Object(r.useCallback)((function(e){t(zt.validateFunctions())}),[t]),B=Object(r.useCallback)((function(e){var n={proposal:e};"input"===e.appliesTo&&(n.inputId=a),t(zt.applyQuickfix(n))}),[t,a]),$=Object(j.b)((function(e){if(e.project&&!n.isLoading)return n.inputs.find((function(e){return e.name===a}))})),V=Object(r.useState)(null),J=Object(m.a)(V,2),W=J[0],H=J[1],Z=Object(r.useCallback)((function(e,t,n){return H(e),null}),[H]);Object(r.useEffect)((function(){y||null===W||(W.resume(),H(null))}),[y,W,H]);var G=Object(r.useState)(null),U=Object(m.a)(G,2),Y=U[0],X=U[1],ne=Object(r.useState)([]),re=Object(m.a)(ne,2),ae=re[0],oe=re[1],ie=Object(r.useRef)(null),ce=Object(r.useRef)(null),se=Object(r.useCallback)((function(e,t){var r=Object(lt.parseFudomo)(n.transformation).getDecompositionForTextCoordinate(t.column,t.row);r&&(r.function.characterRange.contains(t.column,t.row)&&(e.preventDefault(),oe([{label:"Show Decomposition Function",onClick:function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(null),e.next=3,Rt(n);case 3:t=e.sent,a=t.getFunctionSignatures(n.functions),(o=a.find((function(e){return e.funcName===r.function.externalName})))?(i=o.funcNameRange[0][0],ce.current.scrollToRow(i)):f('Function definition "'.concat(r.function.externalName,'" not found.'));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),X({x:e.clientX,y:e.clientY})))}),[n,X,oe,ce,f]),ue=Object(r.useState)(null),le=Object(m.a)(ue,2),fe=le[0],pe=le[1],de=Object(r.useState)([]),he=Object(m.a)(de,2),be=he[0],ve=he[1],je=Object(r.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,r){var a,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(n);case 2:a=e.sent,o=a.getFunctionSignatures(n.functions),(i=o.find((function(e){return new lt.CharacterRange(e.funcNameRange[0][1],e.funcNameRange[0][0],e.funcNameRange[1][1],e.funcNameRange[1][0]).contains(r.column,r.row)})))&&(t.preventDefault(),ve([{label:"Show Transformation Definition",onClick:function(){var e=Object(d.a)(p.a.mark((function e(){var t,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pe(null),t=Object(lt.parseFudomo)(n.transformation),(r=t.decompositions.find((function(e){return e.function.externalName===i.funcName})))?(a=r.function.node.location[0][0],ie.current.scrollToRow(a)):f('Transformation definition "'.concat(i.funcName,'" not found.'));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),pe({x:t.clientX,y:t.clientY}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,pe,ve,ie,f]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(Ge,{position:Y,items:ae,onClose:function(){return X(null)}}),Object(g.jsx)(Ge,{position:fe,items:be,onClose:function(){return pe(null)}}),Object(g.jsx)(h.a,{handler:Z,when:y}),!O&&Object(g.jsx)(w,{message:"Please wait..."}),O&&!n&&Object(g.jsx)(w,{message:"Project could not be found."}),n&&n.isLoading&&Object(g.jsxs)("div",{style:Bt,children:[Object(g.jsx)(v.a,{}),"Loading"]}),n&&!n.isLoading&&Object(g.jsxs)(c.a,{height:"100%",width:"100%",position:"relative",boxSizing:"border-box",overflow:"hidden",children:[null!==W&&Object(g.jsxs)("div",{style:$t,children:[Object(g.jsx)(v.a,{}),"Saving"]}),Object(g.jsxs)(Qe,{titles:Vt,children:[Object(g.jsx)(Q,{value:n.metamodel,disabled:n.readOnly,inferDisabled:e.metamodelInferDisabled||n.readOnly,markers:n.metamodelMarkers,onInferMetamodelClicked:T,onChange:C}),Object(g.jsx)(K,{value:n.transformation,disabled:n.readOnly,validateDisabled:e.transformationValidateDisabled,markers:n.transformationMarkers,onValidateTransformClicked:z,onChange:_,onQuickfixProposalClicked:B,onContextMenu:se,functionsRef:ie}),Object(g.jsx)(ee,{value:n.functions,disabled:n.readOnly,markers:n.functionsMarkers,language:n.functionsLanguage,languageSelectDisabled:e.functionsLanguageSelectDisabled||n.readOnly,generateDisabled:e.functionsGenerateDisabled||n.readOnly,validateDisabled:e.functionsValidateDisabled,onChange:I,onSelectedLanguageChanged:E,onGenerateSkeletonsClicked:A,onValidateFunctionsClicked:q,onQuickfixProposalClicked:B,onContextMenu:je,functionsRef:ce}),Object(g.jsxs)("div",{style:{width:"100%",height:"100%"},children:[void 0!==a&&void 0!==$&&Object(g.jsx)(te,{value:$?$.input:"",disabled:n.readOnly,markers:$?$.markers:[],onChange:P,validateDisabled:e.inputValidateDisabled,onValidateInputClicked:M,onQuickfixProposalClicked:B}),void 0!==a&&void 0===$&&Object(g.jsx)(N,{title:"Input Models",children:Object(g.jsx)(w,{message:"Input could not be found."})}),void 0===a&&Object(g.jsx)(Se,{project:n,onValidateInputsClicked:D})]}),Object(g.jsx)(me,{value:n.output,disabled:n.readOnly,format:n.outputFormat,onSelectedFormatChanged:R,onChange:F,onTransformClicked:L,transformDisabled:void 0===a||e.outputTransformDisabled})]})]})]})}var Wt=n(1487),Ht=n(1488),Zt=n(434),Qt=n.n(Zt),Gt=n(1489),Ut={marginRight:"1em"},Kt={flexGrow:1};function Yt(e){var t=Object(j.b)((function(e){return!e.environment.isEditorReady||!e.environment.isRuntimeReady})),n=Object(j.b)((function(e){return e.project?e.project.name:""}));return Object(g.jsx)("div",{className:"AppBar",children:Object(g.jsx)(Wt.a,{position:"static",className:"AppBar",children:Object(g.jsxs)(Ht.a,{children:[Object(g.jsx)(y.a,{className:"AppTitle",variant:"h6",children:"Try Fudomo!"}),Object(g.jsx)(y.a,{style:Kt,variant:"h6",children:n}),t&&Object(g.jsx)(Gt.a,{className:"Progress",color:"inherit"}),Object(g.jsx)("a",{className:"NoLinkStyling",style:Ut,href:"/try-fudomo/docs",target:"_blank",rel:"opener",children:Object(g.jsx)(Qt.a,{})})]})})})}var Xt=n(442),en=n.n(Xt),tn=n(1496),nn=n(1497),rn=n.n(nn),an=n(1498),on=n.n(an);function cn(e,t,n){return Object(Xe.b)({name:e,initialState:t,reducers:{_setInitialized:function(e){e.isInitialized=!0},_setProjects:function(e,t){e.projects=t.payload},_addProject:function(e,t){var n=t.payload;e.projects.push({name:n.name,url:n.url,inputs:n.inputs.map((function(e){return e.name}))})},_deleteProject:function(e,t){var n=e.projects.findIndex((function(e){return e.name===t.payload}));e.projects.splice(n,1)},_renameProject:function(e,t){var n=t.payload,r=n.name,a=n.newName,o=e.projects.find((function(e){return e.name===r}));o.name=a,o.url=o.url.slice(0,-r.length)+a},_createInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name;e.projects.find((function(e){return e.name===r})).inputs.push(a)},_deleteInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name,o=e.projects.find((function(e){return e.name===r}));o.inputs.splice(o.inputs.findIndex((function(e){return e===a})),1)},_renameInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name,o=n.newName,i=e.projects.find((function(e){return e.name===r}));i.inputs=i.inputs.map((function(e){return e===a?o:e}))},_setSignedIn:function(e,t){e.isSignedIn=t.payload},_setCapabilities:function(e,t){Object.assign(e.capabilities,t.payload)},_setProgressing:function(e,t){e.progressing=t.payload}}})}function sn(e,t){var n={init:function(){return function(){var r=Object(d.a)(p.a.mark((function r(a,o){var i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),i=Object(Ye.a)(Object(Ye.a)({},t),n),r.next=5,e.init(a,i);case 5:return r.next=7,a(n.reload());case 7:a(t._setInitialized());case 8:return r.prev=8,a(t._setProgressing(!1)),r.finish(8);case 11:case"end":return r.stop()}}),r,null,[[0,,8,11]])})));return function(e,t){return r.apply(this,arguments)}}()},reload:function(){return function(){var r=Object(d.a)(p.a.mark((function r(a,o){var c,s,u,l,f,d;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),c=o(),r.next=5,e.getProjectsMetadata();case 5:s=r.sent,a(t._setProjects(s)),u=Object(i.a)(s);try{for(u.s();!(l=u.n()).done;)d=l.value,(null===(f=c.project)||void 0===f?void 0:f.url)===d.url&&a(n.loadProject(d.name))}catch(p){u.e(p)}finally{u.f()}r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),a(st(ot(r.t0.message)));case 14:return r.prev=14,a(t._setProgressing(!1)),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,11,14,17]])})));return function(e,t){return r.apply(this,arguments)}}()},loadProject:function(n){return function(){var r=Object(d.a)(p.a.mark((function r(a,o){var i,c;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=window.location.pathname,a(zt.setProject({url:e.getUrlForProjectName(n),name:n,isLoading:!0})),r.prev=2,a(t._setProgressing(!0)),r.next=6,e.loadProject(n);case 6:if(c=r.sent,window.location.pathname===i){r.next=9;break}return r.abrupt("return");case 9:a(zt.setProject(c)),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(2),a(st(ot('Can not load project "'.concat(n,'": ').concat(r.t0.message)))),a(zt.setProject(null));case 16:return r.prev=16,a(t._setProgressing(!1)),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[2,12,16,19]])})));return function(e,t){return r.apply(this,arguments)}}()},unloadProject:function(e){return function(){var e=Object(d.a)(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n.commitProject((function(){t(zt.setProject(null))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},createEmptyProject:function(e){var t=e.name,r=e.onCreated;return function(){var e=Object(d.a)(p.a.mark((function e(a,o){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={name:t,inputs:[{name:"input1",input:""}],metamodel:"",transformation:"",functions:"",functionsLanguage:"javascript",output:"",outputFormat:"text"},a(n.createProject({project:i,onCreated:r}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},createProject:function(n){var r=n.project,a=n.onCreated;return function(){var n=Object(d.a)(p.a.mark((function n(o,i){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(t._setProgressing(!0)),n.next=4,e.createProject(r);case 4:r=n.sent,o(t._addProject(r)),a&&a(r),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),o(st(ot(n.t0.toString())));case 12:return n.prev=12,o(t._setProgressing(!1)),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteProject:function(n){return function(){var r=Object(d.a)(p.a.mark((function r(a,o){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),r.next=4,e.deleteProject(n);case 4:a(t._deleteProject(n));case 5:return r.prev=5,a(t._setProgressing(!1)),r.finish(5);case 8:case"end":return r.stop()}}),r,null,[[0,,5,8]])})));return function(e,t){return r.apply(this,arguments)}}()},renameProject:function(n){var r=n.name,a=n.newName,o=n.onRename;return function(){var n=Object(d.a)(p.a.mark((function n(i,c){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i(t._setProgressing(!0)),n.next=4,e.renameProject(r,a);case 4:i(t._renameProject({name:r,newName:a})),o&&o(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),i(st(ot(n.t0.toString())));case 11:return n.prev=11,i(t._setProgressing(!1)),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})));return function(e,t){return n.apply(this,arguments)}}()},createInput:function(e){return function(){var n=Object(d.a)(p.a.mark((function n(r,a){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(t._setProgressing(!0)),r(t._createInput(e)),r(zt.createInput(e))}finally{r(t._setProgressing(!1))}case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},deleteInput:function(e){return function(){var n=Object(d.a)(p.a.mark((function n(r,a){var o,i;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.projectName,i=e.name;try{r(t._setProgressing(!0)),r(t._deleteInput({projectName:o,name:i})),r(zt.deleteInput({projectName:o,name:i}))}finally{r(t._setProgressing(!1))}case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},renameInput:function(e){var n=e.projectName,r=e.name,a=e.newName,o=e.onRename;return function(){var e=Object(d.a)(p.a.mark((function e(i,c){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i(t._setProgressing(!0)),i(t._renameInput({projectName:n,name:r,newName:a})),i(zt.renameInput({projectName:n,name:r,newName:a})),o&&o()}finally{i(t._setProgressing(!1))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},setInput:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(zt.setInput(e));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},signIn:function(){return function(){var r=Object(d.a)(p.a.mark((function r(a,o){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),r.next=4,e.signIn(a,Object(Ye.a)(Object(Ye.a)({},t),n));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),a(st(it(r.t0)));case 9:return r.prev=9,a(t._setProgressing(!1)),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[0,6,9,12]])})));return function(e,t){return r.apply(this,arguments)}}()},signOut:function(r){return function(){var a=Object(d.a)(p.a.mark((function a(o,i){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o(t._setProgressing(!0)),a.next=4,e.signOut(o,Object(Ye.a)(Object(Ye.a)({},t),n));case 4:r&&r(),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),o(st(it(a.t0)));case 10:return a.prev=10,o(t._setProgressing(!1)),a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})));return function(e,t){return a.apply(this,arguments)}}()},commitProject:function(n){return function(){var r=Object(d.a)(p.a.mark((function r(a,o){var i,c;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===(i=o()).project){r.next=14;break}return r.prev=2,a(t._setProgressing(!0)),delete(c=Object(Ye.a)({},i.project)).hasUnsavedData,delete c.status,delete c.isLoading,r.next=10,e.saveProject(c);case 10:n&&n();case 11:return r.prev=11,a(t._setProgressing(!1)),r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[2,,11,14]])})));return function(e,t){return r.apply(this,arguments)}}()}};return n}var un="tryFudomoLocalProjectsV2";function ln(e){var t=JSON.parse(localStorage[un]||"[]"),n=e(t);void 0===n&&(n=t),localStorage[un]=JSON.stringify(n)}function fn(e){return e.name||e.url?e.url.split("/").slice(-1)[0]:null}var pn={init:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==window.localStorage.localProjects&&void 0===window.localStorage[un]&&(window.localStorage[un]=window.localStorage.localProjects,ln((function(e){var t,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.name=fn(r)}}catch(a){n.e(a)}finally{n.f()}})),console.log("Migrated localStorage.localProjects to localStorage.".concat(un))),window.addEventListener("storage",(function(e){t(n.reload())}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/local/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage[un]||"[]"),e.abrupt("return",t.filter((function(e){return Object.keys(e).length>0})).map((function(e){return{name:e.name||e.url.slice("/local/".length),url:e.url,inputs:e.inputs.map((function(e){return e.name}))}})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.url="/local/"+t.name,ln((function(e){return[].concat(Object(bt.a)(e),[t])})),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ln((function(e){var r,a=Object(i.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;fn(o)===t&&(o.name=n,o.url="/local/"+n)}}catch(c){a.e(c)}finally{a.f()}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(n=JSON.parse(localStorage[un]||"[]").find((function(e){return fn(e)===t}))).hasUnsavedData,e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ln((function(e){return e.filter((function(e){return fn(e)!==t}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("local"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-local project");case 2:n=!1,ln((function(e){var r,a=Object(i.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.url===t.url&&(Object.assign(o,t),n=!0)}}catch(c){a.e(c)}finally{a.f()}})),n||ln((function(e){e.push(t)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},dn=cn("localWorkspace",{name:"local",isInitialized:!1,isSignedIn:!0,capabilities:{canAddProject:!0,canImportProject:!0,canDeleteProject:!0,canRenameProject:!0,canAddInput:!0,canRenameInput:!0,canDeleteInput:!0,requiresSignIn:!1},status:[{type:"success",message:null}],projects:[]}),mn=sn(pn,dn.actions),hn=Object(Ye.a)(Object(Ye.a)({},dn.actions),mn),bn=dn.reducer,vn={name:"example",isInitialized:!1,isSignedIn:!0,capabilities:{canAddProject:!1,canImportProject:!1,canDeleteProject:!1,canRenameProject:!1,canAddInput:!1,canRenameInput:!1,canDeleteInput:!1,requiresSignIn:!1},status:[{type:"success",message:null}],projects:[{url:"/example/concat",name:"concat",inputs:["example1","example2"]},{url:"/example/family2persons",name:"family2persons",inputs:["example1"]},{url:"/example/fsm2dot",name:"fsm2dot",inputs:["example1"]},{url:"/example/fsm2dotjs",name:"fsm2dotjs",inputs:["AlternatingZeroOrOne","EvenZeros"]},{url:"/example/presi2beamer",name:"presi2beamer",inputs:["example1"]},{url:"/example/presisnippets2html",name:"presisnippets2html",inputs:["example1"]}]},jn={init:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/example/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn.projects);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==vn.projects.find((function(e){return e.name===t}))){e.next=2;break}throw new Error("Unknown example project");case 2:return e.next=4,Ot.a.get("/examples/".concat(t,".yaml"));case 4:return n=e.sent,(r=tt.a.parse(n.data)).isLoading=!1,r.readOnly=!0,r.name=t,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},yn=cn("examplesWorkspace",vn),gn=sn(jn,yn.actions),kn=Object(Ye.a)(Object(Ye.a)({},yn.actions),gn),xn=yn.reducer;function wn(){return On.apply(this,arguments)}function On(){return(On=Object(d.a)(p.a.mark((function e(){var t,n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=void 0;case 2:return r={spaces:"appDataFolder",pageSize:100,fields:"nextPageToken, files(id, name)"},void 0!==n&&(r.pageToken=n),e.next=6,window.gapi.client.drive.files.list(r);case 6:a=e.sent,t=[].concat(Object(bt.a)(t),Object(bt.a)(a.result.files)),n=a.result.nextPageToken;case 9:if(void 0!==n){e.next=2;break}case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sn(e){return Cn.apply(this,arguments)}function Cn(){return(Cn=Object(d.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={q:"name='".concat(t.replace(/'/g,"\\'"),"'"),spaces:"appDataFolder",pageSize:2,fields:"nextPageToken, files(id, name)"},e.next=3,window.gapi.client.drive.files.list(n);case 3:if(0!==(r=e.sent).result.files.length){e.next=6;break}return e.abrupt("return",null);case 6:return a=r.result.files[0].id,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _n(e){return Nn.apply(this,arguments)}function Nn(){return(Nn=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Sn(t);case 3:return n=e.sent,e.next=6,window.gapi.client.drive.files.get({fileId:n,alt:"media"});case 6:return r=e.sent,e.abrupt("return",r.body);case 10:if(e.prev=10,e.t0=e.catch(0),403!==e.t0.status){e.next=14;break}throw new Error("Not logged into Google Drive");case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function In(e,t,n){return En.apply(this,arguments)}function En(){return(En=Object(d.a)(p.a.mark((function e(t,n,r){var a,o,i,c,s,u,l,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(t);case 2:return a=e.sent,o="foo_bar_baz",i="\r\n--foo_bar_baz\r\n","\r\n--foo_bar_baz--",c={name:t,parents:["appDataFolder"],mimeType:r},s="POST",u="https://www.googleapis.com/upload/drive/v3/files",null!==a&&(u=u+"/"+a,s="PATCH",delete c.parents),l=i+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify(c)+i+"Content-Type: "+r+"\r\n\r\n"+n+"\r\n\r\n--foo_bar_baz--",f=window.gapi.client.request({path:u,method:s,params:{uploadType:"multipart"},headers:{"Content-Type":"multipart/related; boundary="+o},body:l}),e.abrupt("return",new Promise((function(e,t){f.then((function(t){e(t)}),(function(e){t(e)}))})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pn(e){return Fn.apply(this,arguments)}function Fn(){return(Fn=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(Ye.a)({},t)).inputs=n.inputs||[],delete n.status,delete n.isLoading,r={url:n.url,name:n.url.slice("/gdrive/".length),inputs:n.inputs.map((function(e){return e.name}))},e.next=7,In("metadata-".concat(r.name,".json"),JSON.stringify(r),"application/json");case 7:return e.next=9,In("project-".concat(r.name,".json"),JSON.stringify(n),"application/json");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(e){return Tn.apply(this,arguments)}function Tn(){return(Tn=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(t);case 2:if(null!==(n=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,window.gapi.client.drive.files.delete({fileId:n});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(e){return Ln.apply(this,arguments)}function Ln(){return(Ln=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn("project-".concat(t,".json"));case 2:return e.next=4,Rn("metadata-".concat(t,".json"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mn={init:function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){var r={canAddProject:e,canImportProject:e,canDeleteProject:e,canRenameProject:e,canAddInput:e,canRenameInput:e,canDeleteInput:e};t(n._setCapabilities(r)),t(n._setSignedIn(e))},e.abrupt("return",new Promise((function(e,a){window.gapi.load("client:auth2",(function(){window.gapi.client.init({apiKey:"AIzaSyDD7_sgciu8fRVTrgGeCzIaLl_1g7s66Lo",clientId:"937789607311-rfogt5dmebkjcnfehbtshe13s1s433us.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file"}).then((function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen((function(e){r(e),t(n.reload())})),r(window.gapi.auth2.getAuthInstance().isSignedIn.get()),e()}),(function(e){console.log(e)}))}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.auth2.getAuthInstance().signIn();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.auth2.getAuthInstance().signOut();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/gdrive/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r,a,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.prev=2,e.next=5,wn();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),403!==e.t0.status&&console.log(e.t0);case 11:r=Object(i.a)(n),e.prev=12,r.s();case 14:if((a=r.n()).done){e.next=24;break}if(null===(o=a.value).name.match(/metadata-.*\.json/)){e.next=22;break}return e.next=19,window.gapi.client.drive.files.get({fileId:o.id,alt:"media"});case 19:c=e.sent,s=JSON.parse(c.body),t.push(s);case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(12),r.e(e.t1);case 29:return e.prev=29,r.f(),e.finish(29);case 32:return e.abrupt("return",t);case 33:case"end":return e.stop()}}),e,null,[[2,8],[12,26,29,32]])})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(t.name,'" is not allowed.'));case 2:return t.url="/gdrive/"+t.name,e.next=5,Pn(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(n,'" is not allowed.'));case 2:return e.next=4,Mn.loadProject(t);case 4:return(r=e.sent).url="/gdrive/"+n,r.name=n,e.next=9,Pn(r);case 9:return e.next=11,An(t);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_n("project-".concat(t,".json"));case 2:return n=e.sent,(r=JSON.parse(n)).isLoading=!1,r.readOnly=!1,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gdrive"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-gdrive project");case 2:if(!t.isLoading){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Pn(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Dn=cn("gdriveWorkspace",{name:"gdrive",isInitialized:!1,isSignedIn:!1,capabilities:{canAddProject:!1,canImportProject:!1,canDeleteProject:!1,canRenameProject:!1,canAddInput:!1,canRenameInput:!1,canDeleteInput:!1,requiresSignIn:!0},status:[{type:"success",message:null}],projects:[]}),zn=sn(Mn,Dn.actions),qn=Object(Ye.a)(Object(Ye.a)({},Dn.actions),zn),Bn=Dn.reducer,$n=n(301);function Vn(e){return{canAddProject:e,canImportProject:e,canDeleteProject:e,canRenameProject:e,canAddInput:e,canRenameInput:e,canDeleteInput:e,requiresSignIn:!0}}var Jn={name:"dropbox",isInitialized:!1,isSignedIn:!1,capabilities:Vn(!1),status:[{type:"success",message:null}],projects:[]};function Wn(){return Hn.apply(this,arguments)}function Hn(){return(Hn=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ar){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,ar.filesListFolder({path:""});case 4:return t=e.sent,e.abrupt("return",t.result.entries.map((function(e){return{name:e.name}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e){return Qn.apply(this,arguments)}function Qn(){return(Qn=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ar){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,ar.filesDownload({path:"/"+t});case 4:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var r=new FileReader;r.onloadend=function(t){e(r.result)},r.onerror=function(e){t(r.error)},r.readAsText(n.result.fileBlob)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gn(e,t,n){return Un.apply(this,arguments)}function Un(){return(Un=Object(d.a)(p.a.mark((function e(t,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ar){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,ar.filesUpload({path:"/"+t,contents:n,mode:"overwrite"});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kn(e){return Yn.apply(this,arguments)}function Yn(){return(Yn=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(Ye.a)({},t)).inputs=n.inputs||[],delete n.status,delete n.isLoading,r={url:n.url,name:n.url.slice("/dropbox/".length),inputs:n.inputs.map((function(e){return e.name}))},e.next=7,Gn("metadata-".concat(r.name,".json"),JSON.stringify(r),"application/json");case 7:return e.next=9,Gn("project-".concat(r.name,".json"),JSON.stringify(n),"application/json");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xn(e){return er.apply(this,arguments)}function er(){return(er=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ar){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,ar.filesDelete({path:"/"+t});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tr(e){return nr.apply(this,arguments)}function nr(){return(nr=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn("project-".concat(t,".json"));case 2:return e.next=4,Xn("metadata-".concat(t,".json"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e){var t=Object.create(null);return"string"!==typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),r=n.shift(),a=n.length>0?n.join("="):void 0;r=decodeURIComponent(r),a=void 0===a?null:decodeURIComponent(a),void 0===t[r]?t[r]=a:Array.isArray(t[r])?t[r].push(a):t[r]=[t[r],a]})),t):t}var ar=null,or={init:function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){void 0!==window.localStorage.tryFudomoDropboxAccessToken?(ar=new $n.Dropbox({accessToken:window.localStorage.tryFudomoDropboxAccessToken}),t(n._setCapabilities(Vn(!0))),t(n._setSignedIn(!0))):t(n._setSignedIn(!1))},window.dropBoxLoginWorkflowCompleted=function(){r(),ar&&t(n.reload())},!window.opener||!window.opener.dropBoxLoginWorkflowCompleted){e.next=13;break}if(!(a=rr(window.location.hash).access_token)){e.next=9;break}return window.localStorage.tryFudomoDropboxAccessToken=a,window.opener.dropBoxLoginWorkflowCompleted(),window.close(),e.abrupt("return");case 9:"access_denied"===rr(window.location.hash).error&&window.close(),e.next=14;break;case 13:r();case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r,a,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:r=new $n.Dropbox({clientId:"qplk44ju2ohi85a"}),a="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.public_url,"/"),o=r.auth.getAuthenticationUrl(a),800,window.open(o,"_blank","scrollbars=yes,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=".concat(800,",height=").concat(.85*window.innerHeight,",top=").concat(.1*window.innerHeight,",left=").concat((window.innerWidth-800)/2));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete window.localStorage.tryFudomoDropboxAccessToken,ar=null,t(n._setCapabilities(Vn(!1))),t(n._setSignedIn(!1)),t(n.reload());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/dropbox/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n,r,a,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.prev=2,e.next=5,Wn();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),403!==e.t0.status&&console.log(e.t0);case 11:r=Object(i.a)(n),e.prev=12,r.s();case 14:if((a=r.n()).done){e.next=25;break}if(null===(o=a.value).name.match(/metadata-.*\.json/)){e.next=23;break}return e.t1=JSON,e.next=20,Zn(o.name);case 20:e.t2=e.sent,c=e.t1.parse.call(e.t1,e.t2),t.push(c);case 23:e.next=14;break;case 25:e.next=30;break;case 27:e.prev=27,e.t3=e.catch(12),r.e(e.t3);case 30:return e.prev=30,r.f(),e.finish(30);case 33:return e.abrupt("return",t);case 34:case"end":return e.stop()}}),e,null,[[2,8],[12,27,30,33]])})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(t.name,'" is not allowed.'));case 2:return t.url="/dropbox/"+t.name,e.next=5,Kn(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(n,'" is not allowed.'));case 2:return e.next=4,or.loadProject(t);case 4:return(r=e.sent).url="/dropbox/"+n,r.name=n,e.next=9,Kn(r);case 9:return e.next=11,tr(t);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn("project-".concat(t,".json"));case 2:return n=e.sent,(r=JSON.parse(n)).isLoading=!1,r.readOnly=!1,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tr(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("dropbox"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-dropbox project");case 2:if(!t.isLoading){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Kn(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ir=cn("dropboxWorkspace",Jn),cr=sn(or,ir.actions),sr=Object(Ye.a)(Object(Ye.a)({},ir.actions),cr),ur=ir.reducer,lr=n(1494),fr=n(302),pr=n.n(fr),dr=n(238),mr=n.n(dr),hr=n(239),br=n.n(hr),vr=n(315),jr=n(1495),yr=n(232),gr=n(233),kr=n(435),xr=n.n(kr),wr=function(e){e.cancelable&&e.preventDefault()};function Or(e){return xr.a.useLongPress(e,{captureEvent:!0,onStart:function(){document.addEventListener("contextmenu",wr)},onFinish:function(){document.removeEventListener("contextmenu",wr)},onCancel:function(){document.removeEventListener("contextmenu",wr)}})}var Sr=n(1490),Cr=n(1491),_r=n(1492),Nr=n(1503),Ir=n(1501),Er={color:"var(--theme-neutral-500)"};function Pr(e){var t=e.isOpen,n=e.onImportConfirmed,a=e.onCloseClicked,o=Object(r.useState)(""),i=Object(m.a)(o,2),c=i[0],s=i[1],u=Object(r.useCallback)((function(e){s("")}),[s]),l=Object(r.useCallback)((function(e){n&&n(c)}),[n,c]),f=Object(r.useCallback)((function(e){s(e.target.value)}),[s]);return Object(g.jsxs)(Nr.a,{onEnter:u,onClose:a,open:t,fullWidth:!0,maxWidth:"md",children:[Object(g.jsx)(Sr.a,{children:"Import Project Contents"}),Object(g.jsx)(Cr.a,{children:Object(g.jsx)(Ir.a,{autoFocus:!0,placeholder:"Paste project here...",multiline:!0,fullWidth:!0,onChange:f,rows:10,rowsMax:20})}),Object(g.jsxs)(_r.a,{children:[Object(g.jsx)(I.a,{onClick:a,style:Er,children:"Close"}),Object(g.jsx)(I.a,{onClick:l,color:"primary",children:"Import"})]})]})}var Fr=n(1493),Rr=function(e,t){switch(t.type){case"RESET":return"";case"SET":return t.value;default:throw new Error}};function Tr(e){var t=Object(r.useReducer)(Rr,e.name||""),n=Object(m.a)(t,2),a=n[0],o=n[1],i=Object(r.useCallback)((function(t){13===t.charCode&&(t.preventDefault(),void 0!==a&&a.length>0&&e.onConfirmed(a))}),[e,a]),c=Object(r.useCallback)((function(e){o({type:"SET",value:e.target.value})}),[o]),s=Object(r.useCallback)((function(t){e.onConfirmed(a)}),[e,a]),u=Object(r.useCallback)((function(t){o({type:"SET",value:e.name||""})}),[o,e.name]);return Object(g.jsx)("div",{children:Object(g.jsxs)(Nr.a,{open:e.isOpen,onClose:e.onCloseClicked,onEnter:u,"aria-labelledby":"form-dialog-title",children:[Object(g.jsx)(Sr.a,{id:"form-dialog-title",children:e.title||"Enter a string"}),Object(g.jsxs)(Cr.a,{children:[Object(g.jsx)(Fr.a,{children:e.text||"A message"}),Object(g.jsx)(Ir.a,{required:!0,autoFocus:!0,margin:"dense",id:"name",label:"Name",fullWidth:!0,value:a,onChange:c,onKeyPress:i})]}),Object(g.jsxs)(_r.a,{children:[Object(g.jsx)(I.a,{onClick:e.onCloseClicked,color:"primary",children:"Cancel"}),Object(g.jsx)(I.a,{disabled:void 0===a||0===a.length,onClick:s,color:"primary",children:"Save"})]})]})})}var Ar=Object(r.createContext)();function Lr(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)({}),c=Object(m.a)(i,2),s=c[0],u=c[1],l=Object(r.useRef)({resolve:function(){},reject:function(){}});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(Ar.Provider,{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Promise((function(e,t){l.current.resolve=e,l.current.reject=t}));return u(e),o(!0),t},children:e.children}),Object(g.jsx)(Tr,Object(Ye.a)({isOpen:a,onCloseClicked:function(){o(!1),l.current.resolve(null)},onConfirmed:function(e){o(!1),l.current.resolve(e)}},s))]})}var Mr=n(436),Dr=n.n(Mr);function zr(e){var t=e.actions||[{color:"primary",autoFocus:!1,text:"Cancel",value:!1},{color:"primary",autoFocus:!0,text:"Ok",value:!0}];return Object(g.jsx)("div",{children:Object(g.jsxs)(Nr.a,{open:e.isOpen,onClose:e.onCanceled,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(g.jsx)(Sr.a,{id:"alert-dialog-title",children:e.title||"Confirm?"}),Object(g.jsx)(Cr.a,{children:Object(g.jsx)(Fr.a,{id:"alert-dialog-description",children:e.message||"Do you agree?"})}),Object(g.jsx)(_r.a,{children:t.map((function(t,n){return Object(g.jsx)(I.a,{onClick:function(){return e.onButtonClicked(t.value)},autoFocus:t.autoFocus,color:t.color,children:t.text},n)}))})]})})}var qr=Object(r.createContext)();function Br(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)({}),c=Object(m.a)(i,2),s=c[0],u=c[1],l=Object(r.useRef)({resolve:function(){},reject:function(){}}),f=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Promise((function(e,t){l.current.resolve=e,l.current.reject=t}));return u(e),o(!0),t}),[u,o,l]),p=Object(r.useCallback)((function(e){o(!1),l.current.resolve(e)}),[o,l]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(qr.Provider,{value:f,children:e.children}),Object(g.jsx)(zr,Object(Ye.a)({isOpen:a,onButtonClicked:p},s))]})}n(413);var $r=n(235),Vr=n.n($r),Jr=n(234),Wr=n.n(Jr),Hr=(n(289),a.a.forwardRef((function(e,t){var n=e.onRenameClicked,r=e.onDeleteClicked,o=e.deleteEnabled,i=e.renameEnabled,c=a.a.useState(null),s=Object(m.a)(c,2),u=s[0],l=s[1],f=function(e){e.preventDefault(),l(null)};return Object(g.jsxs)("div",{children:[Object(g.jsx)(I.a,{ref:t,className:"WorkspaceMenuButton","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){e.preventDefault(),l(e.currentTarget)},children:"\u22ee"}),Object(g.jsxs)(T.a,{anchorEl:u,open:Boolean(u),onClose:f,children:[Object(g.jsxs)(R.a,{disabled:!i,onClick:function(e){e.preventDefault(),n&&n(),f(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(Wr.a,{})}),"Rename..."]}),Object(g.jsxs)(R.a,{disabled:!o,onClick:function(e){e.preventDefault(),r&&r(),f(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(Vr.a,{})}),"Delete..."]})]})]})}))),Zr=n(236),Qr=n.n(Zr),Gr=n(237),Ur=n.n(Gr),Kr=n(437),Yr=n.n(Kr),Xr=a.a.forwardRef((function(e,t){var n=e.onRenameClicked,r=e.onDeleteClicked,o=e.onAddInputClicked,i=e.onImportInputClicked,c=e.onExportProjectClicked,s=e.deleteEnabled,u=e.renameEnabled,l=e.addInputEnabled,f=a.a.useState(null),p=Object(m.a)(f,2),d=p[0],h=p[1],b=function(e){e.preventDefault(),h(null)};return Object(g.jsxs)("div",{children:[Object(g.jsx)(I.a,{ref:t,className:"WorkspaceMenuButton","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){e.preventDefault(),h(e.currentTarget)},children:"\u22ee"}),Object(g.jsxs)(T.a,{anchorEl:d,open:Boolean(d),onClose:b,children:[Object(g.jsxs)(R.a,{disabled:!l,onClick:function(e){e.preventDefault(),o&&o(),b(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(Qr.a,{})}),"New Input..."]}),Object(g.jsxs)(R.a,{disabled:!l,onClick:function(e){e.preventDefault(),i&&i(),b(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(Ur.a,{})}),"Import Input..."]}),Object(g.jsxs)(R.a,{onClick:function(e){e.preventDefault(),c&&c(),b(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(Yr.a,{})}),"Export Project..."]}),Object(g.jsxs)(R.a,{disabled:!u,onClick:function(e){e.preventDefault(),n&&n(),b(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(Wr.a,{})}),"Rename..."]}),Object(g.jsxs)(R.a,{disabled:!s,onClick:function(e){e.preventDefault(),r&&r(),b(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(Vr.a,{})}),"Delete..."]})]})]})})),ea=n(439),ta=n.n(ea),na=n(440),ra=n.n(na),aa=n(438),oa=n.n(aa),ia={color:"var(--theme-neutral-500)"};function ca(e){var t=Object(r.useCallback)((function(){window.open("mailto:?subject=Fudomo%20Decomposition&body="+e.exportCode)}),[e.exportCode]),n=Object(r.useCallback)((function(){""!==e.exportCode&&oa()(e.exportCode)}),[e.exportCode]),a=Object(r.useCallback)((function(e){n()}),[n]);return Object(g.jsxs)(Nr.a,{onClose:e.onCloseClicked,onEntered:a,open:e.isOpen,fullWidth:!0,maxWidth:"md",children:[Object(g.jsx)(Sr.a,{children:"Export Project Contents"}),Object(g.jsxs)(Cr.a,{children:[Object(g.jsx)(Fr.a,{children:"Share the following block of text with another user to let them import your project:"}),Object(g.jsx)(Ir.a,{value:e.exportCode,multiline:!0,fullWidth:!0,rows:10,rowsMax:20})]}),Object(g.jsxs)(_r.a,{children:[Object(g.jsx)(I.a,{onClick:e.onCloseClicked,style:ia,children:"Close"}),Object(g.jsx)(I.a,{startIcon:Object(g.jsx)(ta.a,{}),title:"Copy to Clipboard",color:"primary",onClick:n,children:"Copy"}),Object(g.jsx)(I.a,{startIcon:Object(g.jsx)(ra.a,{}),title:"Open as Email",color:"primary",onClick:t,children:"Email"})]})]})}var sa=["yml","yaml","csv"],ua={yml:function(e,t){try{return tt.a.parse(t),t}catch(n){throw Error('File "'.concat(e,'" is not syntactically valid yaml.'))}},csv:function(e,t){var n,r=Dr.a.parse(t).data,a=[],o=Object(i.a)(r);try{for(o.s();!(n=o.n()).done;){var c,s=n.value,u=[],l=Object(i.a)(s);try{for(l.s();!(c=l.n()).done;){var f=c.value;u.push({Value:f})}}catch(p){l.e(p)}finally{l.f()}a.push({Row:u})}}catch(p){o.e(p)}finally{o.f()}return tt.a.stringify(a)}};function la(e){var t=new FileReader;return t.readAsText(e,"UTF-8"),new Promise((function(e,n){t.onload=function(t){return e(t.target.result)},t.onerror=function(e){return n(e)}}))}ua.yaml=ua.yml;var fa=function(e){var t=e.workspace,n=e.project,r=e.inputName,o=e.onRenameInputClicked,i=e.onDeleteInputClicked,c=Object(s.g)(),u=a.a.createRef(),l=Or((function(){u.current&&u.current.click()}));return Object(g.jsx)(he.c,Object(Ye.a)(Object(Ye.a)({to:n.url+"/"+r},l),{},{children:Object(g.jsxs)(ge.a,{button:!0,disabled:e.disabled,className:"ListItemIndented2 WorkspaceListItem",selected:c.pathname===n.url+"/"+r,children:[Object(g.jsx)(A.a,{className:"ListItemIcon",children:Object(g.jsx)(xe.a,{className:"SideBarIcon"})}),Object(g.jsx)(we.a,{className:"ListItemLabel",title:r,primary:r}),Object(g.jsx)(lr.a,{className:"Actions",children:(t.capabilities.canRenameInput||t.capabilities.canDeleteInput)&&Object(g.jsx)(Hr,{ref:u,renameEnabled:t.capabilities.canRenameInput,deleteEnabled:t.capabilities.canDeleteInput,onRenameClicked:function(){return o(n,r)},onDeleteClicked:function(){return i(n,r)}})})]})}))};function pa(e){var t=e.workspace,n=e.project,o=e.actions,c=e.dispatch,l=Object(yr.a)("expandedProjectLocations-"+e.title,[]),f=Object(m.a)(l,2),h=f[0],b=f[1],v=a.a.useState(!1),y=Object(m.a)(v,2),k=y[0],x=y[1],w=a.a.useState(""),O=Object(m.a)(w,2),S=O[0],C=O[1],_=Object(j.c)(),N=Object(s.g)(),I=Object(s.f)(),E=Object(r.useContext)(Ar),P=Object(r.useContext)(qr),F=Object(r.useContext)(Ue).showError,R=Object(r.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.push("".concat(t.url)),n=t.url.split("/").slice(-1)[0],e.next=4,P({title:"Delete Project?",message:'Irreversibly delete project "'.concat(n,'"?')});case 4:if(e.sent)try{c(o.deleteProject(t.name)),I.push("/")}catch(r){c(st(ot(r.message)))}case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[P,c,o,I]),T=Object(r.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.push("".concat(n.url)),r=n.url.split("/").slice(-1)[0],e.next=4,E({title:"Rename Project",text:'Enter a new name for project "'.concat(r,'":'),name:r});case 4:if(null===(a=e.sent)){e.next=15;break}if(e.prev=6,!t.projects.find((function(e){return e.name===a}))){e.next=9;break}throw new Error('Project named "'.concat(a,'" already exists.'));case 9:c(o.renameProject({name:n.name,newName:a,onRename:function(){var e=n.url.split("/").slice(0,2).join("/");I.push("".concat(e,"/").concat(a))}})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),c(st(ot(e.t0.message)));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),[E,c,o,I,t]),L=Object(r.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.push("".concat(t.url)),e.next=3,E({title:"Add Input",text:"Enter a name for the input data:"});case 3:if(null===(n=e.sent)){e.next=14;break}if(e.prev=5,!t.inputs.includes(n)){e.next=8;break}throw new Error('Input named "'.concat(n,'" already exists.'));case 8:c(o.createInput({projectName:t.name,name:n})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),c(st(ot(e.t0.message)));case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[E,c,o,I]),M=Object(r.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r,a,s,u,l,f,d,m,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:r=[],a=null,s=Object(i.a)(n),e.prev=5,l=p.a.mark((function e(){var n,i,c,s,l,f,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.value,i=n.name.split(".").slice(-1)[0].toLowerCase(),sa.includes(i)){e.next=5;break}return r=[st(ot('File "'.concat(n.name,'" has invalid extension, expected ').concat(sa.join("/"),". Import aborted.")))],e.abrupt("return","break");case 5:return e.next=7,la(n);case 7:c=e.sent,s="",e.prev=9,s=ua[i](n.name,c),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(9),r=[st(ot(e.t0.message))],e.abrupt("return","break");case 17:if(l=n.name.split(".").slice(0,-1).join("."),!t.inputs.some((function(e){return e===l}))){e.next=37;break}if(f=[{color:"primary",autoFocus:!1,text:"Cancel",value:"cancel"},{color:"primary",autoFocus:!1,text:"Skip all",value:"skipAll"},{color:"primary",autoFocus:!1,text:"Overwrite all",value:"overWriteAll"},{color:"primary",autoFocus:!1,text:"Skip",value:"skip"},{color:"primary",autoFocus:!0,text:"Overwrite",value:"overwrite"}],d=null,null!==a){e.next=32;break}return e.next=25,P({title:'Overwrite existing input "'.concat(l,'"?'),message:'An input named "'.concat(l,'" already exists in the project. Overwrite it?'),actions:f});case 25:if("cancel"!==(d=e.sent)){e.next=28;break}return e.abrupt("return",{v:void 0});case 28:"skipAll"===d&&(a="skip",d="skip"),"overWriteAll"===d&&(a="overwrite",d="overwrite"),e.next=33;break;case 32:d=a;case 33:"overwrite"===d&&r.push(o.setInput({projectName:t.name,inputId:l,value:s})),e.next=38;break;case 37:r.push(o.createInput({projectName:t.name,name:l,value:s}));case 38:case"end":return e.stop()}}),e,null,[[9,13]])})),s.s();case 8:if((u=s.n()).done){e.next=17;break}return e.delegateYield(l(),"t0",10);case 10:if("break"!==(f=e.t0)){e.next=13;break}return e.abrupt("break",17);case 13:if("object"!==typeof f){e.next=15;break}return e.abrupt("return",f.v);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(5),s.e(e.t1);case 22:return e.prev=22,s.f(),e.finish(22);case 25:for(d=0,m=r;d<m.length;d++)h=m[d],c(h);case 26:case"end":return e.stop()}}),e,null,[[5,19,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),[c,o,P]),D=Object(r.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I.push("".concat(t.url)),(n=document.createElement("input")).type="file",n.multiple=!0,n.accept=sa.map((function(e){return"."+e})).join(","),n.onchange=function(){var e=Object(d.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Array.from(n.target.files),M(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.click();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[M,I]),z=Object(r.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.push("".concat(t.url,"/").concat(n)),e.next=3,E({title:"Rename Input",text:'Enter a new name for input "'.concat(n,'":'),name:n});case 3:if(null===(r=e.sent)){e.next=15;break}if(e.prev=5,!t.inputs.includes(r)){e.next=8;break}throw new Error('Input named "'.concat(r,'" already exists.'));case 8:I.push(t.url+"/"+r),c(o.renameInput({projectName:t.name,name:n,newName:r})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),c(st(ot(e.t0.message)));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}(),[E,c,o,I]),q=Object(r.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I.push("".concat(t.url,"/").concat(n)),e.next=3,P({title:"Delete Input?",message:'Irreversibly delete input "'.concat(n,'"?')});case 3:e.sent&&(I.push(t.url),c(o.deleteInput({projectName:t.name,inputId:n})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[P,c,o,I]),B=Object(r.useCallback)((function(e){h.includes(e.url)?b(h.filter((function(t){return t!==e.url}))):b([].concat(Object(bt.a)(h),[e.url]))}),[h,b]),$=Object(r.useCallback)((function(e,t){e.preventDefault(),e.currentTarget.classList.remove("dropHovering"),M(t,e.dataTransfer.files)}),[M]),V=Object(r.useCallback)((function(e){e.currentTarget.classList.add("dropHovering")}),[]),J=Object(r.useCallback)((function(e){e.currentTarget.contains(e.relatedTarget)||e.currentTarget.classList.remove("dropHovering")}),[]),W=Object(r.useCallback)((function(e){if(null!==e&&null!==_.getState().project&&e.url===_.getState().project.url){e=_.getState().project;var t=Object(Ye.a)({},e);delete t.url,delete t.isLoading,delete t.status,delete t.readOnly,C(btoa(Object(gr.deflate)(JSON.stringify(e),{to:"string"}))),x(!0),u.a.event({category:"Project",action:"Opened Export Dialog",label:e.url})}else F("Please click on desired project to open it before exporting.")}),[C,x,_,F]),H=Object(r.useCallback)((function(e){x(!1)}),[x]),Z=n.url.split("/").slice(-1)[0],Q=a.a.createRef(),G=Or((function(){Q.current&&Q.current.click()}));return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(he.c,Object(Ye.a)(Object(Ye.a)({to:n.url},G),{},{children:Object(g.jsxs)(ge.a,{button:!0,className:"ListItemIndented WorkspaceListItem",selected:N.pathname===n.url,onClick:function(){return B(n)},children:[h.includes(n.url)?Object(g.jsx)(mr.a,{onClick:function(){return B(n)}}):Object(g.jsx)(br.a,{onClick:function(){return B(n)}}),Object(g.jsx)(A.a,{className:"ListItemIcon",children:Object(g.jsx)(re.a,{className:"SideBarIcon"})}),Object(g.jsx)(we.a,{className:"ListItemLabel",primary:Z,title:Z}),Object(g.jsx)(lr.a,{className:"Actions",children:Object(g.jsx)(Xr,{ref:Q,renameEnabled:t.capabilities.canRenameProject,deleteEnabled:t.capabilities.canDeleteProject,addInputEnabled:t.capabilities.canAddInput,onRenameClicked:function(){return T(n)},onDeleteClicked:function(){return R(n)},onAddInputClicked:function(){return L(n)},onImportInputClicked:function(){return D(n)},onExportProjectClicked:function(){return W(n)}})})]})})),!0===h.includes(n.url)&&Object(g.jsx)(ye.a,{onDragEnter:V,onDragLeave:J,onDragOver:function(e){return e.preventDefault()},onDrop:function(e){return $(e,n)},children:(n.inputs||["input"]).map((function(e,r){return Object(g.jsx)(fa,{workspace:t,project:n,inputName:e,onRenameInputClicked:z,onDeleteInputClicked:q},n.url+"-"+r)}))}),k&&Object(g.jsx)(ca,{isOpen:k,exportCode:S,onCloseClicked:H})]})}var da=n(240),ma=n.n(da),ha=n(441),ba=n.n(ha),va=a.a.forwardRef((function(e,t){var n=e.workspace,r=e.onSignInClicked,o=e.onSignOutClicked,i=e.onAddProjectClicked,c=e.onImportProjectClicked,s=a.a.useState(null),u=Object(m.a)(s,2),l=u[0],f=u[1],p=function(e){e.preventDefault(),f(null)};return Object(g.jsxs)("div",{children:[Object(g.jsx)(I.a,{ref:t,className:"WorkspaceMenuButton","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){e.preventDefault(),f(e.currentTarget)},children:"\u22ee"}),Object(g.jsxs)(T.a,{anchorEl:l,open:Boolean(l),onClose:p,children:[n.capabilities.requiresSignIn&&!n.isSignedIn&&Object(g.jsxs)(R.a,{onClick:function(e){e.preventDefault(),r&&r(),p(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(ba.a,{})}),"Connect..."]}),Object(g.jsxs)(R.a,{disabled:!n.capabilities.canAddProject,onClick:function(e){e.preventDefault(),i&&i(),p(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(Qr.a,{})}),"New Project..."]}),Object(g.jsxs)(R.a,{disabled:!n.capabilities.canAddProject,onClick:function(e){e.preventDefault(),c&&c(),p(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(Ur.a,{})}),"Import Project..."]}),n.capabilities.requiresSignIn&&n.isSignedIn&&Object(g.jsxs)(R.a,{onClick:function(e){e.preventDefault(),o&&o(),p(e)},children:[Object(g.jsx)(A.a,{children:Object(g.jsx)(ma.a,{})}),"Disconnect"]})]})]})}));function ja(e){var t=Object(j.c)().dispatch,n=e.workspace,o=e.actions,i=e.icon||Object(g.jsx)(pr.a,{}),c=Object(r.useContext)(Ar),l=Object(yr.a)("workspaceBrowserCollapsed-"+e.title,!1),f=Object(m.a)(l,2),h=f[0],b=f[1],v=Object(r.useState)(!1),y=Object(m.a)(v,2),k=y[0],x=y[1],w=Object(r.useContext)(Ue),O=w.showError,S=w.showSuccess,C=Object(s.f)(),_=Object(r.useCallback)(Object(d.a)(p.a.mark((function e(){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({title:"Enter Project Name",text:"Enter a name for the new project"});case 2:if(null===(r=e.sent)){e.next=14;break}if(e.prev=4,!n.projects.find((function(e){return e.name===r}))){e.next=7;break}throw new Error('Project named "'.concat(r,'" already exists.'));case 7:a=o.createEmptyProject({name:r,onCreated:function(e){C.push(e.url)}}),t(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t(st(ot(e.t0.message)));case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),[c,t,o,C,n]),N=Object(r.useCallback)((function(e){x(!0)}),[x]),I=Object(r.useCallback)((function(e){x(!1)}),[x]),E=Object(r.useCallback)((function(e){x(!1);try{if(null===e||0===e.length)throw new Error("Can not import empty project data.");var r=JSON.parse(Object(gr.inflate)(atob(e),{to:"string"}));if(r.url&&!r.name){var a=r.url.split("/");r.name=a[a.length-1]}if(n.projects.find((function(e){return e.name===r.name})))throw new Error('Project named "'.concat(r.name,'" already exists.'));r.url="/".concat(n.name,"/").concat(r.name),r.readOnly=!1,r.isLoading=!1,r.status=null,t(o.createProject({project:r,onCreated:function(e){C.push(e.url),S("Project successfully imported."),u.a.event({category:"Project",action:"Imported Project",label:r.url})}}))}catch(i){O(String(i))}}),[x,o,S,O,C,t,n]),P=Object(r.useCallback)((function(e){t(o.signOut((function(){C.push("/")})))}),[C,t,o]),F=Object(r.useCallback)((function(e){t(o.signIn()),b(!1)}),[t,o,b]),R=Object(r.useCallback)((function(e){!n.capabilities.requiresSignIn||n.isSignedIn?b(!h):F(e)}),[b,h,n,F]),T=a.a.createRef(),L=Or((function(e){T.current&&T.current.click()}));return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(ye.a,{children:[Object(g.jsxs)(ge.a,Object(Ye.a)(Object(Ye.a)({button:!0,onClick:R,className:"WorkspaceListItem"},L),{},{children:[n.isSignedIn?h?Object(g.jsx)(br.a,{}):Object(g.jsx)(mr.a,{}):Object(g.jsx)("div",{style:{height:"24px",width:"24px"}}),Object(g.jsx)(A.a,{className:"ListItemIcon",children:i||Object(g.jsx)(pr.a,{className:"SideBarIcon"})}),Object(g.jsx)(we.a,{className:"ListItemLabel",title:e.title,children:e.title}),n.progressing&&Object(g.jsx)("div",{className:"WorkspaceProgressWrapper",children:Object(g.jsx)(jr.a,{variant:"query",className:"CloudLoginProgress"})}),Object(g.jsx)(lr.a,{className:"Actions",children:(n.capabilities.requiresSignIn||n.capabilities.canAddProject)&&Object(g.jsx)(va,{ref:T,workspace:n,onSignInClicked:F,onSignOutClicked:P,onAddProjectClicked:_,onImportProjectClicked:N})})]})),Object(g.jsx)(vr.a,{in:!h,children:Object(g.jsx)(ye.a,{component:"div",disablePadding:!0,children:n.projects.map((function(e,r){return Object(g.jsx)("div",{children:Object(g.jsx)(pa,{workspace:n,project:e,actions:o,dispatch:t})},r)}))})})]}),Object(g.jsx)(tn.a,{}),k&&Object(g.jsx)(Pr,{isOpen:k,onCloseClicked:I,onImportConfirmed:E})]})}function ya(e){var t=Object(j.b)((function(e){return e.examplesWorkspace})),n=Object(j.b)((function(e){return e.localWorkspace})),r=Object(j.b)((function(e){return e.gdriveWorkspace})),a=Object(j.b)((function(e){return e.dropboxWorkspace})),o=Object(s.h)("/");return Object(g.jsxs)(c.a,{height:"100%",minWidth:"240px",width:"240px",position:"relative",boxSizing:"border-box",className:"SideBar",children:[Object(g.jsx)(he.b,{to:"/",children:Object(g.jsx)(ye.a,{children:Object(g.jsxs)(ge.a,{selected:o&&o.isExact,children:[Object(g.jsx)(A.a,{className:"ListItemIcon",children:Object(g.jsx)(en.a,{className:"SideBarIcon"})}),Object(g.jsx)(we.a,{primary:"Overview"})]},"0")})}),Object(g.jsx)(tn.a,{}),Object(g.jsx)(ja,{title:"Example Projects",workspace:t,actions:kn}),Object(g.jsx)(ja,{title:"Local Projects",workspace:n,actions:hn}),Object(g.jsx)(ja,{title:"Google Drive",workspace:r,actions:qn,icon:Object(g.jsx)(rn.a,{})}),Object(g.jsx)(ja,{title:"Dropbox",workspace:a,actions:sr,icon:Object(g.jsx)(on.a,{})})]})}var ga=n(444),ka=n.n(ga),xa=n(303),wa=n.n(xa),Oa=n(446),Sa={display:"flex",flexDirection:"row",flexWrap:"nowrap",flexGrow:1,overflow:"hidden"},Ca={padding:"1em 2em",overflow:"auto"};function _a(e,t){return"string"===typeof t?e+t:a.a.Children.toArray(t.props.children).reduce(_a,e)}function Na(e){var t=function(e){var t=Object(r.useState)(null),n=Object(m.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(!1),c=Object(m.a)(i,2),s=c[0],u=c[1],l=Object(r.useState)(null),f=Object(m.a)(l,2),p=f[0],d=f[1];return Object(r.useEffect)((function(){d(null),u(!0),Ot.a.get(e).then((function(e){o(e.data),u(!1)})).catch((function(e){o(null),d("".concat(e)),u(!1)}))}),[e]),[a,s,p]}("FudomoDocs.md"),n=Object(m.a)(t,1)[0],o=null!==window.opener;return Object(g.jsxs)("div",{style:Sa,children:[Object(g.jsx)("div",{className:"DocumentationOutline",children:Object(g.jsxs)(ye.a,{children:[o&&Object(g.jsx)(he.b,{to:"/docs",onClick:function(){return window.close()},children:Object(g.jsxs)(ge.a,{divider:!0,children:[Object(g.jsx)(A.a,{className:"ListItemIcon",children:Object(g.jsx)(ma.a,{className:"SideBarIcon"})}),Object(g.jsx)(we.a,{primary:"Close Documentation"})]})}),!o&&Object(g.jsx)(he.b,{to:"/",children:Object(g.jsxs)(ge.a,{divider:!0,children:[Object(g.jsx)(A.a,{className:"ListItemIcon",children:Object(g.jsx)(ka.a,{className:"SideBarIcon"})}),Object(g.jsx)(we.a,{primary:"Back to Try-Fudomo!"})]})}),Object(g.jsx)(wa.a,{source:n,allowedTypes:["heading","text"],renderers:{heading:function(e){var t=a.a.Children.toArray(e.children).reduce(_a,"").toLowerCase().replace(/\W/g,"-"),n={marginLeft:e.level-1+"em"},r={fontWeight:1===e.level?"bold":"normal"};return Object(g.jsx)("a",{href:"#"+t,children:Object(g.jsx)(ge.a,{children:Object(g.jsx)(we.a,{primary:e.children,style:n,primaryTypographyProps:{style:r}})})})}}})]})}),Object(g.jsx)("div",{style:Ca,children:Object(g.jsx)(wa.a,{source:n,linkTarget:"_blank",renderers:Object(Ye.a)(Object(Ye.a)({},Oa.a),{},{heading:function(e){var t=a.a.Children.toArray(e.children).reduce(_a,"").toLowerCase().replace(/\W/g,"-");return a.a.createElement("h"+e.level,{id:t},e.children)}})})})]})}var Ia=It,Ea=Object(Xe.b)({name:"environment",initialState:{isLoading:!0,isEditorReady:!1,isRuntimeReady:!1},reducers:{setLoading:function(e,t){e.isLoading=t.payload},setEditorReady:function(e,t){e.isEditorReady=t.payload},setRuntimeReady:function(e,t){e.isRuntimeReady=t.payload}}}),Pa=Ea.actions,Fa=Pa.setLoading,Ra=Pa.setEditorReady,Ta=Pa.setRuntimeReady,Aa=Ea.reducer,La=[{type:"example",actions:kn,attr:"examplesWorkspace"},{type:"local",actions:hn,attr:"localWorkspace"},{type:"gdrive",actions:qn,attr:"gdriveWorkspace"},{type:"dropbox",actions:sr,attr:"dropboxWorkspace"}],Ma=La.map((function(e){return e.type}));function Da(e){var t=La.find((function(t){return t.type===e}));if(!t)throw new Error('Unknown workspace type "'.concat(e,'"'));return t.actions}function za(e){var t,n,r=Object(j.c)(),a=(t=e.match.params.workspaceType,Object(j.b)((function(e){var n=La.find((function(e){return e.type===t}));return n?e[n.attr]:null})));try{n=Da(e.match.params.workspaceType)}catch(o){return Object(g.jsx)(w,{message:"Error loading project",children:o.message})}return Object(g.jsxs)(s.c,{children:[Object(g.jsx)(s.a,{path:e.match.path+"/:projectId/:inputId",exact:!0,render:function(e){return Object(g.jsx)(Jt,{projectName:e.match.params.projectId,inputId:e.match.params.inputId,workspace:a,workspaceActions:n})}}),Object(g.jsx)(s.a,{path:e.match.path+"/:projectId/",exact:!0,render:function(e){return Object(g.jsx)(Jt,{projectName:e.match.params.projectId,workspace:a,workspaceActions:n})}}),Object(g.jsx)(s.a,{path:e.match.path,exact:!0,render:function(e){return r.dispatch(zt.setProject(null)),Object(g.jsx)(w,{message:"Please select a project."})}})]})}var qa=Object(l.withSnackbar)((function(e){var t=Object(j.c)(),n=Object(r.useContext)(Ue).showStatus,a=Object(j.b)((function(e){return e.status}));Object(r.useEffect)((function(){n(a)}),[a,n]);var o=Object(s.g)();return Object(r.useEffect)((function(){u.a.set({page:o.pathname}),u.a.pageview(o.pathname)}),[o]),Object(r.useEffect)((function(){t.dispatch((function(e){e(Fa(!1)),e(Ra(!0)),Ia.init().then((function(){e(Ta(!0))}))}));var e,n=Object(i.a)(Ma);try{for(n.s();!(e=n.n()).done;){var r=Da(e.value);t.dispatch(r.init())}}catch(a){n.e(a)}finally{n.f()}}),[t]),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(Yt,{}),Object(g.jsx)(c.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",height:"100%",width:"100%",position:"relative",boxSizing:"border-box",overflow:"hidden",children:Object(g.jsxs)(s.c,{children:[Object(g.jsx)(s.a,{path:"/docs",exact:!0,children:Object(g.jsx)(Na,{})}),Object(g.jsxs)(s.a,{path:"/",children:[Object(g.jsx)(ya,{}),Object(g.jsxs)(s.c,{children:[Object(g.jsx)(s.a,{path:"/",exact:!0,render:function(e){return window.setTimeout((function(){return t.dispatch(zt.setProject(null))}),0),Object(g.jsx)(w,{message:"Try Fudomo",children:"Try an example project, or create your own."})}}),Object(g.jsx)(s.a,{path:"/:workspaceType",component:za})]})]})]})})]})}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(1431);var Ba=n(72),$a=void 0;function Va(e,t){if(t.type&&t.type.startsWith("project/")&&"project/setHasUnsavedData"!==t.type&&"project/setProject"!==t.type){var n=e.getState().project;null!==n&&(n.isLoading||(e.dispatch(zt.setHasUnsavedData(!0)),function(e,t){$a&&window.clearTimeout($a),$a=window.setTimeout((function(){$a=void 0;var n=Da(e.url.split("/")[1]);t(n.commitProject((function(){void 0===$a&&t(zt.setHasUnsavedData(!1))})))}),1e3)}(n,e.dispatch)))}}var Ja=function(e){return function(t){return function(n){return Va(e,n),t(n)}}},Wa=Object(Ba.c)({examplesWorkspace:xn,localWorkspace:bn,gdriveWorkspace:Bn,dropboxWorkspace:ur,project:qt,environment:Aa,status:ut}),Ha=Object(Xe.a)({reducer:Wa,middleware:function(e){return[Ja].concat(Object(bt.a)(e()))}});Ot.a.defaults.baseURL=window.public_url,u.a.initialize("UA-167809229-1",{testMode:!1});var Za=document.getElementById("root");Object(o.createRoot)(Za).render(Object(g.jsx)(j.a,{store:Ha,children:Object(g.jsx)(l.SnackbarProvider,{maxSnack:3,children:Object(g.jsx)(he.a,{basename:window.public_url,children:Object(g.jsx)(Ke,{children:Object(g.jsx)(Lr,{children:Object(g.jsx)(Br,{children:Object(g.jsx)(qa,{})})})})})})})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},165:function(e,t,n){var r=n(257),a=n(103),o=n(104),i=n(89),c=n(3),s=n(254),u=n(93),l=n(94),f=n(253).StackFrame,p=n(195).ObjectModel,d=n(343),m=(n(345),n(192),n(84)),h=m.offsetToRange,b=m.RangeReplaceQuickfixProposal,v=m.reMatchAll,j=n(212).getSkeletonGenerator,y=n(84).escapeHtml,g=n(1019),k=function(){"use strict";function e(){u(this,e)}return l(e,[{key:"finalize",value:function(){throw new Error("Not implemented")}},{key:"hasFunction",value:function(){var e=s(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){throw new Error("Not implemented")}},{key:"validateFunctions",value:function(){var e=s(c.mark((function e(t,n,r){var a,o,s,u,l,f,p,d=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=t||"",a=this.getFunctionSignatures(t),o=new Set(n.map((function(e){return e.functionName}))),s=a.filter((function(e){return!o.has(e.funcName)})),u=[],l=i(n);try{for(p=function(){var e=f.value,n=e.functionName,o=e.parameters,i=e.decompositionQualifiedName,c=a.find((function(e){return e.funcName===n}));if(void 0!==c)o.forEach((function(e,n){var r=c.parameters[n];void 0===r?u.push({message:'Missing parameter "'.concat(e,'"'),markerContext:{type:"function",location:c.parametersListRange},fixes:[new b('Add parameter "'.concat(e,'"'),"functions",t,c.parametersListRange,c.parameters.map((function(e){return e.name})).concat([e]).join(", ")).toJSON()]}):r.name!==e&&u.push({message:'Incorrect parameter name "'.concat(r.name,'", expected "').concat(e,'"'),markerContext:{type:"function",location:c.parametersListRange},fixes:[new b('Rename parameter "'.concat(r.name,'" to "').concat(e,'"'),"functions",t,r.nameRange,e).toJSON()]})})),c.parameters.slice(o.length).forEach((function(e,n){var r=o.length+n;u.push({message:'Unexpected parameter "'.concat(e.name,'"'),markerContext:{type:"function",location:c.parametersListRange},fixes:[new b('Remove parameter "'.concat(e.name,'"'),"functions",t,c.parametersListRange,c.parameters.map((function(e){return e.name})).filter((function(e,t){return t!==r})).join(", ")).toJSON()]})}));else{var l=function(e){return"".concat(e.funcName,"-").concat(e.parameters.map((function(e){return e.name})).join("-"))},p=d.getSkeletonGenerator().generateDecompositionFunction(r.getDecompositionBySignature(i),!0),m="".concat(n,"-").concat(o.join("-")),h=Array.from(s);h.sort((function(e,t){var n=l(e),r=l(t);return g(m,n)-g(m,r)}));var v="\n\n"+d.getSkeletonGenerator().generateDecompositionFunction(r.getDecompositionBySignature(i),!1)+"\n",j=[],y=d.getAppendNewFunctionSkeletonRange(t);if(null!==y){var k=new b('Create new function skeleton "'.concat(n,'"'),"functions",t,y,v).toJSON();j.push(k)}u.push({message:'Function "'.concat(n,'" not found'),markerContext:{type:"transformation",decompositionQualifiedName:i},fixes:j.concat(h.map((function(e){return new b('Change existing function "'.concat(e.funcName,'"'),"functions",t,e.signatureRange,p).toJSON()})))})}},l.s();!(f=l.n()).done;)p()}catch(c){l.e(c)}finally{l.f()}return e.abrupt("return",u);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"callFunction",value:function(){var e=s(c.mark((function e(t,n){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"convertScalarValue",value:function(e,t){throw new Error("Not implemented")}},{key:"toString",value:function(){var e=s(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"exceptionToStackFrame",value:function(e){throw new Error("Not implemented")}},{key:"getAppendNewFunctionSkeletonRange",value:function(e){throw new Error("Not implemented")}},{key:"getFunctionSignatures",value:function(e){throw new Error("Not implemented")}}],[{key:"addToArgumentParser",value:function(e){}}]),e}(),x=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return u(this,n),(a=t.call(this)).idByComparableObject=new WeakMap,a.objectModelById={},a.lastId=0,a}return l(n,[{key:"finalize",value:function(){this.idByComparableObject=new WeakMap,this.objectModelById={}}},{key:"nextId",value:function(){return this.lastId++}},{key:"jsonReplacer",value:function(e,t){if(t instanceof p){var n=this.idByComparableObject.get(t.id);void 0===n&&(n=this.nextId(),this.idByComparableObject.set(t.id,n),this.objectModelById[n]=t);var r={type:t.type,id:n};return t.isScalar&&(r.val=t.scalar),r}return t instanceof Set?Array.from(t):t}},{key:"jsonReviver",value:function(e,t){if(null!==t&&"Object"==t.constructor.name&&void 0!==t.type&&void 0!==t.id){var n=this.objectModelById[t.id];if(void 0===n)throw new Error("Received ObjectModel Id that was never sent.");return n}return t}},{key:"serializeHasFunctionOp",value:function(e){if(null==e)throw new Error("Lookup of null function");return{op:"hasFunction",name:e}}},{key:"serializeCallFunctionOp",value:function(e,t){return{op:"callFunction",name:e,args:t}}},{key:"serializeValidateFunctionOp",value:function(e,t){return{op:"validateFunction",functionName:e,parameterNames:t}}},{key:"encodeObj",value:function(e){var t=this;return JSON.stringify(e,(function(e,n){return t.jsonReplacer(e,n)}))}},{key:"decodeObj",value:function(e){var t=this;return JSON.parse(e,(function(e,n){return t.jsonReviver(e,n)}))}}]),n}(k),w=function(e){"use strict";a(n,e);var t=o(n);function n(e){var r;return u(this,n),(r=t.call(this)).jsError=e,r.cause=e,r.message=e.message,r}return l(n,[{key:"location",get:function(){var e,t=i(this.jsError.stack.split("\n"));try{for(t.s();!(e=t.n()).done;){var n=e.value.split(",").slice(-1)[0],r=/.*?:(\d+):(\d+)\)/.exec(n);if(null!==r){var a=Number(r[1])-1,o=Number(r[2])-1;return[[a,o],[a,o+1]]}}}catch(c){t.e(c)}finally{t.f()}return null}},{key:"toString",value:function(){var e,t=[],n=i(this.jsError.stack.split("\n"));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.match(/\sat .* \(.*fudomo-transform\/compute\.js:\d+:\d+\)/)||r.match(/\sat .* \(.*\/node_modules\/vm2\/lib\/contextify.js:\d+:\d+\)/))break;t.push(r.replace(/    at /g,"    at (JS) "))}}catch(a){n.e(a)}finally{n.f()}return t.join("\n")}},{key:"toHtml",value:function(){var e,t=[],n=i(this.jsError.stack.split("\n"));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.match(/\sat .* \(.*fudomo-transform\/compute\.js:\d+:\d+\)/)||r.match(/\sat .* \(.*\/node_modules\/vm2\/lib\/contextify.js:\d+:\d+\)/))break;t.push(y(r.replace(/    at /g,"    at (JS) ")))}}catch(a){n.e(a)}finally{n.f()}return t.join("\n")}}]),n}(f),O=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return u(this,n),(a=t.call(this)).languageId="js",a.initExternalFunctions(e,r),a}return l(n,[{key:"initExternalFunctions",value:function(e,t){throw new Error("Not implemented")}},{key:"finalize",value:function(){}},{key:"convertScalarValue",value:function(e,t){if("oyaml"===e){if(t.kind!==d.Kind.SCALAR)throw new Error("Expected Scalar");return t.valueObject instanceof Date?t.valueObject:d.determineScalarType(t)===d.ScalarType.string?t.value:t.valueObject}throw"js"===e?new Error("Unsupported object model type "+e):new Error("Not implemented")}},{key:"hasFunctionSync",value:function(e){return void 0!==this.externalFunctions[e]}},{key:"hasFunction",value:function(){var e=s(c.mark((function e(t){var n=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){e(n.hasFunctionSync(t))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"callFunctionSync",value:function(e,t){if(!this.hasFunctionSync(e))throw new Error('Decomposition function implementation "'.concat(e,'" could not be found.'));return this.externalFunctions[e].apply(null,t)}},{key:"callFunction",value:function(){var e=s(c.mark((function e(t,n){var r=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){try{e(r.callFunctionSync(t,n))}catch(o){a(o)}})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){return j("js")}},{key:"exceptionToStackFrame",value:function(e){return new w(e)}},{key:"toString",value:function(){var e=s(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",String(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAppendNewFunctionSkeletonRange",value:function(e){var t=v(e,/(module\.exports\s*=\s*{\s*)([\s\S]*)(})/g);if(1!=t.length)return null;var n=t[0];return[n.groupRanges[2][1],n.groupRanges[2][1]]}},{key:"getFunctionSignatures",value:function(e){var t=/(\s*)([\w\d_]+)([\s,]*)/g;return v(e,/(\/\*\*[\s\S]*?\*\/\s*)?(\/\*\*.*?\*\/)?(\s*)([\w\d_]+)(:\s*function\(([\w\d_,\s]*)\))/g).map((function(n){return{signature:n[0],signatureRange:n.groupRanges[0],funcName:n[4],funcNameRange:n.groupRanges[4],parameters:v(n[6]||"",t).map((function(t){return{name:t[2],nameRange:h(e,n.indices[6][0]+t.indices[2][0],t.indices[2][1]-t.indices[2][0])}})),parametersListRange:n.groupRanges[6],comment:n[1],commentRange:n.groupRanges[1]}}))}}]),n}(k),S=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return u(this,n),(a=t.call(this)).baseDir=path.resolve(e),a.errorObj=r,a.cause=r,a}return l(n,[{key:"toString",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n="".concat(this.errorObj.message,"\n"),r=this.errorObj.stack.slice(0).reverse(),a=i(r);try{for(a.s();!(e=a.n()).done;){var o=e.value,c=this.relPath(t,o.filename);n+="    at (PY) ".concat(c,":").concat(o.startLine,":").concat(o.startCol,"\n")}}catch(s){a.e(s)}finally{a.f()}return n.slice(0,-1)}},{key:"toHtml",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n="".concat(y(this.errorObj.message),"\n"),r=this.errorObj.stack.slice(0).reverse(),a=i(r);try{for(a.s();!(e=a.n()).done;){var o=e.value,c=this.relPath(t,o.filename),s=[[o.startLine-1,o.startCol-1],[o.endLine-1,o.endCol-1]];n+='    at (PY) <a class="fudomo-exception-source-link" href="#" data-source-loc="'.concat(y(JSON.stringify({src:c,pos:s})),'">').concat(y(c),":").concat(o.startLine,":").concat(o.startCol,"</a>\n")}}catch(u){a.e(u)}finally{a.f()}return n.slice(0,-1)}}]),n}(f),C=function(){"use strict";function e(t){u(this,e),this.errorObj=t,this.message=t.message}return l(e,[{key:"toString",value:function(){return this.message}}]),e}(),_=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return u(this,n),(a=t.call(this,r)).version=e,a}return n}(r(Error));t.UnsupportedPythonVersionError=_,t.PythonError=C,t.StackFrame=f,t.PythonStackFrame=S,t.BaseJSDecompositionFunctionRunner=O,t.JSStackFrame=w,t.DecompositionFunctionRunner=k,t.ExternalDecompositionFunctionRunner=x},195:function(e,t,n){var r=n(89),a=n(94),o=n(93),i=n(103),c=n(104),s=n(257),u=n(343),l=n(192),f=n(84).RangeReplaceQuickfixProposal;function p(e){var t=typeof e;return"function"===t||"object"===t&&!!e}var d=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return n}(s(Error));function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw null!=t?new d(t):new d}var h=function(){"use strict";function e(){o(this,e)}return a(e,[{key:"id",get:function(){throw new Error("Not Implemented")}},{key:"refId",get:function(){throw new Error("Not Implemented")}},{key:"isScalar",get:function(){throw new Error("Not implemented")}},{key:"val",get:function(){throw new Error("Not implemented")}},{key:"scalarType",get:function(){throw new Error("Not implemented")}},{key:"scalarValueLocation",get:function(){throw new Error("Not implemented")}},{key:"type",get:function(){throw new Error("Not implemented")}},{key:"typeLocation",get:function(){throw new Error("Not implemented")}},{key:"fullDefinitionLocation",get:function(){throw new Error("Not implemented")}},{key:"getFeatureNameLocation",value:function(e){throw new Error("Not implemented")}},{key:"getFeatureValueLocation",value:function(e){throw new Error("Not implemented")}},{key:"getAttributeType",value:function(e){throw new Error("Not implemented")}},{key:"getFeatureAsArray",value:function(e){var t=this.getFeature(e);return Array.isArray(t)?t:void 0===t?[]:[t]}},{key:"getFeature",value:function(e){throw new Error("Not implemented")}},{key:"featureNames",get:function(){throw new Error("Not implemented")}}]),e}(),b=0,v=function(){"use strict";function e(){o(this,e),this.wrappers=new WeakMap,this.context=null,this.id=b++,this.objectIdCounter=0}return a(e,[{key:"getObjectModel",value:function(e,t){var n=this.wrappers.get(e);return void 0===n&&(n=new j(this,"js".concat(this.id,".").concat(this.objectIdCounter++),e,t),this.wrappers.set(e,n)),n}}]),e}(),j=function(e){"use strict";i(n,e);var t=c(n);function n(e,r,a,i){var c;if(o(this,n),(c=t.call(this)).factory=e,Array.isArray(a))throw new Error("Can not create JSObject for Array");return c._id=r,c.obj=a,c.sourceLocation=i,c}return a(n,[{key:"id",get:function(){return this._id}},{key:"isScalar",get:function(){return!p(this.obj)}},{key:"val",get:function(){return this.factory.context.functionRunner.convertScalarValue("js",this.obj)}},{key:"scalarType",get:function(){return this.type}},{key:"scalarValueLocation",get:function(){return[[0,0],[0,0]]}},{key:"type",get:function(){return this.obj.constructor.name}},{key:"typeLocation",get:function(){return[[0,0],[0,0]]}},{key:"fullDefinitionLocation",get:function(){return[[0,0],[0,0]]}},{key:"getFeature",value:function(e){var t=this,n=this.obj[e];return Array.isArray(n)?n.map((function(e){return t.factory.getObjectModel(e,t.sourceLocation)})):p(n)?this.factory.getObjectModel(n,this.sourceLocation):n}},{key:"getFeatureNameLocation",value:function(e){return[[0,0],[0,0]]}},{key:"getFeatureValueLocation",value:function(e){return[[0,0],[0,0]]}},{key:"featureNames",get:function(){return Object.keys(this.obj)}},{key:"toString",value:function(){return"<JSObject obj='".concat(this.obj,"'>")}}]),n}(h),y={};y[u.ScalarType.null]=function(e){return null},y[u.ScalarType.bool]=u.parseYamlBoolean,y[u.ScalarType.int]=u.parseYamlInteger,y[u.ScalarType.float]=u.parseYamlFloat,y[u.ScalarType.string]=function(e){return e};var g=0,k=function(){"use strict";function e(){o(this,e),this.wrappers=new Map,this.context=null,this.id=g++,this.objectIdCounter=-1}return a(e,[{key:"getObjectModel",value:function(e,t,n,r){var a=this.wrappers.get(e);return void 0===a&&(this.objectIdCounter+=1,a=new O(this,"oyaml".concat(this.id,".").concat(this.objectIdCounter),e,t,n,r),this.wrappers.set(e,a)),a}}]),e}();function x(e){return e.toUpperCase()===e}function w(e,t){var n=t.fromIndex(e.startPosition)||{line:0,col:0},r=t.fromIndex(e.endPosition)||t.fromIndex(t.str.length-1);return[[n.line,n.col],[r.line,r.col]]}var O=function(e){"use strict";i(n,e);var t=c(n);function n(e,r,a,i,c,s){var l;return o(this,n),m(a.kind==u.Kind.MAP),m(i.kind==u.Kind.MAP),m(null===a.mappings[0].value||a.mappings[0].value.kind==u.Kind.SEQ||a.mappings[0].value.kind==u.Kind.SCALAR,"Value ".concat(a.mappings[0].value," has unexpected kind.")),(l=t.call(this)).factory=e,l._id=r,l.obj=a,l.root=i,l.lineColumnFinder=c,l.sourceLocation=s,l}return a(n,[{key:"getNodePosition",value:function(e){return w(e,this.lineColumnFinder)}},{key:"id",get:function(){return this._id}},{key:"refId",get:function(){var e=this.obj.mappings[0].key.value.split(/\s+/);if(1!=e.length)return e[1]}},{key:"isScalar",get:function(){if(null===this.obj.mappings[0].value)return!0;var e=this.obj.mappings[0].value.valueObject instanceof Date,t=null===this.obj.mappings[0].value,n=this.obj.mappings[0].value.kind===u.Kind.SCALAR;return e||t||n}},{key:"val",get:function(){return m(this.isScalar),this.factory.context.functionRunner.convertScalarValue("oyaml",this.obj.mappings[0].value)}},{key:"scalarType",get:function(){if(m(this.isScalar),null===this.obj.mappings[0].value)return"null";if(this.obj.mappings[0].value.valueObject instanceof Date)return"timestamp";var e=u.determineScalarType(this.obj.mappings[0].value);return u.ScalarType[e]}},{key:"scalarValueLocation",get:function(){var e=this.obj.mappings[0].value;return null===e?this.getNodePosition(this.obj.mappings[0]):this.getNodePosition(e)}},{key:"structureSeq",get:function(){return this.obj.mappings[0].value}},{key:"type",get:function(){return this.obj.mappings[0].key.value.split(" ").slice(0,1)[0]}},{key:"typeLocation",get:function(){if("Root"==this.type)return this.fullDefinitionLocation;var e=this.obj.mappings[0].key.startPosition,t=this.lineColumnFinder.fromIndex(e)||{line:0,col:0},n=t.line,r=t.col;return[[n,r],[n,r+this.type.length]]}},{key:"fullDefinitionLocation",get:function(){if("Root"==this.type){var e=this.lineColumnFinder.fromIndex(this.lineColumnFinder.str.length-1)||{line:0,col:0};return[[0,0],[e.line,e.col]]}var t=this.obj.mappings[0].key.startPosition,n=this.lineColumnFinder.fromIndex(t)||{line:0,col:0},r=this.obj.mappings[0].value,a=r;r.kind===u.Kind.SEQ&&r.items.length>0&&(a=r.items.slice(-1)[0]);var o=this.lineColumnFinder.fromIndex(a.endPosition-1);return[[n.line,n.col],[o.line,o.col+1]]}},{key:"_stripRefMarker",value:function(e){var t=e.trim();return t.endsWith(">")?t.slice(0,-1).trim():t}},{key:"getObjectById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t&&(t=new Set),t.has(this.id))return null;if(t.add(this.id),this.refId===e)return this;var n,a=r(this.getFeature("cont"));try{for(a.s();!(n=a.n()).done;){var o=n.value,i=o.getObjectById(e,t);if(null!=i)return i}}catch(c){a.e(c)}finally{a.f()}return null}},{key:"wrapValue",value:function(e){var t=this;if(Array.isArray(e))return e.map((function(e){return t.wrapValue(e)}));if(null===e||void 0===e.kind)return e;if(e.kind===u.Kind.SCALAR){if(e.valueObject instanceof Date)return e.valueObject;var n=u.determineScalarType(e);return y[n.toString()](e.value)}return e.kind===u.Kind.SEQ?e.items.map((function(e){return t.wrapValue(e)})):e.kind===u.Kind.MAP?this.factory.getObjectModel(e,this.root,this.lineColumnFinder,this.sourceLocation):void 0}},{key:"getFeature",value:function(e){var t=this;if(this.isScalar)return"cont"===e?[]:null;var n=void 0;if("cont"===e){var a=this.obj.mappings[0].value.items;return this.wrapValue(a.filter((function(e){return x(e.mappings[0].key.value[0])})))}var o=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})).filter((function(e){return!x(e.key.value[0])})),i=o.filter((function(t){return t.key.value==e}))[0];if(void 0!==i&&null===i.value)return this.wrapValue(null);if(void 0!==i&&i.value.kind==u.Kind.SEQ)return i.value.items.map((function(e){return t.wrapValue(e)}));if(void 0!==i&&void 0!==i.value.value)return this.wrapValue(i.value);var c,s=null,l=r(o);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(f.key.value.trim().endsWith(">")&&this._stripRefMarker(f.key.value)==e){s=f.value.value;break}}}catch(b){l.e(b)}finally{l.f()}if(n=[],s){var p,d=r(s.split(","));try{for(d.s();!(p=d.n()).done;){var m=p.value.trim(),h=this.factory.getObjectModel(this.root,this.root,this.lineColumnFinder,this.sourceLocation).getObjectById(m);if(void 0==h)throw new Error('Could not resolve reference "'.concat(e,": ").concat(m,'"'));n.push(h.obj)}}catch(b){d.e(b)}finally{d.f()}}return 0==n.length?n=null:1==n.length&&(n=n[0]),this.wrapValue(n)}},{key:"getFeatureNameLocation",value:function(e){m(!this.isScalar);var t,n=this.obj.mappings[0].value.items,a=r(n.map((function(e){return e.mappings[0].key})));try{for(a.s();!(t=a.n()).done;){var o=t.value;if(!x(o.value.trim()[0])){var i=this._stripRefMarker(o.value);if(i==e){var c=this.lineColumnFinder.fromIndex(o.startPosition),s=c.line,u=c.col;return[[s,u],[s,u+i.length]]}}}}catch(l){a.e(l)}finally{a.f()}return[[0,0],[0,0]]}},{key:"getFeatureValueLocation",value:function(e){m(!this.isScalar);var t,n=this.obj.mappings[0].value.items,a=r(n);try{for(a.s();!(t=a.n()).done;){var o=t.value.mappings[0];if(null===o.value)return this.getNodePosition(o.key);if(this._stripRefMarker(o.key.value)==e)return this.getNodePosition(o.value)}}catch(i){a.e(i)}finally{a.f()}return[[0,0],[0,0]]}},{key:"featureNames",get:function(){var e=this;if(this.structureSeq.kind!=u.Kind.SEQ)return[];var t=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})),n=t.filter((function(e){return!x(e.key.value[0])})).map((function(t){return e._stripRefMarker(t.key.value)}));return t.filter((function(e){return x(e.key.value[0])})).length>0&&n.push("cont"),n}},{key:"_getValueType",value:function(e){if(null===e)return"null";if(e.valueObject instanceof Date)return"timestamp";if(e.kind==u.Kind.SEQ)return e.items.map(this._getValueType);var t=u.determineScalarType(e);return u.ScalarType[t]}},{key:"getAttributeType",value:function(e){var t=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})).filter((function(e){return!x(e.key.value[0])})).filter((function(t){return t.key.value==e}))[0];if(void 0!==t)return this._getValueType(t.value)}},{key:"toString",value:function(){return void 0===this.refId?this.isScalar?"<OYAMLObject type='".concat(this.scalarType,"'>"):"<OYAMLObject type='".concat(this.type,"'>"):this.isScalar?"<OYAMLObject type='".concat(this.scalarType,"' refId='").concat(this.refId,"'>"):"<OYAMLObject type='".concat(this.type,"' refId='").concat(this.refId,"'>")}}]),n}(h);function S(e,t){for(var n=new Set,a=[e];a.length>0;){var o=a.shift();if(!n.has(o.id)){n.add(o.id),t(o);var i,c=[],s=r(o.featureNames);try{for(s.s();!(i=s.n()).done;){var u,l=i.value,f=r(new C(e,o).successors(l,"Object"));try{for(f.s();!(u=f.n()).done;){var p=u.value;p._center instanceof h&&c.push(p._center)}}catch(d){f.e(d)}finally{f.f()}}}catch(d){s.e(d)}finally{s.f()}a.splice.apply(a,[0,0].concat(c))}}}var C=function(){"use strict";function e(t,n){if(o(this,e),void 0==t)throw new Error("model can't be undefined");if(void 0==n)throw new Error("center can't be undefined");if(!(t instanceof h))throw new Error('model must be instance of ObjectModel (got "'.concat(n,'")'));this.model=t,this._center=n}return a(e,[{key:"type",get:function(){return this.center.type}},{key:"center",get:function(){return this._center}},{key:"sourceLocation",get:function(){var e=this.center.sourceLocation||"unknown_source_path";return"".concat(e,":").concat(this.center.typeLocation[0][0]+1,":").concat(this.center.typeLocation[0][1]+1)}},{key:"getFeature",value:function(e){return"center"==e?this._center:"val"==e?this._center.val:this._center.getFeature(e)}},{key:"getAllInstancesByType",value:function(t){var n=[],r=this.model;return S(r,(function(a){("Object"===t||a.type===t)&&n.push(new e(r,a))})),n}},{key:"successors",value:function(t,n){var a,o=this._center.getFeatureAsArray(t),i=[],c=r(o);try{for(c.s();!(a=c.n()).done;){var s=a.value;if(s instanceof h){var u=new e(this.model,s),l=!0;"Object"!=n&&u.type!=n&&(l=!1),l&&i.push(u)}}}catch(f){c.e(f)}finally{c.f()}return i}},{key:"predecessors",value:function(t,n){var a=this,o=new Set;return S(this.model,(function(i){var c,s=r(i.getFeatureAsArray(t));try{for(s.s();!(c=s.n()).done;){var u=c.value;if(u instanceof h&&u.id===a._center.id){var l=new e(a.model,i),f=!0;"Object"!=n&&l.type!=n&&(f=!1),f&&o.add(l)}}}catch(p){s.e(p)}finally{s.f()}})),o}},{key:"toString",value:function(){return'<CenteredModel center="'.concat(this._center,'" model="').concat(this.model,'">')}}]),e}(),_=function e(t){"use strict";o(this,e),this.cont=t},N=function(){"use strict";function e(){o(this,e)}return a(e,[{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){throw new Error("Not implemented")}},{key:"getRootCenteredModel",value:function(e){return new C(e,e)}}]),e}(),I=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return a(n,[{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Array.isArray(e))throw new Error("Root has to be Object, not Array");return(new v).getObjectModel(new _(e),t)}}]),n}(N),E=function(){"use strict";function e(t){o(this,e),this.lineColumnFinder=t,this.markers=[]}return a(e,[{key:"message",get:function(){return this.toString()}},{key:"addMarkerForNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={message:t,markerContext:{type:"input"},fixes:n};r.markerContext.location=null==e?[[0,0],[0,0]]:w(e,this.lineColumnFinder),this.markers.push(r)}},{key:"addMarkerAtLocation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.markers.push({markerContext:{type:"input",location:e},message:t,fixes:n})}},{key:"hasMarkers",get:function(){return this.markers.length>0}},{key:"toString",value:function(){return this.markers.map((function(e){return"(".concat(e.markerContext.location[0][0],":").concat(e.markerContext.location[0][1],") ").concat(e.message)})).join("\n")}}]),e}(),P=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return a(n,[{key:"isStringScalar",value:function(e){return null!==e&&(e.kind==u.Kind.SCALAR&&u.determineScalarType(e)==u.ScalarType.string)}},{key:"_getNodeText",value:function(e,t){return null===t?"":e.slice(t.startPosition,t.endPosition)}},{key:"createSingleMappingToMultipleMappingQuickfixProposal",value:function(e,t,n){var r=this,a=this._getNodeText(e,n).split("\n")[1].replace(/\t/g,"  ").search(/[^ ]/);-1===a?a=4:a-="- ".length;var o="\n"+" ".repeat(a)+"- ",i=n.mappings.map((function(t){return"".concat(r._getNodeText(e,t.key),": ").concat(r._getNodeText(e,t.value))})).join(o);return new f("Change single mapping into multiple mappings","input",e,w(n,t),i).toJSON()}},{key:"validateObject",value:function(e,t,n,a){if(null!==e&&void 0!==e)if(e.kind==u.Kind.MAP)if(1==e.mappings.length){var o=e.mappings[0].value;if(null===o||o.kind==u.Kind.SEQ||o.kind==u.Kind.SCALAR){var i=e.mappings[0].key;if(this.isStringScalar(i)){var c=i.value.trim().split(/\s+/);if((0==c.length||c.length>2)&&t.addMarkerForNode(i,'Invalid object key (must be "Type [identifier]")'),null!==o&&o.kind==u.Kind.SEQ){var s,l=r(o.items);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(null!==f)if(void 0!==f.mappings&&1==f.mappings.length){var p=f.mappings[0],d=p.key,m=p.value;if(this.isStringScalar(d)){var h=d.value.trim().split(/\s+/);if(0==h.length||h.length>2)t.addMarkerForNode(d,'Invalid object key (must be "Type [identifier]")');else{var b=d.value.trim()[0];if(void 0!==b&&x(b))this.validateObject(f,t,n,a);else if(this.isStringScalar(d)&&""!==d.value||t.addMarkerForNode(d,"Attribute, reference or contained object key must be non-empty string scalar"),d.value.trim().endsWith(">")){var v=d.value.trim().split(">");v.length>1&&(v.length>2&&t.addMarkerForNode(d,'Invalid reference key (too many ">")'),this.isStringScalar(m)||t.addMarkerForNode(m,"Reference specification must be string scalar"))}else if(null!==m){if(m.kind!=u.Kind.SCALAR&&m.kind!=u.Kind.SEQ){var j=m||p;t.addMarkerForNode(j,"Attribute has to be scalar or sequence of scalars");continue}if(m.kind,u.Kind.SCALAR,m.kind==u.Kind.SEQ){var y,g=r(m.items);try{for(g.s();!(y=g.n()).done;){var k=y.value;null!==k&&k.kind!=u.Kind.SCALAR&&t.addMarkerForNode(k,"Item in attribute sequence has to be scalar")}}catch(S){g.e(S)}finally{g.f()}}}}}else t.addMarkerForNode(d,"Attribute, reference or contained object key has to be string scalar")}else{var w=this.createSingleMappingToMultipleMappingQuickfixProposal(n,a,f);t.addMarkerForNode(f,"Attribute, reference or contained object map must have 1 mapping",[w])}else t.addMarkerForNode(o,"Null mapping not allowed")}}catch(S){l.e(S)}finally{l.f()}}}else t.addMarkerForNode(i,"Object key has to be string scalar")}else{var O=o||e;t.addMarkerForNode(O,"Object value must be sequence or scalar")}}else t.addMarkerForNode(e,"Object map must have only one key-value mapping");else t.addMarkerForNode(e,"Object has to be a map or scalar");else t.addMarkerForNode(null,"Object has to be a map or scalar")}},{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=u.load(e),a=new l(e,{origin:0}),o=new E(a);if(void 0===n)n={kind:u.Kind.SEQ,items:[]};else{var i,c=r(n.errors);try{for(c.s();!(i=c.n()).done;){var s=i.value,f=[[0,0],[0,0]];"YAMLException"==s.name&&(f=[[s.mark.line+1,s.mark.column+1],[s.mark.line+1,s.mark.column+1]]),o.addMarkerAtLocation(f,s.reason)}}catch(d){c.e(d)}finally{c.f()}n.kind!=u.Kind.SEQ&&o.addMarkerAtLocation([[0,0],[0,0]],"Root has to be Array")}if(o.hasMarkers)throw o;var p={kind:u.Kind.MAP,mappings:[{kind:u.Kind.MAPPING,key:{kind:u.Kind.SCALAR,value:"Root root"},value:n}]};if(this.validateObject(p,o,e,a),o.hasMarkers)throw o;return(new k).getObjectModel(p,p,a,t)}}]),n}(N);e.exports={CenteredModel:C,AbstractJSObjectLoader:I,AbstractOYAMLObjectLoader:P,ObjectModel:h}},212:function(e,t,n){var r=n(103),a=n(104),o=n(89),i=n(255),c=n(93),s=n(94),u=function(){"use strict";function e(t,n,r,a){c(this,e),this.commentStart=t,this.commentEnd=n,this.lineIndent=r,this.maxLineLength=a,this.lines=[]}return s(e,[{key:"wrapTextWithPrefix",value:function(e,t){var n,r=Math.max.apply(Math,i(e.split("\n").map((function(e){return e.length})))),a=this.maxLineLength-this.lineIndent.length-r;if(a<=0)return this.wrapText(e,79).wrapText(t,79);var o=this._wrapText(t,a),c=" ".repeat(r);return(n=this.lines).push.apply(n,[e+o[0]].concat(i(o.slice(1).map((function(e){return c+e}))))),this}},{key:"wrapText",value:function(e){var t,n=this.maxLineLength-this.lineIndent.length;n<=0&&(n=2);var r=this._wrapText(e,n);return(t=this.lines).push.apply(t,i(r)),this}},{key:"_wrapText",value:function(e,t){var n,r=[],a=o(e.split("\n"));try{for(a.s();!(n=a.n()).done;){var c=n.value;if(c.length<t)r.push(c);else{var s=c.slice(0,t),u=c.slice(t),l=s.lastIndexOf(" ");-1==l&&(l=t-1);var f=s.slice(l),p=s.slice(0,l),d=(f+u).trimStart();r.push(p),r.push.apply(r,i(this._wrapText(d,t)))}}}catch(m){a.e(m)}finally{a.f()}return r}},{key:"toString",value:function(){var e=this;return this.commentStart.endsWith("\n")?this.commentStart+this.lines.map((function(t){return e.lineIndent+t})).join("\n")+this.commentEnd:[this.commentStart+this.lines[0]].concat(i(this.lines.slice(1).map((function(t){return e.lineIndent+t})))).join("\n")+this.commentEnd}}]),e}(),l=function(){"use strict";function e(t,n,r){c(this,e),this.prefix=t,this.separator=n,this.suffix=r,this.parameterTypeMap=null}return s(e,[{key:"generateSkeleton",value:function(e){var t=this,n=this.prefix;return n+=e.decompositions.map((function(e){return t.generateDecompositionFunction(e)})).join(this.separator),n+=this.suffix}},{key:"generateDecompositionFunction",value:function(e){throw new Error("Not implemented")}},{key:"getFunctionValidationCriteria",value:function(e){var t,n=[],r=o(e.decompositions);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.function.type+"_"+a.function.name,c=a.links.map((function(e){return e.parameterName}));n.push({functionName:i,parameters:c,decompositionQualifiedName:a.function.qualifiedName})}}catch(s){r.e(s)}finally{r.f()}return n}}]),e}(),f=function(e){"use strict";r(n,e);var t=a(n);function n(){var e;return c(this,n),(e=t.call(this,"module.exports = {\n","\n\n","\n};\n")).parameterTypeMap={Sequence:"Array",Set:"Set"},e}return s(n,[{key:"generateDecompositionFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new u("  /**\n","\n   */","   * ",79),r=e.function.type+"_"+e.function.name,a=e.links.map((function(e){return e.parameterName}));n.wrapText(e.function.qualifiedName),e.comment&&n.wrapText(e.comment);for(var o=e.links,i=0,c=Object.keys(o);i<c.length;i++){var s=c[i],l=o[s],f=this.parameterTypeMap[l.parameterTypeDescription];f?n.wrapTextWithPrefix("@param ".concat(l.parameterName," {").concat(f,"} "),l.parameterDescription):n.wrapTextWithPrefix("@param ".concat(l.parameterName," "),l.parameterDescription)}var p=n.toString();p+="\n";var d=a.join(", ");return p+="  ".concat(r,": function(").concat(d,")"),t||(p+=" {\n",p+="    throw new Error('function ".concat(r,"(").concat(d,") not yet implemented'); // TODO\n"),p+="  },"),p}}]),n}(l),p=function(e){"use strict";r(n,e);var t=a(n);function n(){var e;return c(this,n),(e=t.call(this,"","\n\n\n","")).parameterTypeMap={Sequence:"list",Set:"set"},e}return s(n,[{key:"generateDecompositionFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new u('    """','\n    """\n',"    ",79),r=e.function.type+"_"+e.function.name,a=e.links.map((function(e){return e.parameterName})),i="def ".concat(r,"(").concat(a.join(", "),"):\n");n.wrapText(e.function.qualifiedName),e.comment&&n.wrapText(e.comment);var c,s=o(e.links);try{for(s.s();!(c=s.n()).done;){var l=c.value;n.wrapTextWithPrefix(":param ".concat(l.parameterName,": "),"".concat(l.parameterDescription));var f=this.parameterTypeMap[l.parameterTypeDescription];f&&n.wrapTextWithPrefix(":type  ".concat(l.parameterName,": "),"".concat(f))}}catch(p){s.e(p)}finally{s.f()}return i+=n.toString(),t||(i+="    raise NotImplementedError('function ".concat(r," not yet implemented')  # TODO")),i.trim()}}]),n}(l),d={javascript:f,js:f,python:p};e.exports={getSkeletonGenerator:function(e){var t=d[e];return void 0==t?null:new t},SKELETON_GENERATORS:[{id:"js",name:"Javascript",extension:"js"},{id:"python",name:"Python 3",extension:"py"}]}},231:function(module,exports,__webpack_require__){var _regeneratorRuntime=__webpack_require__(3),_asyncToGenerator=__webpack_require__(254),_classCallCheck=__webpack_require__(93),_createClass=__webpack_require__(94),_inherits=__webpack_require__(103),_createSuper=__webpack_require__(104),_require=__webpack_require__(195),ObjectModel=_require.ObjectModel,_require2=__webpack_require__(253),FudomoComputeException=_require2.FudomoComputeException,getParameterNames=__webpack_require__(345),_require3=__webpack_require__(165),DecompositionFunctionRunner=_require3.DecompositionFunctionRunner,BaseJSDecompositionFunctionRunner=_require3.BaseJSDecompositionFunctionRunner,UnsupportedPythonVersionError=_require3.UnsupportedPythonVersionError,PythonError=_require3.PythonError,JSStackFrame=_require3.JSStackFrame,JSDecompositionFunctionRunner=function(e){"use strict";_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null,null)).externalFunctions=e||{},r}return _createClass(n,[{key:"initExternalFunctions",value:function(e,t){}}]),n}(BaseJSDecompositionFunctionRunner),RUNNERS_BY_ID={javascript:JSDecompositionFunctionRunner},RUNNER_BY_FILE_EXTENSION={js:JSDecompositionFunctionRunner};module.exports={DecompositionFunctionRunner:DecompositionFunctionRunner,getRunnerClassById:function(e){return RUNNERS_BY_ID[e]},getRunnerClassByFileExtension:function(e){return RUNNER_BY_FILE_EXTENSION[e]},importCommonJSModule:function(){var _importCommonJSModule=_asyncToGenerator(_regeneratorRuntime.mark((function _callee(moduleSource){return _regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve,reject){var module={},window={},document={};try{eval(moduleSource),resolve(module.exports)}catch(error){reject(new FudomoComputeException([new JSStackFrame(error)]))}})));case 1:case"end":return _context.stop()}}),_callee)})));function importCommonJSModule(e){return _importCommonJSModule.apply(this,arguments)}return importCommonJSModule}(),importES6Module:function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="data:text/javascript;charset=utf-8,"+encodeURIComponent(t),e.abrupt("return",new Promise((function(e,t){import(n).then((function(t){e(t)})).catch((function(e){t(new FudomoComputeException([new JSStackFrame(e)]))}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),importModule:function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",module.exports.importCommonJSModule(t).catch((function(e){return module.exports.importES6Module(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},253:function(e,t,n){var r=n(3),a=n(254),o=n(255),i=n(89),c=n(103),s=n(104),u=n(93),l=n(94),f=n(947),p=n(256),d=n(330),m=(d.Transformation,d.getFudomoParser,n(84).escapeHtml),h=function(){"use strict";function e(t,n,r){u(this,e),this.transformation=t,this.rootModel=n,this.rootModel.model.factory.context=this,this.functionRunner=r,this.stack=null}return l(e,[{key:"log",value:function(){}},{key:"logIndented",value:function(){this.indentLog(),this.log.apply(this,arguments),this.dedentLog()}},{key:"indentLog",value:function(){}},{key:"dedentLog",value:function(){}}]),e}(),b=function(){"use strict";function e(){u(this,e)}return l(e,[{key:"relPath",value:function(e,t){if(null==e)return t;if(null==t)return t;if(!p.isAbsolute(e))throw new Error("Path base must be absolute path");if(!p.isAbsolute(t))throw new Error("Path must be absolute path");return t.startsWith(e)?t.slice(e.length+1):t}},{key:"toString",value:function(){throw new Error("Not implemented")}},{key:"toHtml",value:function(){throw new Error("Not implemented")}}]),e}(),v=function(e){"use strict";c(n,e);var t=s(n);function n(e){var r;return u(this,n),(r=t.call(this)).link=e,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (LL) ".concat(this.link," (").concat(n,")")}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(m(n),":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (LL) ".concat(m(this.link),' (<a class="fudomo-exception-source-link" href="#" data-source-loc="').concat(m(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(m(r),"</a>)"):"    at (LL) ".concat(m(this.link)," (").concat(m(r),")")}}]),n}(b),j=function(e){"use strict";c(n,e);var t=s(n);function n(e){var r;return u(this,n),(r=t.call(this)).link=e,r.referredModel=null,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (GL) ".concat(this.link," (").concat(n,")\n            ").concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (GL) ".concat(m(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(m(r),"</a>)\n")+"            ".concat(m(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(m(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(m(this.referredModel.center)):"    at (GL) ".concat(m(this.link)," (").concat(m(r),")\n")+"            ".concat(m(this.link.function.type)," (").concat(m(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(m(this.referredModel.center))}}]),n}(b),y=function(e){"use strict";c(n,e);var t=s(n);function n(e){var r;return u(this,n),(r=t.call(this)).link=e,r.referredModel=null,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (FL) ".concat(this.link," (").concat(n,")\n            ").concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (FL) ".concat(m(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(m(r),"</a>)\n")+"            ".concat(m(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(m(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(m(this.referredModel.center)):"    at (FL) ".concat(m(this.link)," (").concat(m(r),")\n")+"            ".concat(m(this.link.function.type)," (").concat(m(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(m(this.referredModel.center))}}]),n}(b),g=function(e){"use strict";c(n,e);var t=s(n);function n(e){var r;return u(this,n),(r=t.call(this)).link=e,r.referredModel=null,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (RL) ".concat(this.link," (").concat(n,")\n")+"            ".concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (RL) ".concat(m(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(m(r),"</a>)\n")+"            ".concat(m(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(m(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(m(this.referredModel.center)):"    at (RL) ".concat(m(this.link)," (").concat(r,")\n")+"            ".concat(m(this.link.function.type)," (").concat(m(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(m(this.referredModel.center))}}]),n}(b),k=function(e){"use strict";c(n,e);var t=s(n);function n(e,r){var a;return u(this,n),(a=t.call(this)).decomposition=e,a.centeredModel=r,a}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.decomposition.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.decomposition.node.location[0][0]+1,":").concat(this.decomposition.node.location[0][1]+1);return"    at (DC) ".concat(this.decomposition.function.qualifiedName," (").concat(n,")\n            center (").concat(this.relPath(e,this.centeredModel.sourceLocation),"): ").concat(this.centeredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.decomposition.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.decomposition.node.location[0][0]+1,":").concat(this.decomposition.node.location[0][1]+1);return null!==t?"    at (DC) ".concat(m(this.decomposition.function.qualifiedName),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:t,pos:this.decomposition.node.location})),'">').concat(m(r),"</a>})\n")+'            center (<a href="#" class="fudomo-exception-source-link" data-source-loc="'.concat(m(JSON.stringify({src:this.relPath(e,this.centeredModel.center.sourceLocation),pos:this.centeredModel.center.fullDefinitionLocation})),'">').concat(m(this.relPath(e,this.centeredModel.sourceLocation)),"</a>): ").concat(m(this.centeredModel.center)):"    at (DC) ".concat(m(this.decomposition.function.qualifiedName)," (").concat(m(r),")\n")+"            center (".concat(m(this.relPath(e,this.centeredModel.sourceLocation)),"): ").concat(m(this.centeredModel.center))}}]),n}(b),x=function(){"use strict";function e(t){u(this,e),this.fudomoStack=t}return l(e,[{key:"cause",get:function(){var e,t=i(this.fudomoStack);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(void 0!==n.cause)return n.cause}}catch(r){t.e(r)}finally{t.f()}return null}},{key:"message",get:function(){return this.fudomoStack.slice(-1)[0].message}},{key:"location",get:function(){return this.fudomoStack.slice(-1)[0].location}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o(this.fudomoStack);return t.reverse(),"<pre>"+t.map((function(t){return t.toHtml(e)})).join("\n")+"</pre>"}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o(this.fudomoStack);return t.reverse(),t.map((function(t){return t.toString(e)})).join("\n")}}]),e}();function w(e,t,n){return O.apply(this,arguments)}function O(){return(O=a(r.mark((function e(t,n,a){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.functionRunner.callFunction(n.externalName,a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return C.apply(this,arguments)}function C(){return(C=a(r.mark((function e(t,n,a){var o,c,s,u,l,p,d,m,h,b,x,O,C,_,N,I,E,P,F,R,T,A,L,M;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,stack.push(new k(n,a)),t.indentLog(),e.prev=3,t.log(f.red("Decomposing %s (on %s)"),n.function.qualifiedName,a.type),0!=(c=n.links).length){e.next=16;break}return e.next=9,t.functionRunner.hasFunction(n.function.externalName);case 9:if(e.sent){e.next=14;break}return o=!0,e.abrupt("return",a.getFeature(n.function.name));case 14:return o=!0,e.abrupt("return",w(t,n.function,[]));case 16:s=[],u=i(c),e.prev=18,u.s();case 20:if((l=u.n()).done){e.next=184;break}if(p=l.value,d=!1,e.prev=23,"local"!=p.kind){e.next=41;break}if(stack.push(new v(p)),m=p.function.getTargetDecomposition(a),t.log("\u2570\u2500local: %s",p.function.name),null!=m){e.next=33;break}t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,a.type),s.push(a.getFeature(p.function.name)),e.next=39;break;case 33:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",m.function.qualifiedName,a.type),e.t0=s,e.next=37,S(t,m,a);case 37:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 39:e.next=178;break;case 41:if("global"!=p.kind){e.next=88;break}stack.push(new j(p)),t.log("\u2570\u2500global: %s",p.function.qualifiedName),h=[],b=a.getAllInstancesByType(p.function.type),x=i(b),e.prev=47,x.s();case 49:if((O=x.n()).done){e.next=77;break}if(C=O.value,stack.slice(-1)[0].referredModel=C,null!=(_=p.function.getTargetDecomposition(C))){e.next=69;break}return e.next=56,t.functionRunner.hasFunction(p.function.externalName);case 56:if(!e.sent){e.next=65;break}return t.logIndented("\u2570\u2500externalFunction: %s",p.function.externalName),e.t2=h,e.next=61,w(t,p.function,[]);case 61:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=67;break;case 65:t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,C.type),h.push(C.getFeature(p.function.name));case 67:e.next=75;break;case 69:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",_.function.qualifiedName,C.type),e.t4=h,e.next=73,S(t,_,C);case 73:e.t5=e.sent,e.t4.push.call(e.t4,e.t5);case 75:e.next=49;break;case 77:e.next=82;break;case 79:e.prev=79,e.t6=e.catch(47),x.e(e.t6);case 82:return e.prev=82,x.f(),e.finish(82);case 85:s.push(h),e.next=178;break;case 88:if("forward"!=p.kind){e.next=134;break}stack.push(new y(p)),t.log("\u2570\u2500forward: %s -> %s",p.referenceName,p.function.qualifiedName),N=[],I=i(a.successors(p.referenceName,p.function.type)),e.prev=93,I.s();case 95:if((E=I.n()).done){e.next=123;break}if(P=E.value,stack.slice(-1)[0].referredModel=P,null!=(F=p.function.getTargetDecomposition(P))){e.next=115;break}return e.next=102,t.functionRunner.hasFunction(p.function.externalName);case 102:if(!e.sent){e.next=111;break}return t.logIndented("\u2570\u2500externalFunction: %s",p.function.externalName),e.t7=N,e.next=107,w(t,p.function,[]);case 107:e.t8=e.sent,e.t7.push.call(e.t7,e.t8),e.next=113;break;case 111:t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,P.type),N.push(P.getFeature(p.function.name));case 113:e.next=121;break;case 115:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",F.function.qualifiedName,P.type),e.t9=N,e.next=119,S(t,F,P);case 119:e.t10=e.sent,e.t9.push.call(e.t9,e.t10);case 121:e.next=95;break;case 123:e.next=128;break;case 125:e.prev=125,e.t11=e.catch(93),I.e(e.t11);case 128:return e.prev=128,I.f(),e.finish(128);case 131:s.push(N),e.next=178;break;case 134:if("reverse"!=p.kind){e.next=178;break}stack.push(new g(p)),t.log("\u2570\u2500reverse: %s <- %s",p.referenceName,p.function.qualifiedName),R=new Set,T=i(a.predecessors(p.referenceName,p.function.type)),e.prev=139,T.s();case 141:if((A=T.n()).done){e.next=169;break}if(L=A.value,stack.slice(-1)[0].referredModel=L,null!=(M=p.function.getTargetDecomposition(L))){e.next=161;break}return e.next=148,t.functionRunner.hasFunction(p.function.externalName);case 148:if(!e.sent){e.next=157;break}return t.logIndented("\u2570\u2500externalFunction: %s",p.function.externalName),e.t12=R,e.next=153,w(t,p.function,[]);case 153:e.t13=e.sent,e.t12.add.call(e.t12,e.t13),e.next=159;break;case 157:t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,L.type),R.add(L.getFeature(p.function.name));case 159:e.next=167;break;case 161:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",M.function.qualifiedName,L.type),e.t14=R,e.next=165,S(t,M,L);case 165:e.t15=e.sent,e.t14.add.call(e.t14,e.t15);case 167:e.next=141;break;case 169:e.next=174;break;case 171:e.prev=171,e.t16=e.catch(139),T.e(e.t16);case 174:return e.prev=174,T.f(),e.finish(174);case 177:s.push(R);case 178:d=!0;case 179:return e.prev=179,d&&stack.pop(),e.finish(179);case 182:e.next=20;break;case 184:e.next=189;break;case 186:e.prev=186,e.t17=e.catch(18),u.e(e.t17);case 189:return e.prev=189,u.f(),e.finish(189);case 192:return o=!0,e.abrupt("return",w(t,n.function,s));case 194:return e.prev=194,t.dedentLog(),o&&stack.pop(),e.finish(194);case 198:case"end":return e.stop()}}),e,null,[[3,,194,198],[18,186,189,192],[23,,179,182],[47,79,82,85],[93,125,128,131],[139,171,174,177]])})))).apply(this,arguments)}function _(){return(_=a(r.mark((function e(t){var n,a,o,i,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.stack){e.next=3;break}throw new Error("TransformationContext can not be reused.");case 3:if(t.stack=[],n=t.transformation.decompositions[0]){e.next=7;break}throw new Error("No decomposition found.");case 7:if(a=t.rootModel,"Root"==(o=n.function.type)){e.next=18;break}if(0!=(i=t.rootModel.successors("cont",o)).length){e.next=15;break}throw new Error('No instance of first decomposition type "'.concat(o,'" found.'));case 15:if(!(i.length>1)){e.next=17;break}throw new Error('More than one instance of first decomposition type "'.concat(o,'" found.'));case 17:a=i[0];case 18:return c=null,e.prev=19,stack=[],e.next=23,S(t,n,a);case 23:c=e.sent,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(19),stack.push(t.functionRunner.exceptionToStackFrame(e.t0));case 29:if(!(stack.length>0)){e.next=31;break}throw new x(stack);case 31:return e.abrupt("return",c);case 32:return e.prev=32,t.functionRunner.finalize(),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[0,,32,35],[19,26]])})))).apply(this,arguments)}e.exports={transform:function(e){return _.apply(this,arguments)},TransformationContext:h,FudomoComputeException:x,StackFrame:b}},289:function(e,t,n){},330:function(e,t,n){var r=n(89),a=n(103),o=n(104),i=n(93),c=n(94),s=n(192);function u(){var e=n(937),t=n(938);return new e.Parser(e.Grammar.fromCompiled(t))}var l=function(){"use strict";function e(t,n,r,a){i(this,e),this.startCol=t,this.startRow=n,this.endCol=r,this.endRow=a}return c(e,[{key:"contains",value:function(e,t){return!(t<this.startRow)&&(!(t>this.endRow)&&(this.startRow===this.endRow?e>=this.startCol&&e<=this.endCol:t==this.startRow?e>=this.startCol:t!=this.endRow||e<=this.endCol))}},{key:"toArray",value:function(){return[[this.startRow,this.startCol],[this.endRow,this.endCol]]}},{key:"toString",value:function(){return"<CharacterRange startCol=".concat(this.startCol," startRow=").concat(this.startRow," endCol=").concat(this.endCol," endRow=").concat(this.endCol,">")}}],[{key:"fromOffsets",value:function(t,n,r){var a=s(t,{origin:0}),o=a.fromIndex(n),i=a.fromIndex(r)||a.fromIndex(t.length-1);return new e(o.col,o.line,i.col,i.line)}}]),e}(),f=function(){"use strict";function e(t,n){i(this,e),this.parent=t,this.node=n}return c(e,[{key:"transformation",get:function(){for(var e=this;!(e instanceof k);)e=e.parent;return e}},{key:"decomposition",get:function(){for(var e=this;!(e instanceof g);)e=e.parent;return e}},{key:"characterRange",get:function(){var e=this.node.location;return new l(e[0][1],e[0][0],e[1][1],e[1][0])}}]),e}(),p=function(e){"use strict";a(n,e);var t=o(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,e,r)).kind=a,o}return n}(f),d=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"local")}return c(n,[{key:"parameterName",get:function(){return this.function.name}},{key:"parameterDescription",get:function(){var e=this.parameterName;return"center"===e?"This ".concat(this.decomposition.function.type):"val"===e?"The value of this ".concat(this.decomposition.function.type):'The "'.concat(e,'" of this ').concat(this.decomposition.function.type)}},{key:"parameterTypeDescription",get:function(){return null}},{key:"function",get:function(){return new j(this,this.node.reference)}},{key:"location",get:function(){return[this.node.location[0],[this.node.location[1][0],this.node.location[1][1]]]}},{key:"toString",value:function(){return this.function.name}}]),n}(p),m=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"global")}return c(n,[{key:"parameterName",get:function(){return this.function.type+"_"+this.function.name}},{key:"parameterDescription",get:function(){return'The sequence of all "'.concat(this.function.name,'" values of all ').concat(this.function.type," objects")}},{key:"parameterTypeDescription",get:function(){return"Sequence"}},{key:"function",get:function(){return new y(this,this.node.typedFunction)}},{key:"toString",value:function(){return this.function.qualifiedName}}]),n}(p),h=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"forward")}return c(n,[{key:"parameterName",get:function(){return this.referenceName+"_"+this.function.type+"_"+this.function.name}},{key:"referenceName",get:function(){return this.node.reference}},{key:"referenceLocation",get:function(){return[this.node.location[0],[this.node.location[0][0],this.node.location[0][0]+this.referenceName.length]]}},{key:"parameterDescription",get:function(){return"cont"===this.referenceName?"The sequence of ".concat(this.function.pluralValueDescription," contained in this ").concat(this.decomposition.function.type):"The sequence of ".concat(this.function.pluralValueDescription,' referred to by attribute "').concat(this.referenceName,'" in this ').concat(this.decomposition.function.type)}},{key:"parameterTypeDescription",get:function(){return"Sequence"}},{key:"function",get:function(){return new y(this,this.node.typedFunction)}},{key:"toString",value:function(){return"".concat(this.referenceName," -> ").concat(this.function.qualifiedName)}}]),n}(p),b=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"reverse")}return c(n,[{key:"parameterName",get:function(){return"_"+this.referenceName+"_"+this.function.type+"_"+this.function.name}},{key:"referenceName",get:function(){return this.node.reference}},{key:"parameterDescription",get:function(){return"cont"===this.referenceName?"The set of ".concat(this.function.pluralValueDescription," that contain this ").concat(this.decomposition.function.type):"The set of ".concat(this.function.pluralValueDescription," that refer to this ").concat(this.decomposition.function.type,' by attribute "').concat(this.referenceName,'"')}},{key:"parameterTypeDescription",get:function(){return"Set"}},{key:"function",get:function(){return new y(this,this.node.typedFunction)}},{key:"toString",value:function(){return"".concat(this.referenceName," <- ").concat(this.function.qualifiedName)}}]),n}(p),v=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r)}return c(n,[{key:"name",get:function(){throw new Error("Not implemented")}},{key:"getTargetDecomposition",value:function(e){throw new Error("Not implemented")}}]),n}(f),j=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r)}return c(n,[{key:"qualifiedName",get:function(){return this.name}},{key:"name",get:function(){return this.node}},{key:"getTargetDecomposition",value:function(e){var t=this.decomposition,n=this.transformation,r=t.function.type,a=this.name;return n.getDecompositionBySignature(r+"."+a)}}]),n}(v),y=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r)}return c(n,[{key:"getTargetDecomposition",value:function(e){return this.isAbstract?this.transformation.getDecompositionBySignature(e.type+"."+this.name):this.transformation.getDecompositionBySignature(this.qualifiedName)}},{key:"isAbstract",get:function(){return"Object"==this.type}},{key:"name",get:function(){return this.node.untypedFunction}},{key:"pluralValueDescription",get:function(){var e='"'.concat(this.name,'" values of ').concat(this.type," objects");return"center"===this.name?e="".concat(this.type," objects"):"val"===this.name&&(e="".concat(this.type," scalar values")),e}},{key:"type",get:function(){return this.node.type}},{key:"qualifiedName",get:function(){return this.type+"."+this.name}},{key:"externalName",get:function(){return this.type+"_"+this.name}},{key:"location",get:function(){return this.node.location}},{key:"typeLocation",get:function(){return[this.node.location[0],[this.node.location[0][0],this.node.location[0][1]+this.type.length]]}}]),n}(v),g=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r)}return c(n,[{key:"function",get:function(){return new y(this,this.node.typedFunction)}},{key:"links",get:function(){var e,t=[],n=r(this.node.links);try{for(n.s();!(e=n.n()).done;){var a=e.value;if("local"==a.type)t.push(new d(this,a));else if("forward"==a.type)t.push(new h(this,a));else if("reverse"==a.type)t.push(new b(this,a));else{if("global"!=a.type)throw new Error('Unexpected link type "'.concat(a.type,'"'));t.push(new m(this,a))}}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"comment",get:function(){return this.node.comment}}]),n}(f),k=function(e){"use strict";a(n,e);var t=o(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,n),(r=t.call(this,null,null)).source=e,r.sourceLocation=a;var o=u();try{if(o.feed(e),!(o.results.length>0)){var c=new Error("Can not parse decomposition");throw c.token={offset:e.length-e.trimLeft().length,value:e.trim()},c}r.tree=o.results[0]}catch(s){r.parseError=s,void 0==r.parseError.token&&(r.parseError.token={offset:0,value:""})}return r}return c(n,[{key:"hasError",get:function(){return void 0!=this.parseError}},{key:"errors",get:function(){var e=[];return this.parseError&&e.push({markerContext:{type:"transformation",location:l.fromOffsets(this.source,this.parseError.token.offset,this.parseError.token.offset+this.parseError.token.value.length).toArray()},error:String(this.parseError),severity:"error",message:this.parseError.toString()}),e}},{key:"decompositions",get:function(){var e=this;return this.tree.decompositions.map((function(t){return new g(e,t)}))}},{key:"getDecompositionBySignature",value:function(e){return this.decompositions.find((function(t){return t.function.qualifiedName==e}))}},{key:"getDecompositionForTextCoordinate",value:function(e,t){return this.decompositions.find((function(n){return n.characterRange.contains(e,t)}))}}]),n}(f);e.exports={Transformation:k,getFudomoParser:u,CharacterRange:l}},413:function(e,t,n){},46:function(e,t,n){var r=n(330),a=r.Transformation,o=r.getFudomoParser,i=r.CharacterRange,c=n(253),s=c.transform,u=c.FudomoComputeException,l=c.TransformationContext,f=n(212),p=f.getSkeletonGenerator,d=f.SKELETON_GENERATORS,m=n(994),h=m.MetamodelInferer,b=m.TransformationValidator,v=m.DataValidator;e.exports={FudomoParser:function(){return o()},parseFudomo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new a(e,t)},transform:s,TransformationContext:l,getSkeletonGenerator:p,SKELETON_GENERATORS:d,MetamodelInferer:h,TransformationValidator:b,DataValidator:v,FudomoComputeException:u,CharacterRange:i}},485:function(e,t,n){},84:function(e,t,n){var r=n(89),a=n(94),o=n(93),i=n(103),c=n(104),s=n(257);n(957).shim();var u=n(192),l=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return n}(s(Error));var f=function(){"use strict";function e(t,n,r){o(this,e),this.description=t,this.appliesTo=n,this.originalSource=r}return a(e,[{key:"isApplicableToSource",value:function(e){return e===this.originalSource}},{key:"applyToSource",value:function(e){if(e!==this.originalSource)throw new l;return this.apply(e)}},{key:"apply",value:function(e){throw new Error("not implemented")}}]),e}(),p=function(e){"use strict";i(n,e);var t=c(n);function n(e,r,a,i,c){var s;return o(this,n),(s=t.call(this,e,r,a)).range=i,s.replacement=c,s}return a(n,[{key:"apply",value:function(e){var t=u(e,{origin:0}),n=t.toIndex(this.range[0][0],this.range[0][1]),r=t.toIndex(this.range[1][0],this.range[1][1]);return e.slice(0,n)+this.replacement+e.slice(r)}},{key:"toJSON",value:function(){return{type:"RangeReplaceQuickfixProposal",description:this.description,appliesTo:this.appliesTo,originalSource:this.originalSource,range:this.range,replacement:this.replacement}}}],[{key:"fromObj",value:function(e){if("RangeReplaceQuickfixProposal"!==e.type)throw new Error;return new n(e.description,e.appliesTo,e.originalSource,e.range,e.replacement)}}]),n}(f);e.exports={QuickfixProposalNoLongerApplicableException:l,quickfixProposalReviver:function(e,t){return"RangeReplaceQuickfixProposal"===t.type?p.fromObj(t):t},QuickfixProposal:f,RangeReplaceQuickfixProposal:p,escapeHtml:function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},offsetToRange:function(e,t,n){if(""===e)return[[0,0],[0,0]];t>=e.length&&(t=e.length-1),t+n>=e.length&&(0==n?t=e.length-1:n=e.length-1-t);var r=u(e,{origin:0}),a=r.fromIndex(t),o=r.fromIndex(t+n);return[[a.line,a.col],[o.line,o.col]]},reMatchAll:function(e,t){var n=u(e,{origin:0});function a(t,r){var a=n.fromIndex(t)||n.fromIndex(e.length-1),o=n.fromIndex(t+r)||n.fromIndex(e.length-1);return[[a.line,a.col],[o.line,o.col]]}var o,i=[],c=r(e.matchAll(t));try{for(c.s();!(o=c.n()).done;){for(var s=o.value,l=[],f=0;f<s.length;f++)void 0!==s[f]&&(l[f]=a(s.indices[f][0],s.indices[f][1]-s.indices[f][0]));s.groupRanges=l,i.push(s)}}catch(p){c.e(p)}finally{c.f()}return i}}},916:function(e,t,n){"use strict";(function(e){var t=n(183);t.define("ace/mode/fudomo_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:"comment.fudomo",regex:/#.*/},{token:"keyword.fudomo.val",regex:/val/},{token:"keyword.fudomo.center",regex:/center/},{token:["storage.type.decomposition.fudomo","keyword.operator","entity.name.function.decomposition.fudomo","keyword.operator"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)(:)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","keyword.fudomo.center"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(center)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","keyword.fudomo.val"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(val)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","entity.name.function.forward-link.fudomo"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","keyword.fudomo.center"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(center)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","keyword.fudomo.val"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(val)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","entity.name.function.reverse-link.fudomo"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)/},{token:"variable.local-link.fudomo",regex:/[a-zA-Z][a-zA-Z0-9]*/}]},this.normalizeRules()};o.metaData={fileTypes:["fudomo"],name:"Fudomo",scopeName:"source.fudomo"},r.inherits(o,a),t.FudomoHighlightRules=o})),t.define("ace/mode/fudomo",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./text").Mode,o=e("ace/mode/fudomo_highlight_rules").FudomoHighlightRules,i=function(){this.HighlightRules=o};r.inherits(i,a),function(){}.call(i.prototype),t.Mode=i})),t.require(["ace/mode/fudomo"],(function(t){"object"==typeof exports&&e&&(e.exports=t)}))}).call(this,n(320)(e))},917:function(e,t,n){"use strict";(function(e){var t=n(35),r=n(21),a=n(131);a.define("ace/mode/oyaml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/yaml_highlight_rules"],(function(e,n,a){var o=e("../lib/oop"),i=e("./yaml_highlight_rules").YamlHighlightRules,c=function(){var e=(new i).getRules();this.$rules=Object(r.a)(Object(r.a)({},e),{},{start:[{token:["storage.type.oyaml","variable","keyword.operator"],regex:/([A-Z]\S*)(.*)(:)/}].concat(Object(t.a)(e.start))}),this.normalizeRules()};c.metaData={fileTypes:["oyaml"],name:"OYAML",scopeName:"source.oyaml"},o.inherits(c,i),n.OyamlHighlightRules=c})),a.define("ace/mode/oyaml",["require","exports","module","ace/lib/oop","ace/mode/yaml","ace/mode/oyaml_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./yaml").Mode,o=new a,i=e("ace/mode/oyaml_highlight_rules").OyamlHighlightRules,c=function(){this.HighlightRules=i,this.$outdent=o.$outdent,this.$behaviour=o.$behaviour,this.foldingRules=o.foldingRules};r.inherits(c,a),function(){}.call(c.prototype),t.Mode=c})),a.require(["ace/mode/oyaml"],(function(t){"object"==typeof exports&&e&&(e.exports=t)}))}).call(this,n(320)(e))},918:function(e,t,n){},923:function(e,t,n){},938:function(e,t,n){var r=n(93),a=n(94),o=n(89),i=n(939);!function(){function t(e){return e[0]}function c(e){return{comment:i(e,1)[0].value}}var s=n(943).compile({ws:{match:/[ \t\r\n\v\f]+/,lineBreaks:!0},comment:{match:/\n*#.*\n*/,lineBreaks:!0,value:function(e){return e.trim().slice(1)}},identifier:/[a-zA-Z][a-zA-Z0-9]*/,colon:":",dot:".",comma:",",rightArrow:"->",leftArrow:"<-"}),u=function(){"use strict";function e(t){r(this,e),this.lexer=t}return a(e,[{key:"next",value:function(){var e=this.lexer.next();return e&&"ws"===e.type?this.next():e}},{key:"save",value:function(){return this.lexer.save()}},{key:"reset",value:function(e,t){this.lexer.reset(e,t)}},{key:"formatError",value:function(e){return this.lexer.formatError(e)}},{key:"has",value:function(e){return this.lexer.has(e)}}]),e}(),l=new u(s),f={Lexer:l,ParserRules:[{name:"transformation$ebnf$1",symbols:[]},{name:"transformation$ebnf$1$subexpression$1",symbols:["decomposition"],postprocess:t},{name:"transformation$ebnf$1",symbols:["transformation$ebnf$1","transformation$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"transformation$ebnf$2",symbols:[]},{name:"transformation$ebnf$2$subexpression$1",symbols:[l.has("comment")?{type:"comment"}:c],postprocess:c},{name:"transformation$ebnf$2",symbols:["transformation$ebnf$2","transformation$ebnf$2$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"transformation",symbols:["transformation$ebnf$1","transformation$ebnf$2"],postprocess:function(e){return{decompositions:e[0]}}},{name:"decomposition$ebnf$1",symbols:[]},{name:"decomposition$ebnf$1$subexpression$1",symbols:[l.has("comment")?{type:"comment"}:c],postprocess:c},{name:"decomposition$ebnf$1",symbols:["decomposition$ebnf$1","decomposition$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"decomposition$ebnf$2",symbols:["links"],postprocess:t},{name:"decomposition$ebnf$2",symbols:[],postprocess:function(e){return null}},{name:"decomposition",symbols:["decomposition$ebnf$1","typedFunction",l.has("colon")?{type:"colon"}:colon,"decomposition$ebnf$2"],postprocess:function(e){var t=i(e,4),n=t[0],r=t[1],a=(t[2],t[3]);a=a||[];var o=n.map((function(e){return e.comment.trim()})).join("\n"),c=a.slice(-1)[0]||r;return{typedFunction:r,links:a,comment:o,location:[r.location[0],c.location[1]]}}},{name:"links$ebnf$1",symbols:[]},{name:"links$ebnf$1$subexpression$1",symbols:[l.has("comma")?{type:"comma"}:comma,"link"]},{name:"links$ebnf$1",symbols:["links$ebnf$1","links$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"links",symbols:["link","links$ebnf$1"],postprocess:function(e){var t,n=i(e,2),r=n[0],a=n[1],c=[r],s=o(a);try{for(s.s();!(t=s.n()).done;){var u=i(t.value,2),l=(u[0],u[1]);c.push(l)}}catch(f){s.e(f)}finally{s.f()}return c}},{name:"link",symbols:["localLink"],postprocess:t},{name:"link",symbols:["globalLink"],postprocess:t},{name:"link",symbols:["forwardLink"],postprocess:t},{name:"link",symbols:["reverseLink"],postprocess:t},{name:"localLink",symbols:[l.has("identifier")?{type:"identifier"}:identifier],postprocess:function(e){var t=i(e,1)[0];return{type:"local",reference:t.value,location:[[t.line-1,t.col-1],[t.line-1,t.col+t.value.length-1]]}}},{name:"globalLink",symbols:["typedFunction"],postprocess:function(e){var t=i(e,1)[0];return{type:"global",typedFunction:t,location:t.location}}},{name:"forwardLink",symbols:[l.has("identifier")?{type:"identifier"}:identifier,l.has("rightArrow")?{type:"rightArrow"}:rightArrow,"typedFunction"],postprocess:function(e){var t=i(e,3),n=t[0],r=(t[1],t[2]);return{type:"forward",reference:n.value,typedFunction:r,location:[[n.line-1,n.col-1],r.location[1]]}}},{name:"reverseLink",symbols:[l.has("identifier")?{type:"identifier"}:identifier,l.has("leftArrow")?{type:"leftArrow"}:leftArrow,"typedFunction"],postprocess:function(e){var t=i(e,3),n=t[0],r=(t[1],t[2]);return{type:"reverse",reference:n.value,typedFunction:r,location:[[n.line-1,n.col-1],r.location[1]]}}},{name:"typedFunction",symbols:["type",l.has("dot")?{type:"dot"}:dot,"untypedFunction"],postprocess:function(e){var t=i(e,3),n=t[0],r=(t[1],t[2]);return{type:n.value,untypedFunction:r.value,location:[[n.line-1,n.col-1],[r.line-1,r.col+r.value.length-1]]}}},{name:"type",symbols:[l.has("identifier")?{type:"identifier"}:identifier],postprocess:t},{name:"untypedFunction",symbols:[l.has("identifier")?{type:"identifier"}:identifier],postprocess:t}],ParserStart:"transformation"};"undefined"!==typeof e.exports?e.exports=f:window.grammar=f}()},994:function(e,t,n){var r=n(255),a=n(103),o=n(104),i=n(89),c=n(93),s=n(94),u=n(195),l=u.loadModel,f=(u.loaders,u.CenteredModel,u.ObjectModel),p=function(){"use strict";function e(){c(this,e)}return s(e,[{key:"inferMetamodelFromPaths",value:function(e){var t=e.map((function(e){return l(e)}));return this.inferMetamodel(t)}},{key:"inferMetamodel",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t||{},r=new Set,a=e.map((function(e){return e.center}));a.length>0;){var o=a.pop();if(!r.has(o.id))if(r.add(o.id),void 0==n[o.type]&&(n[o.type]=new Set),o.isScalar){var c=o.scalarType;n[o.type].add(JSON.stringify({scalarType:c}))}else{var s,u=i(o.featureNames);try{for(u.s();!(s=u.n()).done;){var l,p=s.value,d=o.getFeatureAsArray(p),m=i(d);try{for(m.s();!(l=m.n()).done;){var h=l.value,b=n[o.type],v=null,j=null;"cont"==p?(v="containment",j=h.type):h instanceof f?(v="reference",j=h.type):(v="attribute",j=o.getAttributeType(p),Array.isArray(j)&&(j={seq:Array.from(new Set(j))})),b.add(JSON.stringify({name:p,referenceType:v,objectType:j})),h instanceof f&&a.push(h)}}catch(G){m.e(G)}finally{m.f()}}}catch(G){u.e(G)}finally{u.f()}}}for(var y=new Map,g=0,k=Object.keys(n);g<k.length;g++){var x=k[g],w=new Map,O=Array.from(n[x]||[]).map((function(e){return JSON.parse(e)}));if(0!=O.length)if(O.every((function(e){return void 0!==e.scalarType}))){var S=O.map((function(e){return e.scalarType}));0==S.length?y.set(x,null):1==S.length?y.set(x,S[0]):y.set(x,S)}else{y.set(x,w);var C,_=O.filter((function(e){return"attribute"==e.referenceType})),N=O.filter((function(e){return"containment"==e.referenceType})),I=O.filter((function(e){return"reference"==e.referenceType})),E=Array.from(new Set(_.map((function(e){return e.name})))).sort(),P=Array.from(new Set(N.map((function(e){return e.name})))).sort(),F=Array.from(new Set(I.map((function(e){return e.name})))).sort(),R=i(E);try{var T=function(){var e=C.value,t=w.get(e);null==t&&(t=new Set,w.set(e,t));var n,r=i(_.filter((function(t){return t.name==e})));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a.objectType)}}catch(G){r.e(G)}finally{r.f()}};for(R.s();!(C=R.n()).done;)T()}catch(G){R.e(G)}finally{R.f()}var A,L=i(P);try{var M=function(){var e=A.value,t=w.get(e);null==t&&(t=new Set,w.set(e,t));var n,r=i(N.filter((function(t){return t.name==e})));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a.objectType)}}catch(G){r.e(G)}finally{r.f()}};for(L.s();!(A=L.n()).done;)M()}catch(G){L.e(G)}finally{L.f()}var D,z=i(F);try{var q=function(){var e=D.value,t=w.get(e);null==t&&(t=new Set,w.set(e,t));var n,r=i(I.filter((function(t){return t.name==e})));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a.objectType)}}catch(G){r.e(G)}finally{r.f()}};for(z.s();!(D=z.n()).done;)q()}catch(G){z.e(G)}finally{z.f()}}}var B,$=i(y.keys());try{for($.s();!(B=$.n()).done;){var V=B.value,J=y.get(V);if(J instanceof Map){var W,H=i(J.keys());try{for(H.s();!(W=H.n()).done;){var Z=W.value,Q=J.get(Z);J.set(Z,Array.from(Q).sort())}}catch(G){H.e(G)}finally{H.f()}}}}catch(G){$.e(G)}finally{$.f()}return y}}]),e}(),d=new Set(["int","float","bool","string","null"]),m=function(){"use strict";function e(t,n){c(this,e),this.metamodel=t,this.markerContextType=n}return s(e,[{key:"makeError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{context:e,message:t,markerContext:{type:this.markerContextType,location:n||[[0,0],[0,0]]}}}},{key:"typeExists",value:function(e){return!!d.has(e)||("Object"===e||"Root"===e||void 0!==this.metamodel[e])}},{key:"_isAlwaysValidFeature",value:function(e,t){return"val"===t||"center"===t||("Root"===e&&"cont"===t||"Object"===e)}},{key:"_getAttributeOrRefTypeSpec",value:function(e,t){return(this.metamodel[e]||{})[t]}},{key:"attrOrRefExists",value:function(e,t){return!!this._isAlwaysValidFeature(e,t)||void 0!==this._getAttributeOrRefTypeSpec(e,t)}},{key:"attrOrRefHasType",value:function(e,t,n){return!!this._isAlwaysValidFeature(e,t)||(this._getAttributeOrRefTypeSpec(e,t)||[]).includes(n)}}]),e}(),h=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return c(this,n),(a=t.call(this,e,"transformation")).transformation=r,a}return s(n,[{key:"decompositionExists",value:function(e,t){return!!this.transformation.getDecompositionBySignature("".concat(e,".").concat(t))}},{key:"errors",get:function(){var e,t=[],n=i(this.transformation.decompositions);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.typeExists(r.function.type)||t.push(this.makeError(r.function.qualifiedName,"Decomposition Type ".concat(r.function.type," not found in metamodel"),r.function.typeLocation));var a,o=i(r.links);try{for(o.s();!(a=o.n()).done;){var c=a.value;if("forward"==c.kind)if(this.attrOrRefExists(r.function.type,c.referenceName)?this.attrOrRefHasType(r.function.type,c.referenceName,c.function.type)||"Object"===c.function.type||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"Reference Type ".concat(c.function.type," not allowed for reference ").concat(r.function.type,".").concat(c.referenceName),c.function.typeLocation)):t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"Reference ".concat(c.referenceName," not found in type ").concat(r.function.type),c.referenceLocation)),this.typeExists(c.function.type))if(c.function.isAbstract){var s=c.function.name;if("center"!==s){var u,l=(this.metamodel[r.function.type]||{})[c.referenceName]||[],f=i(l);try{for(f.s();!(u=f.n()).done;){var p=u.value;null==this.transformation.getDecompositionBySignature("".concat(p,".").concat(s))&&t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),'No decomposition "'.concat(s,'" found for concrete type ').concat(p),c.function.typeLocation))}}catch(w){f.e(w)}finally{f.f()}}}else this.attrOrRefExists(c.function.type,c.function.name)||this.decompositionExists(c.function.type,c.function.name)||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"No attribute, reference or decomposition found for link target ".concat(c.function.qualifiedName),c.function.location));else t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"Forward Link Type ".concat(c.function.type," not found in metamodel"),c.function.typeLocation));else if("reverse"==c.kind)if(this.attrOrRefExists(c.function.type,c.referenceName)?this.attrOrRefHasType(c.function.type,c.referenceName,r.function.type)||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," <- ").concat(c.function.qualifiedName),"Reference Type ".concat(r.function.type," not allowed for reference ").concat(c.function.type,".").concat(c.referenceName),c.function.typeLocation)):t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," <- ").concat(c.function.qualifiedName),"Reference ".concat(c.referenceName," not found in type ").concat(c.function.type),c.referenceLocation)),this.typeExists(c.function.type))if(c.function.isAbstract){var d=c.function.name;if("center"!==d)for(var m=0,h=Object.keys(this.metamodel);m<h.length;m++){var b=h[m],v=this.metamodel[b];if(null!=v){var j=v[c.referenceName];if(void 0!=j&&j.includes(r.function.type))null==this.transformation.getDecompositionBySignature("".concat(b,".").concat(d))&&t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),'No decomposition "'.concat(d,'" found for concrete type ').concat(b),c.function.typeLocation))}}}else this.attrOrRefExists(c.function.type,c.function.name)||this.decompositionExists(c.function.type,c.function.name)||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"No attribute, reference or decomposition found for link target ".concat(c.function.qualifiedName),c.function.location));else t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," <- ").concat(c.function.qualifiedName),"Reverse Link Type ".concat(c.function.type," not found in metamodel"),c.function.typeLocation));else if("local"==c.kind){var y=this.attrOrRefExists(c.decomposition.function.type,c.function.name),g=null!=this.transformation.getDecompositionBySignature(c.decomposition.function.type+"."+c.function.name);y||g||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.function.name),'No attribute or decomposition with name "'.concat(c.function.name,'" found'),c.location))}else if("global"==c.kind)if("Object"===c.function.type);else if(this.typeExists(c.function.type)){var k=this.attrOrRefExists(c.function.type,c.function.name),x=null!=this.transformation.getDecompositionBySignature(c.function.type+"."+c.function.name);k||x||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.function.qualifiedName),'No attribute or decomposition with name "'.concat(c.function.name,'" found'),c.function.location))}else t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.function.qualifiedName),"Global Link Type ".concat(c.function.type," not found in metamodel"),c.function.typeLocation))}}catch(w){o.e(w)}finally{o.f()}}}catch(w){n.e(w)}finally{n.f()}return t}}]),n}(m),b=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return c(this,n),(a=t.call(this,e,"input")).centeredModel=r,a}return s(n,[{key:"errors",get:function(){for(var e=this,t=[],n=new Set,a=[this.centeredModel.center];a.length>0;){var o=a.pop();if(!n.has(o.id))if(n.add(o.id),this.typeExists(o.type))if(o.isScalar){var c=this.metamodel[o.type];null===c&&(c=[null]),c=Array.isArray(c)?c:[c];var s=o.scalarType;c.includes(s)||t.push(this.makeError("Object of type ".concat(o.type),"".concat(o.type," value has disallowed type ").concat(s),o.scalarValueLocation))}else{var u,l=i(o.featureNames);try{for(l.s();!(u=l.n()).done;){var p=u.value;if(this.attrOrRefExists(o.type,p))if(Array.isArray(o.getAttributeType(p)))!function(){var n=o.getAttributeType(p),a=e._getAttributeOrRefTypeSpec(o.type,p),i=new Set(a.map((function(e){return e.seq})).flat()),c=Array.from(new Set(r(n).filter((function(e){return!i.has(e)}))));c.length>0&&t.push(e.makeError("Object of type ".concat(o.type),"Attribute sequence ".concat(p," contains disallowed type(s): ").concat(c.join(", ")),o.getFeatureValueLocation(p)))}();else{var d,m=i(o.getFeatureAsArray(p));try{for(m.s();!(d=m.n()).done;){var h=d.value,b=null,v=null;h instanceof f?(b=h.type,v=h.typeLocation):(b=o.getAttributeType(p),v=o.getFeatureValueLocation(p)),this.attrOrRefHasType(o.type,p,b)||t.push(this.makeError("Object of type ".concat(o.type),"Attribute or reference ".concat(p," has disallowed type ").concat(b),v)),h instanceof f&&a.push(h)}}catch(j){m.e(j)}finally{m.f()}}else t.push(this.makeError("Object of type ".concat(o.type),"Attribute or reference ".concat(p," not found in type ").concat(o.type," in metamodel"),o.getFeatureNameLocation(p)))}}catch(j){l.e(j)}finally{l.f()}}else t.push(this.makeError("Object of type ".concat(o.type),"Type ".concat(o.type," not found in metamodel"),o.typeLocation))}return t}}]),n}(m);e.exports={MetamodelInferer:p,TransformationValidator:h,DataValidator:b}}},[[1432,1,2]]]);