(this["webpackJsonptry-fudomo"]=this["webpackJsonptry-fudomo"]||[]).push([[0],{1061:function(e,t){},1063:function(e,t){},1073:function(e,t){},1075:function(e,t){},1102:function(e,t){},1104:function(e,t){},1105:function(e,t){},1110:function(e,t){},1112:function(e,t){},1118:function(e,t){},1120:function(e,t){},1139:function(e,t){},1151:function(e,t){},1154:function(e,t){},121:function(e,t,n){var r=n(100),a=n(101),o=n(110),i=n(111),c=n(193),u=c.AbstractJSObjectLoader,s=c.AbstractOYAMLObjectLoader,l=c.CenteredModel,f=n(229).importModule,p=function(e){"use strict";o(n,e);var t=i(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"loadFromSource",value:function(e){var t=f(e);return this.loadFromData(t)}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Array.isArray(e))throw new Error("Root has to be Object, not Array");return(new JSObjectFactory).getObjectModel(new Root(e),t)}}]),n}(u),d=function(e){"use strict";o(n,e);var t=i(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"loadFromSource",value:function(e){return this.loadFromData(e)}}]),n}(s),m={js:new p,yaml:new d,oyaml:new d};e.exports={loaders:m,CenteredModel:l}},1431:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),i=n.n(o),c=n(28),u=n(1498),s=n(107),l=n(57),f=n(151),p=(n(483),n(14)),d=n(420),m=n(299),h=n.n(m),v=n(32),y=n(165),g={width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"var(--theme-neutral-500)"},b={color:"var(--theme-neutral-500)"};function k(e){return a.a.createElement("div",{style:g},a.a.createElement(y.a,{variant:"h3",style:b},e.message),e.children)}var w=n(220),j=n.n(w),x=n(311),E=Object(x.a)({root:{width:"100%",height:"100%",flexDirection:"column",alignItems:"stretch",boxSizing:"border-box",overflow:"hidden",padding:"1em"},container:{flexDirection:"column",border:"2px solid var(--theme-neutral-200)",borderRadius:"6px 6px 0 0",backgroundColor:"transparent",width:"calc(100% - 4px)",height:"calc(100% - 4px)",boxShadow:"2px 2px 12px rgba(0, 0, 0, 0.05)",boxSizing:"border-box",overflow:"hidden"},headerBox:{backgroundColor:"var(--theme-primary-300)",padding:"0.5rem 0.5rem 0.5rem 1rem",boxSizing:"border-box",overflow:"hidden",flexDirection:"row",width:"100%",minHeight:"3em",maxHeight:"3em",alignItems:"center"},header:{minWidth:"1em",overflow:"hidden",textOverflow:"ellipsis",flexGrow:99,flexShrink:99,fontSize:"large",fontWeight:"600",letterSpacing:"0.1em",color:"var(--theme-neutral-800)",textTransform:"uppercase",whiteSpace:"nowrap",cursor:"default"},content:{overflow:"hidden"}});function O(e){var t=Object(r.useCallback)((function(e,t){return a.a.Children.toArray(e).filter((function(e){return Object.keys(e.props).includes("tool")===t}))}),[]),n=E();return a.a.createElement(u.a,{display:"flex",className:n.root},a.a.createElement(u.a,{display:"flex",className:n.container},a.a.createElement(u.a,{display:"flex",className:n.headerBox},a.a.createElement(y.a,{className:n.header},e.title),t(e.children,!0)),a.a.createElement(u.a,{width:"100%",height:"100%",className:n.content},t(e.children,!1))))}var S=n(1471),C=Object(x.a)({button:{marginLeft:"0.5rem",paddingRight:"0.5rem",color:"var(--theme-neutral-800)"},label:{overflow:"hidden",textOverflow:"ellipsis",minWidth:"1em"},startIcon:{marginRight:0},buttonDisabled:{backgroundColor:"var(--theme-neutral-500) !important",color:"var(--theme-neutral-400) !important",cursor:"default"}});function _(e){var t=C(),n=Object(r.useMemo)((function(){return{backgroundColor:e.color}}),[e]),o=Object(r.useMemo)((function(){return{root:t.button,disabled:t.buttonDisabled,label:t.label,startIcon:t.startIcon}}),[t]);return a.a.createElement(S.a,{startIcon:e.startIcon,disabled:e.disabled,style:n,classes:o,size:"small",title:e.title,onClick:e.onClick},e.children)}var N=n(445),I=n(1475),P=n(447),F=n(1476),R=n(425),T=n.n(R),A=n(424),L=n.n(A),M=n(423),D=n.n(M),z=(n(491),n(906),n(907),n(908),n(909),n(910),n(911),n(912),n(913),n(1472)),q=(n(914),window.ResizeObserver||N.a),B={$blockScrolling:1/0},$={scrollPastEnd:1,tabSize:2,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0};function V(e){var t=e.editorId,n=e.value,o=e.disabled,i=e.markers,u=e.language,s=(e.theme,e.onChange),l=e.onQuickfixProposalClicked,f=(i||[]).map((function(e){var t=(void 0!==e.markerContext?e.markerContext.location:e.location)||[[0,0],[0,1]];return{row:t[0][0],column:t[0][1],type:"error",text:e.message,fixes:e.fixes}})),d=(i||[]).map((function(e){var t=(void 0!==e.markerContext?e.markerContext.location:e.location)||[[0,0],[0,1]];return{startRow:t[0][0],startCol:t[0][1],endRow:t[1][0],endCol:t[1][1],type:"text",text:e.message,className:"error-marker"}})),m=Object(z.a)((function(e){s&&s(e)}),100),h=Object(p.a)(m,1)[0],v=Object(r.useCallback)((function(e){h(e)}),[h]),y=Object(r.useRef)(),g=Object(z.a)((function(e){e.resize()}),250),b=Object(p.a)(g,1)[0];Object(r.useEffect)((function(){if(null!==y.current){var e=new q((function(e){b(y.current.editor)}));return e.observe(y.current.refEditor),function(){e.disconnect()}}}),[y,b]);var k=Object(r.useState)(null),w=Object(p.a)(k,2),j=w[0],x=w[1],E=Object(r.useState)([]),O=Object(p.a)(E,2),S=O[0],C=O[1],_=Object(r.useCallback)((function(e){e.target.classList.contains("ace_error")&&function(){var t,n=y.current.editor.renderer.screenToTextCoordinates(e.clientX,e.clientY).row,r=y.current.editor.renderer.$gutterLayer.$annotations[n],a=[],o=Object(c.a)(f.filter((function(e){return e.row===n&&r.text.includes((""+e.text).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;"))})));try{for(o.s();!(t=o.n()).done;){var i=t.value;i.fixes&&a.push({error:i.text,proposals:i.fixes})}}catch(u){o.e(u)}finally{o.f()}C(a),a.length>0&&x(e.target)}()}),[y,f,x,C]);Object(r.useEffect)((function(){var e=y.current;return e.editor.renderer.$gutter.addEventListener("click",_),function(){e.editor.renderer.$gutter.removeEventListener("click",_)}}),[y,_]);var N=Object(r.useCallback)((function(e){l&&l(e),x(null)}),[l,x]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(P.a,{anchorEl:j,getContentAnchorEl:null,anchorOrigin:{horizontal:"left",vertical:"bottom"},open:Boolean(j),onClose:function(e){return x(null)}},S.map((function(e,t){return[a.a.createElement(I.a,{key:"fix-".concat(t),disabled:!0},a.a.createElement(F.a,null,a.a.createElement(L.a,null)),e.error),e.proposals.map((function(e,n){return a.a.createElement(I.a,{key:"fix-".concat(t,"-prop-").concat(n),onClick:function(t){return N(e)}},a.a.createElement(F.a,null,a.a.createElement(T.a,null)),e.description)}))]})).flat()),a.a.createElement(D.a,{ref:y,mode:u||"text",value:n,annotations:f,markers:d,readOnly:o,theme:"chrome",onChange:v,fontSize:16,name:"ace_editor_"+t,editorProps:B,setOptions:$,width:"100%",height:"100%"}))}var J=a.a.memo(V);var W=function(e){return a.a.createElement(O,{title:"Metamodel"},a.a.createElement(_,{disabled:e.inferDisabled,startIcon:a.a.createElement(j.a,null),tool:!0,color:"var(--theme-accent1-500)",title:"Infer Metamodel from Input Model",onClick:e.onInferMetamodelClicked},"Infer"),a.a.createElement(J,{editorId:"metamodel",value:e.value,disabled:e.disabled,language:"yaml",markers:e.markers,onChange:e.onChange}))},H=n(117),Z=n.n(H);function Q(e){return a.a.createElement(O,{title:"Transformation"},a.a.createElement(_,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:a.a.createElement(Z.a,null),title:"Validate Transformation wrt. Metamodel",onClick:e.onValidateTransformClicked},"Validate"),a.a.createElement(J,{editorId:"transformation",language:"fudomo",value:e.value,markers:e.markers,disabled:e.disabled,onChange:e.onChange,onQuickfixProposalClicked:e.onQuickfixProposalClicked}))}var G=n(1499),U=n(1477);function K(e){var t=Object(r.useCallback)((function(t){e.onSelectedLanguageChanged&&e.onSelectedLanguageChanged(t.target.value)}),[e]);return a.a.createElement(O,{title:"Decomp. Functions"},a.a.createElement(U.a,{tool:"true"},a.a.createElement(G.a,{value:e.language||"",onChange:t,className:"FudomoSelect"},a.a.createElement(I.a,{disabled:e.languageSelectDisabled,value:"javascript"},"JavaScript"),a.a.createElement(I.a,{disabled:e.languageSelectDisabled,value:"python"},"Python 3"))),a.a.createElement(_,{disabled:e.generateDisabled,tool:!0,color:"var(--theme-accent1-500)",startIcon:a.a.createElement(j.a,null),title:"Generate Decomposition Function Skeletons from Transformation",onClick:e.onGenerateSkeletonsClicked},"Generate"),a.a.createElement(_,{disabled:e.validateDisabled,tool:!0,startIcon:a.a.createElement(Z.a,null),color:"var(--theme-accent2-500)",title:"Validate Decomposition Functions wrt. Transformation",onClick:e.onValidateFunctionsClicked},"Validate"),a.a.createElement(J,{editorId:"functions",value:e.value,onChange:e.onChange,disabled:e.disabled,language:e.language,markers:e.markers,onQuickfixProposalClicked:e.onQuickfixProposalClicked}))}function Y(e){return a.a.createElement(O,{title:"Input Model"},a.a.createElement(_,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:a.a.createElement(Z.a,null),title:"Validate Input Model wrt. Metamodel",onClick:e.onValidateInputClicked},"Validate"),a.a.createElement(J,{editorId:"input",value:e.value,disabled:e.disabled,onChange:e.onChange,language:"oyaml",markers:e.markers,onQuickfixProposalClicked:e.onQuickfixProposalClicked}))}var X=n(222),ee=n.n(X),te=(n(915),n(204)),ne={width:"100%",height:"100%"},re={padding:"1em",fontFamily:"monospace",whiteSpace:"pre"},ae={width:"100%",height:"100%",padding:"0.5em",boxSizing:"border-box"};function oe(e){var t=Object(r.useState)(null),n=Object(p.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),u=Object(p.a)(c,2),s=u[0],l=u[1],f=Object(r.useState)(null),d=Object(p.a)(f,2),m=d[0],h=d[1],v=Object(r.useCallback)((function(e){null!==e&&i(e)}),[]);return Object(r.useEffect)((function(){if(null!==o){var e=Object(te.a)(o).graphviz({useWorker:!1}).attributer((function(e){"svg"===e.tag&&(e.attributes.style="width: 100%; height: 100%")})).onerror((function(e){h(String(e))}));l(e)}}),[o]),Object(r.useEffect)((function(){var t=null==e.dot||""===e.dot?"graph{}":e.dot;try{h(null),s.engine(e.engine||"dot").dot(t).render()}catch(m){h(String(m))}}),[e.dot,s,e.engine]),a.a.createElement("div",{style:ne},null!==m&&a.a.createElement("div",{style:re},null!==m?String(m):""),null===m&&a.a.createElement("div",{ref:v,style:ae}))}var ie=0,ce={width:"100%",height:"100%"},ue={boxSizing:"border-box",border:"none"};function se(e){return a.a.createElement("div",{style:ce},a.a.createElement("iframe",{title:"iframe".concat(ie++),srcDoc:e.html,width:"100%",height:"100%",style:ue}))}var le={padding:"1em",backgroundColor:"var(--theme-accent1-400)",hyphens:"auto"};function fe(e){var t="string"===typeof e.value||e.value instanceof String;return a.a.createElement(O,{title:"Output"},a.a.createElement(G.a,{tool:"true",value:e.format||"",onChange:e.onSelectedFormatChanged,className:"FudomoSelect"},a.a.createElement(I.a,{value:"text"},"Text"),a.a.createElement(I.a,{value:"graphviz-dot"},"GraphViz (Dot)"),a.a.createElement(I.a,{value:"graphviz-neato"},"GraphViz (Neato)"),a.a.createElement(I.a,{value:"html"},"HTML")),a.a.createElement(_,{tool:!0,disabled:e.transformDisabled,startIcon:a.a.createElement(ee.a,null),color:"var(--theme-accent1-500)",title:"Transform Input Model to Output",onClick:e.onTransformClicked},"Transform"),t&&a.a.createElement(a.a.Fragment,null,"text"===e.format&&a.a.createElement(J,{editorId:"output",value:e.value,disabled:e.disabled,format:"text"}),"graphviz-dot"===e.format&&a.a.createElement(oe,{dot:e.value,engine:"dot"}),"graphviz-neato"===e.format&&a.a.createElement(oe,{dot:e.value,engine:"neato"}),"html"===e.format&&a.a.createElement(se,{html:e.value})),!t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:le},"Warning: non-String value returned by the root decomposition. A converted result is shown below."),a.a.createElement(J,{editorId:"output",value:String(e.value),disabled:e.disabled,format:"text"})))}var pe=n(66),de=n(427),me=n.n(de),he=n(1503),ve=n(1474),ye=n(1440),ge=n(223),be=n.n(ge),ke=n(1480),we={height:"100%",overflowY:"auto",color:"var(--theme-neutral-700)"};function je(e){var t=e.project;return a.a.createElement(O,{title:"Input Models"},a.a.createElement(_,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:a.a.createElement(Z.a,null),title:"Validate Input Models wrt. Metamodel",onClick:e.onValidateInputsClicked},"Validate"),a.a.createElement(ve.a,{style:we},t.inputs.map((function(e,n){return a.a.createElement(pe.b,{key:n,to:".."+t.url+"/"+e.name,className:"NoLinkStyling"},a.a.createElement(ye.a,{button:!0},a.a.createElement(F.a,{className:"ListItemIcon"},a.a.createElement(be.a,null)),a.a.createElement(ke.a,{primary:e.name}),e.markers&&e.markers.length>0&&a.a.createElement(he.a,{placement:"top",arrow:!0,title:a.a.createElement("span",{style:{whiteSpace:"pre"}},e.markers.map((function(e){return"- "+e.message})).join("\n"))},a.a.createElement(me.a,{style:{color:"red"}}))))}))))}var xe=n(1481),Ee=n.n(xe),Oe=n(1482),Se=n.n(Oe),Ce=n(1483),_e=n.n(Ce),Ne=n(1484),Ie=n.n(Ne),Pe=n(1485),Fe=n.n(Pe),Re=n(70),Te=(n(919),n(920),Ee.a),Ae=Se.a,Le=_e.a,Me=Ie.a,De=Fe.a,ze=Ee.a,qe=Se.a,Be=_e.a,$e=Ie.a,Ve={overflow:"hidden"},Je={width:"100%",height:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box"};function We(e){var t=Object(r.useState)(!0),n=Object(p.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!0),s=Object(p.a)(c,2),l=s[0],f=s[1],d=Object(r.useState)(!0),m=Object(p.a)(d,2),h=m[0],v=m[1],y=Object(r.useState)(!0),g=Object(p.a)(y,2),b=g[0],k=g[1],w=Object(r.useState)(!0),j=Object(p.a)(w,2),x=j[0],E=j[1],O=Object(r.useState)(!0),S=Object(p.a)(O,2),C=S[0],_=S[1],N=Object(r.useState)(!0),I=Object(p.a)(N,2),P=I[0],F=I[1],R=150;return a.a.createElement(u.a,{width:"100%",height:"100%",boxSizing:"border-box",overflow:"hidden"},!o&&a.a.createElement("button",{title:"Show Top Row",className:"PaneButton ShowR1Button",onClick:function(){return i(!0)}},a.a.createElement(Me,null)),a.a.createElement(Re.a,{orientation:"horizontal",style:Je},o&&a.a.createElement(Re.b,{minSize:R,style:Ve},l&&a.a.createElement("button",{title:"Hide Top Row",className:"PaneButton HideR1Button",onClick:function(){return i(!1)}},a.a.createElement(Be,null)),!h&&a.a.createElement("button",{title:"Show "+e.titles[0],className:"PaneButton ShowR1C1Button",onClick:function(){return v(!0)}},a.a.createElement(Ae,null)),a.a.createElement(Re.a,{orientation:"vertical"},h&&a.a.createElement(Re.b,{minSize:R,style:Ve},(b||x)&&a.a.createElement("button",{title:"Hide "+e.titles[0],className:"PaneButton HideR1C1Button",onClick:function(){return v(!1)}},a.a.createElement(ze,null)),e.children[0],!b&&a.a.createElement("button",{title:"Show "+e.titles[1],className:"PaneButton ShowR1C2Button1",onClick:function(){return k(!0)}},a.a.createElement(De,null))),h&&(b||x)&&a.a.createElement(Re.c,{propagate:!0}),b&&a.a.createElement(Re.b,{minSize:R,style:Ve},(h||x)&&a.a.createElement("button",{title:"Hide "+e.titles[1],className:"PaneButton HideR1C2Button2",onClick:function(){return k(!1)}},a.a.createElement(qe,null)),e.children[1]),b&&x&&a.a.createElement(Re.c,{propagate:!0}),x&&a.a.createElement(Re.b,{minSize:R,style:Ve},(h||b)&&a.a.createElement("button",{title:"Hide "+e.titles[2],className:"PaneButton HideR1C3Button",onClick:function(){return E(!1)}},a.a.createElement(qe,null)),!b&&a.a.createElement("button",{title:"Show "+e.titles[1],className:"PaneButton ShowR1C2Button2",onClick:function(){return k(!0)}},a.a.createElement(De,null)),e.children[2])),!x&&a.a.createElement("button",{title:"Show "+e.titles[2],className:"PaneButton ShowR1C3Button",onClick:function(){return E(!0)}},a.a.createElement(Te,null))),o&&l&&a.a.createElement(Re.c,null),l&&a.a.createElement(Re.b,{minSize:R,style:Ve},o&&a.a.createElement("button",{title:"Hide Bottom Row",className:"PaneButton HideR2Button",onClick:function(){return f(!1)}},a.a.createElement($e,null)),a.a.createElement(Re.a,{orientation:"vertical"},C&&a.a.createElement(Re.b,{minSize:R,style:Ve},C&&P&&a.a.createElement("button",{title:"Hide "+e.titles[3],className:"PaneButton HideR2C1Button",onClick:function(){return _(!1)}},a.a.createElement(ze,null)),e.children[3]),C&&P&&a.a.createElement(Re.c,null),P&&a.a.createElement(Re.b,{minSize:R,style:Ve},C&&P&&a.a.createElement("button",{title:"Hide "+e.titles[4],className:"PaneButton HideR2C2Button",onClick:function(){return F(!1)}},a.a.createElement(qe,null)),e.children[4])))),!C&&a.a.createElement("button",{title:"Show "+e.titles[3],className:"PaneButton ShowR2C1Button",onClick:function(){return _(!0)}},a.a.createElement(Ae,null)),!P&&a.a.createElement("button",{title:"Show "+e.titles[4],className:"PaneButton ShowR2C2Button",onClick:function(){return F(!0)}},a.a.createElement(Te,null)),!l&&a.a.createElement("button",{title:"Show Bottom Row",className:"PaneButton ShowR2Button",onClick:function(){return f(!0)}},a.a.createElement(Le,null)))}var He=Object(r.createContext)();function Ze(e){var t=Object(f.useSnackbar)(),n=t.enqueueSnackbar,o=t.closeSnackbar,i=Object(r.useCallback)((function(e){e=Array.isArray(e)?e:[e];var t,r=Object(c.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(null!==i&&void 0!==i){var u="pre"===i.formatting?{whiteSpace:"pre"}:{},s="success"===i.type?"success":"error",l=i.message;"exception"===i.type&&(u.whiteSpace="pre",u.fontFamily="'Droid Sans Mono', monospace"),l&&function(){var e=n(a.a.createElement("p",{style:u},String(l)),{variant:s,onClick:function(){return o(e)}})}()}}}catch(f){r.e(f)}finally{r.f()}}),[n,o]),u=Object(r.useCallback)((function(e){i([{type:"success",message:e}])}),[i]),s=Object(r.useCallback)((function(e){i([{type:"error",message:e}])}),[i]),l=Object(r.useCallback)((function(e){i([{type:"error",message:e,formatting:"pre"}])}),[i]),p=Object(r.useCallback)((function(e){i([{type:"exception",error:e}])}),[i]),d={showStatus:i,showSuccess:u,showError:s,showErrorPre:l,showException:p};return a.a.createElement(He.Provider,{value:d,children:e.children})}var Qe=n(26),Ge=n(2),Ue=n.n(Ge),Ke=n(8),Ye=n(95),Xe=n(98),et=n.n(Xe),tt=n(431),nt=n(433);function rt(e){return{type:"success",message:e}}function at(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"error",message:e,formatting:t}}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"exception",message:e.toString(),formatting:t}}var it=Object(Ye.b)({name:"status",initialState:[{type:"success",message:null}],reducers:{setStatus:function(e,t){return Array.isArray(t.payload)?t.payload:[t.payload]}}}),ct=it.actions.setStatus,ut=it.reducer,st=n(64),lt=n.n(st),ft=n(84),pt=n(121),dt=n(229),mt=n(432),ht=n(34),vt=n(45),yt=n(46),gt=n(55),bt=n(67),kt=n(163),wt=n(210),jt=n(157),xt=n.n(jt);function Et(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=window.document.getElementsByTagName("head")[0],a=window.document.createElement("script");r.appendChild(a),a.onload=function(){e()},a.setAttribute("async",!0),a.setAttribute("type","text/javascript"),a.setAttribute("src",t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var St=n(1035),Ct=function(e){Object(gt.a)(n,e);var t=Object(bt.a)(n);function n(e){var r;if(Object(vt.a)(this,n),r=t.call(this),null==e)throw new Error("No exception provided");if(void 0===e.errorObj)throw new Error("No error object provided");return r.error=e.errorObj,r.message=e.message,r}return Object(yt.a)(n,[{key:"location",get:function(){if(0===this.error.stack.length)return null;var e=this.error.stack.slice(0).reverse()[0],t=e.startLine,n=e.startCol,r=e.endLine,a=e.endCol;return t===r&&n===a&&(a=n+e.line.slice(n).trim().length+1),[[t-1,n-1],[r-1,a-1]]}},{key:"toString",value:function(){var e,t="".concat(this.error.message,"\n"),n=this.error.stack.slice(0).reverse(),r=Object(c.a)(n);try{for(r.s();!(e=r.n()).done;){var a=e.value,o=a.line||"";t+="    at (PY) ".concat(o.trim()," (").concat(a.startLine,":").concat(a.startCol,")\n")}}catch(i){r.e(i)}finally{r.f()}return t.slice(0,-1)}}]),n}(kt.StackFrame),_t=function(e){Object(gt.a)(n,e);var t=Object(bt.a)(n);function n(e){var r;Object(vt.a)(this,n),r=t.call(this);var a=window.load_python_module(e);if("ok"!==a){var o=JSON.parse(a),i=new kt.PythonError(o),c=[r.exceptionToStackFrame(i)];throw new st.FudomoComputeException(c)}return r}return Object(yt.a)(n,[{key:"finalize",value:function(){}},{key:"hasFunction",value:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.has_function(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){return Object(wt.getSkeletonGenerator)("python")}},{key:"convertScalarValue",value:function(e,t){if("oyaml"===e){if(null==t)return null;if(t.kind!==St.Kind.SCALAR)throw new Error("Expected Scalar YAML node");return t.valueObject instanceof Date?window.js_date_to_datetime(t.valueObject):St.determineScalarType(t)===St.ScalarType.string?t.value:t.valueObject}throw"js"===e?new Error("Not implemented"):new Error("Unsupported object model type "+e)}},{key:"wrapObject",value:function(e){var t=this;return e instanceof Set?{_type:"Set",values:Object(ht.a)(e).map((function(e){return t.wrapObject(e)}))}:e instanceof Array?e.map((function(e){return t.wrapObject(e)})):e}},{key:"unwrapObject",value:function(e){var t=this;return"Set"===e._type?new Set(e.values.map(this.unwrapObject)):e instanceof Array?e.map((function(e){return t.unwrapObject(e)})):void 0!==e.__class__&&"NoneType"===e.__class__.$infos.__name__?null:e}},{key:"callFunction",value:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){var r,a,o,i,c,u,s=this;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.map((function(e){return s.wrapObject(e)})),a=window.call_function(t,r),o=Object(p.a)(a,2),i=o[0],c=o[1],!i){e.next=5;break}throw u=JSON.parse(c),new kt.PythonError(u);case 5:return e.abrupt("return",this.unwrapObject(c));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.to_string(this.wrapObject(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exceptionToStackFrame",value:function(e){return new Ct(e)}},{key:"getAppendNewFunctionSkeletonRange",value:function(e){return Object(ft.offsetToRange)(e,e.length,0)}},{key:"getFunctionSignatures",value:function(e){var t=Object(mt.a)(/(def[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)([0-9A-Z_a-z][0-9A-Z_a-z]*)([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\()([\n #,0-9A-Z_a-z]+)?(\)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*:)([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*#(?:(?!\n)[\s\S])*\n)?(([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?)(("""|'''|"|')(\n|.)*?(\10)))?/g,{fname:2,params:4,comment:9}),n=/(\s*)([\w\d_]+)([\s,]*)/g;return Object(ft.reMatchAll)(e,t).map((function(t){return{signature:t[0],signatureRange:t.groupRanges[0],funcName:t[2],funcNameRange:t.groupRanges[2],parameters:Object(ft.reMatchAll)(t[4]||"",n).map((function(n){return{name:n[2],nameRange:Object(ft.offsetToRange)(e,t.indices[4][0]+n.indices[2][0],n.indices[2][1]-n.indices[2][0])}})),parametersListRange:t.groupRanges[4],comment:t[9],commentRange:t.groupRanges[9]}}))}}],[{key:"init",value:function(){var e=Object(Ke.a)(Ue.a.mark((function e(){var t,n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Et("".concat(window.public_url,"/js/brython/brython.js"));case 2:return e.next=4,Et("".concat(window.public_url,"/js/brython/brython_stdlib.js"));case 4:t=window.document.getElementsByTagName("head")[0],(n=window.document.createElement("script")).setAttribute("type","text/python3"),t.appendChild(n),n.textContent="\nfrom browser import run_script, window\nimport javascript\n\nimport inspect\nimport sys\nimport traceback\nimport re\nimport json\nimport datetime\n\n_source = '' # global state: current module source. Set by calling load_python_module.\n_mod = None  # global state: current module dict. Set by calling load_python_module.\n\ndef load_python_module(py):\n  global _mod\n  global _source\n  _source = py\n  scope = {}\n\n  try:\n    exec(py, scope)\n    _mod = scope\n    return 'ok' # string is passed easily to JS side\n  except Exception as e: # eg. SyntaxError\n    return encodeException(e)\n\nwindow.load_python_module = load_python_module\n\ndef validate_function(functionName, parameterNames):\n\n  func = _mod.get(functionName, None)\n\n  errors = []\n  if func is None:\n    errors.append(f'Expected implementation of decomposition function \"{functionName}\" not found.')\n  else:\n    sig = inspect.signature(func)\n    actualParamNames = [name for name in sig.parameters.keys()]\n    if parameterNames != actualParamNames:\n      errors.append(f'''Implementation of decomposition function \"{functionName}\" does not have expected parameters \"{', '.join(parameterNames)}\"''')\n    # TODO could check parameter type (keyword, *, **)\n  return errors\nwindow.validate_function = validate_function\n\ndef has_function(name):\n  return name in _mod\nwindow.has_function = has_function\n\ndef list_to_tuple(l):\n  if isinstance(l, list):\n    return tuple(l)\n  return l\n\ndef js_date_to_datetime(js_date):\n  year = js_date.getFullYear()\n  month = js_date.getMonth() + 1\n  day = js_date.getDate()\n  hour = js_date.getHours()\n  minute = js_date.getMinutes()\n  second = js_date.getSeconds()\n  milli = js_date.getMilliseconds()\n  tz_offset = js_date.getTimezoneOffset()\n  tz = datetime.timezone(datetime.timedelta(minutes=-tz_offset))\n  res = datetime.datetime(year, month, day, hour, minute, second, milli*1000, tz)\n  return res\nwindow.js_date_to_datetime = js_date_to_datetime\n\ndef datetime_to_js_date(dt):\n  dt = dt.astimezone(datetime.timezone.utc) # js works in UTC\n  return javascript.Date.new(dt.year, dt.month - 1, dt.day, dt.hour, dt.second, dt.microsecond/1000)\nwindow.datetime_to_js_date = datetime_to_js_date\n\ndef unwrapObject(o):\n  if getattr(o, '_type', None) == 'Set':\n    # lists can not be put into sets because they are not hashable.\n    # Here, we turn lists into tuples so that they can be put.\n    return set([unwrapObject(list_to_tuple(obj)) for obj in getattr(o, 'values')])\n  elif isinstance(o, list):\n    return [unwrapObject(obj) for obj in o]\n  elif hasattr(o, 'constructor') and o.constructor.name == 'Date':\n    # turn passed-in attributes that are Javascript Dates into Python datetime objects\n    return js_date_to_datetime(o)\n  return o\n\ndef wrapObject(o):\n  if isinstance(o, set):\n    return { '_type': 'Set', 'values': [wrapObject(obj) for obj in o] }\n  elif isinstance(o, list):\n    return [wrapObject(obj) for obj in o]\n  elif isinstance(o, datetime.datetime):\n    # Turn returned Python datetime instances into Javascript dates\n    return datetime_to_js_date(o)\n  return o\n\n# adapted from fudomo-transform/src/function_runner_base.py\ndef encodeException(e):\n  t, v, tb = sys.exc_info()\n  e_str = traceback.format_exception_only(t, v)[0].strip()\n  stack = traceback.extract_tb(tb)\n  if t == SyntaxError:\n    # quick and dirty special handling of syntax errrors\n    line_nr = int(e_str.split(' ')[-1]) # TODO handle format error\n    line = _source.split('\\n')[line_nr - 1]\n    message = 'SyntaxError: ' + str(e)\n    return json.dumps({ 'message': message, 'stack': [{ 'startLine': line_nr, 'endLine': line_nr, 'startCol': len(line)-len(line.lstrip()) + 1, 'endCol': len(line.rstrip()) + 1 }] })\n\n  processed_stack = []\n  for entry in stack:\n    if entry.filename != __file__:\n\n      orig_line = entry.line\n      if not orig_line:\n        try:\n          source_lines = _source.split('\\n')\n          orig_line = source_lines[entry.lineno - 1]\n        except IndexError:\n          orig_line = None\n\n      if orig_line:\n        start_col = len(re.match(r'^(\\s*)[^\\s]', orig_line).group(1)) + 1\n      else:\n        start_col = 0\n      e = { 'filename': entry.filename, 'startLine': entry.lineno, 'endLine': entry.lineno, 'startCol': start_col, 'endCol': start_col + len(entry.line) }\n      if orig_line is not None:\n        e['line'] = orig_line\n      processed_stack.append(e)\n\n  exc_obj = { 'message': e_str, 'stack': processed_stack }\n  return json.dumps(exc_obj)\n\ndef call_function(name, args):\n  args = [unwrapObject(a) for a in args]\n  f = _mod.get(name)\n  is_exception = False\n  try:\n    res = f(*args)\n  except Exception as e:\n    is_exception = True\n    res = encodeException(e)\n  return is_exception, wrapObject(res)\nwindow.call_function = call_function\n\ndef to_string(obj):\n  return str(unwrapObject(obj))\nwindow.to_string = to_string\n",window.brython();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(kt.DecompositionFunctionRunner),Nt=_t;function It(e,t){var n=[];try{var r=pt.loaders.oyaml.loadFromSource(e.inputs.find((function(e){return e.name===t})).input),a=new pt.CenteredModel(r,r);if(!e.metamodel)return[at("Can not validate input: metamodel is empty")];var o=et.a.parse(e.metamodel);n=new lt.a.DataValidator(o,a).errors}catch(i){if(void 0===i.markers)throw console.error(i),i;n=n.concat(i.markers)}return n}function Pt(e,t){try{var n=It(e,t);e.inputs.find((function(e){return e.name===t})).markers=n;var r=n.length>0?at("Input validation error(s) found:\n"+n.map((function(e){return e.message})).join("\n"),"pre"):rt("Input data validation successful.");e.status=r}catch(a){e.status=ot(a)}return e}function Ft(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(Ke.a)(Ue.a.mark((function e(t){var n,r,a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,"python"===t.functionsLanguage&&(n=new Nt(t.functions)),"javascript"!==t.functionsLanguage){e.next=8;break}return r=Object(dt.getRunnerClassById)("javascript"),e.next=6,Object(dt.importModule)(t.functions);case 6:a=e.sent,n=new r(a);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(e,t){return At.apply(this,arguments)}function At(){return(At=Object(Ke.a)(Ue.a.mark((function e(t,n){var r,a,o,i,c,u,s,l,f,p;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,n(Dt.setFunctionsMarkers([])),n(Dt.setTransformationMarkers([])),a=null,e.prev=5,e.next=8,Ft(t);case 8:a=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),n(Dt.setFunctionsMarkers([{message:e.t0.message,markerContext:{type:"functions",location:e.t0.location}}])),r.push(ot(e.t0));case 15:if((o=lt.a.parseFudomo(t.transformation)).hasError&&(i=o.errors,n(Dt.setTransformationMarkers(i)),r.push(at("Transformation error(s) found:\n"+i.map((function(e){return e.error})).join("\n"),"pre")),o=null),null===a||null===o){e.next=30;break}return c=lt.a.getSkeletonGenerator(t.functionsLanguage),u=c.getFunctionValidationCriteria(o),e.next=22,a.validateFunctions(t.functions,u,o);case 22:return s=e.sent,l=s.filter((function(e){return"function"===e.markerContext.type})),f=s.filter((function(e){return"transformation"===e.markerContext.type})),n(Dt.setFunctionsMarkers(l)),p=f.map((function(e){return{message:e.message,markerContext:{type:"transformation",location:o.getDecompositionBySignature(e.markerContext.decompositionQualifiedName).characterRange.toArray()},fixes:e.fixes}})),n(Dt.setTransformationMarkers(p)),s.length>0&&r.push(at("Decomposition function validation error(s) found:\n"+s.map((function(e){return e.message})).join("\n"),"pre")),e.abrupt("return",0===s.length);case 30:e.next=36;break;case 32:return e.prev=32,e.t1=e.catch(1),r.push(ot(e.t1)),e.abrupt("return",!1);case 36:return e.prev=36,n(Dt.setProjectStatus(r)),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[1,32,36,39],[5,11]])})))).apply(this,arguments)}var Lt=Object(Ye.b)({name:"project",initialState:null,reducers:{inferMetamodel:function(e){l.a.event({category:"Project",action:"Inferred Metamodel",label:e.url});try{var t,n=new lt.a.MetamodelInferer,r=[],a=Object(c.a)(e.inputs);try{for(a.s();!(t=a.n()).done;){var o=t.value;try{var i=pt.loaders.oyaml.loadFromSource(o.input);r.push(new pt.CenteredModel(i,i)),o.markers=[]}catch(s){return e.status=at('Error in input "'.concat(o.name,'":\n').concat(s.message),"pre"),void(o.markers=s.markers)}}}catch(f){a.e(f)}finally{a.f()}var u=n.inferMetamodel(r);tt.nullOptions.nullStr="",e.metamodel=u.size>0?et.a.stringify(u):"Root:",e.status=rt("Metamodel successfully inferred.")}catch(s){e.status=ot(s)}},generateSkeletons:function(e){l.a.event({category:"Project",action:"Generated Skeletons",label:e.url+" ("+e.functionsLanguage+")"});try{var t=lt.a.getSkeletonGenerator(e.functionsLanguage),n=lt.a.parseFudomo(e.transformation);if(n.hasError)e.transformationMarkers=n.errors,e.status=at("Transformation has error(s): "+n.errors.map((function(e){return e.message})).join("\n"),"pre");else{var r=t.generateSkeleton(n);e.functions=r,e.functionMarkers=[],e.status=rt("Decomposition function skeletons successfully generated.")}}catch(a){e.status=ot(a)}},validateTransformation:function(e){l.a.event({category:"Project",action:"Validated Transformation",label:e.url});try{if(e.metamodel){var t=et.a.parse(e.metamodel),n=lt.a.parseFudomo(e.transformation);if(n.hasError)e.transformationMarkers=n.errors,e.status=at("Can not parse transformation");else{var r=new lt.a.TransformationValidator(t,n),a=r.errors.length>0?at("Transformation validation error(s) found:\n"+r.errors.map((function(e){return e.message})).join("\n"),"pre"):rt("Transform validation successful.");e.transformationMarkers=r.errors,e.status=a}}else e.status=at("Can not validate transformation: metamodel is empty")}catch(o){e.status=ot(o)}},validateInput:function(e,t){if(void 0===t.payload)throw new Error("inputId missing");l.a.event({category:"Project",action:"Validated Input",label:e.url+"."+t.payload}),Pt(e,t.payload)},validateInputs:function(e){l.a.event({category:"Project",action:"Validated Inputs",label:e.url}),function(e){var t,n=[],r=Object(c.a)(e.inputs);try{for(r.s();!(t=r.n()).done;){var a=t.value;try{var o=It(e,a.name);a.markers=o,o.length>0&&n.push('Input "'.concat(a.name,'" error(s):\n')+o.map((function(e){return"- "+e.message})).join("\n"))}catch(i){n.push(String(i))}}}catch(u){r.e(u)}finally{r.f()}e.status=0===n.length?rt("Input data validation successful."):at(n.join("\n"),"pre")}(e)},setMetamodel:function(e,t){e.metamodel=t.payload,e.status=null},setMetamodelMarkers:function(e,t){e.metamodelMarkers=t.payload,e.status=null},setTransformation:function(e,t){e.transformation=t.payload,e.status=null},setTransformationMarkers:function(e,t){e.transformationMarkers=t.payload,e.status=null},setFunctions:function(e,t){e.functions=t.payload,e.status=null},setFunctionsMarkers:function(e,t){e.functionsMarkers=t.payload,e.status=null},setFunctionsLanguage:function(e,t){e.functionsLanguage=t.payload,e.status=null},createInput:function(e,t){if(console.log(e,t),null===e)return e;t.payload.projectName===e.name&&(e.inputs.push({name:t.payload.name,input:t.payload.value||""}),e.status=null)},deleteInput:function(e,t){if(null===e)return e;t.payload.projectName===e.name&&(e.inputs.splice(e.inputs.findIndex((function(e){return e.name===t.payload.name})),1),e.status=null)},renameInput:function(e,t){if(null===e)return e;if(t.payload.projectName===e.name){var n,r=Object(c.a)(e.inputs);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.name===t.payload.name&&(a.name=t.payload.newName,e.status=null)}}catch(o){r.e(o)}finally{r.f()}}},setInput:function(e,t){if(void 0===t.payload.inputId)throw new Error("inputId missing");var n=e.inputs.find((function(e){return e.name===t.payload.inputId}));null!==n&&(n.input=t.payload.value),e.status=null},setInputMarkers:function(e,t){if(void 0===t.payload.inputId)throw new Error("inputId missing");e.inputs.find((function(e){return e.name===t.payload.inputId})).markers=t.payload.value,e.status=null},setOutput:function(e,t){e.output=t.payload,e.status=null},setOutputFormat:function(e,t){e.outputFormat=t.payload,e.status=null},setProject:function(e,t){var n=null;return t.payload&&((n=Object.assign({},t.payload)).status=null),n},setProjectStatus:function(e,t){e.status=Array.isArray(t.payload)?t.payload:[t.payload]},setHasUnsavedData:function(e,t){t.payload?e.hasUnsavedData=!0:delete e.hasUnsavedData}}}),Mt={transform:function(e){return function(){var t=Object(Ke.a)(Ue.a.mark((function t(n,r){var a,o,i,c,u,s,f,p,d,m,h,v,y,g,b,k,w,j,x,E,O,S,C;return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}throw new Error("inputId missing");case 2:return a=r().project,l.a.event({category:"Project",action:"Ran Transformation",label:a.url}),n(Dt.setOutput("")),n(Dt.setMetamodelMarkers([])),n(Dt.setInputMarkers({inputId:e,value:[]})),n(Dt.setFunctionsMarkers([])),n(Dt.setTransformationMarkers([])),o=[],t.prev=10,i=!0,c=null,t.prev=13,t.next=16,Ft(a);case 16:c=t.sent,t.next=23;break;case 19:t.prev=19,t.t0=t.catch(13),o.push(ot(t.t0)),i=!1;case 23:u=void 0;try{u=pt.loaders.oyaml.loadFromSource(a.inputs.find((function(t){return t.name===e})).input)}catch(_){n(Dt.setInputMarkers({inputId:e,value:_.markers})),o.push(ot(_)),i=!1}return(s=lt.a.parseFudomo(a.transformation)).hasError&&(f=s.errors,n(Dt.setTransformationMarkers(f)),o.push(at("Transformation error(s) found:\n"+f.map((function(e){return e.error})).join("\n"),"pre")),s=null,i=!1),t.next=29,Tt(a,n);case 29:t.sent||(i=!1),p=null;try{p=et.a.parse(a.metamodel)}catch(_){d=_.message,m=[[0,0],[0,0]],_.source&&_.source.rangeAsLinePos&&(h=_.source.rangeAsLinePos,m=[[h.start.line-1,h.start.col-1],[h.end.line-1,h.end.col-1]]),n(Dt.setMetamodelMarkers([{message:d,markerContext:{type:"metamodel",location:m}}])),o.push(ot(_)),i=!1}if(0===a.metamodel.trim().length&&(v="Empty metamodel is not allowed. Click <Infer> to create metamodel for current input data.",n(Dt.setMetamodelMarkers([{message:v,markerContext:{type:"metamodel",location:[[0,0],[0,0]]}}])),o.push(at(v)),i=!1),void 0!==u&&null!==p&&(y=new pt.CenteredModel(u,u),(g=new lt.a.DataValidator(p,y)).errors.length>0&&(n(Dt.setInputMarkers({inputId:e,value:g.errors})),b=at("Input validation error(s) found:\n"+g.errors.map((function(e){return e.message})).join("\n"),"pre"),o.push(b),i=!1)),null!==s&&null!==p&&(s.hasError||(k=new lt.a.TransformationValidator(p,s)).errors.length>0&&(n(Dt.setTransformationMarkers(k.errors)),w=at("Transformation validation error(s) found:\n"+k.errors.map((function(e){return e.message})).join("\n"),"pre"),o.push(w),i=!1)),!i){t.next=56;break}return j=new pt.CenteredModel(u,u),x=new lt.a.TransformationContext(s,j,c),E=performance.now(),t.next=42,lt.a.transform(x);case 42:O=t.sent,S=performance.now(),console.log("Transformation took ".concat(S-E," ms")),t.prev=45,n(Dt.setOutput(O)),t.next=55;break;case 49:return t.prev=49,t.t1=t.catch(45),t.next=53,c.toString(O);case 53:C=t.sent,n(Dt.setOutput([C]));case 55:o.push(rt("Transformation successful."));case 56:t.next=62;break;case 58:t.prev=58,t.t2=t.catch(10),t.t2.fudomoStack&&n(Dt.setFunctionsMarkers([{message:t.t2.message,markerContext:{type:"functions",location:t.t2.location}}])),o.push(ot(t.t2));case 62:return t.prev=62,n(Dt.setProjectStatus(o)),t.finish(62);case 65:case"end":return t.stop()}}),t,null,[[10,58,62,65],[13,19],[45,49]])})));return function(e,n){return t.apply(this,arguments)}}()},applyQuickfix:function(e){return function(){var t=Object(Ke.a)(Ue.a.mark((function t(n,r){var a,o,i,c,u,s;return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r().project,o=ft.RangeReplaceQuickfixProposal.fromObj(e.proposal),i=null,"functions"!==o.appliesTo){t.next=7;break}i=a.functions,t.next=16;break;case 7:if("transformation"!==o.appliesTo){t.next=11;break}i=a.transformation,t.next=16;break;case 11:if("input"!==o.appliesTo){t.next=15;break}i=a.inputs.find((function(t){return t.name===e.inputId})).input,t.next=16;break;case 15:throw new Error;case 16:if(t.prev=16,c=o.applyToSource(i),"functions"===o.appliesTo?n(Dt.setFunctions(c)):"transformation"===o.appliesTo?n(Dt.setTransformation(c)):"input"===o.appliesTo&&n(Dt.setInput({inputId:e.inputId,value:c})),u=Object(nt.a)(a),"functions"!==o.appliesTo){t.next=25;break}u.functions=c,Tt(u,n),t.next=36;break;case 25:if("transformation"!==o.appliesTo){t.next=28;break}t.next=36;break;case 28:if("input"!==o.appliesTo){t.next=35;break}(s=u.inputs.find((function(t){return t.name===e.inputId}))).input=c,Pt(u,e.inputId),n(Dt.setInputMarkers({inputId:e.inputId,value:s.markers})),t.next=36;break;case 35:throw new Error("Not implemented");case 36:t.next=42;break;case 38:if(t.prev=38,t.t0=t.catch(16),t.t0 instanceof ft.QuickfixProposalNoLongerApplicableException){t.next=42;break}throw t.t0;case 42:case"end":return t.stop()}}),t,null,[[16,38]])})));return function(e,n){return t.apply(this,arguments)}}()},validateFunctions:function(){return function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){var r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n().project,l.a.event({category:"Project",action:"Validated Functions",label:r.url}),Tt(r,t)&&t(Dt.setProjectStatus(rt("Decomposition function validation successful.")));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},Dt=Object(Qe.a)(Object(Qe.a)({},Lt.actions),Mt),zt=Lt.reducer,qt={color:"var(--theme-neutral-500)",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5em",fontWeight:"500"},Bt={position:"absolute",backgroundColor:"rgba(255, 255, 255, 0.85)",color:"var(--theme-neutral-500)",width:"100%",height:"100%",zIndex:1e4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5em",fontWeight:"500"},$t=["Metamodel","Transformation","Functions","Input","Output"];function Vt(e){var t=Object(v.c)().dispatch,n=Object(v.b)((function(e){return e.project})),o=e.inputId||void 0,i=e.projectName,c=e.workspace,s=e.workspaceActions,l=Object(r.useContext)(He).showStatus,f=Object(v.b)((function(e){var t;return null===(t=e.project)||void 0===t?void 0:t.status})),m=Object(v.b)((function(e){var t;return!0===(null===(t=e.project)||void 0===t?void 0:t.hasUnsavedData)})),y=Object(r.useState)(!1),g=Object(p.a)(y,2),b=g[0],w=g[1];Object(r.useEffect)((function(){l(f)}),[l,f]),Object(r.useEffect)((function(){b&&t(s.loadProject(i))}),[i,t,b,s]),Object(r.useEffect)((function(){w(c&&c.isInitialized)}),[c,w]);var j=Object(r.useCallback)((function(e){t(Dt.setMetamodel(e))}),[t]),x=Object(r.useCallback)((function(e){t(Dt.setTransformation(e))}),[t]),E=Object(r.useCallback)((function(e){t(Dt.setFunctions(e))}),[t]),S=Object(r.useCallback)((function(e){t(Dt.setFunctionsLanguage(e)),t(Dt.setFunctions(""))}),[t]),C=Object(r.useCallback)((function(e){t(Dt.setInput({inputId:o,value:e}))}),[t,o]),_=Object(r.useCallback)((function(e){t(Dt.setOutput(e))}),[t]),N=Object(r.useCallback)((function(e){t(Dt.setOutputFormat(e.target.value))}),[t]),I=Object(r.useCallback)((function(e){t(Dt.inferMetamodel())}),[t]),P=Object(r.useCallback)((function(e){t(Dt.generateSkeletons())}),[t]),F=Object(r.useCallback)((function(e){t(Dt.transform(o))}),[t,o]),R=Object(r.useCallback)((function(e){t(Dt.validateInput(o))}),[t,o]),T=Object(r.useCallback)((function(e){t(Dt.validateInputs())}),[t]),A=Object(r.useCallback)((function(e){t(Dt.validateTransformation())}),[t]),L=Object(r.useCallback)((function(e){t(Dt.validateFunctions())}),[t]),M=Object(r.useCallback)((function(e){var n={proposal:e};"input"===e.appliesTo&&(n.inputId=o),t(Dt.applyQuickfix(n))}),[t,o]),D=Object(v.b)((function(e){if(e.project&&!n.isLoading)return n.inputs.find((function(e){return e.name===o}))})),z=Object(r.useState)(null),q=Object(p.a)(z,2),B=q[0],$=q[1],V=Object(r.useCallback)((function(e,t,n){return $(e),null}),[$]);return Object(r.useEffect)((function(){m||null===B||(B.resume(),$(null))}),[m,B,$]),a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{handler:V,when:m}),!b&&a.a.createElement(k,{message:"Please wait..."}),b&&!n&&a.a.createElement(k,{message:"Project could not be found."}),n&&n.isLoading&&a.a.createElement("div",{style:qt},a.a.createElement(h.a,null),"Loading"),n&&!n.isLoading&&a.a.createElement(u.a,{height:"100%",width:"100%",position:"relative",boxSizing:"border-box",overflow:"hidden"},null!==B&&a.a.createElement("div",{style:Bt},a.a.createElement(h.a,null),"Saving"),a.a.createElement(We,{titles:$t},a.a.createElement(W,{value:n.metamodel,disabled:n.readOnly,inferDisabled:e.metamodelInferDisabled||n.readOnly,markers:n.metamodelMarkers,onInferMetamodelClicked:I,onChange:j}),a.a.createElement(Q,{value:n.transformation,disabled:n.readOnly,validateDisabled:e.transformationValidateDisabled,markers:n.transformationMarkers,onValidateTransformClicked:A,onChange:x,onQuickfixProposalClicked:M}),a.a.createElement(K,{value:n.functions,disabled:n.readOnly,markers:n.functionsMarkers,language:n.functionsLanguage,languageSelectDisabled:e.functionsLanguageSelectDisabled||n.readOnly,generateDisabled:e.functionsGenerateDisabled||n.readOnly,validateDisabled:e.functionsValidateDisabled,onChange:E,onSelectedLanguageChanged:S,onGenerateSkeletonsClicked:P,onValidateFunctionsClicked:L,onQuickfixProposalClicked:M}),a.a.createElement("div",{style:{width:"100%",height:"100%"}},void 0!==o&&void 0!==D&&a.a.createElement(Y,{value:D?D.input:"",disabled:n.readOnly,markers:D?D.markers:[],onChange:C,validateDisabled:e.inputValidateDisabled,onValidateInputClicked:R,onQuickfixProposalClicked:M}),void 0!==o&&void 0===D&&a.a.createElement(O,{title:"Input Models"},a.a.createElement(k,{message:"Input could not be found."})),void 0===o&&a.a.createElement(je,{project:n,onValidateInputsClicked:T})),a.a.createElement(fe,{value:n.output,disabled:n.readOnly,format:n.outputFormat,onSelectedFormatChanged:N,onChange:_,onTransformClicked:F,transformDisabled:void 0===o||e.outputTransformDisabled}))))}var Jt=n(1486),Wt=n(1487),Ht=n(434),Zt=n.n(Ht),Qt=n(1488),Gt={marginRight:"1em"},Ut={flexGrow:1};function Kt(e){var t=Object(v.b)((function(e){return!e.environment.isEditorReady||!e.environment.isRuntimeReady})),n=Object(v.b)((function(e){return e.project?e.project.name:""}));return a.a.createElement("div",{className:"AppBar"},a.a.createElement(Jt.a,{position:"static",className:"AppBar"},a.a.createElement(Wt.a,null,a.a.createElement(y.a,{className:"AppTitle",variant:"h6"},"Try Fudomo!"),a.a.createElement(y.a,{style:Ut,variant:"h6"},n),t&&a.a.createElement(Qt.a,{className:"Progress",color:"inherit"}),a.a.createElement("a",{className:"NoLinkStyling",style:Gt,href:"/try-fudomo/docs",target:"_blank",rel:"opener"},a.a.createElement(Zt.a,null)))))}var Yt=n(442),Xt=n.n(Yt),en=n(1495),tn=n(1496),nn=n.n(tn),rn=n(1497),an=n.n(rn);function on(e,t,n){return Object(Ye.b)({name:e,initialState:t,reducers:{_setInitialized:function(e){e.isInitialized=!0},_setProjects:function(e,t){e.projects=t.payload},_addProject:function(e,t){var n=t.payload;e.projects.push({name:n.name,url:n.url,inputs:n.inputs.map((function(e){return e.name}))})},_deleteProject:function(e,t){var n=e.projects.findIndex((function(e){return e.name===t.payload}));e.projects.splice(n,1)},_renameProject:function(e,t){var n=t.payload,r=n.name,a=n.newName,o=e.projects.find((function(e){return e.name===r}));o.name=a,o.url=o.url.slice(0,-r.length)+a},_createInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name;e.projects.find((function(e){return e.name===r})).inputs.push(a)},_deleteInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name,o=e.projects.find((function(e){return e.name===r}));o.inputs.splice(o.inputs.findIndex((function(e){return e===a})),1)},_renameInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name,o=n.newName,i=e.projects.find((function(e){return e.name===r}));i.inputs=i.inputs.map((function(e){return e===a?o:e}))},_setSignedIn:function(e,t){e.isSignedIn=t.payload},_setCapabilities:function(e,t){Object.assign(e.capabilities,t.payload)},_setProgressing:function(e,t){e.progressing=t.payload}}})}function cn(e,t){var n={init:function(){return function(){var r=Object(Ke.a)(Ue.a.mark((function r(a,o){var i;return Ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),i=Object(Qe.a)(Object(Qe.a)({},t),n),r.next=5,e.init(a,i);case 5:return r.next=7,a(n.reload());case 7:a(t._setInitialized());case 8:return r.prev=8,a(t._setProgressing(!1)),r.finish(8);case 11:case"end":return r.stop()}}),r,null,[[0,,8,11]])})));return function(e,t){return r.apply(this,arguments)}}()},reload:function(){return function(){var r=Object(Ke.a)(Ue.a.mark((function r(a,o){var i,u,s,l,f,p;return Ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),i=o(),r.next=5,e.getProjectsMetadata();case 5:u=r.sent,a(t._setProjects(u)),s=Object(c.a)(u);try{for(s.s();!(l=s.n()).done;)p=l.value,(null===(f=i.project)||void 0===f?void 0:f.url)===p.url&&a(n.loadProject(p.name))}catch(d){s.e(d)}finally{s.f()}r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),a(ct(at(r.t0.message)));case 14:return r.prev=14,a(t._setProgressing(!1)),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,11,14,17]])})));return function(e,t){return r.apply(this,arguments)}}()},loadProject:function(n){return function(){var r=Object(Ke.a)(Ue.a.mark((function r(a,o){var i,c;return Ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=window.location.pathname,a(Dt.setProject({url:e.getUrlForProjectName(n),name:n,isLoading:!0})),r.prev=2,a(t._setProgressing(!0)),r.next=6,e.loadProject(n);case 6:if(c=r.sent,window.location.pathname===i){r.next=9;break}return r.abrupt("return");case 9:a(Dt.setProject(c)),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(2),a(ct(at('Can not load project "'.concat(n,'": ').concat(r.t0.message)))),a(Dt.setProject(null));case 16:return r.prev=16,a(t._setProgressing(!1)),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[2,12,16,19]])})));return function(e,t){return r.apply(this,arguments)}}()},unloadProject:function(e){return function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,r){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n.commitProject((function(){t(Dt.setProject(null))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},createEmptyProject:function(e){var t=e.name,r=e.onCreated;return function(){var e=Object(Ke.a)(Ue.a.mark((function e(a,o){var i;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={name:t,inputs:[{name:"input1",input:""}],metamodel:"",transformation:"",functions:"",functionsLanguage:"javascript",output:"",outputFormat:"text"},a(n.createProject({project:i,onCreated:r}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},createProject:function(n){var r=n.project,a=n.onCreated;return function(){var n=Object(Ke.a)(Ue.a.mark((function n(o,i){return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(t._setProgressing(!0)),n.next=4,e.createProject(r);case 4:r=n.sent,o(t._addProject(r)),a&&a(r),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),o(ct(at(n.t0.toString())));case 12:return n.prev=12,o(t._setProgressing(!1)),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteProject:function(n){return function(){var r=Object(Ke.a)(Ue.a.mark((function r(a,o){return Ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),r.next=4,e.deleteProject(n);case 4:a(t._deleteProject(n));case 5:return r.prev=5,a(t._setProgressing(!1)),r.finish(5);case 8:case"end":return r.stop()}}),r,null,[[0,,5,8]])})));return function(e,t){return r.apply(this,arguments)}}()},renameProject:function(n){var r=n.name,a=n.newName,o=n.onRename;return function(){var n=Object(Ke.a)(Ue.a.mark((function n(i,c){return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i(t._setProgressing(!0)),n.next=4,e.renameProject(r,a);case 4:i(t._renameProject({name:r,newName:a})),o&&o(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),i(ct(at(n.t0.toString())));case 11:return n.prev=11,i(t._setProgressing(!1)),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})));return function(e,t){return n.apply(this,arguments)}}()},createInput:function(e){return function(){var n=Object(Ke.a)(Ue.a.mark((function n(r,a){return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(t._setProgressing(!0)),r(t._createInput(e)),r(Dt.createInput(e))}finally{r(t._setProgressing(!1))}case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},deleteInput:function(e){return function(){var n=Object(Ke.a)(Ue.a.mark((function n(r,a){var o,i;return Ue.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.projectName,i=e.name;try{r(t._setProgressing(!0)),r(t._deleteInput({projectName:o,name:i})),r(Dt.deleteInput({projectName:o,name:i}))}finally{r(t._setProgressing(!1))}case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},renameInput:function(e){var n=e.projectName,r=e.name,a=e.newName,o=e.onRename;return function(){var e=Object(Ke.a)(Ue.a.mark((function e(i,c){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i(t._setProgressing(!0)),i(t._renameInput({projectName:n,name:r,newName:a})),i(Dt.renameInput({projectName:n,name:r,newName:a})),o&&o()}finally{i(t._setProgressing(!1))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},setInput:function(e){return function(){var t=Object(Ke.a)(Ue.a.mark((function t(n,r){return Ue.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Dt.setInput(e));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},signIn:function(){return function(){var r=Object(Ke.a)(Ue.a.mark((function r(a,o){return Ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),r.next=4,e.signIn(a,Object(Qe.a)(Object(Qe.a)({},t),n));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),a(ct(ot(r.t0)));case 9:return r.prev=9,a(t._setProgressing(!1)),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[0,6,9,12]])})));return function(e,t){return r.apply(this,arguments)}}()},signOut:function(r){return function(){var a=Object(Ke.a)(Ue.a.mark((function a(o,i){return Ue.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o(t._setProgressing(!0)),a.next=4,e.signOut(o,Object(Qe.a)(Object(Qe.a)({},t),n));case 4:r&&r(),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),o(ct(ot(a.t0)));case 10:return a.prev=10,o(t._setProgressing(!1)),a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})));return function(e,t){return a.apply(this,arguments)}}()},commitProject:function(n){return function(){var r=Object(Ke.a)(Ue.a.mark((function r(a,o){var i,c;return Ue.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===(i=o()).project){r.next=14;break}return r.prev=2,a(t._setProgressing(!0)),delete(c=Object(Qe.a)({},i.project)).hasUnsavedData,delete c.status,delete c.isLoading,r.next=10,e.saveProject(c);case 10:n&&n();case 11:return r.prev=11,a(t._setProgressing(!1)),r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[2,,11,14]])})));return function(e,t){return r.apply(this,arguments)}}()}};return n}var un="tryFudomoLocalProjectsV2";function sn(e){var t=JSON.parse(localStorage[un]||"[]"),n=e(t);void 0===n&&(n=t),localStorage[un]=JSON.stringify(n)}function ln(e){return e.name||e.url?e.url.split("/").slice(-1)[0]:null}var fn={init:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==window.localStorage.localProjects&&void 0===window.localStorage[un]&&(window.localStorage[un]=window.localStorage.localProjects,sn((function(e){var t,n=Object(c.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.name=ln(r)}}catch(a){n.e(a)}finally{n.f()}})),console.log("Migrated localStorage.localProjects to localStorage.".concat(un))),window.addEventListener("storage",(function(e){t(n.reload())}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/local/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(Ke.a)(Ue.a.mark((function e(){var t;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage[un]||"[]"),e.abrupt("return",t.filter((function(e){return Object.keys(e).length>0})).map((function(e){return{name:e.name||e.url.slice("/local/".length),url:e.url,inputs:e.inputs.map((function(e){return e.name}))}})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.url="/local/"+t.name,sn((function(e){return[].concat(Object(ht.a)(e),[t])})),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sn((function(e){var r,a=Object(c.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;ln(o)===t&&(o.name=n,o.url="/local/"+n)}}catch(i){a.e(i)}finally{a.f()}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){var n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(n=JSON.parse(localStorage[un]||"[]").find((function(e){return ln(e)===t}))).hasUnsavedData,e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sn((function(e){return e.filter((function(e){return ln(e)!==t}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){var n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("local"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-local project");case 2:n=!1,sn((function(e){var r,a=Object(c.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.url===t.url&&(Object.assign(o,t),n=!0)}}catch(i){a.e(i)}finally{a.f()}})),n||sn((function(e){e.push(t)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},pn=on("localWorkspace",{name:"local",isInitialized:!1,isSignedIn:!0,capabilities:{canAddProject:!0,canImportProject:!0,canDeleteProject:!0,canRenameProject:!0,canAddInput:!0,canRenameInput:!0,canDeleteInput:!0,requiresSignIn:!1},status:[{type:"success",message:null}],projects:[]}),dn=cn(fn,pn.actions),mn=Object(Qe.a)(Object(Qe.a)({},pn.actions),dn),hn=pn.reducer,vn={name:"example",isInitialized:!1,isSignedIn:!0,capabilities:{canAddProject:!1,canImportProject:!1,canDeleteProject:!1,canRenameProject:!1,canAddInput:!1,canRenameInput:!1,canDeleteInput:!1,requiresSignIn:!1},status:[{type:"success",message:null}],projects:[{url:"/example/concat",name:"concat",inputs:["example1","example2"]},{url:"/example/family2persons",name:"family2persons",inputs:["example1"]},{url:"/example/fsm2dot",name:"fsm2dot",inputs:["example1"]},{url:"/example/fsm2dotjs",name:"fsm2dotjs",inputs:["AlternatingZeroOrOne","EvenZeros"]},{url:"/example/presi2beamer",name:"presi2beamer",inputs:["example1"]},{url:"/example/presisnippets2html",name:"presisnippets2html",inputs:["example1"]}]},yn={init:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/example/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(Ke.a)(Ue.a.mark((function e(){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vn.projects);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){var n,r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==vn.projects.find((function(e){return e.name===t}))){e.next=2;break}throw new Error("Unknown example project");case 2:return e.next=4,xt.a.get("/examples/".concat(t,".yaml"));case 4:return n=e.sent,(r=et.a.parse(n.data)).isLoading=!1,r.readOnly=!0,r.name=t,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},gn=on("examplesWorkspace",vn),bn=cn(yn,gn.actions),kn=Object(Qe.a)(Object(Qe.a)({},gn.actions),bn),wn=gn.reducer;function jn(){return xn.apply(this,arguments)}function xn(){return(xn=Object(Ke.a)(Ue.a.mark((function e(){var t,n,r,a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=void 0;case 2:return r={spaces:"appDataFolder",pageSize:100,fields:"nextPageToken, files(id, name)"},void 0!==n&&(r.pageToken=n),e.next=6,window.gapi.client.drive.files.list(r);case 6:a=e.sent,t=[].concat(Object(ht.a)(t),Object(ht.a)(a.result.files)),n=a.result.nextPageToken;case 9:if(void 0!==n){e.next=2;break}case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function En(e){return On.apply(this,arguments)}function On(){return(On=Object(Ke.a)(Ue.a.mark((function e(t){var n,r,a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={q:"name='".concat(t.replace(/'/g,"\\'"),"'"),spaces:"appDataFolder",pageSize:2,fields:"nextPageToken, files(id, name)"},e.next=3,window.gapi.client.drive.files.list(n);case 3:if(0!==(r=e.sent).result.files.length){e.next=6;break}return e.abrupt("return",null);case 6:return a=r.result.files[0].id,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sn(e){return Cn.apply(this,arguments)}function Cn(){return(Cn=Object(Ke.a)(Ue.a.mark((function e(t){var n,r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,En(t);case 3:return n=e.sent,e.next=6,window.gapi.client.drive.files.get({fileId:n,alt:"media"});case 6:return r=e.sent,e.abrupt("return",r.body);case 10:if(e.prev=10,e.t0=e.catch(0),403!==e.t0.status){e.next=14;break}throw new Error("Not logged into Google Drive");case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function _n(e,t,n){return Nn.apply(this,arguments)}function Nn(){return(Nn=Object(Ke.a)(Ue.a.mark((function e(t,n,r){var a,o,i,c,u,s,l,f;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En(t);case 2:return a=e.sent,o="foo_bar_baz",i="\r\n--foo_bar_baz\r\n","\r\n--foo_bar_baz--",c={name:t,parents:["appDataFolder"],mimeType:r},u="POST",s="https://www.googleapis.com/upload/drive/v3/files",null!==a&&(s=s+"/"+a,u="PATCH",delete c.parents),l=i+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify(c)+i+"Content-Type: "+r+"\r\n\r\n"+n+"\r\n\r\n--foo_bar_baz--",f=window.gapi.client.request({path:s,method:u,params:{uploadType:"multipart"},headers:{"Content-Type":"multipart/related; boundary="+o},body:l}),e.abrupt("return",new Promise((function(e,t){f.then((function(t){e(t)}),(function(e){t(e)}))})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(e){return Pn.apply(this,arguments)}function Pn(){return(Pn=Object(Ke.a)(Ue.a.mark((function e(t){var n,r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(Qe.a)({},t)).inputs=n.inputs||[],delete n.status,delete n.isLoading,r={url:n.url,name:n.url.slice("/gdrive/".length),inputs:n.inputs.map((function(e){return e.name}))},e.next=7,_n("metadata-".concat(r.name,".json"),JSON.stringify(r),"application/json");case 7:return e.next=9,_n("project-".concat(r.name,".json"),JSON.stringify(n),"application/json");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fn(e){return Rn.apply(this,arguments)}function Rn(){return(Rn=Object(Ke.a)(Ue.a.mark((function e(t){var n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En(t);case 2:if(null!==(n=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,window.gapi.client.drive.files.delete({fileId:n});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tn(e){return An.apply(this,arguments)}function An(){return(An=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn("project-".concat(t,".json"));case 2:return e.next=4,Fn("metadata-".concat(t,".json"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ln={init:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){var r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){var r={canAddProject:e,canImportProject:e,canDeleteProject:e,canRenameProject:e,canAddInput:e,canRenameInput:e,canDeleteInput:e};t(n._setCapabilities(r)),t(n._setSignedIn(e))},e.abrupt("return",new Promise((function(e,a){window.gapi.load("client:auth2",(function(){window.gapi.client.init({apiKey:"AIzaSyDD7_sgciu8fRVTrgGeCzIaLl_1g7s66Lo",clientId:"937789607311-rfogt5dmebkjcnfehbtshe13s1s433us.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file"}).then((function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen((function(e){r(e),t(n.reload())})),r(window.gapi.auth2.getAuthInstance().isSignedIn.get()),e()}),(function(e){console.log(e)}))}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.auth2.getAuthInstance().signIn();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.auth2.getAuthInstance().signOut();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/gdrive/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(Ke.a)(Ue.a.mark((function e(){var t,n,r,a,o,i,u;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.prev=2,e.next=5,jn();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),403!==e.t0.status&&console.log(e.t0);case 11:r=Object(c.a)(n),e.prev=12,r.s();case 14:if((a=r.n()).done){e.next=24;break}if(null===(o=a.value).name.match(/metadata-.*\.json/)){e.next=22;break}return e.next=19,window.gapi.client.drive.files.get({fileId:o.id,alt:"media"});case 19:i=e.sent,u=JSON.parse(i.body),t.push(u);case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(12),r.e(e.t1);case 29:return e.prev=29,r.f(),e.finish(29);case 32:return e.abrupt("return",t);case 33:case"end":return e.stop()}}),e,null,[[2,8],[12,26,29,32]])})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(t.name,'" is not allowed.'));case 2:return t.url="/gdrive/"+t.name,e.next=5,In(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){var r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(n,'" is not allowed.'));case 2:return e.next=4,Ln.loadProject(t);case 4:return(r=e.sent).url="/gdrive/"+n,r.name=n,e.next=9,In(r);case 9:return e.next=11,Tn(t);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){var n,r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn("project-".concat(t,".json"));case 2:return n=e.sent,(r=JSON.parse(n)).isLoading=!1,r.readOnly=!1,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tn(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gdrive"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-gdrive project");case 2:if(!t.isLoading){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,In(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Mn=on("gdriveWorkspace",{name:"gdrive",isInitialized:!1,isSignedIn:!1,capabilities:{canAddProject:!1,canImportProject:!1,canDeleteProject:!1,canRenameProject:!1,canAddInput:!1,canRenameInput:!1,canDeleteInput:!1,requiresSignIn:!0},status:[{type:"success",message:null}],projects:[]}),Dn=cn(Ln,Mn.actions),zn=Object(Qe.a)(Object(Qe.a)({},Mn.actions),Dn),qn=Mn.reducer,Bn=n(300);function $n(e){return{canAddProject:e,canImportProject:e,canDeleteProject:e,canRenameProject:e,canAddInput:e,canRenameInput:e,canDeleteInput:e,requiresSignIn:!0}}var Vn={name:"dropbox",isInitialized:!1,isSignedIn:!1,capabilities:$n(!1),status:[{type:"success",message:null}],projects:[]};function Jn(){return Wn.apply(this,arguments)}function Wn(){return(Wn=Object(Ke.a)(Ue.a.mark((function e(){var t;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==rr){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,rr.filesListFolder({path:""});case 4:return t=e.sent,e.abrupt("return",t.result.entries.map((function(e){return{name:e.name}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hn(e){return Zn.apply(this,arguments)}function Zn(){return(Zn=Object(Ke.a)(Ue.a.mark((function e(t){var n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==rr){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,rr.filesDownload({path:"/"+t});case 4:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var r=new FileReader;r.onloadend=function(t){e(r.result)},r.onerror=function(e){t(r.error)},r.readAsText(n.result.fileBlob)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qn(e,t,n){return Gn.apply(this,arguments)}function Gn(){return(Gn=Object(Ke.a)(Ue.a.mark((function e(t,n,r){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==rr){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,rr.filesUpload({path:"/"+t,contents:n,mode:"overwrite"});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Un(e){return Kn.apply(this,arguments)}function Kn(){return(Kn=Object(Ke.a)(Ue.a.mark((function e(t){var n,r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(Qe.a)({},t)).inputs=n.inputs||[],delete n.status,delete n.isLoading,r={url:n.url,name:n.url.slice("/dropbox/".length),inputs:n.inputs.map((function(e){return e.name}))},e.next=7,Qn("metadata-".concat(r.name,".json"),JSON.stringify(r),"application/json");case 7:return e.next=9,Qn("project-".concat(r.name,".json"),JSON.stringify(n),"application/json");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yn(e){return Xn.apply(this,arguments)}function Xn(){return(Xn=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==rr){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,rr.filesDelete({path:"/"+t});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function er(e){return tr.apply(this,arguments)}function tr(){return(tr=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn("project-".concat(t,".json"));case 2:return e.next=4,Yn("metadata-".concat(t,".json"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nr(e){var t=Object.create(null);return"string"!==typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),r=n.shift(),a=n.length>0?n.join("="):void 0;r=decodeURIComponent(r),a=void 0===a?null:decodeURIComponent(a),void 0===t[r]?t[r]=a:Array.isArray(t[r])?t[r].push(a):t[r]=[t[r],a]})),t):t}var rr=null,ar={init:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){var r,a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){void 0!==window.localStorage.tryFudomoDropboxAccessToken?(rr=new Bn.Dropbox({accessToken:window.localStorage.tryFudomoDropboxAccessToken}),t(n._setCapabilities($n(!0))),t(n._setSignedIn(!0))):t(n._setSignedIn(!1))},window.dropBoxLoginWorkflowCompleted=function(){r(),rr&&t(n.reload())},!window.opener||!window.opener.dropBoxLoginWorkflowCompleted){e.next=13;break}if(!(a=nr(window.location.hash).access_token)){e.next=9;break}return window.localStorage.tryFudomoDropboxAccessToken=a,window.opener.dropBoxLoginWorkflowCompleted(),window.close(),e.abrupt("return");case 9:"access_denied"===nr(window.location.hash).error&&window.close(),e.next=14;break;case 13:r();case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){var r,a,o;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:r=new Bn.Dropbox({clientId:"qplk44ju2ohi85a"}),a="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.public_url,"/"),o=r.auth.getAuthenticationUrl(a),800,window.open(o,"_blank","scrollbars=yes,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=".concat(800,",height=").concat(.85*window.innerHeight,",top=").concat(.1*window.innerHeight,",left=").concat((window.innerWidth-800)/2));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete window.localStorage.tryFudomoDropboxAccessToken,rr=null,t(n._setCapabilities($n(!1))),t(n._setSignedIn(!1)),t(n.reload());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/dropbox/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(Ke.a)(Ue.a.mark((function e(){var t,n,r,a,o,i;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.prev=2,e.next=5,Jn();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),403!==e.t0.status&&console.log(e.t0);case 11:r=Object(c.a)(n),e.prev=12,r.s();case 14:if((a=r.n()).done){e.next=25;break}if(null===(o=a.value).name.match(/metadata-.*\.json/)){e.next=23;break}return e.t1=JSON,e.next=20,Hn(o.name);case 20:e.t2=e.sent,i=e.t1.parse.call(e.t1,e.t2),t.push(i);case 23:e.next=14;break;case 25:e.next=30;break;case 27:e.prev=27,e.t3=e.catch(12),r.e(e.t3);case 30:return e.prev=30,r.f(),e.finish(30);case 33:return e.abrupt("return",t);case 34:case"end":return e.stop()}}),e,null,[[2,8],[12,27,30,33]])})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(t.name,'" is not allowed.'));case 2:return t.url="/dropbox/"+t.name,e.next=5,Un(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){var r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(n,'" is not allowed.'));case 2:return e.next=4,ar.loadProject(t);case 4:return(r=e.sent).url="/dropbox/"+n,r.name=n,e.next=9,Un(r);case 9:return e.next=11,er(t);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){var n,r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn("project-".concat(t,".json"));case 2:return n=e.sent,(r=JSON.parse(n)).isLoading=!1,r.readOnly=!1,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("dropbox"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-dropbox project");case 2:if(!t.isLoading){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Un(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},or=on("dropboxWorkspace",Vn),ir=cn(ar,or.actions),cr=Object(Qe.a)(Object(Qe.a)({},or.actions),ir),ur=or.reducer,sr=n(1493),lr=n(301),fr=n.n(lr),pr=n(236),dr=n.n(pr),mr=n(237),hr=n.n(mr),vr=n(314),yr=n(1494),gr=n(230),br=n(231),kr=n(435),wr=n.n(kr),jr=function(e){e.cancelable&&e.preventDefault()};function xr(e){return wr.a.useLongPress(e,{captureEvent:!0,onStart:function(){document.addEventListener("contextmenu",jr)},onFinish:function(){document.removeEventListener("contextmenu",jr)},onCancel:function(){document.removeEventListener("contextmenu",jr)}})}var Er=n(1489),Or=n(1490),Sr=n(1491),Cr=n(1502),_r=n(1500),Nr={color:"var(--theme-neutral-500)"};function Ir(e){var t=e.isOpen,n=e.onImportConfirmed,o=e.onCloseClicked,i=Object(r.useState)(""),c=Object(p.a)(i,2),u=c[0],s=c[1],l=Object(r.useCallback)((function(e){s("")}),[s]),f=Object(r.useCallback)((function(e){n&&n(u)}),[n,u]),d=Object(r.useCallback)((function(e){s(e.target.value)}),[s]);return a.a.createElement(Cr.a,{onEnter:l,onClose:o,open:t,fullWidth:!0,maxWidth:"md"},a.a.createElement(Er.a,null,"Import Project Contents"),a.a.createElement(Or.a,null,a.a.createElement(_r.a,{autoFocus:!0,placeholder:"Paste project here...",multiline:!0,fullWidth:!0,onChange:d,rows:10,rowsMax:20})),a.a.createElement(Sr.a,null,a.a.createElement(S.a,{onClick:o,style:Nr},"Close"),a.a.createElement(S.a,{onClick:f,color:"primary"},"Import")))}var Pr=n(1492),Fr=function(e,t){switch(t.type){case"RESET":return"";case"SET":return t.value;default:throw new Error}};function Rr(e){var t=Object(r.useReducer)(Fr,e.name||""),n=Object(p.a)(t,2),o=n[0],i=n[1],c=Object(r.useCallback)((function(t){13===t.charCode&&(t.preventDefault(),void 0!==o&&o.length>0&&e.onConfirmed(o))}),[e,o]),u=Object(r.useCallback)((function(e){i({type:"SET",value:e.target.value})}),[i]),s=Object(r.useCallback)((function(t){e.onConfirmed(o)}),[e,o]),l=Object(r.useCallback)((function(t){i({type:"SET",value:e.name||""})}),[i,e.name]);return a.a.createElement("div",null,a.a.createElement(Cr.a,{open:e.isOpen,onClose:e.onCloseClicked,onEnter:l,"aria-labelledby":"form-dialog-title"},a.a.createElement(Er.a,{id:"form-dialog-title"},e.title||"Enter a string"),a.a.createElement(Or.a,null,a.a.createElement(Pr.a,null,e.text||"A message"),a.a.createElement(_r.a,{required:!0,autoFocus:!0,margin:"dense",id:"name",label:"Name",fullWidth:!0,value:o,onChange:u,onKeyPress:c})),a.a.createElement(Sr.a,null,a.a.createElement(S.a,{onClick:e.onCloseClicked,color:"primary"},"Cancel"),a.a.createElement(S.a,{disabled:void 0===o||0===o.length,onClick:s,color:"primary"},"Save"))))}var Tr=Object(r.createContext)();function Ar(e){var t=Object(r.useState)(!1),n=Object(p.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)({}),u=Object(p.a)(c,2),s=u[0],l=u[1],f=Object(r.useRef)({resolve:function(){},reject:function(){}});return a.a.createElement(a.a.Fragment,null,a.a.createElement(Tr.Provider,{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Promise((function(e,t){f.current.resolve=e,f.current.reject=t}));return l(e),i(!0),t},children:e.children}),a.a.createElement(Rr,Object.assign({isOpen:o,onCloseClicked:function(){i(!1),f.current.resolve(null)},onConfirmed:function(e){i(!1),f.current.resolve(e)}},s)))}var Lr=n(436),Mr=n.n(Lr);function Dr(e){var t=e.actions||[{color:"primary",autoFocus:!1,text:"Cancel",value:!1},{color:"primary",autoFocus:!0,text:"Ok",value:!0}];return a.a.createElement("div",null,a.a.createElement(Cr.a,{open:e.isOpen,onClose:e.onCanceled,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.a.createElement(Er.a,{id:"alert-dialog-title"},e.title||"Confirm?"),a.a.createElement(Or.a,null,a.a.createElement(Pr.a,{id:"alert-dialog-description"},e.message||"Do you agree?")),a.a.createElement(Sr.a,null,t.map((function(t,n){return a.a.createElement(S.a,{key:n,onClick:function(){return e.onButtonClicked(t.value)},autoFocus:t.autoFocus,color:t.color},t.text)})))))}var zr=Object(r.createContext)();function qr(e){var t=Object(r.useState)(!1),n=Object(p.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)({}),u=Object(p.a)(c,2),s=u[0],l=u[1],f=Object(r.useRef)({resolve:function(){},reject:function(){}}),d=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Promise((function(e,t){f.current.resolve=e,f.current.reject=t}));return l(e),i(!0),t}),[l,i,f]),m=Object(r.useCallback)((function(e){i(!1),f.current.resolve(e)}),[i,f]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(zr.Provider,{value:d,children:e.children}),a.a.createElement(Dr,Object.assign({isOpen:o,onButtonClicked:m},s)))}n(413);var Br=n(233),$r=n.n(Br),Vr=n(232),Jr=n.n(Vr),Wr=(n(288),a.a.forwardRef((function(e,t){var n=e.onRenameClicked,r=e.onDeleteClicked,o=e.deleteEnabled,i=e.renameEnabled,c=a.a.useState(null),u=Object(p.a)(c,2),s=u[0],l=u[1],f=function(e){e.preventDefault(),l(null)};return a.a.createElement("div",null,a.a.createElement(S.a,{ref:t,className:"WorkspaceMenuButton","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){e.preventDefault(),l(e.currentTarget)}},"\u22ee"),a.a.createElement(P.a,{anchorEl:s,open:Boolean(s),onClose:f},a.a.createElement(I.a,{disabled:!i,onClick:function(e){e.preventDefault(),n&&n(),f(e)}},a.a.createElement(F.a,null,a.a.createElement(Jr.a,null)),"Rename..."),a.a.createElement(I.a,{disabled:!o,onClick:function(e){e.preventDefault(),r&&r(),f(e)}},a.a.createElement(F.a,null,a.a.createElement($r.a,null)),"Delete...")))}))),Hr=n(234),Zr=n.n(Hr),Qr=n(235),Gr=n.n(Qr),Ur=n(437),Kr=n.n(Ur),Yr=a.a.forwardRef((function(e,t){var n=e.onRenameClicked,r=e.onDeleteClicked,o=e.onAddInputClicked,i=e.onImportInputClicked,c=e.onExportProjectClicked,u=e.deleteEnabled,s=e.renameEnabled,l=e.addInputEnabled,f=a.a.useState(null),d=Object(p.a)(f,2),m=d[0],h=d[1],v=function(e){e.preventDefault(),h(null)};return a.a.createElement("div",null,a.a.createElement(S.a,{ref:t,className:"WorkspaceMenuButton","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){e.preventDefault(),h(e.currentTarget)}},"\u22ee"),a.a.createElement(P.a,{anchorEl:m,open:Boolean(m),onClose:v},a.a.createElement(I.a,{disabled:!l,onClick:function(e){e.preventDefault(),o&&o(),v(e)}},a.a.createElement(F.a,null,a.a.createElement(Zr.a,null)),"New Input..."),a.a.createElement(I.a,{disabled:!l,onClick:function(e){e.preventDefault(),i&&i(),v(e)}},a.a.createElement(F.a,null,a.a.createElement(Gr.a,null)),"Import Input..."),a.a.createElement(I.a,{onClick:function(e){e.preventDefault(),c&&c(),v(e)}},a.a.createElement(F.a,null,a.a.createElement(Kr.a,null)),"Export Project..."),a.a.createElement(I.a,{disabled:!s,onClick:function(e){e.preventDefault(),n&&n(),v(e)}},a.a.createElement(F.a,null,a.a.createElement(Jr.a,null)),"Rename..."),a.a.createElement(I.a,{disabled:!u,onClick:function(e){e.preventDefault(),r&&r(),v(e)}},a.a.createElement(F.a,null,a.a.createElement($r.a,null)),"Delete...")))})),Xr=n(439),ea=n.n(Xr),ta=n(440),na=n.n(ta),ra=n(438),aa=n.n(ra),oa={color:"var(--theme-neutral-500)"};function ia(e){var t=Object(r.useCallback)((function(){window.open("mailto:?subject=Fudomo%20Decomposition&body="+e.exportCode)}),[e.exportCode]),n=Object(r.useCallback)((function(){""!==e.exportCode&&aa()(e.exportCode)}),[e.exportCode]),o=Object(r.useCallback)((function(e){n()}),[n]);return a.a.createElement(Cr.a,{onClose:e.onCloseClicked,onEntered:o,open:e.isOpen,fullWidth:!0,maxWidth:"md"},a.a.createElement(Er.a,null,"Export Project Contents"),a.a.createElement(Or.a,null,a.a.createElement(Pr.a,null,"Share the following block of text with another user to let them import your project:"),a.a.createElement(_r.a,{value:e.exportCode,multiline:!0,fullWidth:!0,rows:10,rowsMax:20})),a.a.createElement(Sr.a,null,a.a.createElement(S.a,{onClick:e.onCloseClicked,style:oa},"Close"),a.a.createElement(S.a,{startIcon:a.a.createElement(ea.a,null),title:"Copy to Clipboard",color:"primary",onClick:n},"Copy"),a.a.createElement(S.a,{startIcon:a.a.createElement(na.a,null),title:"Open as Email",color:"primary",onClick:t},"Email")))}var ca=["yml","yaml","csv"],ua={yml:function(e,t){try{return et.a.parse(t),t}catch(n){throw Error('File "'.concat(e,'" is not syntactically valid yaml.'))}},csv:function(e,t){var n,r=Mr.a.parse(t).data,a=[],o=Object(c.a)(r);try{for(o.s();!(n=o.n()).done;){var i,u=n.value,s=[],l=Object(c.a)(u);try{for(l.s();!(i=l.n()).done;){var f=i.value;s.push({Value:f})}}catch(p){l.e(p)}finally{l.f()}a.push({Row:s})}}catch(p){o.e(p)}finally{o.f()}return et.a.stringify(a)}};function sa(e){var t=new FileReader;return t.readAsText(e,"UTF-8"),new Promise((function(e,n){t.onload=function(t){return e(t.target.result)},t.onerror=function(e){return n(e)}}))}ua.yaml=ua.yml;var la=function(e){var t=e.workspace,n=e.project,r=e.inputName,o=e.onRenameInputClicked,i=e.onDeleteInputClicked,c=Object(s.g)(),u=a.a.createRef(),l=xr((function(){u.current&&u.current.click()}));return a.a.createElement(pe.c,Object.assign({to:n.url+"/"+r},l),a.a.createElement(ye.a,{button:!0,disabled:e.disabled,className:"ListItemIndented2 WorkspaceListItem",selected:c.pathname===n.url+"/"+r},a.a.createElement(F.a,{className:"ListItemIcon"},a.a.createElement(be.a,{className:"SideBarIcon"})),a.a.createElement(ke.a,{className:"ListItemLabel",title:r,primary:r}),a.a.createElement(sr.a,{className:"Actions"},(t.capabilities.canRenameInput||t.capabilities.canDeleteInput)&&a.a.createElement(Wr,{ref:u,renameEnabled:t.capabilities.canRenameInput,deleteEnabled:t.capabilities.canDeleteInput,onRenameClicked:function(){return o(n,r)},onDeleteClicked:function(){return i(n,r)}}))))};function fa(e){var t=e.workspace,n=e.project,o=e.actions,i=e.dispatch,u=Object(gr.a)("expandedProjectLocations-"+e.title,[]),f=Object(p.a)(u,2),d=f[0],m=f[1],h=a.a.useState(!1),y=Object(p.a)(h,2),g=y[0],b=y[1],k=a.a.useState(""),w=Object(p.a)(k,2),j=w[0],x=w[1],E=Object(v.c)(),O=Object(s.g)(),S=Object(s.f)(),C=Object(r.useContext)(Tr),_=Object(r.useContext)(zr),N=Object(r.useContext)(He).showError,I=Object(r.useCallback)(function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){var n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.push("".concat(t.url)),n=t.url.split("/").slice(-1)[0],e.next=4,_({title:"Delete Project?",message:'Irreversibly delete project "'.concat(n,'"?')});case 4:if(e.sent)try{i(o.deleteProject(t.name)),S.push("/")}catch(r){i(ct(at(r.message)))}case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[_,i,o,S]),P=Object(r.useCallback)(function(){var e=Object(Ke.a)(Ue.a.mark((function e(n){var r,a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.push("".concat(n.url)),r=n.url.split("/").slice(-1)[0],e.next=4,C({title:"Rename Project",text:'Enter a new name for project "'.concat(r,'":'),name:r});case 4:if(null===(a=e.sent)){e.next=15;break}if(e.prev=6,!t.projects.find((function(e){return e.name===a}))){e.next=9;break}throw new Error('Project named "'.concat(a,'" already exists.'));case 9:i(o.renameProject({name:n.name,newName:a,onRename:function(){var e=n.url.split("/").slice(0,2).join("/");S.push("".concat(e,"/").concat(a))}})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),i(ct(at(e.t0.message)));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),[C,i,o,S,t]),R=Object(r.useCallback)(function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){var n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.push("".concat(t.url)),e.next=3,C({title:"Add Input",text:"Enter a name for the input data:"});case 3:if(null===(n=e.sent)){e.next=14;break}if(e.prev=5,!t.inputs.includes(n)){e.next=8;break}throw new Error('Input named "'.concat(n,'" already exists.'));case 8:i(o.createInput({projectName:t.name,name:n})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),i(ct(at(e.t0.message)));case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[C,i,o,S]),T=Object(r.useCallback)(function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){var r,a,u,s,l,f,p,d,m;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:r=[],a=null,u=Object(c.a)(n),e.prev=5,l=Ue.a.mark((function e(){var n,i,c,u,l,f,p;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.value,i=n.name.split(".").slice(-1)[0].toLowerCase(),ca.includes(i)){e.next=5;break}return r=[ct(at('File "'.concat(n.name,'" has invalid extension, expected ').concat(ca.join("/"),". Import aborted.")))],e.abrupt("return","break");case 5:return e.next=7,sa(n);case 7:c=e.sent,u="",e.prev=9,u=ua[i](n.name,c),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(9),r=[ct(at(e.t0.message))],e.abrupt("return","break");case 17:if(l=n.name.split(".").slice(0,-1).join("."),!t.inputs.some((function(e){return e===l}))){e.next=37;break}if(f=[{color:"primary",autoFocus:!1,text:"Cancel",value:"cancel"},{color:"primary",autoFocus:!1,text:"Skip all",value:"skipAll"},{color:"primary",autoFocus:!1,text:"Overwrite all",value:"overWriteAll"},{color:"primary",autoFocus:!1,text:"Skip",value:"skip"},{color:"primary",autoFocus:!0,text:"Overwrite",value:"overwrite"}],p=null,null!==a){e.next=32;break}return e.next=25,_({title:'Overwrite existing input "'.concat(l,'"?'),message:'An input named "'.concat(l,'" already exists in the project. Overwrite it?'),actions:f});case 25:if("cancel"!==(p=e.sent)){e.next=28;break}return e.abrupt("return",{v:void 0});case 28:"skipAll"===p&&(a="skip",p="skip"),"overWriteAll"===p&&(a="overwrite",p="overwrite"),e.next=33;break;case 32:p=a;case 33:"overwrite"===p&&r.push(o.setInput({projectName:t.name,inputId:l,value:u})),e.next=38;break;case 37:r.push(o.createInput({projectName:t.name,name:l,value:u}));case 38:case"end":return e.stop()}}),e,null,[[9,13]])})),u.s();case 8:if((s=u.n()).done){e.next=17;break}return e.delegateYield(l(),"t0",10);case 10:if("break"!==(f=e.t0)){e.next=13;break}return e.abrupt("break",17);case 13:if("object"!==typeof f){e.next=15;break}return e.abrupt("return",f.v);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(5),u.e(e.t1);case 22:return e.prev=22,u.f(),e.finish(22);case 25:for(p=0,d=r;p<d.length;p++)m=d[p],i(m);case 26:case"end":return e.stop()}}),e,null,[[5,19,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,o,_]),A=Object(r.useCallback)(function(){var e=Object(Ke.a)(Ue.a.mark((function e(t){var n;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.push("".concat(t.url)),(n=document.createElement("input")).type="file",n.multiple=!0,n.accept=ca.map((function(e){return"."+e})).join(","),n.onchange=function(){var e=Object(Ke.a)(Ue.a.mark((function e(n){var r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Array.from(n.target.files),T(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.click();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[T,S]),L=Object(r.useCallback)(function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){var r;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.push("".concat(t.url,"/").concat(n)),e.next=3,C({title:"Rename Input",text:'Enter a new name for input "'.concat(n,'":'),name:n});case 3:if(null===(r=e.sent)){e.next=15;break}if(e.prev=5,!t.inputs.includes(r)){e.next=8;break}throw new Error('Input named "'.concat(r,'" already exists.'));case 8:S.push(t.url+"/"+r),i(o.renameInput({projectName:t.name,name:n,newName:r})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),i(ct(at(e.t0.message)));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}(),[C,i,o,S]),M=Object(r.useCallback)(function(){var e=Object(Ke.a)(Ue.a.mark((function e(t,n){return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.push("".concat(t.url,"/").concat(n)),e.next=3,_({title:"Delete Input?",message:'Irreversibly delete input "'.concat(n,'"?')});case 3:e.sent&&(S.push(t.url),i(o.deleteInput({projectName:t.name,inputId:n})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[_,i,o,S]),D=Object(r.useCallback)((function(e){d.includes(e.url)?m(d.filter((function(t){return t!==e.url}))):m([].concat(Object(ht.a)(d),[e.url]))}),[d,m]),z=Object(r.useCallback)((function(e,t){e.preventDefault(),e.currentTarget.classList.remove("dropHovering"),T(t,e.dataTransfer.files)}),[T]),q=Object(r.useCallback)((function(e){e.currentTarget.classList.add("dropHovering")}),[]),B=Object(r.useCallback)((function(e){e.currentTarget.contains(e.relatedTarget)||e.currentTarget.classList.remove("dropHovering")}),[]),$=Object(r.useCallback)((function(e){if(null!==e&&null!==E.getState().project&&e.url===E.getState().project.url){e=E.getState().project;var t=Object(Qe.a)({},e);delete t.url,delete t.isLoading,delete t.status,delete t.readOnly,x(btoa(Object(br.deflate)(JSON.stringify(e),{to:"string"}))),b(!0),l.a.event({category:"Project",action:"Opened Export Dialog",label:e.url})}else N("Please click on desired project to open it before exporting.")}),[x,b,E,N]),V=Object(r.useCallback)((function(e){b(!1)}),[b]),J=n.url.split("/").slice(-1)[0],W=a.a.createRef(),H=xr((function(){W.current&&W.current.click()}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(pe.c,Object.assign({to:n.url},H),a.a.createElement(ye.a,{button:!0,className:"ListItemIndented WorkspaceListItem",selected:O.pathname===n.url,onClick:function(){return D(n)}},d.includes(n.url)?a.a.createElement(dr.a,{onClick:function(){return D(n)}}):a.a.createElement(hr.a,{onClick:function(){return D(n)}}),a.a.createElement(F.a,{className:"ListItemIcon"},a.a.createElement(ee.a,{className:"SideBarIcon"})),a.a.createElement(ke.a,{className:"ListItemLabel",primary:J,title:J}),a.a.createElement(sr.a,{className:"Actions"},a.a.createElement(Yr,{ref:W,renameEnabled:t.capabilities.canRenameProject,deleteEnabled:t.capabilities.canDeleteProject,addInputEnabled:t.capabilities.canAddInput,onRenameClicked:function(){return P(n)},onDeleteClicked:function(){return I(n)},onAddInputClicked:function(){return R(n)},onImportInputClicked:function(){return A(n)},onExportProjectClicked:function(){return $(n)}})))),!0===d.includes(n.url)&&a.a.createElement(ve.a,{onDragEnter:q,onDragLeave:B,onDragOver:function(e){return e.preventDefault()},onDrop:function(e){return z(e,n)}},(n.inputs||["input"]).map((function(e,r){return a.a.createElement(la,{key:n.url+"-"+r,workspace:t,project:n,inputName:e,onRenameInputClicked:L,onDeleteInputClicked:M})}))),g&&a.a.createElement(ia,{isOpen:g,exportCode:j,onCloseClicked:V}))}var pa=n(238),da=n.n(pa),ma=n(441),ha=n.n(ma),va=a.a.forwardRef((function(e,t){var n=e.workspace,r=e.onSignInClicked,o=e.onSignOutClicked,i=e.onAddProjectClicked,c=e.onImportProjectClicked,u=a.a.useState(null),s=Object(p.a)(u,2),l=s[0],f=s[1],d=function(e){e.preventDefault(),f(null)};return a.a.createElement("div",null,a.a.createElement(S.a,{ref:t,className:"WorkspaceMenuButton","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){e.preventDefault(),f(e.currentTarget)}},"\u22ee"),a.a.createElement(P.a,{anchorEl:l,open:Boolean(l),onClose:d},n.capabilities.requiresSignIn&&!n.isSignedIn&&a.a.createElement(I.a,{onClick:function(e){e.preventDefault(),r&&r(),d(e)}},a.a.createElement(F.a,null,a.a.createElement(ha.a,null)),"Connect..."),a.a.createElement(I.a,{disabled:!n.capabilities.canAddProject,onClick:function(e){e.preventDefault(),i&&i(),d(e)}},a.a.createElement(F.a,null,a.a.createElement(Zr.a,null)),"New Project..."),a.a.createElement(I.a,{disabled:!n.capabilities.canAddProject,onClick:function(e){e.preventDefault(),c&&c(),d(e)}},a.a.createElement(F.a,null,a.a.createElement(Gr.a,null)),"Import Project..."),n.capabilities.requiresSignIn&&n.isSignedIn&&a.a.createElement(I.a,{onClick:function(e){e.preventDefault(),o&&o(),d(e)}},a.a.createElement(F.a,null,a.a.createElement(da.a,null)),"Disconnect")))}));function ya(e){var t=Object(v.c)().dispatch,n=e.workspace,o=e.actions,i=e.icon||a.a.createElement(fr.a,null),c=Object(r.useContext)(Tr),u=Object(gr.a)("workspaceBrowserCollapsed-"+e.title,!1),f=Object(p.a)(u,2),d=f[0],m=f[1],h=Object(r.useState)(!1),y=Object(p.a)(h,2),g=y[0],b=y[1],k=Object(r.useContext)(He),w=k.showError,j=k.showSuccess,x=Object(s.f)(),E=Object(r.useCallback)(Object(Ke.a)(Ue.a.mark((function e(){var r,a;return Ue.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({title:"Enter Project Name",text:"Enter a name for the new project"});case 2:if(null===(r=e.sent)){e.next=14;break}if(e.prev=4,!n.projects.find((function(e){return e.name===r}))){e.next=7;break}throw new Error('Project named "'.concat(r,'" already exists.'));case 7:a=o.createEmptyProject({name:r,onCreated:function(e){x.push(e.url)}}),t(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t(ct(at(e.t0.message)));case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),[c,t,o,x,n]),O=Object(r.useCallback)((function(e){b(!0)}),[b]),S=Object(r.useCallback)((function(e){b(!1)}),[b]),C=Object(r.useCallback)((function(e){b(!1);try{if(null===e||0===e.length)throw new Error("Can not import empty project data.");var r=JSON.parse(Object(br.inflate)(atob(e),{to:"string"}));if(n.projects.find((function(e){return e.name===r.name})))throw new Error('Project named "'.concat(r.name,'" already exists.'));r.url="/".concat(n.name,"/").concat(r.name),r.readOnly=!1,r.isLoading=!1,r.status=null,t(o.createProject({project:r,onCreated:function(e){x.push(e.url),j("Project successfully imported."),l.a.event({category:"Project",action:"Imported Project",label:r.url})}}))}catch(a){w(String(a))}}),[b,o,j,w,x,t,n]),_=Object(r.useCallback)((function(e){t(o.signOut((function(){x.push("/")})))}),[x,t,o]),N=Object(r.useCallback)((function(e){t(o.signIn()),m(!1)}),[t,o,m]),I=Object(r.useCallback)((function(e){!n.capabilities.requiresSignIn||n.isSignedIn?m(!d):N(e)}),[m,d,n,N]),P=a.a.createRef(),R=xr((function(e){P.current&&P.current.click()}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(ve.a,null,a.a.createElement(ye.a,Object.assign({button:!0,onClick:I,className:"WorkspaceListItem"},R),n.isSignedIn?d?a.a.createElement(hr.a,null):a.a.createElement(dr.a,null):a.a.createElement("div",{style:{height:"24px",width:"24px"}}),a.a.createElement(F.a,{className:"ListItemIcon"},i||a.a.createElement(fr.a,{className:"SideBarIcon"})),a.a.createElement(ke.a,{className:"ListItemLabel",title:e.title},e.title),n.progressing&&a.a.createElement("div",{className:"WorkspaceProgressWrapper"},a.a.createElement(yr.a,{variant:"query",className:"CloudLoginProgress"})),a.a.createElement(sr.a,{className:"Actions"},(n.capabilities.requiresSignIn||n.capabilities.canAddProject)&&a.a.createElement(va,{ref:P,workspace:n,onSignInClicked:N,onSignOutClicked:_,onAddProjectClicked:E,onImportProjectClicked:O}))),a.a.createElement(vr.a,{in:!d},a.a.createElement(ve.a,{component:"div",disablePadding:!0},n.projects.map((function(e,r){return a.a.createElement("div",{key:r},a.a.createElement(fa,{workspace:n,project:e,actions:o,dispatch:t}))}))))),a.a.createElement(en.a,null),g&&a.a.createElement(Ir,{isOpen:g,onCloseClicked:S,onImportConfirmed:C}))}function ga(e){var t=Object(v.b)((function(e){return e.examplesWorkspace})),n=Object(v.b)((function(e){return e.localWorkspace})),r=Object(v.b)((function(e){return e.gdriveWorkspace})),o=Object(v.b)((function(e){return e.dropboxWorkspace})),i=Object(s.h)("/");return a.a.createElement(u.a,{height:"100%",minWidth:"240px",width:"240px",position:"relative",boxSizing:"border-box",className:"SideBar"},a.a.createElement(pe.b,{to:"/"},a.a.createElement(ve.a,null,a.a.createElement(ye.a,{key:"0",selected:i&&i.isExact},a.a.createElement(F.a,{className:"ListItemIcon"},a.a.createElement(Xt.a,{className:"SideBarIcon"})),a.a.createElement(ke.a,{primary:"Overview"})))),a.a.createElement(en.a,null),a.a.createElement(ya,{title:"Example Projects",workspace:t,actions:kn}),a.a.createElement(ya,{title:"Local Projects",workspace:n,actions:mn}),a.a.createElement(ya,{title:"Google Drive",workspace:r,actions:zn,icon:a.a.createElement(nn.a,null)}),a.a.createElement(ya,{title:"Dropbox",workspace:o,actions:cr,icon:a.a.createElement(an.a,null)}))}var ba=n(444),ka=n.n(ba),wa=n(302),ja=n.n(wa),xa=n(446),Ea={display:"flex",flexDirection:"row",flexWrap:"nowrap",flexGrow:1,overflow:"hidden"},Oa={padding:"1em 2em",overflow:"auto"};function Sa(e,t){return"string"===typeof t?e+t:a.a.Children.toArray(t.props.children).reduce(Sa,e)}function Ca(e){var t=function(e){var t=Object(r.useState)(null),n=Object(p.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(!1),c=Object(p.a)(i,2),u=c[0],s=c[1],l=Object(r.useState)(null),f=Object(p.a)(l,2),d=f[0],m=f[1];return Object(r.useEffect)((function(){m(null),s(!0),xt.a.get(e).then((function(e){o(e.data),s(!1)})).catch((function(e){o(null),m("".concat(e)),s(!1)}))}),[e]),[a,u,d]}("FudomoDocs.md"),n=Object(p.a)(t,1)[0],o=null!==window.opener;return a.a.createElement("div",{style:Ea},a.a.createElement("div",{className:"DocumentationOutline"},a.a.createElement(ve.a,null,o&&a.a.createElement(pe.b,{to:"/docs",onClick:function(){return window.close()}},a.a.createElement(ye.a,{divider:!0},a.a.createElement(F.a,{className:"ListItemIcon"},a.a.createElement(da.a,{className:"SideBarIcon"})),a.a.createElement(ke.a,{primary:"Close Documentation"}))),!o&&a.a.createElement(pe.b,{to:"/"},a.a.createElement(ye.a,{divider:!0},a.a.createElement(F.a,{className:"ListItemIcon"},a.a.createElement(ka.a,{className:"SideBarIcon"})),a.a.createElement(ke.a,{primary:"Back to Try-Fudomo!"}))),a.a.createElement(ja.a,{source:n,allowedTypes:["heading","text"],renderers:{heading:function(e){var t=a.a.Children.toArray(e.children).reduce(Sa,"").toLowerCase().replace(/\W/g,"-"),n={marginLeft:e.level-1+"em"},r={fontWeight:1===e.level?"bold":"normal"};return a.a.createElement("a",{href:"#"+t},a.a.createElement(ye.a,null,a.a.createElement(ke.a,{primary:e.children,style:n,primaryTypographyProps:{style:r}})))}}}))),a.a.createElement("div",{style:Oa},a.a.createElement(ja.a,{source:n,linkTarget:"_blank",renderers:Object(Qe.a)(Object(Qe.a)({},xa.a),{},{heading:function(e){var t=a.a.Children.toArray(e.children).reduce(Sa,"").toLowerCase().replace(/\W/g,"-");return a.a.createElement("h"+e.level,{id:t},e.children)}})})))}var _a=_t,Na=Object(Ye.b)({name:"environment",initialState:{isLoading:!0,isEditorReady:!1,isRuntimeReady:!1},reducers:{setLoading:function(e,t){e.isLoading=t.payload},setEditorReady:function(e,t){e.isEditorReady=t.payload},setRuntimeReady:function(e,t){e.isRuntimeReady=t.payload}}}),Ia=Na.actions,Pa=Ia.setLoading,Fa=Ia.setEditorReady,Ra=Ia.setRuntimeReady,Ta=Na.reducer,Aa=[{type:"example",actions:kn,attr:"examplesWorkspace"},{type:"local",actions:mn,attr:"localWorkspace"},{type:"gdrive",actions:zn,attr:"gdriveWorkspace"},{type:"dropbox",actions:cr,attr:"dropboxWorkspace"}],La=Aa.map((function(e){return e.type}));function Ma(e){var t=Aa.find((function(t){return t.type===e}));if(!t)throw new Error('Unknown workspace type "'.concat(e,'"'));return t.actions}function Da(e){var t,n,r=Object(v.c)(),o=(t=e.match.params.workspaceType,Object(v.b)((function(e){var n=Aa.find((function(e){return e.type===t}));return n?e[n.attr]:null})));try{n=Ma(e.match.params.workspaceType)}catch(i){return a.a.createElement(k,{message:"Error loading project"},i.message)}return a.a.createElement(s.c,null,a.a.createElement(s.a,{path:e.match.path+"/:projectId/:inputId",exact:!0,render:function(e){return a.a.createElement(Vt,{projectName:e.match.params.projectId,inputId:e.match.params.inputId,workspace:o,workspaceActions:n})}}),a.a.createElement(s.a,{path:e.match.path+"/:projectId/",exact:!0,render:function(e){return a.a.createElement(Vt,{projectName:e.match.params.projectId,workspace:o,workspaceActions:n})}}),a.a.createElement(s.a,{path:e.match.path,exact:!0,render:function(e){return r.dispatch(Dt.setProject(null)),a.a.createElement(k,{message:"Please select a project."})}}))}var za=Object(f.withSnackbar)((function(e){var t=Object(v.c)(),n=Object(r.useContext)(He).showStatus,o=Object(v.b)((function(e){return e.status}));Object(r.useEffect)((function(){n(o)}),[o,n]);var i=Object(s.g)();return Object(r.useEffect)((function(){l.a.set({page:i.pathname}),l.a.pageview(i.pathname)}),[i]),Object(r.useEffect)((function(){t.dispatch((function(e){e(Pa(!1)),e(Fa(!0)),_a.init().then((function(){e(Ra(!0))}))}));var e,n=Object(c.a)(La);try{for(n.s();!(e=n.n()).done;){var r=Ma(e.value);t.dispatch(r.init())}}catch(a){n.e(a)}finally{n.f()}}),[t]),a.a.createElement("div",{className:"App"},a.a.createElement(Kt,null),a.a.createElement(u.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",height:"100%",width:"100%",position:"relative",boxSizing:"border-box",overflow:"hidden"},a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/docs",exact:!0},a.a.createElement(Ca,null)),a.a.createElement(s.a,{path:"/"},a.a.createElement(ga,null),a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/",exact:!0,render:function(e){return window.setTimeout((function(){return t.dispatch(Dt.setProject(null))}),0),a.a.createElement(k,{message:"Try Fudomo"},"Try an example project, or create your own.")}}),a.a.createElement(s.a,{path:"/:workspaceType",component:Da}))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(1430);var qa=n(72),Ba=void 0;function $a(e,t){if(t.type&&t.type.startsWith("project/")&&"project/setHasUnsavedData"!==t.type&&"project/setProject"!==t.type){var n=e.getState().project;null!==n&&(n.isLoading||(e.dispatch(Dt.setHasUnsavedData(!0)),function(e,t){Ba&&window.clearTimeout(Ba),Ba=window.setTimeout((function(){Ba=void 0;var n=Ma(e.url.split("/")[1]);t(n.commitProject((function(){void 0===Ba&&t(Dt.setHasUnsavedData(!1))})))}),1e3)}(n,e.dispatch)))}}var Va=function(e){return function(t){return function(n){return $a(e,n),t(n)}}},Ja=Object(qa.c)({examplesWorkspace:wn,localWorkspace:hn,gdriveWorkspace:qn,dropboxWorkspace:ur,project:zt,environment:Ta,status:ut}),Wa=Object(Ye.a)({reducer:Ja,middleware:function(e){return[Va].concat(Object(ht.a)(e()))}});xt.a.defaults.baseURL=window.public_url,l.a.initialize("UA-167809229-1",{testMode:!1}),i.a.render(a.a.createElement(v.a,{store:Wa},a.a.createElement(f.SnackbarProvider,{maxSnack:3},a.a.createElement(pe.a,{basename:window.public_url},a.a.createElement(Ze,null,a.a.createElement(Ar,null,a.a.createElement(qr,null,a.a.createElement(za,null))))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},163:function(e,t,n){var r=n(342),a=n(110),o=n(111),i=n(91),c=n(2),u=n(254),s=n(100),l=n(101),f=n(253).StackFrame,p=n(193).ObjectModel,d=n(343),m=(n(345),n(190),n(84)),h=m.offsetToRange,v=m.RangeReplaceQuickfixProposal,y=m.reMatchAll,g=n(210).getSkeletonGenerator,b=n(84).escapeHtml,k=n(1016),w=function(){"use strict";function e(){s(this,e)}return l(e,[{key:"finalize",value:function(){throw new Error("Not implemented")}},{key:"hasFunction",value:function(){var e=u(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){throw new Error("Not implemented")}},{key:"validateFunctions",value:function(){var e=u(c.mark((function e(t,n,r){var a,o,u,s,l,f,p,d=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=t||"",a=this.getFunctionSignatures(t),o=new Set(n.map((function(e){return e.functionName}))),u=a.filter((function(e){return!o.has(e.funcName)})),s=[],l=i(n);try{for(p=function(){var e=f.value,n=e.functionName,o=e.parameters,i=e.decompositionQualifiedName,c=a.find((function(e){return e.funcName===n}));if(void 0!==c)o.forEach((function(e,n){var r=c.parameters[n];void 0===r?s.push({message:'Missing parameter "'.concat(e,'"'),markerContext:{type:"function",location:c.parametersListRange},fixes:[new v('Add parameter "'.concat(e,'"'),"functions",t,c.parametersListRange,c.parameters.map((function(e){return e.name})).concat([e]).join(", ")).toJSON()]}):r.name!==e&&s.push({message:'Incorrect parameter name "'.concat(r.name,'", expected "').concat(e,'"'),markerContext:{type:"function",location:c.parametersListRange},fixes:[new v('Rename parameter "'.concat(r.name,'" to "').concat(e,'"'),"functions",t,r.nameRange,e).toJSON()]})})),c.parameters.slice(o.length).forEach((function(e,n){var r=o.length+n;s.push({message:'Unexpected parameter "'.concat(e.name,'"'),markerContext:{type:"function",location:c.parametersListRange},fixes:[new v('Remove parameter "'.concat(e.name,'"'),"functions",t,c.parametersListRange,c.parameters.map((function(e){return e.name})).filter((function(e,t){return t!==r})).join(", ")).toJSON()]})}));else{var l=function(e){return"".concat(e.funcName,"-").concat(e.parameters.map((function(e){return e.name})).join("-"))},p=d.getSkeletonGenerator().generateDecompositionFunction(r.getDecompositionBySignature(i),!0),m="".concat(n,"-").concat(o.join("-")),h=Array.from(u);h.sort((function(e,t){var n=l(e),r=l(t);return k(m,n)-k(m,r)}));var y="\n\n"+d.getSkeletonGenerator().generateDecompositionFunction(r.getDecompositionBySignature(i),!1)+"\n",g=[],b=d.getAppendNewFunctionSkeletonRange(t);if(null!==b){var w=new v('Create new function skeleton "'.concat(n,'"'),"functions",t,b,y).toJSON();g.push(w)}s.push({message:'Function "'.concat(n,'" not found'),markerContext:{type:"transformation",decompositionQualifiedName:i},fixes:g.concat(h.map((function(e){return new v('Change existing function "'.concat(e.funcName,'"'),"functions",t,e.signatureRange,p).toJSON()})))})}},l.s();!(f=l.n()).done;)p()}catch(c){l.e(c)}finally{l.f()}return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"callFunction",value:function(){var e=u(c.mark((function e(t,n){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"convertScalarValue",value:function(e,t){throw new Error("Not implemented")}},{key:"toString",value:function(){var e=u(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"exceptionToStackFrame",value:function(e){throw new Error("Not implemented")}},{key:"getAppendNewFunctionSkeletonRange",value:function(e){throw new Error("Not implemented")}},{key:"getFunctionSignatures",value:function(e){throw new Error("Not implemented")}}],[{key:"addToArgumentParser",value:function(e){}}]),e}(),j=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return s(this,n),(a=t.call(this)).idByComparableObject=new WeakMap,a.objectModelById={},a.lastId=0,a}return l(n,[{key:"finalize",value:function(){this.idByComparableObject=new WeakMap,this.objectModelById={}}},{key:"nextId",value:function(){return this.lastId++}},{key:"jsonReplacer",value:function(e,t){if(t instanceof p){var n=this.idByComparableObject.get(t.id);void 0===n&&(n=this.nextId(),this.idByComparableObject.set(t.id,n),this.objectModelById[n]=t);var r={type:t.type,id:n};return t.isScalar&&(r.val=t.scalar),r}return t instanceof Set?Array.from(t):t}},{key:"jsonReviver",value:function(e,t){if(null!==t&&"Object"==t.constructor.name&&void 0!==t.type&&void 0!==t.id){var n=this.objectModelById[t.id];if(void 0===n)throw new Error("Received ObjectModel Id that was never sent.");return n}return t}},{key:"serializeHasFunctionOp",value:function(e){if(null==e)throw new Error("Lookup of null function");return{op:"hasFunction",name:e}}},{key:"serializeCallFunctionOp",value:function(e,t){return{op:"callFunction",name:e,args:t}}},{key:"serializeValidateFunctionOp",value:function(e,t){return{op:"validateFunction",functionName:e,parameterNames:t}}},{key:"encodeObj",value:function(e){var t=this;return JSON.stringify(e,(function(e,n){return t.jsonReplacer(e,n)}))}},{key:"decodeObj",value:function(e){var t=this;return JSON.parse(e,(function(e,n){return t.jsonReviver(e,n)}))}}]),n}(w),x=function(e){"use strict";a(n,e);var t=o(n);function n(e){var r;return s(this,n),(r=t.call(this)).jsError=e,r.cause=e,r.message=e.message,r}return l(n,[{key:"location",get:function(){var e,t=i(this.jsError.stack.split("\n"));try{for(t.s();!(e=t.n()).done;){var n=e.value.split(",").slice(-1)[0],r=/.*?:(\d+):(\d+)\)/.exec(n);if(null!==r){var a=Number(r[1])-1,o=Number(r[2])-1;return[[a,o],[a,o+1]]}}}catch(c){t.e(c)}finally{t.f()}return null}},{key:"toString",value:function(){var e,t=[],n=i(this.jsError.stack.split("\n"));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.match(/\sat .* \(.*fudomo-transform\/compute\.js:\d+:\d+\)/)||r.match(/\sat .* \(.*\/node_modules\/vm2\/lib\/contextify.js:\d+:\d+\)/))break;t.push(r.replace(/    at /g,"    at (JS) "))}}catch(a){n.e(a)}finally{n.f()}return t.join("\n")}},{key:"toHtml",value:function(){var e,t=[],n=i(this.jsError.stack.split("\n"));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.match(/\sat .* \(.*fudomo-transform\/compute\.js:\d+:\d+\)/)||r.match(/\sat .* \(.*\/node_modules\/vm2\/lib\/contextify.js:\d+:\d+\)/))break;t.push(b(r.replace(/    at /g,"    at (JS) ")))}}catch(a){n.e(a)}finally{n.f()}return t.join("\n")}}]),n}(f),E=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return s(this,n),(a=t.call(this)).languageId="js",a.initExternalFunctions(e,r),a}return l(n,[{key:"initExternalFunctions",value:function(e,t){throw new Error("Not implemented")}},{key:"finalize",value:function(){}},{key:"convertScalarValue",value:function(e,t){if("oyaml"===e){if(t.kind!==d.Kind.SCALAR)throw new Error("Expected Scalar");return t.valueObject instanceof Date?t.valueObject:d.determineScalarType(t)===d.ScalarType.string?t.value:t.valueObject}throw"js"===e?new Error("Unsupported object model type "+e):new Error("Not implemented")}},{key:"hasFunctionSync",value:function(e){return void 0!==this.externalFunctions[e]}},{key:"hasFunction",value:function(){var e=u(c.mark((function e(t){var n=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){e(n.hasFunctionSync(t))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"callFunctionSync",value:function(e,t){if(!this.hasFunctionSync(e))throw new Error('Decomposition function implementation "'.concat(e,'" could not be found.'));return this.externalFunctions[e].apply(null,t)}},{key:"callFunction",value:function(){var e=u(c.mark((function e(t,n){var r=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){try{e(r.callFunctionSync(t,n))}catch(o){a(o)}})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){return g("js")}},{key:"exceptionToStackFrame",value:function(e){return new x(e)}},{key:"toString",value:function(){var e=u(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",String(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAppendNewFunctionSkeletonRange",value:function(e){var t=y(e,/(module\.exports\s*=\s*{\s*)([\s\S]*)(})/g);if(1!=t.length)return null;var n=t[0];return[n.groupRanges[2][1],n.groupRanges[2][1]]}},{key:"getFunctionSignatures",value:function(e){var t=/(\s*)([\w\d_]+)([\s,]*)/g;return y(e,/(\/\*\*[\s\S]*?\*\/\s*)?(\/\*\*.*?\*\/)?(\s*)([\w\d_]+)(:\s*function\(([\w\d_,\s]*)\))/g).map((function(n){return{signature:n[0],signatureRange:n.groupRanges[0],funcName:n[4],funcNameRange:n.groupRanges[4],parameters:y(n[6]||"",t).map((function(t){return{name:t[2],nameRange:h(e,n.indices[6][0]+t.indices[2][0],t.indices[2][1]-t.indices[2][0])}})),parametersListRange:n.groupRanges[6],comment:n[1],commentRange:n.groupRanges[1]}}))}}]),n}(w),O=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return s(this,n),(a=t.call(this)).baseDir=path.resolve(e),a.errorObj=r,a.cause=r,a}return l(n,[{key:"toString",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n="".concat(this.errorObj.message,"\n"),r=this.errorObj.stack.slice(0).reverse(),a=i(r);try{for(a.s();!(e=a.n()).done;){var o=e.value,c=this.relPath(t,o.filename);n+="    at (PY) ".concat(c,":").concat(o.startLine,":").concat(o.startCol,"\n")}}catch(u){a.e(u)}finally{a.f()}return n.slice(0,-1)}},{key:"toHtml",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n="".concat(b(this.errorObj.message),"\n"),r=this.errorObj.stack.slice(0).reverse(),a=i(r);try{for(a.s();!(e=a.n()).done;){var o=e.value,c=this.relPath(t,o.filename),u=[[o.startLine-1,o.startCol-1],[o.endLine-1,o.endCol-1]];n+='    at (PY) <a class="fudomo-exception-source-link" href="#" data-source-loc="'.concat(b(JSON.stringify({src:c,pos:u})),'">').concat(b(c),":").concat(o.startLine,":").concat(o.startCol,"</a>\n")}}catch(s){a.e(s)}finally{a.f()}return n.slice(0,-1)}}]),n}(f),S=function(){"use strict";function e(t){s(this,e),this.errorObj=t,this.message=t.message}return l(e,[{key:"toString",value:function(){return this.message}}]),e}(),C=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return s(this,n),(a=t.call(this,r)).version=e,a}return n}(r(Error));t.UnsupportedPythonVersionError=C,t.PythonError=S,t.StackFrame=f,t.PythonStackFrame=O,t.BaseJSDecompositionFunctionRunner=E,t.JSStackFrame=x,t.DecompositionFunctionRunner=w,t.ExternalDecompositionFunctionRunner=j},193:function(e,t,n){var r=n(91),a=n(101),o=n(100),i=n(110),c=n(111),u=n(342),s=n(343),l=n(190),f=n(84).RangeReplaceQuickfixProposal;function p(e){var t=typeof e;return"function"===t||"object"===t&&!!e}var d=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return n}(u(Error));function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw null!=t?new d(t):new d}var h=function(){"use strict";function e(){o(this,e)}return a(e,[{key:"id",get:function(){throw new Error("Not Implemented")}},{key:"refId",get:function(){throw new Error("Not Implemented")}},{key:"isScalar",get:function(){throw new Error("Not implemented")}},{key:"val",get:function(){throw new Error("Not implemented")}},{key:"scalarType",get:function(){throw new Error("Not implemented")}},{key:"scalarValueLocation",get:function(){throw new Error("Not implemented")}},{key:"type",get:function(){throw new Error("Not implemented")}},{key:"typeLocation",get:function(){throw new Error("Not implemented")}},{key:"fullDefinitionLocation",get:function(){throw new Error("Not implemented")}},{key:"getFeatureNameLocation",value:function(e){throw new Error("Not implemented")}},{key:"getFeatureValueLocation",value:function(e){throw new Error("Not implemented")}},{key:"getAttributeType",value:function(e){throw new Error("Not implemented")}},{key:"getFeatureAsArray",value:function(e){var t=this.getFeature(e);return Array.isArray(t)?t:void 0===t?[]:[t]}},{key:"getFeature",value:function(e){throw new Error("Not implemented")}},{key:"featureNames",get:function(){throw new Error("Not implemented")}}]),e}(),v=0,y=function(){"use strict";function e(){o(this,e),this.wrappers=new WeakMap,this.context=null,this.id=v++,this.objectIdCounter=0}return a(e,[{key:"getObjectModel",value:function(e,t){var n=this.wrappers.get(e);return void 0===n&&(n=new g(this,"js".concat(this.id,".").concat(this.objectIdCounter++),e,t),this.wrappers.set(e,n)),n}}]),e}(),g=function(e){"use strict";i(n,e);var t=c(n);function n(e,r,a,i){var c;if(o(this,n),(c=t.call(this)).factory=e,Array.isArray(a))throw new Error("Can not create JSObject for Array");return c._id=r,c.obj=a,c.sourceLocation=i,c}return a(n,[{key:"id",get:function(){return this._id}},{key:"isScalar",get:function(){return!p(this.obj)}},{key:"val",get:function(){return this.factory.context.functionRunner.convertScalarValue("js",this.obj)}},{key:"scalarType",get:function(){return this.type}},{key:"scalarValueLocation",get:function(){return[[0,0],[0,0]]}},{key:"type",get:function(){return this.obj.constructor.name}},{key:"typeLocation",get:function(){return[[0,0],[0,0]]}},{key:"fullDefinitionLocation",get:function(){return[[0,0],[0,0]]}},{key:"getFeature",value:function(e){var t=this,n=this.obj[e];return Array.isArray(n)?n.map((function(e){return t.factory.getObjectModel(e,t.sourceLocation)})):p(n)?this.factory.getObjectModel(n,this.sourceLocation):n}},{key:"getFeatureNameLocation",value:function(e){return[[0,0],[0,0]]}},{key:"getFeatureValueLocation",value:function(e){return[[0,0],[0,0]]}},{key:"featureNames",get:function(){return Object.keys(this.obj)}},{key:"toString",value:function(){return"<JSObject obj='".concat(this.obj,"'>")}}]),n}(h),b={};b[s.ScalarType.null]=function(e){return null},b[s.ScalarType.bool]=s.parseYamlBoolean,b[s.ScalarType.int]=s.parseYamlInteger,b[s.ScalarType.float]=s.parseYamlFloat,b[s.ScalarType.string]=function(e){return e};var k=0,w=function(){"use strict";function e(){o(this,e),this.wrappers=new Map,this.context=null,this.id=k++,this.objectIdCounter=-1}return a(e,[{key:"getObjectModel",value:function(e,t,n,r){var a=this.wrappers.get(e);return void 0===a&&(this.objectIdCounter+=1,a=new E(this,"oyaml".concat(this.id,".").concat(this.objectIdCounter),e,t,n,r),this.wrappers.set(e,a)),a}}]),e}();function j(e){return e.toUpperCase()===e}function x(e,t){var n=t.fromIndex(e.startPosition)||{line:0,col:0},r=t.fromIndex(e.endPosition)||t.fromIndex(t.str.length-1);return[[n.line,n.col],[r.line,r.col]]}var E=function(e){"use strict";i(n,e);var t=c(n);function n(e,r,a,i,c,u){var l;return o(this,n),m(a.kind==s.Kind.MAP),m(i.kind==s.Kind.MAP),m(null===a.mappings[0].value||a.mappings[0].value.kind==s.Kind.SEQ||a.mappings[0].value.kind==s.Kind.SCALAR,"Value ".concat(a.mappings[0].value," has unexpected kind.")),(l=t.call(this)).factory=e,l._id=r,l.obj=a,l.root=i,l.lineColumnFinder=c,l.sourceLocation=u,l}return a(n,[{key:"getNodePosition",value:function(e){return x(e,this.lineColumnFinder)}},{key:"id",get:function(){return this._id}},{key:"refId",get:function(){var e=this.obj.mappings[0].key.value.split(/\s+/);if(1!=e.length)return e[1]}},{key:"isScalar",get:function(){if(null===this.obj.mappings[0].value)return!0;var e=this.obj.mappings[0].value.valueObject instanceof Date,t=null===this.obj.mappings[0].value,n=this.obj.mappings[0].value.kind===s.Kind.SCALAR;return e||t||n}},{key:"val",get:function(){return m(this.isScalar),this.factory.context.functionRunner.convertScalarValue("oyaml",this.obj.mappings[0].value)}},{key:"scalarType",get:function(){if(m(this.isScalar),null===this.obj.mappings[0].value)return"null";if(this.obj.mappings[0].value.valueObject instanceof Date)return"timestamp";var e=s.determineScalarType(this.obj.mappings[0].value);return s.ScalarType[e]}},{key:"scalarValueLocation",get:function(){var e=this.obj.mappings[0].value;return null===e?this.getNodePosition(this.obj.mappings[0]):this.getNodePosition(e)}},{key:"structureSeq",get:function(){return this.obj.mappings[0].value}},{key:"type",get:function(){return this.obj.mappings[0].key.value.split(" ").slice(0,1)[0]}},{key:"typeLocation",get:function(){if("Root"==this.type)return this.fullDefinitionLocation;var e=this.obj.mappings[0].key.startPosition,t=this.lineColumnFinder.fromIndex(e)||{line:0,col:0},n=t.line,r=t.col;return[[n,r],[n,r+this.type.length]]}},{key:"fullDefinitionLocation",get:function(){if("Root"==this.type){var e=this.lineColumnFinder.fromIndex(this.lineColumnFinder.str.length-1)||{line:0,col:0};return[[0,0],[e.line,e.col]]}var t=this.obj.mappings[0].key.startPosition,n=this.lineColumnFinder.fromIndex(t)||{line:0,col:0},r=this.obj.mappings[0].value,a=r;r.kind===s.Kind.SEQ&&r.items.length>0&&(a=r.items.slice(-1)[0]);var o=this.lineColumnFinder.fromIndex(a.endPosition-1);return[[n.line,n.col],[o.line,o.col+1]]}},{key:"_stripRefMarker",value:function(e){var t=e.trim();return t.endsWith(">")?t.slice(0,-1).trim():t}},{key:"getObjectById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t&&(t=new Set),t.has(this.id))return null;if(t.add(this.id),this.refId===e)return this;var n,a=r(this.getFeature("cont"));try{for(a.s();!(n=a.n()).done;){var o=n.value,i=o.getObjectById(e,t);if(null!=i)return i}}catch(c){a.e(c)}finally{a.f()}return null}},{key:"wrapValue",value:function(e){var t=this;if(Array.isArray(e))return e.map((function(e){return t.wrapValue(e)}));if(null===e||void 0===e.kind)return e;if(e.kind===s.Kind.SCALAR){if(e.valueObject instanceof Date)return e.valueObject;var n=s.determineScalarType(e);return b[n.toString()](e.value)}return e.kind===s.Kind.SEQ?e.items.map((function(e){return t.wrapValue(e)})):e.kind===s.Kind.MAP?this.factory.getObjectModel(e,this.root,this.lineColumnFinder,this.sourceLocation):void 0}},{key:"getFeature",value:function(e){var t=this;if(this.isScalar)return"cont"===e?[]:null;var n=void 0;if("cont"===e){var a=this.obj.mappings[0].value.items;return this.wrapValue(a.filter((function(e){return j(e.mappings[0].key.value[0])})))}var o=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})).filter((function(e){return!j(e.key.value[0])})),i=o.filter((function(t){return t.key.value==e}))[0];if(void 0!==i&&null===i.value)return this.wrapValue(null);if(void 0!==i&&i.value.kind==s.Kind.SEQ)return i.value.items.map((function(e){return t.wrapValue(e)}));if(void 0!==i&&void 0!==i.value.value)return this.wrapValue(i.value);var c,u=null,l=r(o);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(f.key.value.trim().endsWith(">")&&this._stripRefMarker(f.key.value)==e){u=f.value.value;break}}}catch(v){l.e(v)}finally{l.f()}if(n=[],u){var p,d=r(u.split(","));try{for(d.s();!(p=d.n()).done;){var m=p.value.trim(),h=this.factory.getObjectModel(this.root,this.root,this.lineColumnFinder,this.sourceLocation).getObjectById(m);if(void 0==h)throw new Error('Could not resolve reference "'.concat(e,": ").concat(m,'"'));n.push(h.obj)}}catch(v){d.e(v)}finally{d.f()}}return 0==n.length?n=null:1==n.length&&(n=n[0]),this.wrapValue(n)}},{key:"getFeatureNameLocation",value:function(e){m(!this.isScalar);var t,n=this.obj.mappings[0].value.items,a=r(n.map((function(e){return e.mappings[0].key})));try{for(a.s();!(t=a.n()).done;){var o=t.value;if(!j(o.value.trim()[0])){var i=this._stripRefMarker(o.value);if(i==e){var c=this.lineColumnFinder.fromIndex(o.startPosition),u=c.line,s=c.col;return[[u,s],[u,s+i.length]]}}}}catch(l){a.e(l)}finally{a.f()}return[[0,0],[0,0]]}},{key:"getFeatureValueLocation",value:function(e){m(!this.isScalar);var t,n=this.obj.mappings[0].value.items,a=r(n);try{for(a.s();!(t=a.n()).done;){var o=t.value.mappings[0];if(null===o.value)return this.getNodePosition(o.key);if(this._stripRefMarker(o.key.value)==e)return this.getNodePosition(o.value)}}catch(i){a.e(i)}finally{a.f()}return[[0,0],[0,0]]}},{key:"featureNames",get:function(){var e=this;if(this.structureSeq.kind!=s.Kind.SEQ)return[];var t=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})),n=t.filter((function(e){return!j(e.key.value[0])})).map((function(t){return e._stripRefMarker(t.key.value)}));return t.filter((function(e){return j(e.key.value[0])})).length>0&&n.push("cont"),n}},{key:"_getValueType",value:function(e){if(null===e)return"null";if(e.valueObject instanceof Date)return"timestamp";if(e.kind==s.Kind.SEQ)return e.items.map(this._getValueType);var t=s.determineScalarType(e);return s.ScalarType[t]}},{key:"getAttributeType",value:function(e){var t=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})).filter((function(e){return!j(e.key.value[0])})).filter((function(t){return t.key.value==e}))[0];if(void 0!==t)return this._getValueType(t.value)}},{key:"toString",value:function(){return void 0===this.refId?this.isScalar?"<OYAMLObject type='".concat(this.scalarType,"'>"):"<OYAMLObject type='".concat(this.type,"'>"):this.isScalar?"<OYAMLObject type='".concat(this.scalarType,"' refId='").concat(this.refId,"'>"):"<OYAMLObject type='".concat(this.type,"' refId='").concat(this.refId,"'>")}}]),n}(h);function O(e,t){for(var n=new Set,a=[e];a.length>0;){var o=a.shift();if(!n.has(o.id)){n.add(o.id),t(o);var i,c=[],u=r(o.featureNames);try{for(u.s();!(i=u.n()).done;){var s,l=i.value,f=r(new S(e,o).successors(l,"Object"));try{for(f.s();!(s=f.n()).done;){var p=s.value;p._center instanceof h&&c.push(p._center)}}catch(d){f.e(d)}finally{f.f()}}}catch(d){u.e(d)}finally{u.f()}a.splice.apply(a,[0,0].concat(c))}}}var S=function(){"use strict";function e(t,n){if(o(this,e),void 0==t)throw new Error("model can't be undefined");if(void 0==n)throw new Error("center can't be undefined");if(!(t instanceof h))throw new Error('model must be instance of ObjectModel (got "'.concat(n,'")'));this.model=t,this._center=n}return a(e,[{key:"type",get:function(){return this.center.type}},{key:"center",get:function(){return this._center}},{key:"sourceLocation",get:function(){var e=this.center.sourceLocation||"unknown_source_path";return"".concat(e,":").concat(this.center.typeLocation[0][0]+1,":").concat(this.center.typeLocation[0][1]+1)}},{key:"getFeature",value:function(e){return"center"==e?this._center:"val"==e?this._center.val:this._center.getFeature(e)}},{key:"getAllInstancesByType",value:function(t){var n=[],r=this.model;return O(r,(function(a){("Object"===t||a.type===t)&&n.push(new e(r,a))})),n}},{key:"successors",value:function(t,n){var a,o=this._center.getFeatureAsArray(t),i=[],c=r(o);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(u instanceof h){var s=new e(this.model,u),l=!0;"Object"!=n&&s.type!=n&&(l=!1),l&&i.push(s)}}}catch(f){c.e(f)}finally{c.f()}return i}},{key:"predecessors",value:function(t,n){var a=this,o=new Set;return O(this.model,(function(i){var c,u=r(i.getFeatureAsArray(t));try{for(u.s();!(c=u.n()).done;){var s=c.value;if(s instanceof h&&s.id===a._center.id){var l=new e(a.model,i),f=!0;"Object"!=n&&l.type!=n&&(f=!1),f&&o.add(l)}}}catch(p){u.e(p)}finally{u.f()}})),o}},{key:"toString",value:function(){return'<CenteredModel center="'.concat(this._center,'" model="').concat(this.model,'">')}}]),e}(),C=function e(t){"use strict";o(this,e),this.cont=t},_=function(){"use strict";function e(){o(this,e)}return a(e,[{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){throw new Error("Not implemented")}},{key:"getRootCenteredModel",value:function(e){return new S(e,e)}}]),e}(),N=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return a(n,[{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Array.isArray(e))throw new Error("Root has to be Object, not Array");return(new y).getObjectModel(new C(e),t)}}]),n}(_),I=function(){"use strict";function e(t){o(this,e),this.lineColumnFinder=t,this.markers=[]}return a(e,[{key:"message",get:function(){return this.toString()}},{key:"addMarkerForNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={message:t,markerContext:{type:"input"},fixes:n};r.markerContext.location=null==e?[[0,0],[0,0]]:x(e,this.lineColumnFinder),this.markers.push(r)}},{key:"addMarkerAtLocation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.markers.push({markerContext:{type:"input",location:e},message:t,fixes:n})}},{key:"hasMarkers",get:function(){return this.markers.length>0}},{key:"toString",value:function(){return this.markers.map((function(e){return"(".concat(e.markerContext.location[0][0],":").concat(e.markerContext.location[0][1],") ").concat(e.message)})).join("\n")}}]),e}(),P=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return a(n,[{key:"isStringScalar",value:function(e){return null!==e&&(e.kind==s.Kind.SCALAR&&s.determineScalarType(e)==s.ScalarType.string)}},{key:"_getNodeText",value:function(e,t){return null===t?"":e.slice(t.startPosition,t.endPosition)}},{key:"createSingleMappingToMultipleMappingQuickfixProposal",value:function(e,t,n){var r=this,a=this._getNodeText(e,n).split("\n")[1].replace(/\t/g,"  ").search(/[^ ]/);-1===a?a=4:a-="- ".length;var o="\n"+" ".repeat(a)+"- ",i=n.mappings.map((function(t){return"".concat(r._getNodeText(e,t.key),": ").concat(r._getNodeText(e,t.value))})).join(o);return new f("Change single mapping into multiple mappings","input",e,x(n,t),i).toJSON()}},{key:"validateObject",value:function(e,t,n,a){if(null!==e&&void 0!==e)if(e.kind==s.Kind.MAP)if(1==e.mappings.length){var o=e.mappings[0].value;if(null===o||o.kind==s.Kind.SEQ||o.kind==s.Kind.SCALAR){var i=e.mappings[0].key;if(this.isStringScalar(i)){var c=i.value.trim().split(/\s+/);if((0==c.length||c.length>2)&&t.addMarkerForNode(i,'Invalid object key (must be "Type [identifier]")'),null!==o&&o.kind==s.Kind.SEQ){var u,l=r(o.items);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(null!==f)if(void 0!==f.mappings&&1==f.mappings.length){var p=f.mappings[0],d=p.key,m=p.value;if(this.isStringScalar(d)){var h=d.value.trim().split(/\s+/);if(0==h.length||h.length>2)t.addMarkerForNode(d,'Invalid object key (must be "Type [identifier]")');else{var v=d.value.trim()[0];if(void 0!==v&&j(v))this.validateObject(f,t,n,a);else if(this.isStringScalar(d)&&""!==d.value||t.addMarkerForNode(d,"Attribute, reference or contained object key must be non-empty string scalar"),d.value.trim().endsWith(">")){var y=d.value.trim().split(">");y.length>1&&(y.length>2&&t.addMarkerForNode(d,'Invalid reference key (too many ">")'),this.isStringScalar(m)||t.addMarkerForNode(m,"Reference specification must be string scalar"))}else if(null!==m){if(m.kind!=s.Kind.SCALAR&&m.kind!=s.Kind.SEQ){var g=m||p;t.addMarkerForNode(g,"Attribute has to be scalar or sequence of scalars");continue}if(m.kind,s.Kind.SCALAR,m.kind==s.Kind.SEQ){var b,k=r(m.items);try{for(k.s();!(b=k.n()).done;){var w=b.value;null!==w&&w.kind!=s.Kind.SCALAR&&t.addMarkerForNode(w,"Item in attribute sequence has to be scalar")}}catch(O){k.e(O)}finally{k.f()}}}}}else t.addMarkerForNode(d,"Attribute, reference or contained object key has to be string scalar")}else{var x=this.createSingleMappingToMultipleMappingQuickfixProposal(n,a,f);t.addMarkerForNode(f,"Attribute, reference or contained object map must have 1 mapping",[x])}else t.addMarkerForNode(o,"Null mapping not allowed")}}catch(O){l.e(O)}finally{l.f()}}}else t.addMarkerForNode(i,"Object key has to be string scalar")}else{var E=o||e;t.addMarkerForNode(E,"Object value must be sequence or scalar")}}else t.addMarkerForNode(e,"Object map must have only one key-value mapping");else t.addMarkerForNode(e,"Object has to be a map or scalar");else t.addMarkerForNode(null,"Object has to be a map or scalar")}},{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=s.load(e),a=new l(e,{origin:0}),o=new I(a);if(void 0===n)n={kind:s.Kind.SEQ,items:[]};else{var i,c=r(n.errors);try{for(c.s();!(i=c.n()).done;){var u=i.value,f=[[0,0],[0,0]];"YAMLException"==u.name&&(f=[[u.mark.line+1,u.mark.column+1],[u.mark.line+1,u.mark.column+1]]),o.addMarkerAtLocation(f,u.reason)}}catch(d){c.e(d)}finally{c.f()}n.kind!=s.Kind.SEQ&&o.addMarkerAtLocation([[0,0],[0,0]],"Root has to be Array")}if(o.hasMarkers)throw o;var p={kind:s.Kind.MAP,mappings:[{kind:s.Kind.MAPPING,key:{kind:s.Kind.SCALAR,value:"Root root"},value:n}]};if(this.validateObject(p,o,e,a),o.hasMarkers)throw o;return(new w).getObjectModel(p,p,a,t)}}]),n}(_);e.exports={CenteredModel:S,AbstractJSObjectLoader:N,AbstractOYAMLObjectLoader:P,ObjectModel:h}},210:function(e,t,n){var r=n(110),a=n(111),o=n(91),i=n(255),c=n(100),u=n(101),s=function(){"use strict";function e(t,n,r,a){c(this,e),this.commentStart=t,this.commentEnd=n,this.lineIndent=r,this.maxLineLength=a,this.lines=[]}return u(e,[{key:"wrapTextWithPrefix",value:function(e,t){var n,r=Math.max.apply(Math,i(e.split("\n").map((function(e){return e.length})))),a=this.maxLineLength-this.lineIndent.length-r;if(a<=0)return this.wrapText(e,79).wrapText(t,79);var o=this._wrapText(t,a),c=" ".repeat(r);return(n=this.lines).push.apply(n,[e+o[0]].concat(i(o.slice(1).map((function(e){return c+e}))))),this}},{key:"wrapText",value:function(e){var t,n=this.maxLineLength-this.lineIndent.length;n<=0&&(n=2);var r=this._wrapText(e,n);return(t=this.lines).push.apply(t,i(r)),this}},{key:"_wrapText",value:function(e,t){var n,r=[],a=o(e.split("\n"));try{for(a.s();!(n=a.n()).done;){var c=n.value;if(c.length<t)r.push(c);else{var u=c.slice(0,t),s=c.slice(t),l=u.lastIndexOf(" ");-1==l&&(l=t-1);var f=u.slice(l),p=u.slice(0,l),d=(f+s).trimStart();r.push(p),r.push.apply(r,i(this._wrapText(d,t)))}}}catch(m){a.e(m)}finally{a.f()}return r}},{key:"toString",value:function(){var e=this;return this.commentStart.endsWith("\n")?this.commentStart+this.lines.map((function(t){return e.lineIndent+t})).join("\n")+this.commentEnd:[this.commentStart+this.lines[0]].concat(i(this.lines.slice(1).map((function(t){return e.lineIndent+t})))).join("\n")+this.commentEnd}}]),e}(),l=function(){"use strict";function e(t,n,r){c(this,e),this.prefix=t,this.separator=n,this.suffix=r,this.parameterTypeMap=null}return u(e,[{key:"generateSkeleton",value:function(e){var t=this,n=this.prefix;return n+=e.decompositions.map((function(e){return t.generateDecompositionFunction(e)})).join(this.separator),n+=this.suffix}},{key:"generateDecompositionFunction",value:function(e){throw new Error("Not implemented")}},{key:"getFunctionValidationCriteria",value:function(e){var t,n=[],r=o(e.decompositions);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.function.type+"_"+a.function.name,c=a.links.map((function(e){return e.parameterName}));n.push({functionName:i,parameters:c,decompositionQualifiedName:a.function.qualifiedName})}}catch(u){r.e(u)}finally{r.f()}return n}}]),e}(),f=function(e){"use strict";r(n,e);var t=a(n);function n(){var e;return c(this,n),(e=t.call(this,"module.exports = {\n","\n\n","\n};\n")).parameterTypeMap={Sequence:"Array",Set:"Set"},e}return u(n,[{key:"generateDecompositionFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new s("  /**\n","\n   */","   * ",79),r=e.function.type+"_"+e.function.name,a=e.links.map((function(e){return e.parameterName}));n.wrapText(e.function.qualifiedName),e.comment&&n.wrapText(e.comment);for(var o=e.links,i=0,c=Object.keys(o);i<c.length;i++){var u=c[i],l=o[u],f=this.parameterTypeMap[l.parameterTypeDescription];f?n.wrapTextWithPrefix("@param ".concat(l.parameterName," {").concat(f,"} "),l.parameterDescription):n.wrapTextWithPrefix("@param ".concat(l.parameterName," "),l.parameterDescription)}var p=n.toString();p+="\n";var d=a.join(", ");return p+="  ".concat(r,": function(").concat(d,")"),t||(p+=" {\n",p+="    throw new Error('function ".concat(r,"(").concat(d,") not yet implemented'); // TODO\n"),p+="  },"),p}}]),n}(l),p=function(e){"use strict";r(n,e);var t=a(n);function n(){var e;return c(this,n),(e=t.call(this,"","\n\n\n","")).parameterTypeMap={Sequence:"list",Set:"set"},e}return u(n,[{key:"generateDecompositionFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new s('    """','\n    """\n',"    ",79),r=e.function.type+"_"+e.function.name,a=e.links.map((function(e){return e.parameterName})),i="def ".concat(r,"(").concat(a.join(", "),"):\n");n.wrapText(e.function.qualifiedName),e.comment&&n.wrapText(e.comment);var c,u=o(e.links);try{for(u.s();!(c=u.n()).done;){var l=c.value;n.wrapTextWithPrefix(":param ".concat(l.parameterName,": "),"".concat(l.parameterDescription));var f=this.parameterTypeMap[l.parameterTypeDescription];f&&n.wrapTextWithPrefix(":type  ".concat(l.parameterName,": "),"".concat(f))}}catch(p){u.e(p)}finally{u.f()}return i+=n.toString(),t||(i+="    raise NotImplementedError('function ".concat(r," not yet implemented')  # TODO")),i.trim()}}]),n}(l),d={javascript:f,js:f,python:p};e.exports={getSkeletonGenerator:function(e){var t=d[e];return void 0==t?null:new t},SKELETON_GENERATORS:[{id:"js",name:"Javascript",extension:"js"},{id:"python",name:"Python 3",extension:"py"}]}},229:function(module,exports,__webpack_require__){var _regeneratorRuntime=__webpack_require__(2),_asyncToGenerator=__webpack_require__(254),_classCallCheck=__webpack_require__(100),_createClass=__webpack_require__(101),_inherits=__webpack_require__(110),_createSuper=__webpack_require__(111),_require=__webpack_require__(193),ObjectModel=_require.ObjectModel,_require2=__webpack_require__(253),FudomoComputeException=_require2.FudomoComputeException,getParameterNames=__webpack_require__(345),_require3=__webpack_require__(163),DecompositionFunctionRunner=_require3.DecompositionFunctionRunner,BaseJSDecompositionFunctionRunner=_require3.BaseJSDecompositionFunctionRunner,UnsupportedPythonVersionError=_require3.UnsupportedPythonVersionError,PythonError=_require3.PythonError,JSStackFrame=_require3.JSStackFrame,JSDecompositionFunctionRunner=function(e){"use strict";_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null,null)).externalFunctions=e||{},r}return _createClass(n,[{key:"initExternalFunctions",value:function(e,t){}}]),n}(BaseJSDecompositionFunctionRunner),RUNNERS_BY_ID={javascript:JSDecompositionFunctionRunner},RUNNER_BY_FILE_EXTENSION={js:JSDecompositionFunctionRunner};module.exports={DecompositionFunctionRunner:DecompositionFunctionRunner,getRunnerClassById:function(e){return RUNNERS_BY_ID[e]},getRunnerClassByFileExtension:function(e){return RUNNER_BY_FILE_EXTENSION[e]},importCommonJSModule:function(){var _importCommonJSModule=_asyncToGenerator(_regeneratorRuntime.mark((function _callee(moduleSource){return _regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve,reject){var module={},window={},document={};try{eval(moduleSource),resolve(module.exports)}catch(error){reject(new FudomoComputeException([new JSStackFrame(error)]))}})));case 1:case"end":return _context.stop()}}),_callee)})));function importCommonJSModule(e){return _importCommonJSModule.apply(this,arguments)}return importCommonJSModule}(),importES6Module:function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="data:text/javascript;charset=utf-8,"+encodeURIComponent(t),e.abrupt("return",new Promise((function(e,t){import(n).then((function(t){e(t)})).catch((function(e){t(new FudomoComputeException([new JSStackFrame(e)]))}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),importModule:function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",module.exports.importCommonJSModule(t).catch((function(e){return module.exports.importES6Module(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},253:function(e,t,n){var r=n(2),a=n(254),o=n(255),i=n(91),c=n(110),u=n(111),s=n(100),l=n(101),f=n(944),p=n(256),d=n(329),m=(d.Transformation,d.getFudomoParser,n(84).escapeHtml),h=function(){"use strict";function e(t,n,r){s(this,e),this.transformation=t,this.rootModel=n,this.rootModel.model.factory.context=this,this.functionRunner=r,this.stack=null}return l(e,[{key:"log",value:function(){}},{key:"logIndented",value:function(){this.indentLog(),this.log.apply(this,arguments),this.dedentLog()}},{key:"indentLog",value:function(){}},{key:"dedentLog",value:function(){}}]),e}(),v=function(){"use strict";function e(){s(this,e)}return l(e,[{key:"relPath",value:function(e,t){if(null==e)return t;if(null==t)return t;if(!p.isAbsolute(e))throw new Error("Path base must be absolute path");if(!p.isAbsolute(t))throw new Error("Path must be absolute path");return t.startsWith(e)?t.slice(e.length+1):t}},{key:"toString",value:function(){throw new Error("Not implemented")}},{key:"toHtml",value:function(){throw new Error("Not implemented")}}]),e}(),y=function(e){"use strict";c(n,e);var t=u(n);function n(e){var r;return s(this,n),(r=t.call(this)).link=e,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (LL) ".concat(this.link," (").concat(n,")")}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(m(n),":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (LL) ".concat(m(this.link),' (<a class="fudomo-exception-source-link" href="#" data-source-loc="').concat(m(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(m(r),"</a>)"):"    at (LL) ".concat(m(this.link)," (").concat(m(r),")")}}]),n}(v),g=function(e){"use strict";c(n,e);var t=u(n);function n(e){var r;return s(this,n),(r=t.call(this)).link=e,r.referredModel=null,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (GL) ".concat(this.link," (").concat(n,")\n            ").concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (GL) ".concat(m(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(m(r),"</a>)\n")+"            ".concat(m(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(m(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(m(this.referredModel.center)):"    at (GL) ".concat(m(this.link)," (").concat(m(r),")\n")+"            ".concat(m(this.link.function.type)," (").concat(m(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(m(this.referredModel.center))}}]),n}(v),b=function(e){"use strict";c(n,e);var t=u(n);function n(e){var r;return s(this,n),(r=t.call(this)).link=e,r.referredModel=null,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (FL) ".concat(this.link," (").concat(n,")\n            ").concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (FL) ".concat(m(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(m(r),"</a>)\n")+"            ".concat(m(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(m(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(m(this.referredModel.center)):"    at (FL) ".concat(m(this.link)," (").concat(m(r),")\n")+"            ".concat(m(this.link.function.type)," (").concat(m(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(m(this.referredModel.center))}}]),n}(v),k=function(e){"use strict";c(n,e);var t=u(n);function n(e){var r;return s(this,n),(r=t.call(this)).link=e,r.referredModel=null,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (RL) ".concat(this.link," (").concat(n,")\n")+"            ".concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (RL) ".concat(m(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(m(r),"</a>)\n")+"            ".concat(m(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(m(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(m(this.referredModel.center)):"    at (RL) ".concat(m(this.link)," (").concat(r,")\n")+"            ".concat(m(this.link.function.type)," (").concat(m(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(m(this.referredModel.center))}}]),n}(v),w=function(e){"use strict";c(n,e);var t=u(n);function n(e,r){var a;return s(this,n),(a=t.call(this)).decomposition=e,a.centeredModel=r,a}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.decomposition.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.decomposition.node.location[0][0]+1,":").concat(this.decomposition.node.location[0][1]+1);return"    at (DC) ".concat(this.decomposition.function.qualifiedName," (").concat(n,")\n            center (").concat(this.relPath(e,this.centeredModel.sourceLocation),"): ").concat(this.centeredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.decomposition.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.decomposition.node.location[0][0]+1,":").concat(this.decomposition.node.location[0][1]+1);return null!==t?"    at (DC) ".concat(m(this.decomposition.function.qualifiedName),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(m(JSON.stringify({src:t,pos:this.decomposition.node.location})),'">').concat(m(r),"</a>})\n")+'            center (<a href="#" class="fudomo-exception-source-link" data-source-loc="'.concat(m(JSON.stringify({src:this.relPath(e,this.centeredModel.center.sourceLocation),pos:this.centeredModel.center.fullDefinitionLocation})),'">').concat(m(this.relPath(e,this.centeredModel.sourceLocation)),"</a>): ").concat(m(this.centeredModel.center)):"    at (DC) ".concat(m(this.decomposition.function.qualifiedName)," (").concat(m(r),")\n")+"            center (".concat(m(this.relPath(e,this.centeredModel.sourceLocation)),"): ").concat(m(this.centeredModel.center))}}]),n}(v),j=function(){"use strict";function e(t){s(this,e),this.fudomoStack=t}return l(e,[{key:"cause",get:function(){var e,t=i(this.fudomoStack);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(void 0!==n.cause)return n.cause}}catch(r){t.e(r)}finally{t.f()}return null}},{key:"message",get:function(){return this.fudomoStack.slice(-1)[0].message}},{key:"location",get:function(){return this.fudomoStack.slice(-1)[0].location}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o(this.fudomoStack);return t.reverse(),"<pre>"+t.map((function(t){return t.toHtml(e)})).join("\n")+"</pre>"}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o(this.fudomoStack);return t.reverse(),t.map((function(t){return t.toString(e)})).join("\n")}}]),e}();function x(e,t,n){return E.apply(this,arguments)}function E(){return(E=a(r.mark((function e(t,n,a){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.functionRunner.callFunction(n.externalName,a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n){return S.apply(this,arguments)}function S(){return(S=a(r.mark((function e(t,n,a){var o,c,u,s,l,p,d,m,h,v,j,E,S,C,_,N,I,P,F,R,T,A,L,M;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,stack.push(new w(n,a)),t.indentLog(),e.prev=3,t.log(f.red("Decomposing %s (on %s)"),n.function.qualifiedName,a.type),0!=(c=n.links).length){e.next=16;break}return e.next=9,t.functionRunner.hasFunction(n.function.externalName);case 9:if(e.sent){e.next=14;break}return o=!0,e.abrupt("return",a.getFeature(n.function.name));case 14:return o=!0,e.abrupt("return",x(t,n.function,[]));case 16:u=[],s=i(c),e.prev=18,s.s();case 20:if((l=s.n()).done){e.next=184;break}if(p=l.value,d=!1,e.prev=23,"local"!=p.kind){e.next=41;break}if(stack.push(new y(p)),m=p.function.getTargetDecomposition(a),t.log("\u2570\u2500local: %s",p.function.name),null!=m){e.next=33;break}t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,a.type),u.push(a.getFeature(p.function.name)),e.next=39;break;case 33:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",m.function.qualifiedName,a.type),e.t0=u,e.next=37,O(t,m,a);case 37:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 39:e.next=178;break;case 41:if("global"!=p.kind){e.next=88;break}stack.push(new g(p)),t.log("\u2570\u2500global: %s",p.function.qualifiedName),h=[],v=a.getAllInstancesByType(p.function.type),j=i(v),e.prev=47,j.s();case 49:if((E=j.n()).done){e.next=77;break}if(S=E.value,stack.slice(-1)[0].referredModel=S,null!=(C=p.function.getTargetDecomposition(S))){e.next=69;break}return e.next=56,t.functionRunner.hasFunction(p.function.externalName);case 56:if(!e.sent){e.next=65;break}return t.logIndented("\u2570\u2500externalFunction: %s",p.function.externalName),e.t2=h,e.next=61,x(t,p.function,[]);case 61:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=67;break;case 65:t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,S.type),h.push(S.getFeature(p.function.name));case 67:e.next=75;break;case 69:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",C.function.qualifiedName,S.type),e.t4=h,e.next=73,O(t,C,S);case 73:e.t5=e.sent,e.t4.push.call(e.t4,e.t5);case 75:e.next=49;break;case 77:e.next=82;break;case 79:e.prev=79,e.t6=e.catch(47),j.e(e.t6);case 82:return e.prev=82,j.f(),e.finish(82);case 85:u.push(h),e.next=178;break;case 88:if("forward"!=p.kind){e.next=134;break}stack.push(new b(p)),t.log("\u2570\u2500forward: %s -> %s",p.referenceName,p.function.qualifiedName),_=[],N=i(a.successors(p.referenceName,p.function.type)),e.prev=93,N.s();case 95:if((I=N.n()).done){e.next=123;break}if(P=I.value,stack.slice(-1)[0].referredModel=P,null!=(F=p.function.getTargetDecomposition(P))){e.next=115;break}return e.next=102,t.functionRunner.hasFunction(p.function.externalName);case 102:if(!e.sent){e.next=111;break}return t.logIndented("\u2570\u2500externalFunction: %s",p.function.externalName),e.t7=_,e.next=107,x(t,p.function,[]);case 107:e.t8=e.sent,e.t7.push.call(e.t7,e.t8),e.next=113;break;case 111:t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,P.type),_.push(P.getFeature(p.function.name));case 113:e.next=121;break;case 115:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",F.function.qualifiedName,P.type),e.t9=_,e.next=119,O(t,F,P);case 119:e.t10=e.sent,e.t9.push.call(e.t9,e.t10);case 121:e.next=95;break;case 123:e.next=128;break;case 125:e.prev=125,e.t11=e.catch(93),N.e(e.t11);case 128:return e.prev=128,N.f(),e.finish(128);case 131:u.push(_),e.next=178;break;case 134:if("reverse"!=p.kind){e.next=178;break}stack.push(new k(p)),t.log("\u2570\u2500reverse: %s <- %s",p.referenceName,p.function.qualifiedName),R=new Set,T=i(a.predecessors(p.referenceName,p.function.type)),e.prev=139,T.s();case 141:if((A=T.n()).done){e.next=169;break}if(L=A.value,stack.slice(-1)[0].referredModel=L,null!=(M=p.function.getTargetDecomposition(L))){e.next=161;break}return e.next=148,t.functionRunner.hasFunction(p.function.externalName);case 148:if(!e.sent){e.next=157;break}return t.logIndented("\u2570\u2500externalFunction: %s",p.function.externalName),e.t12=R,e.next=153,x(t,p.function,[]);case 153:e.t13=e.sent,e.t12.add.call(e.t12,e.t13),e.next=159;break;case 157:t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,L.type),R.add(L.getFeature(p.function.name));case 159:e.next=167;break;case 161:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",M.function.qualifiedName,L.type),e.t14=R,e.next=165,O(t,M,L);case 165:e.t15=e.sent,e.t14.add.call(e.t14,e.t15);case 167:e.next=141;break;case 169:e.next=174;break;case 171:e.prev=171,e.t16=e.catch(139),T.e(e.t16);case 174:return e.prev=174,T.f(),e.finish(174);case 177:u.push(R);case 178:d=!0;case 179:return e.prev=179,d&&stack.pop(),e.finish(179);case 182:e.next=20;break;case 184:e.next=189;break;case 186:e.prev=186,e.t17=e.catch(18),s.e(e.t17);case 189:return e.prev=189,s.f(),e.finish(189);case 192:return o=!0,e.abrupt("return",x(t,n.function,u));case 194:return e.prev=194,t.dedentLog(),o&&stack.pop(),e.finish(194);case 198:case"end":return e.stop()}}),e,null,[[3,,194,198],[18,186,189,192],[23,,179,182],[47,79,82,85],[93,125,128,131],[139,171,174,177]])})))).apply(this,arguments)}function C(){return(C=a(r.mark((function e(t){var n,a,o,i,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.stack){e.next=3;break}throw new Error("TransformationContext can not be reused.");case 3:if(t.stack=[],n=t.transformation.decompositions[0]){e.next=7;break}throw new Error("No decomposition found.");case 7:if(a=t.rootModel,"Root"==(o=n.function.type)){e.next=18;break}if(0!=(i=t.rootModel.successors("cont",o)).length){e.next=15;break}throw new Error('No instance of first decomposition type "'.concat(o,'" found.'));case 15:if(!(i.length>1)){e.next=17;break}throw new Error('More than one instance of first decomposition type "'.concat(o,'" found.'));case 17:a=i[0];case 18:return c=null,e.prev=19,stack=[],e.next=23,O(t,n,a);case 23:c=e.sent,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(19),stack.push(t.functionRunner.exceptionToStackFrame(e.t0));case 29:if(!(stack.length>0)){e.next=31;break}throw new j(stack);case 31:return e.abrupt("return",c);case 32:return e.prev=32,t.functionRunner.finalize(),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[0,,32,35],[19,26]])})))).apply(this,arguments)}e.exports={transform:function(e){return C.apply(this,arguments)},TransformationContext:h,FudomoComputeException:j,StackFrame:v}},288:function(e,t,n){},329:function(e,t,n){var r=n(91),a=n(110),o=n(111),i=n(100),c=n(101),u=n(190);function s(){var e=n(934),t=n(935);return new e.Parser(e.Grammar.fromCompiled(t))}var l=function(){"use strict";function e(t,n,r,a){i(this,e),this.startCol=t,this.startRow=n,this.endCol=r,this.endRow=a}return c(e,[{key:"contains",value:function(e,t){return!(t<this.startRow)&&(!(t>this.endRow)&&(t==this.startRow?e>=this.startCol:t!=this.endRow||e<=this.endCol))}},{key:"toArray",value:function(){return[[this.startRow,this.startCol],[this.endRow,this.endCol]]}},{key:"toString",value:function(){return"<CharacterRange startCol=".concat(this.startCol," startRow=").concat(this.startRow," endCol=").concat(this.endCol," endRow=").concat(this.endCol,">")}}],[{key:"fromOffsets",value:function(t,n,r){var a=u(t,{origin:0}),o=a.fromIndex(n),i=a.fromIndex(r)||a.fromIndex(t.length-1);return new e(o.col,o.line,i.col,i.line)}}]),e}(),f=function(){"use strict";function e(t){i(this,e),this.parent=t}return c(e,[{key:"transformation",get:function(){for(var e=this;!(e instanceof w);)e=e.parent;return e}},{key:"decomposition",get:function(){for(var e=this;!(e instanceof k);)e=e.parent;return e}}]),e}(),p=function(e){"use strict";a(n,e);var t=o(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,e)).node=r,o.kind=a,o}return n}(f),d=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"local")}return c(n,[{key:"parameterName",get:function(){return this.function.name}},{key:"parameterDescription",get:function(){var e=this.parameterName;return"center"===e?"This ".concat(this.decomposition.function.type):"val"===e?"The value of this ".concat(this.decomposition.function.type):'The "'.concat(e,'" of this ').concat(this.decomposition.function.type)}},{key:"parameterTypeDescription",get:function(){return null}},{key:"function",get:function(){return new g(this,this.node.reference)}},{key:"location",get:function(){return[this.node.location[0],[this.node.location[1][0],this.node.location[1][1]]]}},{key:"toString",value:function(){return this.function.name}}]),n}(p),m=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"global")}return c(n,[{key:"parameterName",get:function(){return this.function.type+"_"+this.function.name}},{key:"parameterDescription",get:function(){return'The sequence of all "'.concat(this.function.name,'" values of all ').concat(this.function.type," objects")}},{key:"parameterTypeDescription",get:function(){return"Sequence"}},{key:"function",get:function(){return new b(this,this.node.typedFunction)}},{key:"toString",value:function(){return this.function.qualifiedName}}]),n}(p),h=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"forward")}return c(n,[{key:"parameterName",get:function(){return this.referenceName+"_"+this.function.type+"_"+this.function.name}},{key:"referenceName",get:function(){return this.node.reference}},{key:"referenceLocation",get:function(){return[this.node.location[0],[this.node.location[0][0],this.node.location[0][0]+this.referenceName.length]]}},{key:"parameterDescription",get:function(){return"cont"===this.referenceName?"The sequence of ".concat(this.function.pluralValueDescription," contained in this ").concat(this.decomposition.function.type):"The sequence of ".concat(this.function.pluralValueDescription,' referred to by attribute "').concat(this.referenceName,'" in this ').concat(this.decomposition.function.type)}},{key:"parameterTypeDescription",get:function(){return"Sequence"}},{key:"function",get:function(){return new b(this,this.node.typedFunction)}},{key:"toString",value:function(){return"".concat(this.referenceName," -> ").concat(this.function.qualifiedName)}}]),n}(p),v=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"reverse")}return c(n,[{key:"parameterName",get:function(){return"_"+this.referenceName+"_"+this.function.type+"_"+this.function.name}},{key:"referenceName",get:function(){return this.node.reference}},{key:"parameterDescription",get:function(){return"cont"===this.referenceName?"The set of ".concat(this.function.pluralValueDescription," that contain this ").concat(this.decomposition.function.type):"The set of ".concat(this.function.pluralValueDescription," that refer to this ").concat(this.decomposition.function.type,' by attribute "').concat(this.referenceName,'"')}},{key:"parameterTypeDescription",get:function(){return"Set"}},{key:"function",get:function(){return new b(this,this.node.typedFunction)}},{key:"toString",value:function(){return"".concat(this.referenceName," <- ").concat(this.function.qualifiedName)}}]),n}(p),y=function(e){"use strict";a(n,e);var t=o(n);function n(e){return i(this,n),t.call(this,e)}return c(n,[{key:"name",get:function(){throw new Error("Not implemented")}},{key:"getTargetDecomposition",value:function(e){throw new Error("Not implemented")}}]),n}(f),g=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e)).node=r,a}return c(n,[{key:"qualifiedName",get:function(){return this.name}},{key:"name",get:function(){return this.node}},{key:"getTargetDecomposition",value:function(e){var t=this.decomposition,n=this.transformation,r=t.function.type,a=this.name;return n.getDecompositionBySignature(r+"."+a)}}]),n}(y),b=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e)).node=r,a}return c(n,[{key:"getTargetDecomposition",value:function(e){return this.isAbstract?this.transformation.getDecompositionBySignature(e.type+"."+this.name):this.transformation.getDecompositionBySignature(this.qualifiedName)}},{key:"isAbstract",get:function(){return"Object"==this.type}},{key:"name",get:function(){return this.node.untypedFunction}},{key:"pluralValueDescription",get:function(){var e='"'.concat(this.name,'" values of ').concat(this.type," objects");return"center"===this.name?e="".concat(this.type," objects"):"val"===this.name&&(e="".concat(this.type," scalar values")),e}},{key:"type",get:function(){return this.node.type}},{key:"qualifiedName",get:function(){return this.type+"."+this.name}},{key:"externalName",get:function(){return this.type+"_"+this.name}},{key:"location",get:function(){return this.node.location}},{key:"typeLocation",get:function(){return[this.node.location[0],[this.node.location[0][0],this.node.location[0][1]+this.type.length]]}}]),n}(y),k=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return i(this,n),(a=t.call(this,e)).node=r,a}return c(n,[{key:"function",get:function(){return new b(this,this.node.typedFunction)}},{key:"links",get:function(){var e,t=[],n=r(this.node.links);try{for(n.s();!(e=n.n()).done;){var a=e.value;if("local"==a.type)t.push(new d(this,a));else if("forward"==a.type)t.push(new h(this,a));else if("reverse"==a.type)t.push(new v(this,a));else{if("global"!=a.type)throw new Error('Unexpected link type "'.concat(a.type,'"'));t.push(new m(this,a))}}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"comment",get:function(){return this.node.comment}},{key:"characterRange",get:function(){var e=this.node.location;return new l(e[0][1],e[0][0],e[1][1],e[1][0])}}]),n}(f),w=function(e){"use strict";a(n,e);var t=o(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,n),(r=t.call(this,null)).source=e,r.sourceLocation=a;var o=s();try{if(o.feed(e),!(o.results.length>0)){var c=new Error("Can not parse decomposition");throw c.token={offset:e.length-e.trimLeft().length,value:e.trim()},c}r.tree=o.results[0]}catch(u){r.parseError=u,void 0==r.parseError.token&&(r.parseError.token={offset:0,value:""})}return r}return c(n,[{key:"hasError",get:function(){return void 0!=this.parseError}},{key:"errors",get:function(){var e=[];return this.parseError&&e.push({markerContext:{type:"transformation",location:l.fromOffsets(this.source,this.parseError.token.offset,this.parseError.token.offset+this.parseError.token.value.length).toArray()},error:this.parseError,severity:"error",message:this.parseError.toString()}),e}},{key:"decompositions",get:function(){var e=this;return this.tree.decompositions.map((function(t){return new k(e,t)}))}},{key:"getDecompositionBySignature",value:function(e){return this.decompositions.find((function(t){return t.function.qualifiedName==e}))}},{key:"getDecompositionForTextCoordinate",value:function(e,t){return this.decompositions.find((function(n){return n.characterRange.contains(e,t)}))}}]),n}(f);e.exports={Transformation:w,getFudomoParser:s}},413:function(e,t,n){},483:function(e,t,n){},64:function(e,t,n){var r=n(329),a=r.Transformation,o=r.getFudomoParser,i=n(253),c=i.transform,u=i.FudomoComputeException,s=i.TransformationContext,l=n(210),f=l.getSkeletonGenerator,p=l.SKELETON_GENERATORS,d=n(989),m=d.MetamodelInferer,h=d.TransformationValidator,v=d.DataValidator;e.exports={FudomoParser:function(){return o()},parseFudomo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new a(e,t)},transform:c,TransformationContext:s,getSkeletonGenerator:f,SKELETON_GENERATORS:p,MetamodelInferer:m,TransformationValidator:h,DataValidator:v,FudomoComputeException:u}},84:function(e,t,n){"use strict";n.r(t),n.d(t,"QuickfixProposalNoLongerApplicableException",(function(){return l})),n.d(t,"quickfixProposalReviver",(function(){return f})),n.d(t,"QuickfixProposal",(function(){return p})),n.d(t,"RangeReplaceQuickfixProposal",(function(){return d})),n.d(t,"escapeHtml",(function(){return m})),n.d(t,"offsetToRange",(function(){return h})),n.d(t,"reMatchAll",(function(){return v}));var r=n(28),a=n(46),o=n(45),i=n(55),c=n(67),u=n(239);n(952).shim();var s=n(190),l=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return n}(Object(u.a)(Error));function f(e,t){return"RangeReplaceQuickfixProposal"===t.type?d.fromObj(t):t}var p=function(){function e(t,n,r){Object(o.a)(this,e),this.description=t,this.appliesTo=n,this.originalSource=r}return Object(a.a)(e,[{key:"isApplicableToSource",value:function(e){return e===this.originalSource}},{key:"applyToSource",value:function(e){if(e!==this.originalSource)throw new l;return this.apply(e)}},{key:"apply",value:function(e){throw new Error("not implemented")}}]),e}(),d=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e,r,a,i,c){var u;return Object(o.a)(this,n),(u=t.call(this,e,r,a)).range=i,u.replacement=c,u}return Object(a.a)(n,[{key:"apply",value:function(e){var t=s(e,{origin:0}),n=t.toIndex(this.range[0][0],this.range[0][1]),r=t.toIndex(this.range[1][0],this.range[1][1]);return e.slice(0,n)+this.replacement+e.slice(r)}},{key:"toJSON",value:function(){return{type:"RangeReplaceQuickfixProposal",description:this.description,appliesTo:this.appliesTo,originalSource:this.originalSource,range:this.range,replacement:this.replacement}}}],[{key:"fromObj",value:function(e){if("RangeReplaceQuickfixProposal"!==e.type)throw new Error;return new n(e.description,e.appliesTo,e.originalSource,e.range,e.replacement)}}]),n}(p);function m(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function h(e,t,n){if(""===e)return[[0,0],[0,0]];t>=e.length&&(t=e.length-1),t+n>=e.length&&(0==n?t=e.length-1:n=e.length-1-t);var r=s(e,{origin:0}),a=r.fromIndex(t),o=r.fromIndex(t+n);return[[a.line,a.col],[o.line,o.col]]}function v(e,t){var n=s(e,{origin:0});function a(t,r){var a=n.fromIndex(t)||n.fromIndex(e.length-1),o=n.fromIndex(t+r)||n.fromIndex(e.length-1);return[[a.line,a.col],[o.line,o.col]]}var o,i=[],c=Object(r.a)(e.matchAll(t));try{for(c.s();!(o=c.n()).done;){for(var u=o.value,l=[],f=0;f<u.length;f++)void 0!==u[f]&&(l[f]=a(u.indices[f][0],u.indices[f][1]-u.indices[f][0]));u.groupRanges=l,i.push(u)}}catch(p){c.e(p)}finally{c.f()}return i}},912:function(e,t,n){"use strict";(function(e){var t=n(182);t.define("ace/mode/fudomo_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:"comment.fudomo",regex:/#.*/},{token:"keyword.fudomo.val",regex:/val/},{token:"keyword.fudomo.center",regex:/center/},{token:["storage.type.decomposition.fudomo","keyword.operator","entity.name.function.decomposition.fudomo","keyword.operator"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)(:)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","keyword.fudomo.center"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(center)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","keyword.fudomo.val"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(val)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","entity.name.function.forward-link.fudomo"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","keyword.fudomo.center"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(center)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","keyword.fudomo.val"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(val)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","entity.name.function.reverse-link.fudomo"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)/},{token:"variable.local-link.fudomo",regex:/[a-zA-Z][a-zA-Z0-9]*/}]},this.normalizeRules()};o.metaData={fileTypes:["fudomo"],name:"Fudomo",scopeName:"source.fudomo"},r.inherits(o,a),t.FudomoHighlightRules=o})),t.define("ace/mode/fudomo",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./text").Mode,o=e("ace/mode/fudomo_highlight_rules").FudomoHighlightRules,i=function(){this.HighlightRules=o};r.inherits(i,a),function(){}.call(i.prototype),t.Mode=i})),t.require(["ace/mode/fudomo"],(function(t){"object"==typeof exports&&e&&(e.exports=t)}))}).call(this,n(319)(e))},913:function(e,t,n){"use strict";(function(e){var t=n(34),r=n(26),a=n(130);a.define("ace/mode/oyaml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/yaml_highlight_rules"],(function(e,n,a){var o=e("../lib/oop"),i=e("./yaml_highlight_rules").YamlHighlightRules,c=function(){var e=(new i).getRules();this.$rules=Object(r.a)(Object(r.a)({},e),{},{start:[{token:["storage.type.oyaml","variable","keyword.operator"],regex:/([A-Z]\S*)(.*)(:)/}].concat(Object(t.a)(e.start))}),this.normalizeRules()};c.metaData={fileTypes:["oyaml"],name:"OYAML",scopeName:"source.oyaml"},o.inherits(c,i),n.OyamlHighlightRules=c})),a.define("ace/mode/oyaml",["require","exports","module","ace/lib/oop","ace/mode/yaml","ace/mode/oyaml_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./yaml").Mode,o=new a,i=e("ace/mode/oyaml_highlight_rules").OyamlHighlightRules,c=function(){this.HighlightRules=i,this.$outdent=o.$outdent,this.$behaviour=o.$behaviour,this.foldingRules=o.foldingRules};r.inherits(c,a),function(){}.call(c.prototype),t.Mode=c})),a.require(["ace/mode/oyaml"],(function(t){"object"==typeof exports&&e&&(e.exports=t)}))}).call(this,n(319)(e))},914:function(e,t,n){},920:function(e,t,n){},935:function(e,t,n){var r=n(100),a=n(101),o=n(91),i=n(936);!function(){function t(e){return e[0]}function c(e){return{comment:i(e,1)[0].value}}var u=n(940).compile({ws:{match:/[ \t\r\n\v\f]+/,lineBreaks:!0},comment:{match:/\n*#.*\n*/,lineBreaks:!0,value:function(e){return e.trim().slice(1)}},identifier:/[a-zA-Z][a-zA-Z0-9]*/,colon:":",dot:".",comma:",",rightArrow:"->",leftArrow:"<-"}),s=function(){"use strict";function e(t){r(this,e),this.lexer=t}return a(e,[{key:"next",value:function(){var e=this.lexer.next();return e&&"ws"===e.type?this.next():e}},{key:"save",value:function(){return this.lexer.save()}},{key:"reset",value:function(e,t){this.lexer.reset(e,t)}},{key:"formatError",value:function(e){return this.lexer.formatError(e)}},{key:"has",value:function(e){return this.lexer.has(e)}}]),e}(),l=new s(u),f={Lexer:l,ParserRules:[{name:"transformation$ebnf$1",symbols:[]},{name:"transformation$ebnf$1$subexpression$1",symbols:["decomposition"],postprocess:t},{name:"transformation$ebnf$1",symbols:["transformation$ebnf$1","transformation$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"transformation$ebnf$2",symbols:[]},{name:"transformation$ebnf$2$subexpression$1",symbols:[l.has("comment")?{type:"comment"}:c],postprocess:c},{name:"transformation$ebnf$2",symbols:["transformation$ebnf$2","transformation$ebnf$2$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"transformation",symbols:["transformation$ebnf$1","transformation$ebnf$2"],postprocess:function(e){return{decompositions:e[0]}}},{name:"decomposition$ebnf$1",symbols:[]},{name:"decomposition$ebnf$1$subexpression$1",symbols:[l.has("comment")?{type:"comment"}:c],postprocess:c},{name:"decomposition$ebnf$1",symbols:["decomposition$ebnf$1","decomposition$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"decomposition$ebnf$2",symbols:["links"],postprocess:t},{name:"decomposition$ebnf$2",symbols:[],postprocess:function(e){return null}},{name:"decomposition",symbols:["decomposition$ebnf$1","typedFunction",l.has("colon")?{type:"colon"}:colon,"decomposition$ebnf$2"],postprocess:function(e){var t=i(e,4),n=t[0],r=t[1],a=(t[2],t[3]);a=a||[];var o=n.map((function(e){return e.comment.trim()})).join("\n"),c=a.slice(-1)[0]||r;return{typedFunction:r,links:a,comment:o,location:[r.location[0],c.location[1]]}}},{name:"links$ebnf$1",symbols:[]},{name:"links$ebnf$1$subexpression$1",symbols:[l.has("comma")?{type:"comma"}:comma,"link"]},{name:"links$ebnf$1",symbols:["links$ebnf$1","links$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"links",symbols:["link","links$ebnf$1"],postprocess:function(e){var t,n=i(e,2),r=n[0],a=n[1],c=[r],u=o(a);try{for(u.s();!(t=u.n()).done;){var s=i(t.value,2),l=(s[0],s[1]);c.push(l)}}catch(f){u.e(f)}finally{u.f()}return c}},{name:"link",symbols:["localLink"],postprocess:t},{name:"link",symbols:["globalLink"],postprocess:t},{name:"link",symbols:["forwardLink"],postprocess:t},{name:"link",symbols:["reverseLink"],postprocess:t},{name:"localLink",symbols:[l.has("identifier")?{type:"identifier"}:identifier],postprocess:function(e){var t=i(e,1)[0];return{type:"local",reference:t.value,location:[[t.line-1,t.col-1],[t.line-1,t.col+t.value.length-1]]}}},{name:"globalLink",symbols:["typedFunction"],postprocess:function(e){var t=i(e,1)[0];return{type:"global",typedFunction:t,location:t.location}}},{name:"forwardLink",symbols:[l.has("identifier")?{type:"identifier"}:identifier,l.has("rightArrow")?{type:"rightArrow"}:rightArrow,"typedFunction"],postprocess:function(e){var t=i(e,3),n=t[0],r=(t[1],t[2]);return{type:"forward",reference:n.value,typedFunction:r,location:[[n.line-1,n.col-1],r.location[1]]}}},{name:"reverseLink",symbols:[l.has("identifier")?{type:"identifier"}:identifier,l.has("leftArrow")?{type:"leftArrow"}:leftArrow,"typedFunction"],postprocess:function(e){var t=i(e,3),n=t[0],r=(t[1],t[2]);return{type:"reverse",reference:n.value,typedFunction:r,location:[[n.line-1,n.col-1],r.location[1]]}}},{name:"typedFunction",symbols:["type",l.has("dot")?{type:"dot"}:dot,"untypedFunction"],postprocess:function(e){var t=i(e,3),n=t[0],r=(t[1],t[2]);return{type:n.value,untypedFunction:r.value,location:[[n.line-1,n.col-1],[r.line-1,r.col+r.value.length-1]]}}},{name:"type",symbols:[l.has("identifier")?{type:"identifier"}:identifier],postprocess:t},{name:"untypedFunction",symbols:[l.has("identifier")?{type:"identifier"}:identifier],postprocess:t}],ParserStart:"transformation"};"undefined"!==typeof e.exports?e.exports=f:window.grammar=f}()},989:function(e,t,n){var r=n(255),a=n(110),o=n(111),i=n(91),c=n(100),u=n(101),s=n(193),l=s.loadModel,f=(s.loaders,s.CenteredModel,s.ObjectModel),p=function(){"use strict";function e(){c(this,e)}return u(e,[{key:"inferMetamodelFromPaths",value:function(e){var t=e.map((function(e){return l(e)}));return this.inferMetamodel(t)}},{key:"inferMetamodel",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t||{},r=new Set,a=e.map((function(e){return e.center}));a.length>0;){var o=a.pop();if(!r.has(o.id))if(r.add(o.id),void 0==n[o.type]&&(n[o.type]=new Set),o.isScalar){var c=o.scalarType;n[o.type].add(JSON.stringify({scalarType:c}))}else{var u,s=i(o.featureNames);try{for(s.s();!(u=s.n()).done;){var l,p=u.value,d=o.getFeatureAsArray(p),m=i(d);try{for(m.s();!(l=m.n()).done;){var h=l.value,v=n[o.type],y=null,g=null;"cont"==p?(y="containment",g=h.type):h instanceof f?(y="reference",g=h.type):(y="attribute",g=o.getAttributeType(p),Array.isArray(g)&&(g={seq:Array.from(new Set(g))})),v.add(JSON.stringify({name:p,referenceType:y,objectType:g})),h instanceof f&&a.push(h)}}catch(G){m.e(G)}finally{m.f()}}}catch(G){s.e(G)}finally{s.f()}}}for(var b=new Map,k=0,w=Object.keys(n);k<w.length;k++){var j=w[k],x=new Map,E=Array.from(n[j]||[]).map((function(e){return JSON.parse(e)}));if(0!=E.length)if(E.every((function(e){return void 0!==e.scalarType}))){var O=E.map((function(e){return e.scalarType}));0==O.length?b.set(j,null):1==O.length?b.set(j,O[0]):b.set(j,O)}else{b.set(j,x);var S,C=E.filter((function(e){return"attribute"==e.referenceType})),_=E.filter((function(e){return"containment"==e.referenceType})),N=E.filter((function(e){return"reference"==e.referenceType})),I=Array.from(new Set(C.map((function(e){return e.name})))).sort(),P=Array.from(new Set(_.map((function(e){return e.name})))).sort(),F=Array.from(new Set(N.map((function(e){return e.name})))).sort(),R=i(I);try{var T=function(){var e=S.value,t=x.get(e);null==t&&(t=new Set,x.set(e,t));var n,r=i(C.filter((function(t){return t.name==e})));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a.objectType)}}catch(G){r.e(G)}finally{r.f()}};for(R.s();!(S=R.n()).done;)T()}catch(G){R.e(G)}finally{R.f()}var A,L=i(P);try{var M=function(){var e=A.value,t=x.get(e);null==t&&(t=new Set,x.set(e,t));var n,r=i(_.filter((function(t){return t.name==e})));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a.objectType)}}catch(G){r.e(G)}finally{r.f()}};for(L.s();!(A=L.n()).done;)M()}catch(G){L.e(G)}finally{L.f()}var D,z=i(F);try{var q=function(){var e=D.value,t=x.get(e);null==t&&(t=new Set,x.set(e,t));var n,r=i(N.filter((function(t){return t.name==e})));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a.objectType)}}catch(G){r.e(G)}finally{r.f()}};for(z.s();!(D=z.n()).done;)q()}catch(G){z.e(G)}finally{z.f()}}}var B,$=i(b.keys());try{for($.s();!(B=$.n()).done;){var V=B.value,J=b.get(V);if(J instanceof Map){var W,H=i(J.keys());try{for(H.s();!(W=H.n()).done;){var Z=W.value,Q=J.get(Z);J.set(Z,Array.from(Q).sort())}}catch(G){H.e(G)}finally{H.f()}}}}catch(G){$.e(G)}finally{$.f()}return b}}]),e}(),d=new Set(["int","float","bool","string","null"]),m=function(){"use strict";function e(t,n){c(this,e),this.metamodel=t,this.markerContextType=n}return u(e,[{key:"makeError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{context:e,message:t,markerContext:{type:this.markerContextType,location:n||[[0,0],[0,0]]}}}},{key:"typeExists",value:function(e){return!!d.has(e)||("Object"===e||"Root"===e||void 0!==this.metamodel[e])}},{key:"_isAlwaysValidFeature",value:function(e,t){return"val"===t||"center"===t||("Root"===e&&"cont"===t||"Object"===e)}},{key:"_getAttributeOrRefTypeSpec",value:function(e,t){return(this.metamodel[e]||{})[t]}},{key:"attrOrRefExists",value:function(e,t){return!!this._isAlwaysValidFeature(e,t)||void 0!==this._getAttributeOrRefTypeSpec(e,t)}},{key:"attrOrRefHasType",value:function(e,t,n){return!!this._isAlwaysValidFeature(e,t)||(this._getAttributeOrRefTypeSpec(e,t)||[]).includes(n)}}]),e}(),h=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return c(this,n),(a=t.call(this,e,"transformation")).transformation=r,a}return u(n,[{key:"decompositionExists",value:function(e,t){return!!this.transformation.getDecompositionBySignature("".concat(e,".").concat(t))}},{key:"errors",get:function(){var e,t=[],n=i(this.transformation.decompositions);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.typeExists(r.function.type)||t.push(this.makeError(r.function.qualifiedName,"Decomposition Type ".concat(r.function.type," not found in metamodel"),r.function.typeLocation));var a,o=i(r.links);try{for(o.s();!(a=o.n()).done;){var c=a.value;if("forward"==c.kind)if(this.attrOrRefExists(r.function.type,c.referenceName)?this.attrOrRefHasType(r.function.type,c.referenceName,c.function.type)||"Object"===c.function.type||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"Reference Type ".concat(c.function.type," not allowed for reference ").concat(r.function.type,".").concat(c.referenceName),c.function.typeLocation)):t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"Reference ".concat(c.referenceName," not found in type ").concat(r.function.type),c.referenceLocation)),this.typeExists(c.function.type))if(c.function.isAbstract){var u=c.function.name;if("center"!==u){var s,l=(this.metamodel[r.function.type]||{})[c.referenceName]||[],f=i(l);try{for(f.s();!(s=f.n()).done;){var p=s.value;null==this.transformation.getDecompositionBySignature("".concat(p,".").concat(u))&&t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),'No decomposition "'.concat(u,'" found for concrete type ').concat(p),c.function.typeLocation))}}catch(x){f.e(x)}finally{f.f()}}}else this.attrOrRefExists(c.function.type,c.function.name)||this.decompositionExists(c.function.type,c.function.name)||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"No attribute, reference or decomposition found for link target ".concat(c.function.qualifiedName),c.function.location));else t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"Forward Link Type ".concat(c.function.type," not found in metamodel"),c.function.typeLocation));else if("reverse"==c.kind)if(this.attrOrRefExists(c.function.type,c.referenceName)?this.attrOrRefHasType(c.function.type,c.referenceName,r.function.type)||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," <- ").concat(c.function.qualifiedName),"Reference Type ".concat(r.function.type," not allowed for reference ").concat(c.function.type,".").concat(c.referenceName),c.function.typeLocation)):t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," <- ").concat(c.function.qualifiedName),"Reference ".concat(c.referenceName," not found in type ").concat(c.function.type),c.referenceLocation)),this.typeExists(c.function.type))if(c.function.isAbstract){var d=c.function.name;if("center"!==d)for(var m=0,h=Object.keys(this.metamodel);m<h.length;m++){var v=h[m],y=this.metamodel[v];if(null!=y){var g=y[c.referenceName];if(void 0!=g&&g.includes(r.function.type))null==this.transformation.getDecompositionBySignature("".concat(v,".").concat(d))&&t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),'No decomposition "'.concat(d,'" found for concrete type ').concat(v),c.function.typeLocation))}}}else this.attrOrRefExists(c.function.type,c.function.name)||this.decompositionExists(c.function.type,c.function.name)||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"No attribute, reference or decomposition found for link target ".concat(c.function.qualifiedName),c.function.location));else t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," <- ").concat(c.function.qualifiedName),"Reverse Link Type ".concat(c.function.type," not found in metamodel"),c.function.typeLocation));else if("local"==c.kind){var b=this.attrOrRefExists(c.decomposition.function.type,c.function.name),k=null!=this.transformation.getDecompositionBySignature(c.decomposition.function.type+"."+c.function.name);b||k||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.function.name),'No attribute or decomposition with name "'.concat(c.function.name,'" found'),c.location))}else if("global"==c.kind)if("Object"===c.function.type);else if(this.typeExists(c.function.type)){var w=this.attrOrRefExists(c.function.type,c.function.name),j=null!=this.transformation.getDecompositionBySignature(c.function.type+"."+c.function.name);w||j||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.function.qualifiedName),'No attribute or decomposition with name "'.concat(c.function.name,'" found'),c.function.location))}else t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.function.qualifiedName),"Global Link Type ".concat(c.function.type," not found in metamodel"),c.function.typeLocation))}}catch(x){o.e(x)}finally{o.f()}}}catch(x){n.e(x)}finally{n.f()}return t}}]),n}(m),v=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return c(this,n),(a=t.call(this,e,"input")).centeredModel=r,a}return u(n,[{key:"errors",get:function(){for(var e=this,t=[],n=new Set,a=[this.centeredModel.center];a.length>0;){var o=a.pop();if(!n.has(o.id))if(n.add(o.id),this.typeExists(o.type))if(o.isScalar){var c=this.metamodel[o.type];null===c&&(c=[null]),c=Array.isArray(c)?c:[c];var u=o.scalarType;c.includes(u)||t.push(this.makeError("Object of type ".concat(o.type),"".concat(o.type," value has disallowed type ").concat(u),o.scalarValueLocation))}else{var s,l=i(o.featureNames);try{for(l.s();!(s=l.n()).done;){var p=s.value;if(this.attrOrRefExists(o.type,p))if(Array.isArray(o.getAttributeType(p)))!function(){var n=o.getAttributeType(p),a=e._getAttributeOrRefTypeSpec(o.type,p),i=new Set(a.map((function(e){return e.seq})).flat()),c=Array.from(new Set(r(n).filter((function(e){return!i.has(e)}))));c.length>0&&t.push(e.makeError("Object of type ".concat(o.type),"Attribute sequence ".concat(p," contains disallowed type(s): ").concat(c.join(", ")),o.getFeatureValueLocation(p)))}();else{var d,m=i(o.getFeatureAsArray(p));try{for(m.s();!(d=m.n()).done;){var h=d.value,v=null,y=null;h instanceof f?(v=h.type,y=h.typeLocation):(v=o.getAttributeType(p),y=o.getFeatureValueLocation(p)),this.attrOrRefHasType(o.type,p,v)||t.push(this.makeError("Object of type ".concat(o.type),"Attribute or reference ".concat(p," has disallowed type ").concat(v),y)),h instanceof f&&a.push(h)}}catch(g){m.e(g)}finally{m.f()}}else t.push(this.makeError("Object of type ".concat(o.type),"Attribute or reference ".concat(p," not found in type ").concat(o.type," in metamodel"),o.getFeatureNameLocation(p)))}}catch(g){l.e(g)}finally{l.f()}}else t.push(this.makeError("Object of type ".concat(o.type),"Type ".concat(o.type," not found in metamodel"),o.typeLocation))}return t}}]),n}(m);e.exports={MetamodelInferer:p,TransformationValidator:h,DataValidator:v}}},[[1431,1,2]]]);