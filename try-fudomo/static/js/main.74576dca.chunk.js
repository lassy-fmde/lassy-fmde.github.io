(this["webpackJsonptry-fudomo"]=this["webpackJsonptry-fudomo"]||[]).push([[0],{1060:function(e,t){},1062:function(e,t){},1072:function(e,t){},1074:function(e,t){},1101:function(e,t){},1103:function(e,t){},1104:function(e,t){},1109:function(e,t){},1111:function(e,t){},1117:function(e,t){},1119:function(e,t){},1138:function(e,t){},1150:function(e,t){},1153:function(e,t){},121:function(e,t,n){var r=n(92),a=n(93),o=n(102),i=n(103),c=n(194),u=c.AbstractJSObjectLoader,s=c.AbstractOYAMLObjectLoader,l=c.CenteredModel,f=n(230).importModule,p=function(e){"use strict";o(n,e);var t=i(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"loadFromSource",value:function(e){var t=f(e);return this.loadFromData(t)}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Array.isArray(e))throw new Error("Root has to be Object, not Array");return(new JSObjectFactory).getObjectModel(new Root(e),t)}}]),n}(u),m=function(e){"use strict";o(n,e);var t=i(n);function n(){return r(this,n),t.apply(this,arguments)}return a(n,[{key:"loadFromSource",value:function(e){return this.loadFromData(e)}}]),n}(s),d={js:new p,yaml:new m,oyaml:new m};e.exports={loaders:d,CenteredModel:l}},1430:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),i=n.n(o),c=n(30),u=n(1497),s=n(109),l=n(55),f=n(152),p=(n(482),n(2)),m=n.n(p),d=n(7),h=n(14),v=n(419),y=n(299),g=n.n(y),b=n(32),k=n(166),w={width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"var(--theme-neutral-500)"},j={color:"var(--theme-neutral-500)"};function x(e){return a.a.createElement("div",{style:w},a.a.createElement(k.a,{variant:"h3",style:j},e.message),e.children)}var E=n(221),O=n.n(E),S=n(311),C=Object(S.a)({root:{width:"100%",height:"100%",flexDirection:"column",alignItems:"stretch",boxSizing:"border-box",overflow:"hidden",padding:"1em"},container:{flexDirection:"column",border:"2px solid var(--theme-neutral-200)",borderRadius:"6px 6px 0 0",backgroundColor:"transparent",width:"calc(100% - 4px)",height:"calc(100% - 4px)",boxShadow:"2px 2px 12px rgba(0, 0, 0, 0.05)",boxSizing:"border-box",overflow:"hidden"},headerBox:{backgroundColor:"var(--theme-primary-300)",padding:"0.5rem 0.5rem 0.5rem 1rem",boxSizing:"border-box",overflow:"hidden",flexDirection:"row",width:"100%",minHeight:"3em",maxHeight:"3em",alignItems:"center"},header:{minWidth:"1em",overflow:"hidden",textOverflow:"ellipsis",flexGrow:99,flexShrink:99,fontSize:"large",fontWeight:"600",letterSpacing:"0.1em",color:"var(--theme-neutral-800)",textTransform:"uppercase",whiteSpace:"nowrap",cursor:"default"},content:{overflow:"hidden"}});function _(e){var t=Object(r.useCallback)((function(e,t){return a.a.Children.toArray(e).filter((function(e){return Object.keys(e.props).includes("tool")===t}))}),[]),n=C();return a.a.createElement(u.a,{display:"flex",className:n.root},a.a.createElement(u.a,{display:"flex",className:n.container},a.a.createElement(u.a,{display:"flex",className:n.headerBox},a.a.createElement(k.a,{className:n.header},e.title),t(e.children,!0)),a.a.createElement(u.a,{width:"100%",height:"100%",className:n.content},t(e.children,!1))))}var N=n(1470),I=Object(S.a)({button:{marginLeft:"0.5rem",paddingRight:"0.5rem",color:"var(--theme-neutral-800)"},label:{overflow:"hidden",textOverflow:"ellipsis",minWidth:"1em"},startIcon:{marginRight:0},buttonDisabled:{backgroundColor:"var(--theme-neutral-500) !important",color:"var(--theme-neutral-400) !important",cursor:"default"}});function P(e){var t=I(),n=Object(r.useMemo)((function(){return{backgroundColor:e.color}}),[e]),o=Object(r.useMemo)((function(){return{root:t.button,disabled:t.buttonDisabled,label:t.label,startIcon:t.startIcon}}),[t]);return a.a.createElement(N.a,{startIcon:e.startIcon,disabled:e.disabled,style:n,classes:o,size:"small",title:e.title,onClick:e.onClick},e.children)}var F=n(443),R=n(1474),T=n(446),A=n(1475),L=n(424),M=n.n(L),D=n(423),z=n.n(D),q=n(422),B=n.n(q),$=(n(491),n(906),n(907),n(908),n(909),n(910),n(911),n(912),n(913),n(1471)),V=(n(914),window.ResizeObserver||F.a),J={$blockScrolling:1/0},W={scrollPastEnd:1,tabSize:2,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0};function H(e){var t=e.editorId,n=e.value,o=e.disabled,i=e.markers,u=e.language,s=(e.theme,e.onChange),l=e.onQuickfixProposalClicked,f=e.onContextMenu,p=e.functionsRef,m=(i||[]).map((function(e){var t=(void 0!==e.markerContext?e.markerContext.location:e.location)||[[0,0],[0,1]];return{row:t[0][0],column:t[0][1],type:"error",text:e.message,fixes:e.fixes}})),d=(i||[]).map((function(e){var t=(void 0!==e.markerContext?e.markerContext.location:e.location)||[[0,0],[0,1]];return{startRow:t[0][0],startCol:t[0][1],endRow:t[1][0],endCol:t[1][1],type:"text",text:e.message,className:"error-marker"}})),v=Object($.a)((function(e){s&&s(e)}),100),y=Object(h.a)(v,1)[0],g=Object(r.useCallback)((function(e){y(e)}),[y]),b=Object(r.useRef)(),k=Object($.a)((function(e){e.resize()}),250),w=Object(h.a)(k,1)[0];Object(r.useEffect)((function(){if(null!==b.current){var e=new V((function(e){w(b.current.editor)}));return e.observe(b.current.refEditor),function(){e.disconnect()}}}),[b,w]);var j=Object(r.useState)(null),x=Object(h.a)(j,2),E=x[0],O=x[1],S=Object(r.useState)([]),C=Object(h.a)(S,2),_=C[0],N=C[1],I=Object(r.useCallback)((function(e){e.target.classList.contains("ace_error")&&function(){var t,n=b.current.editor.renderer.screenToTextCoordinates(e.clientX,e.clientY).row,r=b.current.editor.renderer.$gutterLayer.$annotations[n],a=[],o=Object(c.a)(m.filter((function(e){return e.row===n&&r.text.includes((""+e.text).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;"))})));try{for(o.s();!(t=o.n()).done;){var i=t.value;i.fixes&&a.push({error:i.text,proposals:i.fixes})}}catch(u){o.e(u)}finally{o.f()}N(a),a.length>0&&O(e.target)}()}),[b,m,O,N]),P=Object(r.useCallback)((function(e){if(f){var t=b.current.editor.renderer.screenToTextCoordinates(e.clientX,e.clientY);f(e,t)}}),[b,f]);Object(r.useEffect)((function(){var e=b.current;return e.editor.renderer.$gutter.addEventListener("click",I),e.editor.container.addEventListener("contextmenu",P),function(){e.editor.container.removeEventListener("contextmenu",P),e.editor.renderer.$gutter.removeEventListener("click",I)}}),[b,I,P,f]);var F=Object(r.useCallback)((function(e){l&&l(e),O(null)}),[l,O]);return p&&(p.current={scrollToRow:function(e){b.current.editor.renderer.scrollToRow(e)}}),a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,{anchorEl:E,getContentAnchorEl:null,anchorOrigin:{horizontal:"left",vertical:"bottom"},open:Boolean(E),onClose:function(e){return O(null)}},_.map((function(e,t){return[a.a.createElement(R.a,{key:"fix-".concat(t),disabled:!0},a.a.createElement(A.a,null,a.a.createElement(z.a,null)),e.error),e.proposals.map((function(e,n){return a.a.createElement(R.a,{key:"fix-".concat(t,"-prop-").concat(n),onClick:function(t){return F(e)}},a.a.createElement(A.a,null,a.a.createElement(M.a,null)),e.description)}))]})).flat()),a.a.createElement(B.a,{ref:b,mode:u||"text",value:n,annotations:m,markers:d,readOnly:o,theme:"chrome",onChange:g,fontSize:16,name:"ace_editor_"+t,editorProps:J,setOptions:W,width:"100%",height:"100%"}))}var Z=a.a.memo(H);var Q=function(e){return a.a.createElement(_,{title:"Metamodel"},a.a.createElement(P,{disabled:e.inferDisabled,startIcon:a.a.createElement(O.a,null),tool:!0,color:"var(--theme-accent1-500)",title:"Infer Metamodel from Input Model",onClick:e.onInferMetamodelClicked},"Infer"),a.a.createElement(Z,{editorId:"metamodel",value:e.value,disabled:e.disabled,language:"yaml",markers:e.markers,onChange:e.onChange}))},G=n(117),U=n.n(G);function K(e){return a.a.createElement(_,{title:"Transformation"},a.a.createElement(P,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:a.a.createElement(U.a,null),title:"Validate Transformation wrt. Metamodel",onClick:e.onValidateTransformClicked},"Validate"),a.a.createElement(Z,{editorId:"transformation",language:"fudomo",value:e.value,markers:e.markers,disabled:e.disabled,onChange:e.onChange,onQuickfixProposalClicked:e.onQuickfixProposalClicked,onContextMenu:e.onContextMenu,functionsRef:e.functionsRef}))}var Y=n(1498),X=n(1476);function ee(e){var t=Object(r.useCallback)((function(t){e.onSelectedLanguageChanged&&e.onSelectedLanguageChanged(t.target.value)}),[e]);return a.a.createElement(_,{title:"Decomp. Functions"},a.a.createElement(X.a,{tool:"true"},a.a.createElement(Y.a,{value:e.language||"",onChange:t,className:"FudomoSelect"},a.a.createElement(R.a,{disabled:e.languageSelectDisabled,value:"javascript"},"JavaScript"),a.a.createElement(R.a,{disabled:e.languageSelectDisabled,value:"python"},"Python 3"))),a.a.createElement(P,{disabled:e.generateDisabled,tool:!0,color:"var(--theme-accent1-500)",startIcon:a.a.createElement(O.a,null),title:"Generate Decomposition Function Skeletons from Transformation",onClick:e.onGenerateSkeletonsClicked},"Generate"),a.a.createElement(P,{disabled:e.validateDisabled,tool:!0,startIcon:a.a.createElement(U.a,null),color:"var(--theme-accent2-500)",title:"Validate Decomposition Functions wrt. Transformation",onClick:e.onValidateFunctionsClicked},"Validate"),a.a.createElement(Z,{editorId:"functions",value:e.value,onChange:e.onChange,disabled:e.disabled,language:e.language,markers:e.markers,onQuickfixProposalClicked:e.onQuickfixProposalClicked,onContextMenu:e.onContextMenu,functionsRef:e.functionsRef}))}function te(e){return a.a.createElement(_,{title:"Input Model"},a.a.createElement(P,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:a.a.createElement(U.a,null),title:"Validate Input Model wrt. Metamodel",onClick:e.onValidateInputClicked},"Validate"),a.a.createElement(Z,{editorId:"input",value:e.value,disabled:e.disabled,onChange:e.onChange,language:"oyaml",markers:e.markers,onQuickfixProposalClicked:e.onQuickfixProposalClicked}))}var ne=n(223),re=n.n(ne),ae=(n(915),n(205)),oe={width:"100%",height:"100%"},ie={padding:"1em",fontFamily:"monospace",whiteSpace:"pre"},ce={width:"100%",height:"100%",padding:"0.5em",boxSizing:"border-box"};function ue(e){var t=Object(r.useState)(null),n=Object(h.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),u=Object(h.a)(c,2),s=u[0],l=u[1],f=Object(r.useState)(null),p=Object(h.a)(f,2),m=p[0],d=p[1],v=Object(r.useCallback)((function(e){null!==e&&i(e)}),[]);return Object(r.useEffect)((function(){if(null!==o){var e=Object(ae.a)(o).graphviz({useWorker:!1}).attributer((function(e){"svg"===e.tag&&(e.attributes.style="width: 100%; height: 100%")})).onerror((function(e){d(String(e))}));l(e)}}),[o]),Object(r.useEffect)((function(){var t=null==e.dot||""===e.dot?"graph{}":e.dot;try{d(null),s.engine(e.engine||"dot").dot(t).render()}catch(m){d(String(m))}}),[e.dot,s,e.engine]),a.a.createElement("div",{style:oe},null!==m&&a.a.createElement("div",{style:ie},null!==m?String(m):""),null===m&&a.a.createElement("div",{ref:v,style:ce}))}var se=0,le={width:"100%",height:"100%"},fe={boxSizing:"border-box",border:"none"};function pe(e){return a.a.createElement("div",{style:le},a.a.createElement("iframe",{title:"iframe".concat(se++),srcDoc:e.html,width:"100%",height:"100%",style:fe}))}var me={padding:"1em",backgroundColor:"var(--theme-accent1-400)",hyphens:"auto"};function de(e){var t="string"===typeof e.value||e.value instanceof String;return a.a.createElement(_,{title:"Output"},a.a.createElement(Y.a,{tool:"true",value:e.format||"",onChange:e.onSelectedFormatChanged,className:"FudomoSelect"},a.a.createElement(R.a,{value:"text"},"Text"),a.a.createElement(R.a,{value:"graphviz-dot"},"GraphViz (Dot)"),a.a.createElement(R.a,{value:"graphviz-neato"},"GraphViz (Neato)"),a.a.createElement(R.a,{value:"html"},"HTML")),a.a.createElement(P,{tool:!0,disabled:e.transformDisabled,startIcon:a.a.createElement(re.a,null),color:"var(--theme-accent1-500)",title:"Transform Input Model to Output",onClick:e.onTransformClicked},"Transform"),t&&a.a.createElement(a.a.Fragment,null,"text"===e.format&&a.a.createElement(Z,{editorId:"output",value:e.value,disabled:e.disabled,format:"text"}),"graphviz-dot"===e.format&&a.a.createElement(ue,{dot:e.value,engine:"dot"}),"graphviz-neato"===e.format&&a.a.createElement(ue,{dot:e.value,engine:"neato"}),"html"===e.format&&a.a.createElement(pe,{html:e.value})),!t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:me},"Warning: non-String value returned by the root decomposition. A converted result is shown below."),a.a.createElement(Z,{editorId:"output",value:String(e.value),disabled:e.disabled,format:"text"})))}var he=n(65),ve=n(426),ye=n.n(ve),ge=n(1502),be=n(1473),ke=n(1439),we=n(224),je=n.n(we),xe=n(1479),Ee={height:"100%",overflowY:"auto",color:"var(--theme-neutral-700)"};function Oe(e){var t=e.project;return a.a.createElement(_,{title:"Input Models"},a.a.createElement(P,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:a.a.createElement(U.a,null),title:"Validate Input Models wrt. Metamodel",onClick:e.onValidateInputsClicked},"Validate"),a.a.createElement(be.a,{style:Ee},t.inputs.map((function(e,n){return a.a.createElement(he.b,{key:n,to:".."+t.url+"/"+e.name,className:"NoLinkStyling"},a.a.createElement(ke.a,{button:!0},a.a.createElement(A.a,{className:"ListItemIcon"},a.a.createElement(je.a,null)),a.a.createElement(xe.a,{primary:e.name}),e.markers&&e.markers.length>0&&a.a.createElement(ge.a,{placement:"top",arrow:!0,title:a.a.createElement("span",{style:{whiteSpace:"pre"}},e.markers.map((function(e){return"- "+e.message})).join("\n"))},a.a.createElement(ye.a,{style:{color:"red"}}))))}))))}var Se=n(1480),Ce=n.n(Se),_e=n(1481),Ne=n.n(_e),Ie=n(1482),Pe=n.n(Ie),Fe=n(1483),Re=n.n(Fe),Te=n(1484),Ae=n.n(Te),Le=n(68),Me=(n(918),n(919),Ce.a),De=Ne.a,ze=Pe.a,qe=Re.a,Be=Ae.a,$e=Ce.a,Ve=Ne.a,Je=Pe.a,We=Re.a,He={overflow:"hidden"},Ze={width:"100%",height:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box"};function Qe(e){var t=Object(r.useState)(!0),n=Object(h.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(!0),s=Object(h.a)(c,2),l=s[0],f=s[1],p=Object(r.useState)(!0),m=Object(h.a)(p,2),d=m[0],v=m[1],y=Object(r.useState)(!0),g=Object(h.a)(y,2),b=g[0],k=g[1],w=Object(r.useState)(!0),j=Object(h.a)(w,2),x=j[0],E=j[1],O=Object(r.useState)(!0),S=Object(h.a)(O,2),C=S[0],_=S[1],N=Object(r.useState)(!0),I=Object(h.a)(N,2),P=I[0],F=I[1],R=150;return a.a.createElement(u.a,{width:"100%",height:"100%",boxSizing:"border-box",overflow:"hidden"},!o&&a.a.createElement("button",{title:"Show Top Row",className:"PaneButton ShowR1Button",onClick:function(){return i(!0)}},a.a.createElement(qe,null)),a.a.createElement(Le.a,{orientation:"horizontal",style:Ze},o&&a.a.createElement(Le.b,{minSize:R,style:He},l&&a.a.createElement("button",{title:"Hide Top Row",className:"PaneButton HideR1Button",onClick:function(){return i(!1)}},a.a.createElement(Je,null)),!d&&a.a.createElement("button",{title:"Show "+e.titles[0],className:"PaneButton ShowR1C1Button",onClick:function(){return v(!0)}},a.a.createElement(De,null)),a.a.createElement(Le.a,{orientation:"vertical"},d&&a.a.createElement(Le.b,{minSize:R,style:He},(b||x)&&a.a.createElement("button",{title:"Hide "+e.titles[0],className:"PaneButton HideR1C1Button",onClick:function(){return v(!1)}},a.a.createElement($e,null)),e.children[0],!b&&a.a.createElement("button",{title:"Show "+e.titles[1],className:"PaneButton ShowR1C2Button1",onClick:function(){return k(!0)}},a.a.createElement(Be,null))),d&&(b||x)&&a.a.createElement(Le.c,{propagate:!0}),b&&a.a.createElement(Le.b,{minSize:R,style:He},(d||x)&&a.a.createElement("button",{title:"Hide "+e.titles[1],className:"PaneButton HideR1C2Button2",onClick:function(){return k(!1)}},a.a.createElement(Ve,null)),e.children[1]),b&&x&&a.a.createElement(Le.c,{propagate:!0}),x&&a.a.createElement(Le.b,{minSize:R,style:He},(d||b)&&a.a.createElement("button",{title:"Hide "+e.titles[2],className:"PaneButton HideR1C3Button",onClick:function(){return E(!1)}},a.a.createElement(Ve,null)),!b&&a.a.createElement("button",{title:"Show "+e.titles[1],className:"PaneButton ShowR1C2Button2",onClick:function(){return k(!0)}},a.a.createElement(Be,null)),e.children[2])),!x&&a.a.createElement("button",{title:"Show "+e.titles[2],className:"PaneButton ShowR1C3Button",onClick:function(){return E(!0)}},a.a.createElement(Me,null))),o&&l&&a.a.createElement(Le.c,null),l&&a.a.createElement(Le.b,{minSize:R,style:He},o&&a.a.createElement("button",{title:"Hide Bottom Row",className:"PaneButton HideR2Button",onClick:function(){return f(!1)}},a.a.createElement(We,null)),a.a.createElement(Le.a,{orientation:"vertical"},C&&a.a.createElement(Le.b,{minSize:R,style:He},C&&P&&a.a.createElement("button",{title:"Hide "+e.titles[3],className:"PaneButton HideR2C1Button",onClick:function(){return _(!1)}},a.a.createElement($e,null)),e.children[3]),C&&P&&a.a.createElement(Le.c,null),P&&a.a.createElement(Le.b,{minSize:R,style:He},C&&P&&a.a.createElement("button",{title:"Hide "+e.titles[4],className:"PaneButton HideR2C2Button",onClick:function(){return F(!1)}},a.a.createElement(Ve,null)),e.children[4])))),!C&&a.a.createElement("button",{title:"Show "+e.titles[3],className:"PaneButton ShowR2C1Button",onClick:function(){return _(!0)}},a.a.createElement(De,null)),!P&&a.a.createElement("button",{title:"Show "+e.titles[4],className:"PaneButton ShowR2C2Button",onClick:function(){return F(!0)}},a.a.createElement(Me,null)),!l&&a.a.createElement("button",{title:"Show Bottom Row",className:"PaneButton ShowR2Button",onClick:function(){return f(!0)}},a.a.createElement(ze,null)))}function Ge(e){var t=e.position,n=e.onClose,r=e.items,o=null!==t,i=t?{top:t.y,left:t.x}:null;return a.a.createElement(T.a,{anchorReference:"anchorPosition",anchorPosition:i,open:o,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"left"}},r.map((function(e,t){return a.a.createElement(R.a,{key:t,onClick:e.onClick},e.label)})))}var Ue=Object(r.createContext)();function Ke(e){var t=Object(f.useSnackbar)(),n=t.enqueueSnackbar,o=t.closeSnackbar,i=Object(r.useCallback)((function(e){e=Array.isArray(e)?e:[e];var t,r=Object(c.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(null!==i&&void 0!==i){var u="pre"===i.formatting?{whiteSpace:"pre"}:{},s="success"===i.type?"success":"error",l=i.message;"exception"===i.type&&(u.whiteSpace="pre",u.fontFamily="'Droid Sans Mono', monospace"),l&&function(){var e=n(a.a.createElement("p",{style:u},String(l)),{variant:s,onClick:function(){return o(e)}})}()}}}catch(f){r.e(f)}finally{r.f()}}),[n,o]),u=Object(r.useCallback)((function(e){i([{type:"success",message:e}])}),[i]),s=Object(r.useCallback)((function(e){i([{type:"error",message:e}])}),[i]),l=Object(r.useCallback)((function(e){i([{type:"error",message:e,formatting:"pre"}])}),[i]),p=Object(r.useCallback)((function(e){i([{type:"exception",error:e}])}),[i]),m={showStatus:i,showSuccess:u,showError:s,showErrorPre:l,showException:p};return a.a.createElement(Ue.Provider,{value:m,children:e.children})}var Ye=n(26),Xe=n(97),et=n(100),tt=n.n(et),nt=n(430),rt=n(431);function at(e){return{type:"success",message:e}}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"error",message:e,formatting:t}}function it(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"exception",message:e.toString(),formatting:t}}var ct=Object(Xe.b)({name:"status",initialState:[{type:"success",message:null}],reducers:{setStatus:function(e,t){return Array.isArray(t.payload)?t.payload:[t.payload]}}}),ut=ct.actions.setStatus,st=ct.reducer,lt=n(45),ft=n.n(lt),pt=n(83),mt=n(121),dt=n(230),ht=n(445),vt=n(34),yt=n(58),gt=n(59),bt=n(70),kt=n(85),wt=n(164),jt=n(211),xt=n(158),Et=n.n(xt);function Ot(e){return St.apply(this,arguments)}function St(){return(St=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=window.document.getElementsByTagName("head")[0],a=window.document.createElement("script");r.appendChild(a),a.onload=function(){e()},a.setAttribute("async",!0),a.setAttribute("type","text/javascript"),a.setAttribute("src",t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ct=n(1034),_t=function(e){Object(bt.a)(n,e);var t=Object(kt.a)(n);function n(e){var r;if(Object(yt.a)(this,n),r=t.call(this),null==e)throw new Error("No exception provided");if(void 0===e.errorObj)throw new Error("No error object provided");return r.error=e.errorObj,r.message=e.message,r}return Object(gt.a)(n,[{key:"location",get:function(){if(0===this.error.stack.length)return null;var e=this.error.stack.slice(0).reverse()[0],t=e.startLine,n=e.startCol,r=e.endLine,a=e.endCol;return t===r&&n===a&&(a=n+e.line.slice(n).trim().length+1),[[t-1,n-1],[r-1,a-1]]}},{key:"toString",value:function(){var e,t="".concat(this.error.message,"\n"),n=this.error.stack.slice(0).reverse(),r=Object(c.a)(n);try{for(r.s();!(e=r.n()).done;){var a=e.value,o=a.line||"";t+="    at (PY) ".concat(o.trim()," (").concat(a.startLine,":").concat(a.startCol,")\n")}}catch(i){r.e(i)}finally{r.f()}return t.slice(0,-1)}}]),n}(wt.StackFrame),Nt=function(e){Object(bt.a)(n,e);var t=Object(kt.a)(n);function n(e){var r;Object(yt.a)(this,n),r=t.call(this);var a=window.load_python_module(e);if("ok"!==a){var o=JSON.parse(a),i=new wt.PythonError(o),c=[r.exceptionToStackFrame(i)];throw new lt.FudomoComputeException(c)}return r}return Object(gt.a)(n,[{key:"finalize",value:function(){}},{key:"hasFunction",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.has_function(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){return Object(jt.getSkeletonGenerator)("python")}},{key:"convertScalarValue",value:function(e,t){if("oyaml"===e){if(null==t)return null;if(t.kind!==Ct.Kind.SCALAR)throw new Error("Expected Scalar YAML node");return t.valueObject instanceof Date?window.js_date_to_datetime(t.valueObject):Ct.determineScalarType(t)===Ct.ScalarType.string?t.value:t.valueObject}throw"js"===e?new Error("Not implemented"):new Error("Unsupported object model type "+e)}},{key:"wrapObject",value:function(e){var t=this;return e instanceof Set?{_type:"Set",values:Object(vt.a)(e).map((function(e){return t.wrapObject(e)}))}:e instanceof Array?e.map((function(e){return t.wrapObject(e)})):e}},{key:"unwrapObject",value:function(e){var t=this;return"Set"===e._type?new Set(e.values.map(this.unwrapObject)):e instanceof Array?e.map((function(e){return t.unwrapObject(e)})):void 0!==e.__class__&&"NoneType"===e.__class__.$infos.__name__?null:e}},{key:"callFunction",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r,a,o,i,c,u,s=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.map((function(e){return s.wrapObject(e)})),a=window.call_function(t,r),o=Object(h.a)(a,2),i=o[0],c=o[1],!i){e.next=5;break}throw u=JSON.parse(c),new wt.PythonError(u);case 5:return e.abrupt("return",this.unwrapObject(c));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.to_string(this.wrapObject(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exceptionToStackFrame",value:function(e){return new _t(e)}},{key:"getAppendNewFunctionSkeletonRange",value:function(e){return Object(pt.offsetToRange)(e,e.length,0)}},{key:"getFunctionSignatures",value:function(e){var t=Object(ht.a)(/(def[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)([0-9A-Z_a-z][0-9A-Z_a-z]*)([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\()([\n #,0-9A-Z_a-z]+)?(\)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*:)([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*#(?:(?!\n)[\s\S])*\n)?(([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?)(("""|'''|"|')(\n|.)*?(\10)))?/g,{fname:2,params:4,comment:9}),n=/(\s*)([\w\d_]+)([\s,]*)/g;return Object(pt.reMatchAll)(e,t).map((function(t){return{signature:t[0],signatureRange:t.groupRanges[0],funcName:t[2],funcNameRange:t.groupRanges[2],parameters:Object(pt.reMatchAll)(t[4]||"",n).map((function(n){return{name:n[2],nameRange:Object(pt.offsetToRange)(e,t.indices[4][0]+n.indices[2][0],n.indices[2][1]-n.indices[2][0])}})),parametersListRange:t.groupRanges[4],comment:t[9],commentRange:t.groupRanges[9]}}))}}],[{key:"init",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot("".concat(window.public_url,"/js/brython/brython.js"));case 2:return e.next=4,Ot("".concat(window.public_url,"/js/brython/brython_stdlib.js"));case 4:t=window.document.getElementsByTagName("head")[0],(n=window.document.createElement("script")).setAttribute("type","text/python3"),t.appendChild(n),n.textContent="\nfrom browser import run_script, window\nimport javascript\n\nimport inspect\nimport sys\nimport traceback\nimport re\nimport json\nimport datetime\n\n_source = '' # global state: current module source. Set by calling load_python_module.\n_mod = None  # global state: current module dict. Set by calling load_python_module.\n\ndef load_python_module(py):\n  global _mod\n  global _source\n  _source = py\n  scope = {}\n\n  try:\n    exec(py, scope)\n    _mod = scope\n    return 'ok' # string is passed easily to JS side\n  except Exception as e: # eg. SyntaxError\n    return encodeException(e)\n\nwindow.load_python_module = load_python_module\n\ndef validate_function(functionName, parameterNames):\n\n  func = _mod.get(functionName, None)\n\n  errors = []\n  if func is None:\n    errors.append(f'Expected implementation of decomposition function \"{functionName}\" not found.')\n  else:\n    sig = inspect.signature(func)\n    actualParamNames = [name for name in sig.parameters.keys()]\n    if parameterNames != actualParamNames:\n      errors.append(f'''Implementation of decomposition function \"{functionName}\" does not have expected parameters \"{', '.join(parameterNames)}\"''')\n    # TODO could check parameter type (keyword, *, **)\n  return errors\nwindow.validate_function = validate_function\n\ndef has_function(name):\n  return name in _mod\nwindow.has_function = has_function\n\ndef list_to_tuple(l):\n  if isinstance(l, list):\n    return tuple(l)\n  return l\n\ndef js_date_to_datetime(js_date):\n  year = js_date.getFullYear()\n  month = js_date.getMonth() + 1\n  day = js_date.getDate()\n  hour = js_date.getHours()\n  minute = js_date.getMinutes()\n  second = js_date.getSeconds()\n  milli = js_date.getMilliseconds()\n  tz_offset = js_date.getTimezoneOffset()\n  tz = datetime.timezone(datetime.timedelta(minutes=-tz_offset))\n  res = datetime.datetime(year, month, day, hour, minute, second, milli*1000, tz)\n  return res\nwindow.js_date_to_datetime = js_date_to_datetime\n\ndef datetime_to_js_date(dt):\n  dt = dt.astimezone(datetime.timezone.utc) # js works in UTC\n  return javascript.Date.new(dt.year, dt.month - 1, dt.day, dt.hour, dt.second, dt.microsecond/1000)\nwindow.datetime_to_js_date = datetime_to_js_date\n\ndef unwrapObject(o):\n  if getattr(o, '_type', None) == 'Set':\n    # lists can not be put into sets because they are not hashable.\n    # Here, we turn lists into tuples so that they can be put.\n    return set([unwrapObject(list_to_tuple(obj)) for obj in getattr(o, 'values')])\n  elif isinstance(o, list):\n    return [unwrapObject(obj) for obj in o]\n  elif hasattr(o, 'constructor') and o.constructor.name == 'Date':\n    # turn passed-in attributes that are Javascript Dates into Python datetime objects\n    return js_date_to_datetime(o)\n  return o\n\ndef wrapObject(o):\n  if isinstance(o, set):\n    return { '_type': 'Set', 'values': [wrapObject(obj) for obj in o] }\n  elif isinstance(o, list):\n    return [wrapObject(obj) for obj in o]\n  elif isinstance(o, datetime.datetime):\n    # Turn returned Python datetime instances into Javascript dates\n    return datetime_to_js_date(o)\n  return o\n\n# adapted from fudomo-transform/src/function_runner_base.py\ndef encodeException(e):\n  t, v, tb = sys.exc_info()\n  e_str = traceback.format_exception_only(t, v)[0].strip()\n  stack = traceback.extract_tb(tb)\n  if t == SyntaxError:\n    # quick and dirty special handling of syntax errrors\n    line_nr = int(e_str.split(' ')[-1]) # TODO handle format error\n    line = _source.split('\\n')[line_nr - 1]\n    message = 'SyntaxError: ' + str(e)\n    return json.dumps({ 'message': message, 'stack': [{ 'startLine': line_nr, 'endLine': line_nr, 'startCol': len(line)-len(line.lstrip()) + 1, 'endCol': len(line.rstrip()) + 1 }] })\n\n  processed_stack = []\n  for entry in stack:\n    if entry.filename != __file__:\n\n      orig_line = entry.line\n      if not orig_line:\n        try:\n          source_lines = _source.split('\\n')\n          orig_line = source_lines[entry.lineno - 1]\n        except IndexError:\n          orig_line = None\n\n      if orig_line:\n        start_col = len(re.match(r'^(\\s*)[^\\s]', orig_line).group(1)) + 1\n      else:\n        start_col = 0\n      e = { 'filename': entry.filename, 'startLine': entry.lineno, 'endLine': entry.lineno, 'startCol': start_col, 'endCol': start_col + len(entry.line) }\n      if orig_line is not None:\n        e['line'] = orig_line\n      processed_stack.append(e)\n\n  exc_obj = { 'message': e_str, 'stack': processed_stack }\n  return json.dumps(exc_obj)\n\ndef call_function(name, args):\n  args = [unwrapObject(a) for a in args]\n  f = _mod.get(name)\n  is_exception = False\n  try:\n    res = f(*args)\n  except Exception as e:\n    is_exception = True\n    res = encodeException(e)\n  return is_exception, wrapObject(res)\nwindow.call_function = call_function\n\ndef to_string(obj):\n  return str(unwrapObject(obj))\nwindow.to_string = to_string\n",window.brython();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(wt.DecompositionFunctionRunner),It=Nt;function Pt(e,t){var n=[];try{var r=mt.loaders.oyaml.loadFromSource(e.inputs.find((function(e){return e.name===t})).input),a=new mt.CenteredModel(r,r);if(!e.metamodel)return[ot("Can not validate input: metamodel is empty")];var o=tt.a.parse(e.metamodel);n=new ft.a.DataValidator(o,a).errors}catch(i){if(void 0===i.markers)throw console.error(i),i;n=n.concat(i.markers)}return n}function Ft(e,t){try{var n=Pt(e,t);e.inputs.find((function(e){return e.name===t})).markers=n;var r=n.length>0?ot("Input validation error(s) found:\n"+n.map((function(e){return e.message})).join("\n"),"pre"):at("Input data validation successful.");e.status=r}catch(a){e.status=it(a)}return e}function Rt(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(d.a)(m.a.mark((function e(t){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,"python"===t.functionsLanguage&&(n=new It(t.functions)),"javascript"!==t.functionsLanguage){e.next=8;break}return r=Object(dt.getRunnerClassById)("javascript"),e.next=6,Object(dt.importModule)(t.functions);case 6:a=e.sent,n=new r(a);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function At(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(d.a)(m.a.mark((function e(t,n){var r,a,o,i,c,u,s,l,f,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,n(zt.setFunctionsMarkers([])),n(zt.setTransformationMarkers([])),a=null,e.prev=5,e.next=8,Rt(t);case 8:a=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),n(zt.setFunctionsMarkers([{message:e.t0.message,markerContext:{type:"functions",location:e.t0.location}}])),r.push(it(e.t0));case 15:if((o=ft.a.parseFudomo(t.transformation)).hasError&&(i=o.errors,n(zt.setTransformationMarkers(i)),r.push(ot("Transformation error(s) found:\n"+i.map((function(e){return e.error})).join("\n"),"pre")),o=null),null===a||null===o){e.next=30;break}return c=ft.a.getSkeletonGenerator(t.functionsLanguage),u=c.getFunctionValidationCriteria(o),e.next=22,a.validateFunctions(t.functions,u,o);case 22:return s=e.sent,l=s.filter((function(e){return"function"===e.markerContext.type})),f=s.filter((function(e){return"transformation"===e.markerContext.type})),n(zt.setFunctionsMarkers(l)),p=f.map((function(e){return{message:e.message,markerContext:{type:"transformation",location:o.getDecompositionBySignature(e.markerContext.decompositionQualifiedName).characterRange.toArray()},fixes:e.fixes}})),n(zt.setTransformationMarkers(p)),s.length>0&&r.push(ot("Decomposition function validation error(s) found:\n"+s.map((function(e){return e.message})).join("\n"),"pre")),e.abrupt("return",0===s.length);case 30:e.next=36;break;case 32:return e.prev=32,e.t1=e.catch(1),r.push(it(e.t1)),e.abrupt("return",!1);case 36:return e.prev=36,n(zt.setProjectStatus(r)),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[1,32,36,39],[5,11]])})))).apply(this,arguments)}var Mt=Object(Xe.b)({name:"project",initialState:null,reducers:{inferMetamodel:function(e){l.a.event({category:"Project",action:"Inferred Metamodel",label:e.url});try{var t,n=new ft.a.MetamodelInferer,r=[],a=Object(c.a)(e.inputs);try{for(a.s();!(t=a.n()).done;){var o=t.value;try{var i=mt.loaders.oyaml.loadFromSource(o.input);r.push(new mt.CenteredModel(i,i)),o.markers=[]}catch(s){return e.status=ot('Error in input "'.concat(o.name,'":\n').concat(s.message),"pre"),void(o.markers=s.markers)}}}catch(f){a.e(f)}finally{a.f()}var u=n.inferMetamodel(r);nt.nullOptions.nullStr="",e.metamodel=u.size>0?tt.a.stringify(u):"Root:",e.status=at("Metamodel successfully inferred.")}catch(s){e.status=it(s)}},generateSkeletons:function(e){l.a.event({category:"Project",action:"Generated Skeletons",label:e.url+" ("+e.functionsLanguage+")"});try{var t=ft.a.getSkeletonGenerator(e.functionsLanguage),n=ft.a.parseFudomo(e.transformation);if(n.hasError)e.transformationMarkers=n.errors,e.status=ot("Transformation has error(s): "+n.errors.map((function(e){return e.message})).join("\n"),"pre");else{var r=t.generateSkeleton(n);e.functions=r,e.functionMarkers=[],e.status=at("Decomposition function skeletons successfully generated.")}}catch(a){e.status=it(a)}},validateTransformation:function(e){l.a.event({category:"Project",action:"Validated Transformation",label:e.url});try{if(e.metamodel){var t=tt.a.parse(e.metamodel),n=ft.a.parseFudomo(e.transformation);if(n.hasError)e.transformationMarkers=n.errors,e.status=ot("Can not parse transformation");else{var r=new ft.a.TransformationValidator(t,n),a=r.errors.length>0?ot("Transformation validation error(s) found:\n"+r.errors.map((function(e){return e.message})).join("\n"),"pre"):at("Transform validation successful.");e.transformationMarkers=r.errors,e.status=a}}else e.status=ot("Can not validate transformation: metamodel is empty")}catch(o){e.status=it(o)}},validateInput:function(e,t){if(void 0===t.payload)throw new Error("inputId missing");l.a.event({category:"Project",action:"Validated Input",label:e.url+"."+t.payload}),Ft(e,t.payload)},validateInputs:function(e){l.a.event({category:"Project",action:"Validated Inputs",label:e.url}),function(e){var t,n=[],r=Object(c.a)(e.inputs);try{for(r.s();!(t=r.n()).done;){var a=t.value;try{var o=Pt(e,a.name);a.markers=o,o.length>0&&n.push('Input "'.concat(a.name,'" error(s):\n')+o.map((function(e){return"- "+e.message})).join("\n"))}catch(i){n.push(String(i))}}}catch(u){r.e(u)}finally{r.f()}e.status=0===n.length?at("Input data validation successful."):ot(n.join("\n"),"pre")}(e)},setMetamodel:function(e,t){e.metamodel=t.payload,e.status=null},setMetamodelMarkers:function(e,t){e.metamodelMarkers=t.payload,e.status=null},setTransformation:function(e,t){e.transformation=t.payload,e.status=null},setTransformationMarkers:function(e,t){e.transformationMarkers=t.payload,e.status=null},setFunctions:function(e,t){e.functions=t.payload,e.status=null},setFunctionsMarkers:function(e,t){e.functionsMarkers=t.payload,e.status=null},setFunctionsLanguage:function(e,t){e.functionsLanguage=t.payload,e.status=null},createInput:function(e,t){if(console.log(e,t),null===e)return e;t.payload.projectName===e.name&&(e.inputs.push({name:t.payload.name,input:t.payload.value||""}),e.status=null)},deleteInput:function(e,t){if(null===e)return e;t.payload.projectName===e.name&&(e.inputs.splice(e.inputs.findIndex((function(e){return e.name===t.payload.name})),1),e.status=null)},renameInput:function(e,t){if(null===e)return e;if(t.payload.projectName===e.name){var n,r=Object(c.a)(e.inputs);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.name===t.payload.name&&(a.name=t.payload.newName,e.status=null)}}catch(o){r.e(o)}finally{r.f()}}},setInput:function(e,t){if(void 0===t.payload.inputId)throw new Error("inputId missing");var n=e.inputs.find((function(e){return e.name===t.payload.inputId}));null!==n&&(n.input=t.payload.value),e.status=null},setInputMarkers:function(e,t){if(void 0===t.payload.inputId)throw new Error("inputId missing");e.inputs.find((function(e){return e.name===t.payload.inputId})).markers=t.payload.value,e.status=null},setOutput:function(e,t){e.output=t.payload,e.status=null},setOutputFormat:function(e,t){e.outputFormat=t.payload,e.status=null},setProject:function(e,t){var n=null;return t.payload&&((n=Object.assign({},t.payload)).status=null),n},setProjectStatus:function(e,t){e.status=Array.isArray(t.payload)?t.payload:[t.payload]},setHasUnsavedData:function(e,t){t.payload?e.hasUnsavedData=!0:delete e.hasUnsavedData}}}),Dt={transform:function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n,r){var a,o,i,c,u,s,f,p,d,h,v,y,g,b,k,w,j,x,E,O,S,C,_;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}throw new Error("inputId missing");case 2:return a=r().project,l.a.event({category:"Project",action:"Ran Transformation",label:a.url}),n(zt.setOutput("")),n(zt.setMetamodelMarkers([])),n(zt.setInputMarkers({inputId:e,value:[]})),n(zt.setFunctionsMarkers([])),n(zt.setTransformationMarkers([])),o=[],t.prev=10,i=!0,c=null,t.prev=13,t.next=16,Rt(a);case 16:c=t.sent,t.next=23;break;case 19:t.prev=19,t.t0=t.catch(13),o.push(it(t.t0)),i=!1;case 23:u=void 0;try{u=mt.loaders.oyaml.loadFromSource(a.inputs.find((function(t){return t.name===e})).input)}catch(m){n(zt.setInputMarkers({inputId:e,value:m.markers})),o.push(it(m)),i=!1}return(s=ft.a.parseFudomo(a.transformation)).hasError&&(f=s.errors,n(zt.setTransformationMarkers(f)),o.push(ot("Transformation error(s) found:\n"+f.map((function(e){return e.error})).join("\n"),"pre")),s=null,i=!1),t.next=29,At(a,n);case 29:t.sent||(i=!1),p=null;try{p=tt.a.parse(a.metamodel)}catch(m){d=m.message,h=[[0,0],[0,0]],m.source&&m.source.rangeAsLinePos&&(v=m.source.rangeAsLinePos,h=[[v.start.line-1,v.start.col-1],[v.end.line-1,v.end.col-1]]),n(zt.setMetamodelMarkers([{message:d,markerContext:{type:"metamodel",location:h}}])),o.push(it(m)),i=!1}if(0===a.metamodel.trim().length&&(y="Empty metamodel is not allowed. Click <Infer> to create metamodel for current input data.",n(zt.setMetamodelMarkers([{message:y,markerContext:{type:"metamodel",location:[[0,0],[0,0]]}}])),o.push(ot(y)),i=!1),void 0!==u&&null!==p&&(g=new mt.CenteredModel(u,u),(b=new ft.a.DataValidator(p,g)).errors.length>0&&(n(zt.setInputMarkers({inputId:e,value:b.errors})),k=ot("Input validation error(s) found:\n"+b.errors.map((function(e){return e.message})).join("\n"),"pre"),o.push(k),i=!1)),null!==s&&null!==p&&(s.hasError||(w=new ft.a.TransformationValidator(p,s)).errors.length>0&&(n(zt.setTransformationMarkers(w.errors)),j=ot("Transformation validation error(s) found:\n"+w.errors.map((function(e){return e.message})).join("\n"),"pre"),o.push(j),i=!1)),!i){t.next=56;break}return x=new mt.CenteredModel(u,u),E=new ft.a.TransformationContext(s,x,c),O=performance.now(),t.next=42,ft.a.transform(E);case 42:S=t.sent,C=performance.now(),console.log("Transformation took ".concat(C-O," ms")),t.prev=45,n(zt.setOutput(S)),t.next=55;break;case 49:return t.prev=49,t.t1=t.catch(45),t.next=53,c.toString(S);case 53:_=t.sent,n(zt.setOutput([_]));case 55:o.push(at("Transformation successful."));case 56:t.next=62;break;case 58:t.prev=58,t.t2=t.catch(10),t.t2.fudomoStack&&n(zt.setFunctionsMarkers([{message:t.t2.message,markerContext:{type:"functions",location:t.t2.location}}])),o.push(it(t.t2));case 62:return t.prev=62,n(zt.setProjectStatus(o)),t.finish(62);case 65:case"end":return t.stop()}}),t,null,[[10,58,62,65],[13,19],[45,49]])})));return function(e,n){return t.apply(this,arguments)}}()},applyQuickfix:function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n,r){var a,o,i,c,u,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r().project,o=pt.RangeReplaceQuickfixProposal.fromObj(e.proposal),i=null,"functions"!==o.appliesTo){t.next=7;break}i=a.functions,t.next=16;break;case 7:if("transformation"!==o.appliesTo){t.next=11;break}i=a.transformation,t.next=16;break;case 11:if("input"!==o.appliesTo){t.next=15;break}i=a.inputs.find((function(t){return t.name===e.inputId})).input,t.next=16;break;case 15:throw new Error;case 16:if(t.prev=16,c=o.applyToSource(i),"functions"===o.appliesTo?n(zt.setFunctions(c)):"transformation"===o.appliesTo?n(zt.setTransformation(c)):"input"===o.appliesTo&&n(zt.setInput({inputId:e.inputId,value:c})),u=Object(rt.a)(a),"functions"!==o.appliesTo){t.next=25;break}u.functions=c,At(u,n),t.next=36;break;case 25:if("transformation"!==o.appliesTo){t.next=28;break}t.next=36;break;case 28:if("input"!==o.appliesTo){t.next=35;break}(s=u.inputs.find((function(t){return t.name===e.inputId}))).input=c,Ft(u,e.inputId),n(zt.setInputMarkers({inputId:e.inputId,value:s.markers})),t.next=36;break;case 35:throw new Error("Not implemented");case 36:t.next=42;break;case 38:if(t.prev=38,t.t0=t.catch(16),t.t0 instanceof pt.QuickfixProposalNoLongerApplicableException){t.next=42;break}throw t.t0;case 42:case"end":return t.stop()}}),t,null,[[16,38]])})));return function(e,n){return t.apply(this,arguments)}}()},validateFunctions:function(){return function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n().project,l.a.event({category:"Project",action:"Validated Functions",label:r.url}),At(r,t)&&t(zt.setProjectStatus(at("Decomposition function validation successful.")));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},zt=Object(Ye.a)(Object(Ye.a)({},Mt.actions),Dt),qt=Mt.reducer,Bt={color:"var(--theme-neutral-500)",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5em",fontWeight:"500"},$t={position:"absolute",backgroundColor:"rgba(255, 255, 255, 0.85)",color:"var(--theme-neutral-500)",width:"100%",height:"100%",zIndex:1e4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"0.5em",fontWeight:"500"},Vt=["Metamodel","Transformation","Functions","Input","Output"];function Jt(e){var t=Object(b.c)().dispatch,n=Object(b.b)((function(e){return e.project})),o=e.inputId||void 0,i=e.projectName,c=e.workspace,s=e.workspaceActions,l=Object(r.useContext)(Ue),f=l.showStatus,p=l.showError,y=Object(b.b)((function(e){var t;return null===(t=e.project)||void 0===t?void 0:t.status})),k=Object(b.b)((function(e){var t;return!0===(null===(t=e.project)||void 0===t?void 0:t.hasUnsavedData)})),w=Object(r.useState)(!1),j=Object(h.a)(w,2),E=j[0],O=j[1];Object(r.useEffect)((function(){f(y)}),[f,y]),Object(r.useEffect)((function(){E&&t(s.loadProject(i))}),[i,t,E,s]),Object(r.useEffect)((function(){O(c&&c.isInitialized)}),[c,O]);var S=Object(r.useCallback)((function(e){t(zt.setMetamodel(e))}),[t]),C=Object(r.useCallback)((function(e){t(zt.setTransformation(e))}),[t]),N=Object(r.useCallback)((function(e){t(zt.setFunctions(e))}),[t]),I=Object(r.useCallback)((function(e){t(zt.setFunctionsLanguage(e)),t(zt.setFunctions(""))}),[t]),P=Object(r.useCallback)((function(e){t(zt.setInput({inputId:o,value:e}))}),[t,o]),F=Object(r.useCallback)((function(e){t(zt.setOutput(e))}),[t]),R=Object(r.useCallback)((function(e){t(zt.setOutputFormat(e.target.value))}),[t]),T=Object(r.useCallback)((function(e){t(zt.inferMetamodel())}),[t]),A=Object(r.useCallback)((function(e){t(zt.generateSkeletons())}),[t]),L=Object(r.useCallback)((function(e){t(zt.transform(o))}),[t,o]),M=Object(r.useCallback)((function(e){t(zt.validateInput(o))}),[t,o]),D=Object(r.useCallback)((function(e){t(zt.validateInputs())}),[t]),z=Object(r.useCallback)((function(e){t(zt.validateTransformation())}),[t]),q=Object(r.useCallback)((function(e){t(zt.validateFunctions())}),[t]),B=Object(r.useCallback)((function(e){var n={proposal:e};"input"===e.appliesTo&&(n.inputId=o),t(zt.applyQuickfix(n))}),[t,o]),$=Object(b.b)((function(e){if(e.project&&!n.isLoading)return n.inputs.find((function(e){return e.name===o}))})),V=Object(r.useState)(null),J=Object(h.a)(V,2),W=J[0],H=J[1],Z=Object(r.useCallback)((function(e,t,n){return H(e),null}),[H]);Object(r.useEffect)((function(){k||null===W||(W.resume(),H(null))}),[k,W,H]);var G=Object(r.useState)(null),U=Object(h.a)(G,2),Y=U[0],X=U[1],ne=Object(r.useState)([]),re=Object(h.a)(ne,2),ae=re[0],oe=re[1],ie=Object(r.useRef)(null),ce=Object(r.useRef)(null),ue=Object(r.useCallback)((function(e,t){var r=Object(lt.parseFudomo)(n.transformation).getDecompositionForTextCoordinate(t.column,t.row);r&&(r.function.characterRange.contains(t.column,t.row)&&(e.preventDefault(),oe([{label:"Show Decomposition Function",onClick:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(null),e.next=3,Rt(n);case 3:t=e.sent,a=t.getFunctionSignatures(n.functions),(o=a.find((function(e){return e.funcName===r.function.externalName})))?(i=o.funcNameRange[0][0],ce.current.scrollToRow(i)):p('Function definition "'.concat(r.function.externalName,'" not found.'));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),X({x:e.clientX,y:e.clientY})))}),[n,X,oe,ce,p]),se=Object(r.useState)(null),le=Object(h.a)(se,2),fe=le[0],pe=le[1],me=Object(r.useState)([]),he=Object(h.a)(me,2),ve=he[0],ye=he[1],ge=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t,r){var a,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(n);case 2:a=e.sent,o=a.getFunctionSignatures(n.functions),(i=o.find((function(e){return new lt.CharacterRange(e.funcNameRange[0][1],e.funcNameRange[0][0],e.funcNameRange[1][1],e.funcNameRange[1][0]).contains(r.column,r.row)})))&&(t.preventDefault(),ye([{label:"Show Transformation Definition",onClick:function(){var e=Object(d.a)(m.a.mark((function e(){var t,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pe(null),t=Object(lt.parseFudomo)(n.transformation),(r=t.decompositions.find((function(e){return e.function.externalName===i.funcName})))?(a=r.function.node.location[0][0],ie.current.scrollToRow(a)):p('Transformation definition "'.concat(i.funcName,'" not found.'));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),pe({x:t.clientX,y:t.clientY}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n,pe,ye,ie,p]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ge,{position:Y,items:ae,onClose:function(){return X(null)}}),a.a.createElement(Ge,{position:fe,items:ve,onClose:function(){return pe(null)}}),a.a.createElement(v.a,{handler:Z,when:k}),!E&&a.a.createElement(x,{message:"Please wait..."}),E&&!n&&a.a.createElement(x,{message:"Project could not be found."}),n&&n.isLoading&&a.a.createElement("div",{style:Bt},a.a.createElement(g.a,null),"Loading"),n&&!n.isLoading&&a.a.createElement(u.a,{height:"100%",width:"100%",position:"relative",boxSizing:"border-box",overflow:"hidden"},null!==W&&a.a.createElement("div",{style:$t},a.a.createElement(g.a,null),"Saving"),a.a.createElement(Qe,{titles:Vt},a.a.createElement(Q,{value:n.metamodel,disabled:n.readOnly,inferDisabled:e.metamodelInferDisabled||n.readOnly,markers:n.metamodelMarkers,onInferMetamodelClicked:T,onChange:S}),a.a.createElement(K,{value:n.transformation,disabled:n.readOnly,validateDisabled:e.transformationValidateDisabled,markers:n.transformationMarkers,onValidateTransformClicked:z,onChange:C,onQuickfixProposalClicked:B,onContextMenu:ue,functionsRef:ie}),a.a.createElement(ee,{value:n.functions,disabled:n.readOnly,markers:n.functionsMarkers,language:n.functionsLanguage,languageSelectDisabled:e.functionsLanguageSelectDisabled||n.readOnly,generateDisabled:e.functionsGenerateDisabled||n.readOnly,validateDisabled:e.functionsValidateDisabled,onChange:N,onSelectedLanguageChanged:I,onGenerateSkeletonsClicked:A,onValidateFunctionsClicked:q,onQuickfixProposalClicked:B,onContextMenu:ge,functionsRef:ce}),a.a.createElement("div",{style:{width:"100%",height:"100%"}},void 0!==o&&void 0!==$&&a.a.createElement(te,{value:$?$.input:"",disabled:n.readOnly,markers:$?$.markers:[],onChange:P,validateDisabled:e.inputValidateDisabled,onValidateInputClicked:M,onQuickfixProposalClicked:B}),void 0!==o&&void 0===$&&a.a.createElement(_,{title:"Input Models"},a.a.createElement(x,{message:"Input could not be found."})),void 0===o&&a.a.createElement(Oe,{project:n,onValidateInputsClicked:D})),a.a.createElement(de,{value:n.output,disabled:n.readOnly,format:n.outputFormat,onSelectedFormatChanged:R,onChange:F,onTransformClicked:L,transformDisabled:void 0===o||e.outputTransformDisabled}))))}var Wt=n(1485),Ht=n(1486),Zt=n(432),Qt=n.n(Zt),Gt=n(1487),Ut={marginRight:"1em"},Kt={flexGrow:1};function Yt(e){var t=Object(b.b)((function(e){return!e.environment.isEditorReady||!e.environment.isRuntimeReady})),n=Object(b.b)((function(e){return e.project?e.project.name:""}));return a.a.createElement("div",{className:"AppBar"},a.a.createElement(Wt.a,{position:"static",className:"AppBar"},a.a.createElement(Ht.a,null,a.a.createElement(k.a,{className:"AppTitle",variant:"h6"},"Try Fudomo!"),a.a.createElement(k.a,{style:Kt,variant:"h6"},n),t&&a.a.createElement(Gt.a,{className:"Progress",color:"inherit"}),a.a.createElement("a",{className:"NoLinkStyling",style:Ut,href:"/try-fudomo/docs",target:"_blank",rel:"opener"},a.a.createElement(Qt.a,null)))))}var Xt=n(440),en=n.n(Xt),tn=n(1494),nn=n(1495),rn=n.n(nn),an=n(1496),on=n.n(an);function cn(e,t,n){return Object(Xe.b)({name:e,initialState:t,reducers:{_setInitialized:function(e){e.isInitialized=!0},_setProjects:function(e,t){e.projects=t.payload},_addProject:function(e,t){var n=t.payload;e.projects.push({name:n.name,url:n.url,inputs:n.inputs.map((function(e){return e.name}))})},_deleteProject:function(e,t){var n=e.projects.findIndex((function(e){return e.name===t.payload}));e.projects.splice(n,1)},_renameProject:function(e,t){var n=t.payload,r=n.name,a=n.newName,o=e.projects.find((function(e){return e.name===r}));o.name=a,o.url=o.url.slice(0,-r.length)+a},_createInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name;e.projects.find((function(e){return e.name===r})).inputs.push(a)},_deleteInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name,o=e.projects.find((function(e){return e.name===r}));o.inputs.splice(o.inputs.findIndex((function(e){return e===a})),1)},_renameInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name,o=n.newName,i=e.projects.find((function(e){return e.name===r}));i.inputs=i.inputs.map((function(e){return e===a?o:e}))},_setSignedIn:function(e,t){e.isSignedIn=t.payload},_setCapabilities:function(e,t){Object.assign(e.capabilities,t.payload)},_setProgressing:function(e,t){e.progressing=t.payload}}})}function un(e,t){var n={init:function(){return function(){var r=Object(d.a)(m.a.mark((function r(a,o){var i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),i=Object(Ye.a)(Object(Ye.a)({},t),n),r.next=5,e.init(a,i);case 5:return r.next=7,a(n.reload());case 7:a(t._setInitialized());case 8:return r.prev=8,a(t._setProgressing(!1)),r.finish(8);case 11:case"end":return r.stop()}}),r,null,[[0,,8,11]])})));return function(e,t){return r.apply(this,arguments)}}()},reload:function(){return function(){var r=Object(d.a)(m.a.mark((function r(a,o){var i,u,s,l,f,p;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),i=o(),r.next=5,e.getProjectsMetadata();case 5:u=r.sent,a(t._setProjects(u)),s=Object(c.a)(u);try{for(s.s();!(l=s.n()).done;)p=l.value,(null===(f=i.project)||void 0===f?void 0:f.url)===p.url&&a(n.loadProject(p.name))}catch(m){s.e(m)}finally{s.f()}r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),a(ut(ot(r.t0.message)));case 14:return r.prev=14,a(t._setProgressing(!1)),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,11,14,17]])})));return function(e,t){return r.apply(this,arguments)}}()},loadProject:function(n){return function(){var r=Object(d.a)(m.a.mark((function r(a,o){var i,c;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=window.location.pathname,a(zt.setProject({url:e.getUrlForProjectName(n),name:n,isLoading:!0})),r.prev=2,a(t._setProgressing(!0)),r.next=6,e.loadProject(n);case 6:if(c=r.sent,window.location.pathname===i){r.next=9;break}return r.abrupt("return");case 9:a(zt.setProject(c)),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(2),a(ut(ot('Can not load project "'.concat(n,'": ').concat(r.t0.message)))),a(zt.setProject(null));case 16:return r.prev=16,a(t._setProgressing(!1)),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[2,12,16,19]])})));return function(e,t){return r.apply(this,arguments)}}()},unloadProject:function(e){return function(){var e=Object(d.a)(m.a.mark((function e(t,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n.commitProject((function(){t(zt.setProject(null))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},createEmptyProject:function(e){var t=e.name,r=e.onCreated;return function(){var e=Object(d.a)(m.a.mark((function e(a,o){var i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={name:t,inputs:[{name:"input1",input:""}],metamodel:"",transformation:"",functions:"",functionsLanguage:"javascript",output:"",outputFormat:"text"},a(n.createProject({project:i,onCreated:r}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},createProject:function(n){var r=n.project,a=n.onCreated;return function(){var n=Object(d.a)(m.a.mark((function n(o,i){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(t._setProgressing(!0)),n.next=4,e.createProject(r);case 4:r=n.sent,o(t._addProject(r)),a&&a(r),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),o(ut(ot(n.t0.toString())));case 12:return n.prev=12,o(t._setProgressing(!1)),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteProject:function(n){return function(){var r=Object(d.a)(m.a.mark((function r(a,o){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),r.next=4,e.deleteProject(n);case 4:a(t._deleteProject(n));case 5:return r.prev=5,a(t._setProgressing(!1)),r.finish(5);case 8:case"end":return r.stop()}}),r,null,[[0,,5,8]])})));return function(e,t){return r.apply(this,arguments)}}()},renameProject:function(n){var r=n.name,a=n.newName,o=n.onRename;return function(){var n=Object(d.a)(m.a.mark((function n(i,c){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i(t._setProgressing(!0)),n.next=4,e.renameProject(r,a);case 4:i(t._renameProject({name:r,newName:a})),o&&o(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),i(ut(ot(n.t0.toString())));case 11:return n.prev=11,i(t._setProgressing(!1)),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})));return function(e,t){return n.apply(this,arguments)}}()},createInput:function(e){return function(){var n=Object(d.a)(m.a.mark((function n(r,a){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(t._setProgressing(!0)),r(t._createInput(e)),r(zt.createInput(e))}finally{r(t._setProgressing(!1))}case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},deleteInput:function(e){return function(){var n=Object(d.a)(m.a.mark((function n(r,a){var o,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.projectName,i=e.name;try{r(t._setProgressing(!0)),r(t._deleteInput({projectName:o,name:i})),r(zt.deleteInput({projectName:o,name:i}))}finally{r(t._setProgressing(!1))}case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},renameInput:function(e){var n=e.projectName,r=e.name,a=e.newName,o=e.onRename;return function(){var e=Object(d.a)(m.a.mark((function e(i,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i(t._setProgressing(!0)),i(t._renameInput({projectName:n,name:r,newName:a})),i(zt.renameInput({projectName:n,name:r,newName:a})),o&&o()}finally{i(t._setProgressing(!1))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},setInput:function(e){return function(){var t=Object(d.a)(m.a.mark((function t(n,r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(zt.setInput(e));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},signIn:function(){return function(){var r=Object(d.a)(m.a.mark((function r(a,o){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),r.next=4,e.signIn(a,Object(Ye.a)(Object(Ye.a)({},t),n));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),a(ut(it(r.t0)));case 9:return r.prev=9,a(t._setProgressing(!1)),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[0,6,9,12]])})));return function(e,t){return r.apply(this,arguments)}}()},signOut:function(r){return function(){var a=Object(d.a)(m.a.mark((function a(o,i){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o(t._setProgressing(!0)),a.next=4,e.signOut(o,Object(Ye.a)(Object(Ye.a)({},t),n));case 4:r&&r(),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),o(ut(it(a.t0)));case 10:return a.prev=10,o(t._setProgressing(!1)),a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})));return function(e,t){return a.apply(this,arguments)}}()},commitProject:function(n){return function(){var r=Object(d.a)(m.a.mark((function r(a,o){var i,c;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===(i=o()).project){r.next=14;break}return r.prev=2,a(t._setProgressing(!0)),delete(c=Object(Ye.a)({},i.project)).hasUnsavedData,delete c.status,delete c.isLoading,r.next=10,e.saveProject(c);case 10:n&&n();case 11:return r.prev=11,a(t._setProgressing(!1)),r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[2,,11,14]])})));return function(e,t){return r.apply(this,arguments)}}()}};return n}var sn="tryFudomoLocalProjectsV2";function ln(e){var t=JSON.parse(localStorage[sn]||"[]"),n=e(t);void 0===n&&(n=t),localStorage[sn]=JSON.stringify(n)}function fn(e){return e.name||e.url?e.url.split("/").slice(-1)[0]:null}var pn={init:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==window.localStorage.localProjects&&void 0===window.localStorage[sn]&&(window.localStorage[sn]=window.localStorage.localProjects,ln((function(e){var t,n=Object(c.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.name=fn(r)}}catch(a){n.e(a)}finally{n.f()}})),console.log("Migrated localStorage.localProjects to localStorage.".concat(sn))),window.addEventListener("storage",(function(e){t(n.reload())}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/local/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage[sn]||"[]"),e.abrupt("return",t.filter((function(e){return Object.keys(e).length>0})).map((function(e){return{name:e.name||e.url.slice("/local/".length),url:e.url,inputs:e.inputs.map((function(e){return e.name}))}})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.url="/local/"+t.name,ln((function(e){return[].concat(Object(vt.a)(e),[t])})),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ln((function(e){var r,a=Object(c.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;fn(o)===t&&(o.name=n,o.url="/local/"+n)}}catch(i){a.e(i)}finally{a.f()}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(n=JSON.parse(localStorage[sn]||"[]").find((function(e){return fn(e)===t}))).hasUnsavedData,e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ln((function(e){return e.filter((function(e){return fn(e)!==t}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("local"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-local project");case 2:n=!1,ln((function(e){var r,a=Object(c.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;o.url===t.url&&(Object.assign(o,t),n=!0)}}catch(i){a.e(i)}finally{a.f()}})),n||ln((function(e){e.push(t)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},mn=cn("localWorkspace",{name:"local",isInitialized:!1,isSignedIn:!0,capabilities:{canAddProject:!0,canImportProject:!0,canDeleteProject:!0,canRenameProject:!0,canAddInput:!0,canRenameInput:!0,canDeleteInput:!0,requiresSignIn:!1},status:[{type:"success",message:null}],projects:[]}),dn=un(pn,mn.actions),hn=Object(Ye.a)(Object(Ye.a)({},mn.actions),dn),vn=mn.reducer,yn={name:"example",isInitialized:!1,isSignedIn:!0,capabilities:{canAddProject:!1,canImportProject:!1,canDeleteProject:!1,canRenameProject:!1,canAddInput:!1,canRenameInput:!1,canDeleteInput:!1,requiresSignIn:!1},status:[{type:"success",message:null}],projects:[{url:"/example/concat",name:"concat",inputs:["example1","example2"]},{url:"/example/family2persons",name:"family2persons",inputs:["example1"]},{url:"/example/fsm2dot",name:"fsm2dot",inputs:["example1"]},{url:"/example/fsm2dotjs",name:"fsm2dotjs",inputs:["AlternatingZeroOrOne","EvenZeros"]},{url:"/example/presi2beamer",name:"presi2beamer",inputs:["example1"]},{url:"/example/presisnippets2html",name:"presisnippets2html",inputs:["example1"]}]},gn={init:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/example/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yn.projects);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==yn.projects.find((function(e){return e.name===t}))){e.next=2;break}throw new Error("Unknown example project");case 2:return e.next=4,Et.a.get("/examples/".concat(t,".yaml"));case 4:return n=e.sent,(r=tt.a.parse(n.data)).isLoading=!1,r.readOnly=!0,r.name=t,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},bn=cn("examplesWorkspace",yn),kn=un(gn,bn.actions),wn=Object(Ye.a)(Object(Ye.a)({},bn.actions),kn),jn=bn.reducer;function xn(){return En.apply(this,arguments)}function En(){return(En=Object(d.a)(m.a.mark((function e(){var t,n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=void 0;case 2:return r={spaces:"appDataFolder",pageSize:100,fields:"nextPageToken, files(id, name)"},void 0!==n&&(r.pageToken=n),e.next=6,window.gapi.client.drive.files.list(r);case 6:a=e.sent,t=[].concat(Object(vt.a)(t),Object(vt.a)(a.result.files)),n=a.result.nextPageToken;case 9:if(void 0!==n){e.next=2;break}case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function On(e){return Sn.apply(this,arguments)}function Sn(){return(Sn=Object(d.a)(m.a.mark((function e(t){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={q:"name='".concat(t.replace(/'/g,"\\'"),"'"),spaces:"appDataFolder",pageSize:2,fields:"nextPageToken, files(id, name)"},e.next=3,window.gapi.client.drive.files.list(n);case 3:if(0!==(r=e.sent).result.files.length){e.next=6;break}return e.abrupt("return",null);case 6:return a=r.result.files[0].id,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cn(e){return _n.apply(this,arguments)}function _n(){return(_n=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,On(t);case 3:return n=e.sent,e.next=6,window.gapi.client.drive.files.get({fileId:n,alt:"media"});case 6:return r=e.sent,e.abrupt("return",r.body);case 10:if(e.prev=10,e.t0=e.catch(0),403!==e.t0.status){e.next=14;break}throw new Error("Not logged into Google Drive");case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function Nn(e,t,n){return In.apply(this,arguments)}function In(){return(In=Object(d.a)(m.a.mark((function e(t,n,r){var a,o,i,c,u,s,l,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On(t);case 2:return a=e.sent,o="foo_bar_baz",i="\r\n--foo_bar_baz\r\n","\r\n--foo_bar_baz--",c={name:t,parents:["appDataFolder"],mimeType:r},u="POST",s="https://www.googleapis.com/upload/drive/v3/files",null!==a&&(s=s+"/"+a,u="PATCH",delete c.parents),l=i+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify(c)+i+"Content-Type: "+r+"\r\n\r\n"+n+"\r\n\r\n--foo_bar_baz--",f=window.gapi.client.request({path:s,method:u,params:{uploadType:"multipart"},headers:{"Content-Type":"multipart/related; boundary="+o},body:l}),e.abrupt("return",new Promise((function(e,t){f.then((function(t){e(t)}),(function(e){t(e)}))})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pn(e){return Fn.apply(this,arguments)}function Fn(){return(Fn=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(Ye.a)({},t)).inputs=n.inputs||[],delete n.status,delete n.isLoading,r={url:n.url,name:n.url.slice("/gdrive/".length),inputs:n.inputs.map((function(e){return e.name}))},e.next=7,Nn("metadata-".concat(r.name,".json"),JSON.stringify(r),"application/json");case 7:return e.next=9,Nn("project-".concat(r.name,".json"),JSON.stringify(n),"application/json");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(e){return Tn.apply(this,arguments)}function Tn(){return(Tn=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On(t);case 2:if(null!==(n=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,window.gapi.client.drive.files.delete({fileId:n});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(e){return Ln.apply(this,arguments)}function Ln(){return(Ln=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn("project-".concat(t,".json"));case 2:return e.next=4,Rn("metadata-".concat(t,".json"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mn={init:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){var r={canAddProject:e,canImportProject:e,canDeleteProject:e,canRenameProject:e,canAddInput:e,canRenameInput:e,canDeleteInput:e};t(n._setCapabilities(r)),t(n._setSignedIn(e))},e.abrupt("return",new Promise((function(e,a){window.gapi.load("client:auth2",(function(){window.gapi.client.init({apiKey:"AIzaSyDD7_sgciu8fRVTrgGeCzIaLl_1g7s66Lo",clientId:"937789607311-rfogt5dmebkjcnfehbtshe13s1s433us.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file"}).then((function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen((function(e){r(e),t(n.reload())})),r(window.gapi.auth2.getAuthInstance().isSignedIn.get()),e()}),(function(e){console.log(e)}))}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.auth2.getAuthInstance().signIn();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.auth2.getAuthInstance().signOut();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/gdrive/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,r,a,o,i,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.prev=2,e.next=5,xn();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),403!==e.t0.status&&console.log(e.t0);case 11:r=Object(c.a)(n),e.prev=12,r.s();case 14:if((a=r.n()).done){e.next=24;break}if(null===(o=a.value).name.match(/metadata-.*\.json/)){e.next=22;break}return e.next=19,window.gapi.client.drive.files.get({fileId:o.id,alt:"media"});case 19:i=e.sent,u=JSON.parse(i.body),t.push(u);case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(12),r.e(e.t1);case 29:return e.prev=29,r.f(),e.finish(29);case 32:return e.abrupt("return",t);case 33:case"end":return e.stop()}}),e,null,[[2,8],[12,26,29,32]])})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(t.name,'" is not allowed.'));case 2:return t.url="/gdrive/"+t.name,e.next=5,Pn(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(n,'" is not allowed.'));case 2:return e.next=4,Mn.loadProject(t);case 4:return(r=e.sent).url="/gdrive/"+n,r.name=n,e.next=9,Pn(r);case 9:return e.next=11,An(t);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn("project-".concat(t,".json"));case 2:return n=e.sent,(r=JSON.parse(n)).isLoading=!1,r.readOnly=!1,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gdrive"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-gdrive project");case 2:if(!t.isLoading){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Pn(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Dn=cn("gdriveWorkspace",{name:"gdrive",isInitialized:!1,isSignedIn:!1,capabilities:{canAddProject:!1,canImportProject:!1,canDeleteProject:!1,canRenameProject:!1,canAddInput:!1,canRenameInput:!1,canDeleteInput:!1,requiresSignIn:!0},status:[{type:"success",message:null}],projects:[]}),zn=un(Mn,Dn.actions),qn=Object(Ye.a)(Object(Ye.a)({},Dn.actions),zn),Bn=Dn.reducer,$n=n(300);function Vn(e){return{canAddProject:e,canImportProject:e,canDeleteProject:e,canRenameProject:e,canAddInput:e,canRenameInput:e,canDeleteInput:e,requiresSignIn:!0}}var Jn={name:"dropbox",isInitialized:!1,isSignedIn:!1,capabilities:Vn(!1),status:[{type:"success",message:null}],projects:[]};function Wn(){return Hn.apply(this,arguments)}function Hn(){return(Hn=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ar){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,ar.filesListFolder({path:""});case 4:return t=e.sent,e.abrupt("return",t.result.entries.map((function(e){return{name:e.name}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e){return Qn.apply(this,arguments)}function Qn(){return(Qn=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ar){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,ar.filesDownload({path:"/"+t});case 4:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var r=new FileReader;r.onloadend=function(t){e(r.result)},r.onerror=function(e){t(r.error)},r.readAsText(n.result.fileBlob)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gn(e,t,n){return Un.apply(this,arguments)}function Un(){return(Un=Object(d.a)(m.a.mark((function e(t,n,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ar){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,ar.filesUpload({path:"/"+t,contents:n,mode:"overwrite"});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kn(e){return Yn.apply(this,arguments)}function Yn(){return(Yn=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(Ye.a)({},t)).inputs=n.inputs||[],delete n.status,delete n.isLoading,r={url:n.url,name:n.url.slice("/dropbox/".length),inputs:n.inputs.map((function(e){return e.name}))},e.next=7,Gn("metadata-".concat(r.name,".json"),JSON.stringify(r),"application/json");case 7:return e.next=9,Gn("project-".concat(r.name,".json"),JSON.stringify(n),"application/json");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xn(e){return er.apply(this,arguments)}function er(){return(er=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ar){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,ar.filesDelete({path:"/"+t});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tr(e){return nr.apply(this,arguments)}function nr(){return(nr=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn("project-".concat(t,".json"));case 2:return e.next=4,Xn("metadata-".concat(t,".json"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e){var t=Object.create(null);return"string"!==typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),r=n.shift(),a=n.length>0?n.join("="):void 0;r=decodeURIComponent(r),a=void 0===a?null:decodeURIComponent(a),void 0===t[r]?t[r]=a:Array.isArray(t[r])?t[r].push(a):t[r]=[t[r],a]})),t):t}var ar=null,or={init:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){void 0!==window.localStorage.tryFudomoDropboxAccessToken?(ar=new $n.Dropbox({accessToken:window.localStorage.tryFudomoDropboxAccessToken}),t(n._setCapabilities(Vn(!0))),t(n._setSignedIn(!0))):t(n._setSignedIn(!1))},window.dropBoxLoginWorkflowCompleted=function(){r(),ar&&t(n.reload())},!window.opener||!window.opener.dropBoxLoginWorkflowCompleted){e.next=13;break}if(!(a=rr(window.location.hash).access_token)){e.next=9;break}return window.localStorage.tryFudomoDropboxAccessToken=a,window.opener.dropBoxLoginWorkflowCompleted(),window.close(),e.abrupt("return");case 9:"access_denied"===rr(window.location.hash).error&&window.close(),e.next=14;break;case 13:r();case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:r=new $n.Dropbox({clientId:"qplk44ju2ohi85a"}),a="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.public_url,"/"),o=r.auth.getAuthenticationUrl(a),800,window.open(o,"_blank","scrollbars=yes,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=".concat(800,",height=").concat(.85*window.innerHeight,",top=").concat(.1*window.innerHeight,",left=").concat((window.innerWidth-800)/2));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete window.localStorage.tryFudomoDropboxAccessToken,ar=null,t(n._setCapabilities(Vn(!1))),t(n._setSignedIn(!1)),t(n.reload());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/dropbox/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,r,a,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.prev=2,e.next=5,Wn();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),403!==e.t0.status&&console.log(e.t0);case 11:r=Object(c.a)(n),e.prev=12,r.s();case 14:if((a=r.n()).done){e.next=25;break}if(null===(o=a.value).name.match(/metadata-.*\.json/)){e.next=23;break}return e.t1=JSON,e.next=20,Zn(o.name);case 20:e.t2=e.sent,i=e.t1.parse.call(e.t1,e.t2),t.push(i);case 23:e.next=14;break;case 25:e.next=30;break;case 27:e.prev=27,e.t3=e.catch(12),r.e(e.t3);case 30:return e.prev=30,r.f(),e.finish(30);case 33:return e.abrupt("return",t);case 34:case"end":return e.stop()}}),e,null,[[2,8],[12,27,30,33]])})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.name.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(t.name,'" is not allowed.'));case 2:return t.url="/dropbox/"+t.name,e.next=5,Kn(t);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(n,'" is not allowed.'));case 2:return e.next=4,or.loadProject(t);case 4:return(r=e.sent).url="/dropbox/"+n,r.name=n,e.next=9,Kn(r);case 9:return e.next=11,tr(t);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn("project-".concat(t,".json"));case 2:return n=e.sent,(r=JSON.parse(n)).isLoading=!1,r.readOnly=!1,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tr(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("dropbox"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-dropbox project");case 2:if(!t.isLoading){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Kn(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ir=cn("dropboxWorkspace",Jn),cr=un(or,ir.actions),ur=Object(Ye.a)(Object(Ye.a)({},ir.actions),cr),sr=ir.reducer,lr=n(1492),fr=n(301),pr=n.n(fr),mr=n(237),dr=n.n(mr),hr=n(238),vr=n.n(hr),yr=n(314),gr=n(1493),br=n(231),kr=n(232),wr=n(433),jr=n.n(wr),xr=function(e){e.cancelable&&e.preventDefault()};function Er(e){return jr.a.useLongPress(e,{captureEvent:!0,onStart:function(){document.addEventListener("contextmenu",xr)},onFinish:function(){document.removeEventListener("contextmenu",xr)},onCancel:function(){document.removeEventListener("contextmenu",xr)}})}var Or=n(1488),Sr=n(1489),Cr=n(1490),_r=n(1501),Nr=n(1499),Ir={color:"var(--theme-neutral-500)"};function Pr(e){var t=e.isOpen,n=e.onImportConfirmed,o=e.onCloseClicked,i=Object(r.useState)(""),c=Object(h.a)(i,2),u=c[0],s=c[1],l=Object(r.useCallback)((function(e){s("")}),[s]),f=Object(r.useCallback)((function(e){n&&n(u)}),[n,u]),p=Object(r.useCallback)((function(e){s(e.target.value)}),[s]);return a.a.createElement(_r.a,{onEnter:l,onClose:o,open:t,fullWidth:!0,maxWidth:"md"},a.a.createElement(Or.a,null,"Import Project Contents"),a.a.createElement(Sr.a,null,a.a.createElement(Nr.a,{autoFocus:!0,placeholder:"Paste project here...",multiline:!0,fullWidth:!0,onChange:p,rows:10,rowsMax:20})),a.a.createElement(Cr.a,null,a.a.createElement(N.a,{onClick:o,style:Ir},"Close"),a.a.createElement(N.a,{onClick:f,color:"primary"},"Import")))}var Fr=n(1491),Rr=function(e,t){switch(t.type){case"RESET":return"";case"SET":return t.value;default:throw new Error}};function Tr(e){var t=Object(r.useReducer)(Rr,e.name||""),n=Object(h.a)(t,2),o=n[0],i=n[1],c=Object(r.useCallback)((function(t){13===t.charCode&&(t.preventDefault(),void 0!==o&&o.length>0&&e.onConfirmed(o))}),[e,o]),u=Object(r.useCallback)((function(e){i({type:"SET",value:e.target.value})}),[i]),s=Object(r.useCallback)((function(t){e.onConfirmed(o)}),[e,o]),l=Object(r.useCallback)((function(t){i({type:"SET",value:e.name||""})}),[i,e.name]);return a.a.createElement("div",null,a.a.createElement(_r.a,{open:e.isOpen,onClose:e.onCloseClicked,onEnter:l,"aria-labelledby":"form-dialog-title"},a.a.createElement(Or.a,{id:"form-dialog-title"},e.title||"Enter a string"),a.a.createElement(Sr.a,null,a.a.createElement(Fr.a,null,e.text||"A message"),a.a.createElement(Nr.a,{required:!0,autoFocus:!0,margin:"dense",id:"name",label:"Name",fullWidth:!0,value:o,onChange:u,onKeyPress:c})),a.a.createElement(Cr.a,null,a.a.createElement(N.a,{onClick:e.onCloseClicked,color:"primary"},"Cancel"),a.a.createElement(N.a,{disabled:void 0===o||0===o.length,onClick:s,color:"primary"},"Save"))))}var Ar=Object(r.createContext)();function Lr(e){var t=Object(r.useState)(!1),n=Object(h.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)({}),u=Object(h.a)(c,2),s=u[0],l=u[1],f=Object(r.useRef)({resolve:function(){},reject:function(){}});return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ar.Provider,{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Promise((function(e,t){f.current.resolve=e,f.current.reject=t}));return l(e),i(!0),t},children:e.children}),a.a.createElement(Tr,Object.assign({isOpen:o,onCloseClicked:function(){i(!1),f.current.resolve(null)},onConfirmed:function(e){i(!1),f.current.resolve(e)}},s)))}var Mr=n(434),Dr=n.n(Mr);function zr(e){var t=e.actions||[{color:"primary",autoFocus:!1,text:"Cancel",value:!1},{color:"primary",autoFocus:!0,text:"Ok",value:!0}];return a.a.createElement("div",null,a.a.createElement(_r.a,{open:e.isOpen,onClose:e.onCanceled,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.a.createElement(Or.a,{id:"alert-dialog-title"},e.title||"Confirm?"),a.a.createElement(Sr.a,null,a.a.createElement(Fr.a,{id:"alert-dialog-description"},e.message||"Do you agree?")),a.a.createElement(Cr.a,null,t.map((function(t,n){return a.a.createElement(N.a,{key:n,onClick:function(){return e.onButtonClicked(t.value)},autoFocus:t.autoFocus,color:t.color},t.text)})))))}var qr=Object(r.createContext)();function Br(e){var t=Object(r.useState)(!1),n=Object(h.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)({}),u=Object(h.a)(c,2),s=u[0],l=u[1],f=Object(r.useRef)({resolve:function(){},reject:function(){}}),p=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Promise((function(e,t){f.current.resolve=e,f.current.reject=t}));return l(e),i(!0),t}),[l,i,f]),m=Object(r.useCallback)((function(e){i(!1),f.current.resolve(e)}),[i,f]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(qr.Provider,{value:p,children:e.children}),a.a.createElement(zr,Object.assign({isOpen:o,onButtonClicked:m},s)))}n(412);var $r=n(234),Vr=n.n($r),Jr=n(233),Wr=n.n(Jr),Hr=(n(288),a.a.forwardRef((function(e,t){var n=e.onRenameClicked,r=e.onDeleteClicked,o=e.deleteEnabled,i=e.renameEnabled,c=a.a.useState(null),u=Object(h.a)(c,2),s=u[0],l=u[1],f=function(e){e.preventDefault(),l(null)};return a.a.createElement("div",null,a.a.createElement(N.a,{ref:t,className:"WorkspaceMenuButton","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){e.preventDefault(),l(e.currentTarget)}},"\u22ee"),a.a.createElement(T.a,{anchorEl:s,open:Boolean(s),onClose:f},a.a.createElement(R.a,{disabled:!i,onClick:function(e){e.preventDefault(),n&&n(),f(e)}},a.a.createElement(A.a,null,a.a.createElement(Wr.a,null)),"Rename..."),a.a.createElement(R.a,{disabled:!o,onClick:function(e){e.preventDefault(),r&&r(),f(e)}},a.a.createElement(A.a,null,a.a.createElement(Vr.a,null)),"Delete...")))}))),Zr=n(235),Qr=n.n(Zr),Gr=n(236),Ur=n.n(Gr),Kr=n(435),Yr=n.n(Kr),Xr=a.a.forwardRef((function(e,t){var n=e.onRenameClicked,r=e.onDeleteClicked,o=e.onAddInputClicked,i=e.onImportInputClicked,c=e.onExportProjectClicked,u=e.deleteEnabled,s=e.renameEnabled,l=e.addInputEnabled,f=a.a.useState(null),p=Object(h.a)(f,2),m=p[0],d=p[1],v=function(e){e.preventDefault(),d(null)};return a.a.createElement("div",null,a.a.createElement(N.a,{ref:t,className:"WorkspaceMenuButton","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){e.preventDefault(),d(e.currentTarget)}},"\u22ee"),a.a.createElement(T.a,{anchorEl:m,open:Boolean(m),onClose:v},a.a.createElement(R.a,{disabled:!l,onClick:function(e){e.preventDefault(),o&&o(),v(e)}},a.a.createElement(A.a,null,a.a.createElement(Qr.a,null)),"New Input..."),a.a.createElement(R.a,{disabled:!l,onClick:function(e){e.preventDefault(),i&&i(),v(e)}},a.a.createElement(A.a,null,a.a.createElement(Ur.a,null)),"Import Input..."),a.a.createElement(R.a,{onClick:function(e){e.preventDefault(),c&&c(),v(e)}},a.a.createElement(A.a,null,a.a.createElement(Yr.a,null)),"Export Project..."),a.a.createElement(R.a,{disabled:!s,onClick:function(e){e.preventDefault(),n&&n(),v(e)}},a.a.createElement(A.a,null,a.a.createElement(Wr.a,null)),"Rename..."),a.a.createElement(R.a,{disabled:!u,onClick:function(e){e.preventDefault(),r&&r(),v(e)}},a.a.createElement(A.a,null,a.a.createElement(Vr.a,null)),"Delete...")))})),ea=n(437),ta=n.n(ea),na=n(438),ra=n.n(na),aa=n(436),oa=n.n(aa),ia={color:"var(--theme-neutral-500)"};function ca(e){var t=Object(r.useCallback)((function(){window.open("mailto:?subject=Fudomo%20Decomposition&body="+e.exportCode)}),[e.exportCode]),n=Object(r.useCallback)((function(){""!==e.exportCode&&oa()(e.exportCode)}),[e.exportCode]),o=Object(r.useCallback)((function(e){n()}),[n]);return a.a.createElement(_r.a,{onClose:e.onCloseClicked,onEntered:o,open:e.isOpen,fullWidth:!0,maxWidth:"md"},a.a.createElement(Or.a,null,"Export Project Contents"),a.a.createElement(Sr.a,null,a.a.createElement(Fr.a,null,"Share the following block of text with another user to let them import your project:"),a.a.createElement(Nr.a,{value:e.exportCode,multiline:!0,fullWidth:!0,rows:10,rowsMax:20})),a.a.createElement(Cr.a,null,a.a.createElement(N.a,{onClick:e.onCloseClicked,style:ia},"Close"),a.a.createElement(N.a,{startIcon:a.a.createElement(ta.a,null),title:"Copy to Clipboard",color:"primary",onClick:n},"Copy"),a.a.createElement(N.a,{startIcon:a.a.createElement(ra.a,null),title:"Open as Email",color:"primary",onClick:t},"Email")))}var ua=["yml","yaml","csv"],sa={yml:function(e,t){try{return tt.a.parse(t),t}catch(n){throw Error('File "'.concat(e,'" is not syntactically valid yaml.'))}},csv:function(e,t){var n,r=Dr.a.parse(t).data,a=[],o=Object(c.a)(r);try{for(o.s();!(n=o.n()).done;){var i,u=n.value,s=[],l=Object(c.a)(u);try{for(l.s();!(i=l.n()).done;){var f=i.value;s.push({Value:f})}}catch(p){l.e(p)}finally{l.f()}a.push({Row:s})}}catch(p){o.e(p)}finally{o.f()}return tt.a.stringify(a)}};function la(e){var t=new FileReader;return t.readAsText(e,"UTF-8"),new Promise((function(e,n){t.onload=function(t){return e(t.target.result)},t.onerror=function(e){return n(e)}}))}sa.yaml=sa.yml;var fa=function(e){var t=e.workspace,n=e.project,r=e.inputName,o=e.onRenameInputClicked,i=e.onDeleteInputClicked,c=Object(s.g)(),u=a.a.createRef(),l=Er((function(){u.current&&u.current.click()}));return a.a.createElement(he.c,Object.assign({to:n.url+"/"+r},l),a.a.createElement(ke.a,{button:!0,disabled:e.disabled,className:"ListItemIndented2 WorkspaceListItem",selected:c.pathname===n.url+"/"+r},a.a.createElement(A.a,{className:"ListItemIcon"},a.a.createElement(je.a,{className:"SideBarIcon"})),a.a.createElement(xe.a,{className:"ListItemLabel",title:r,primary:r}),a.a.createElement(lr.a,{className:"Actions"},(t.capabilities.canRenameInput||t.capabilities.canDeleteInput)&&a.a.createElement(Hr,{ref:u,renameEnabled:t.capabilities.canRenameInput,deleteEnabled:t.capabilities.canDeleteInput,onRenameClicked:function(){return o(n,r)},onDeleteClicked:function(){return i(n,r)}}))))};function pa(e){var t=e.workspace,n=e.project,o=e.actions,i=e.dispatch,u=Object(br.a)("expandedProjectLocations-"+e.title,[]),f=Object(h.a)(u,2),p=f[0],v=f[1],y=a.a.useState(!1),g=Object(h.a)(y,2),k=g[0],w=g[1],j=a.a.useState(""),x=Object(h.a)(j,2),E=x[0],O=x[1],S=Object(b.c)(),C=Object(s.g)(),_=Object(s.f)(),N=Object(r.useContext)(Ar),I=Object(r.useContext)(qr),P=Object(r.useContext)(Ue).showError,F=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.push("".concat(t.url)),n=t.url.split("/").slice(-1)[0],e.next=4,I({title:"Delete Project?",message:'Irreversibly delete project "'.concat(n,'"?')});case 4:if(e.sent)try{i(o.deleteProject(t.name)),_.push("/")}catch(r){i(ut(ot(r.message)))}case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[I,i,o,_]),R=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.push("".concat(n.url)),r=n.url.split("/").slice(-1)[0],e.next=4,N({title:"Rename Project",text:'Enter a new name for project "'.concat(r,'":'),name:r});case 4:if(null===(a=e.sent)){e.next=15;break}if(e.prev=6,!t.projects.find((function(e){return e.name===a}))){e.next=9;break}throw new Error('Project named "'.concat(a,'" already exists.'));case 9:i(o.renameProject({name:n.name,newName:a,onRename:function(){var e=n.url.split("/").slice(0,2).join("/");_.push("".concat(e,"/").concat(a))}})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),i(ut(ot(e.t0.message)));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),[N,i,o,_,t]),T=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.push("".concat(t.url)),e.next=3,N({title:"Add Input",text:"Enter a name for the input data:"});case 3:if(null===(n=e.sent)){e.next=14;break}if(e.prev=5,!t.inputs.includes(n)){e.next=8;break}throw new Error('Input named "'.concat(n,'" already exists.'));case 8:i(o.createInput({projectName:t.name,name:n})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),i(ut(ot(e.t0.message)));case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[N,i,o,_]),L=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r,a,u,s,l,f,p,d,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:r=[],a=null,u=Object(c.a)(n),e.prev=5,l=m.a.mark((function e(){var n,i,c,u,l,f,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.value,i=n.name.split(".").slice(-1)[0].toLowerCase(),ua.includes(i)){e.next=5;break}return r=[ut(ot('File "'.concat(n.name,'" has invalid extension, expected ').concat(ua.join("/"),". Import aborted.")))],e.abrupt("return","break");case 5:return e.next=7,la(n);case 7:c=e.sent,u="",e.prev=9,u=sa[i](n.name,c),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(9),r=[ut(ot(e.t0.message))],e.abrupt("return","break");case 17:if(l=n.name.split(".").slice(0,-1).join("."),!t.inputs.some((function(e){return e===l}))){e.next=37;break}if(f=[{color:"primary",autoFocus:!1,text:"Cancel",value:"cancel"},{color:"primary",autoFocus:!1,text:"Skip all",value:"skipAll"},{color:"primary",autoFocus:!1,text:"Overwrite all",value:"overWriteAll"},{color:"primary",autoFocus:!1,text:"Skip",value:"skip"},{color:"primary",autoFocus:!0,text:"Overwrite",value:"overwrite"}],p=null,null!==a){e.next=32;break}return e.next=25,I({title:'Overwrite existing input "'.concat(l,'"?'),message:'An input named "'.concat(l,'" already exists in the project. Overwrite it?'),actions:f});case 25:if("cancel"!==(p=e.sent)){e.next=28;break}return e.abrupt("return",{v:void 0});case 28:"skipAll"===p&&(a="skip",p="skip"),"overWriteAll"===p&&(a="overwrite",p="overwrite"),e.next=33;break;case 32:p=a;case 33:"overwrite"===p&&r.push(o.setInput({projectName:t.name,inputId:l,value:u})),e.next=38;break;case 37:r.push(o.createInput({projectName:t.name,name:l,value:u}));case 38:case"end":return e.stop()}}),e,null,[[9,13]])})),u.s();case 8:if((s=u.n()).done){e.next=17;break}return e.delegateYield(l(),"t0",10);case 10:if("break"!==(f=e.t0)){e.next=13;break}return e.abrupt("break",17);case 13:if("object"!==typeof f){e.next=15;break}return e.abrupt("return",f.v);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(5),u.e(e.t1);case 22:return e.prev=22,u.f(),e.finish(22);case 25:for(p=0,d=r;p<d.length;p++)h=d[p],i(h);case 26:case"end":return e.stop()}}),e,null,[[5,19,22,25]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,o,I]),M=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.push("".concat(t.url)),(n=document.createElement("input")).type="file",n.multiple=!0,n.accept=ua.map((function(e){return"."+e})).join(","),n.onchange=function(){var e=Object(d.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Array.from(n.target.files),L(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.click();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[L,_]),D=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.push("".concat(t.url,"/").concat(n)),e.next=3,N({title:"Rename Input",text:'Enter a new name for input "'.concat(n,'":'),name:n});case 3:if(null===(r=e.sent)){e.next=15;break}if(e.prev=5,!t.inputs.includes(r)){e.next=8;break}throw new Error('Input named "'.concat(r,'" already exists.'));case 8:_.push(t.url+"/"+r),i(o.renameInput({projectName:t.name,name:n,newName:r})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),i(ut(ot(e.t0.message)));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}(),[N,i,o,_]),z=Object(r.useCallback)(function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.push("".concat(t.url,"/").concat(n)),e.next=3,I({title:"Delete Input?",message:'Irreversibly delete input "'.concat(n,'"?')});case 3:e.sent&&(_.push(t.url),i(o.deleteInput({projectName:t.name,inputId:n})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[I,i,o,_]),q=Object(r.useCallback)((function(e){p.includes(e.url)?v(p.filter((function(t){return t!==e.url}))):v([].concat(Object(vt.a)(p),[e.url]))}),[p,v]),B=Object(r.useCallback)((function(e,t){e.preventDefault(),e.currentTarget.classList.remove("dropHovering"),L(t,e.dataTransfer.files)}),[L]),$=Object(r.useCallback)((function(e){e.currentTarget.classList.add("dropHovering")}),[]),V=Object(r.useCallback)((function(e){e.currentTarget.contains(e.relatedTarget)||e.currentTarget.classList.remove("dropHovering")}),[]),J=Object(r.useCallback)((function(e){if(null!==e&&null!==S.getState().project&&e.url===S.getState().project.url){e=S.getState().project;var t=Object(Ye.a)({},e);delete t.url,delete t.isLoading,delete t.status,delete t.readOnly,O(btoa(Object(kr.deflate)(JSON.stringify(e),{to:"string"}))),w(!0),l.a.event({category:"Project",action:"Opened Export Dialog",label:e.url})}else P("Please click on desired project to open it before exporting.")}),[O,w,S,P]),W=Object(r.useCallback)((function(e){w(!1)}),[w]),H=n.url.split("/").slice(-1)[0],Z=a.a.createRef(),Q=Er((function(){Z.current&&Z.current.click()}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(he.c,Object.assign({to:n.url},Q),a.a.createElement(ke.a,{button:!0,className:"ListItemIndented WorkspaceListItem",selected:C.pathname===n.url,onClick:function(){return q(n)}},p.includes(n.url)?a.a.createElement(dr.a,{onClick:function(){return q(n)}}):a.a.createElement(vr.a,{onClick:function(){return q(n)}}),a.a.createElement(A.a,{className:"ListItemIcon"},a.a.createElement(re.a,{className:"SideBarIcon"})),a.a.createElement(xe.a,{className:"ListItemLabel",primary:H,title:H}),a.a.createElement(lr.a,{className:"Actions"},a.a.createElement(Xr,{ref:Z,renameEnabled:t.capabilities.canRenameProject,deleteEnabled:t.capabilities.canDeleteProject,addInputEnabled:t.capabilities.canAddInput,onRenameClicked:function(){return R(n)},onDeleteClicked:function(){return F(n)},onAddInputClicked:function(){return T(n)},onImportInputClicked:function(){return M(n)},onExportProjectClicked:function(){return J(n)}})))),!0===p.includes(n.url)&&a.a.createElement(be.a,{onDragEnter:$,onDragLeave:V,onDragOver:function(e){return e.preventDefault()},onDrop:function(e){return B(e,n)}},(n.inputs||["input"]).map((function(e,r){return a.a.createElement(fa,{key:n.url+"-"+r,workspace:t,project:n,inputName:e,onRenameInputClicked:D,onDeleteInputClicked:z})}))),k&&a.a.createElement(ca,{isOpen:k,exportCode:E,onCloseClicked:W}))}var ma=n(239),da=n.n(ma),ha=n(439),va=n.n(ha),ya=a.a.forwardRef((function(e,t){var n=e.workspace,r=e.onSignInClicked,o=e.onSignOutClicked,i=e.onAddProjectClicked,c=e.onImportProjectClicked,u=a.a.useState(null),s=Object(h.a)(u,2),l=s[0],f=s[1],p=function(e){e.preventDefault(),f(null)};return a.a.createElement("div",null,a.a.createElement(N.a,{ref:t,className:"WorkspaceMenuButton","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){e.preventDefault(),f(e.currentTarget)}},"\u22ee"),a.a.createElement(T.a,{anchorEl:l,open:Boolean(l),onClose:p},n.capabilities.requiresSignIn&&!n.isSignedIn&&a.a.createElement(R.a,{onClick:function(e){e.preventDefault(),r&&r(),p(e)}},a.a.createElement(A.a,null,a.a.createElement(va.a,null)),"Connect..."),a.a.createElement(R.a,{disabled:!n.capabilities.canAddProject,onClick:function(e){e.preventDefault(),i&&i(),p(e)}},a.a.createElement(A.a,null,a.a.createElement(Qr.a,null)),"New Project..."),a.a.createElement(R.a,{disabled:!n.capabilities.canAddProject,onClick:function(e){e.preventDefault(),c&&c(),p(e)}},a.a.createElement(A.a,null,a.a.createElement(Ur.a,null)),"Import Project..."),n.capabilities.requiresSignIn&&n.isSignedIn&&a.a.createElement(R.a,{onClick:function(e){e.preventDefault(),o&&o(),p(e)}},a.a.createElement(A.a,null,a.a.createElement(da.a,null)),"Disconnect")))}));function ga(e){var t=Object(b.c)().dispatch,n=e.workspace,o=e.actions,i=e.icon||a.a.createElement(pr.a,null),c=Object(r.useContext)(Ar),u=Object(br.a)("workspaceBrowserCollapsed-"+e.title,!1),f=Object(h.a)(u,2),p=f[0],v=f[1],y=Object(r.useState)(!1),g=Object(h.a)(y,2),k=g[0],w=g[1],j=Object(r.useContext)(Ue),x=j.showError,E=j.showSuccess,O=Object(s.f)(),S=Object(r.useCallback)(Object(d.a)(m.a.mark((function e(){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({title:"Enter Project Name",text:"Enter a name for the new project"});case 2:if(null===(r=e.sent)){e.next=14;break}if(e.prev=4,!n.projects.find((function(e){return e.name===r}))){e.next=7;break}throw new Error('Project named "'.concat(r,'" already exists.'));case 7:a=o.createEmptyProject({name:r,onCreated:function(e){O.push(e.url)}}),t(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t(ut(ot(e.t0.message)));case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),[c,t,o,O,n]),C=Object(r.useCallback)((function(e){w(!0)}),[w]),_=Object(r.useCallback)((function(e){w(!1)}),[w]),N=Object(r.useCallback)((function(e){w(!1);try{if(null===e||0===e.length)throw new Error("Can not import empty project data.");var r=JSON.parse(Object(kr.inflate)(atob(e),{to:"string"}));if(r.url&&!r.name){var a=r.url.split("/");r.name=a[a.length-1]}if(n.projects.find((function(e){return e.name===r.name})))throw new Error('Project named "'.concat(r.name,'" already exists.'));r.url="/".concat(n.name,"/").concat(r.name),r.readOnly=!1,r.isLoading=!1,r.status=null,t(o.createProject({project:r,onCreated:function(e){O.push(e.url),E("Project successfully imported."),l.a.event({category:"Project",action:"Imported Project",label:r.url})}}))}catch(i){x(String(i))}}),[w,o,E,x,O,t,n]),I=Object(r.useCallback)((function(e){t(o.signOut((function(){O.push("/")})))}),[O,t,o]),P=Object(r.useCallback)((function(e){t(o.signIn()),v(!1)}),[t,o,v]),F=Object(r.useCallback)((function(e){!n.capabilities.requiresSignIn||n.isSignedIn?v(!p):P(e)}),[v,p,n,P]),R=a.a.createRef(),T=Er((function(e){R.current&&R.current.click()}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(be.a,null,a.a.createElement(ke.a,Object.assign({button:!0,onClick:F,className:"WorkspaceListItem"},T),n.isSignedIn?p?a.a.createElement(vr.a,null):a.a.createElement(dr.a,null):a.a.createElement("div",{style:{height:"24px",width:"24px"}}),a.a.createElement(A.a,{className:"ListItemIcon"},i||a.a.createElement(pr.a,{className:"SideBarIcon"})),a.a.createElement(xe.a,{className:"ListItemLabel",title:e.title},e.title),n.progressing&&a.a.createElement("div",{className:"WorkspaceProgressWrapper"},a.a.createElement(gr.a,{variant:"query",className:"CloudLoginProgress"})),a.a.createElement(lr.a,{className:"Actions"},(n.capabilities.requiresSignIn||n.capabilities.canAddProject)&&a.a.createElement(ya,{ref:R,workspace:n,onSignInClicked:P,onSignOutClicked:I,onAddProjectClicked:S,onImportProjectClicked:C}))),a.a.createElement(yr.a,{in:!p},a.a.createElement(be.a,{component:"div",disablePadding:!0},n.projects.map((function(e,r){return a.a.createElement("div",{key:r},a.a.createElement(pa,{workspace:n,project:e,actions:o,dispatch:t}))}))))),a.a.createElement(tn.a,null),k&&a.a.createElement(Pr,{isOpen:k,onCloseClicked:_,onImportConfirmed:N}))}function ba(e){var t=Object(b.b)((function(e){return e.examplesWorkspace})),n=Object(b.b)((function(e){return e.localWorkspace})),r=Object(b.b)((function(e){return e.gdriveWorkspace})),o=Object(b.b)((function(e){return e.dropboxWorkspace})),i=Object(s.h)("/");return a.a.createElement(u.a,{height:"100%",minWidth:"240px",width:"240px",position:"relative",boxSizing:"border-box",className:"SideBar"},a.a.createElement(he.b,{to:"/"},a.a.createElement(be.a,null,a.a.createElement(ke.a,{key:"0",selected:i&&i.isExact},a.a.createElement(A.a,{className:"ListItemIcon"},a.a.createElement(en.a,{className:"SideBarIcon"})),a.a.createElement(xe.a,{primary:"Overview"})))),a.a.createElement(tn.a,null),a.a.createElement(ga,{title:"Example Projects",workspace:t,actions:wn}),a.a.createElement(ga,{title:"Local Projects",workspace:n,actions:hn}),a.a.createElement(ga,{title:"Google Drive",workspace:r,actions:qn,icon:a.a.createElement(rn.a,null)}),a.a.createElement(ga,{title:"Dropbox",workspace:o,actions:ur,icon:a.a.createElement(on.a,null)}))}var ka=n(442),wa=n.n(ka),ja=n(302),xa=n.n(ja),Ea=n(444),Oa={display:"flex",flexDirection:"row",flexWrap:"nowrap",flexGrow:1,overflow:"hidden"},Sa={padding:"1em 2em",overflow:"auto"};function Ca(e,t){return"string"===typeof t?e+t:a.a.Children.toArray(t.props.children).reduce(Ca,e)}function _a(e){var t=function(e){var t=Object(r.useState)(null),n=Object(h.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(!1),c=Object(h.a)(i,2),u=c[0],s=c[1],l=Object(r.useState)(null),f=Object(h.a)(l,2),p=f[0],m=f[1];return Object(r.useEffect)((function(){m(null),s(!0),Et.a.get(e).then((function(e){o(e.data),s(!1)})).catch((function(e){o(null),m("".concat(e)),s(!1)}))}),[e]),[a,u,p]}("FudomoDocs.md"),n=Object(h.a)(t,1)[0],o=null!==window.opener;return a.a.createElement("div",{style:Oa},a.a.createElement("div",{className:"DocumentationOutline"},a.a.createElement(be.a,null,o&&a.a.createElement(he.b,{to:"/docs",onClick:function(){return window.close()}},a.a.createElement(ke.a,{divider:!0},a.a.createElement(A.a,{className:"ListItemIcon"},a.a.createElement(da.a,{className:"SideBarIcon"})),a.a.createElement(xe.a,{primary:"Close Documentation"}))),!o&&a.a.createElement(he.b,{to:"/"},a.a.createElement(ke.a,{divider:!0},a.a.createElement(A.a,{className:"ListItemIcon"},a.a.createElement(wa.a,{className:"SideBarIcon"})),a.a.createElement(xe.a,{primary:"Back to Try-Fudomo!"}))),a.a.createElement(xa.a,{source:n,allowedTypes:["heading","text"],renderers:{heading:function(e){var t=a.a.Children.toArray(e.children).reduce(Ca,"").toLowerCase().replace(/\W/g,"-"),n={marginLeft:e.level-1+"em"},r={fontWeight:1===e.level?"bold":"normal"};return a.a.createElement("a",{href:"#"+t},a.a.createElement(ke.a,null,a.a.createElement(xe.a,{primary:e.children,style:n,primaryTypographyProps:{style:r}})))}}}))),a.a.createElement("div",{style:Sa},a.a.createElement(xa.a,{source:n,linkTarget:"_blank",renderers:Object(Ye.a)(Object(Ye.a)({},Ea.a),{},{heading:function(e){var t=a.a.Children.toArray(e.children).reduce(Ca,"").toLowerCase().replace(/\W/g,"-");return a.a.createElement("h"+e.level,{id:t},e.children)}})})))}var Na=Nt,Ia=Object(Xe.b)({name:"environment",initialState:{isLoading:!0,isEditorReady:!1,isRuntimeReady:!1},reducers:{setLoading:function(e,t){e.isLoading=t.payload},setEditorReady:function(e,t){e.isEditorReady=t.payload},setRuntimeReady:function(e,t){e.isRuntimeReady=t.payload}}}),Pa=Ia.actions,Fa=Pa.setLoading,Ra=Pa.setEditorReady,Ta=Pa.setRuntimeReady,Aa=Ia.reducer,La=[{type:"example",actions:wn,attr:"examplesWorkspace"},{type:"local",actions:hn,attr:"localWorkspace"},{type:"gdrive",actions:qn,attr:"gdriveWorkspace"},{type:"dropbox",actions:ur,attr:"dropboxWorkspace"}],Ma=La.map((function(e){return e.type}));function Da(e){var t=La.find((function(t){return t.type===e}));if(!t)throw new Error('Unknown workspace type "'.concat(e,'"'));return t.actions}function za(e){var t,n,r=Object(b.c)(),o=(t=e.match.params.workspaceType,Object(b.b)((function(e){var n=La.find((function(e){return e.type===t}));return n?e[n.attr]:null})));try{n=Da(e.match.params.workspaceType)}catch(i){return a.a.createElement(x,{message:"Error loading project"},i.message)}return a.a.createElement(s.c,null,a.a.createElement(s.a,{path:e.match.path+"/:projectId/:inputId",exact:!0,render:function(e){return a.a.createElement(Jt,{projectName:e.match.params.projectId,inputId:e.match.params.inputId,workspace:o,workspaceActions:n})}}),a.a.createElement(s.a,{path:e.match.path+"/:projectId/",exact:!0,render:function(e){return a.a.createElement(Jt,{projectName:e.match.params.projectId,workspace:o,workspaceActions:n})}}),a.a.createElement(s.a,{path:e.match.path,exact:!0,render:function(e){return r.dispatch(zt.setProject(null)),a.a.createElement(x,{message:"Please select a project."})}}))}var qa=Object(f.withSnackbar)((function(e){var t=Object(b.c)(),n=Object(r.useContext)(Ue).showStatus,o=Object(b.b)((function(e){return e.status}));Object(r.useEffect)((function(){n(o)}),[o,n]);var i=Object(s.g)();return Object(r.useEffect)((function(){l.a.set({page:i.pathname}),l.a.pageview(i.pathname)}),[i]),Object(r.useEffect)((function(){t.dispatch((function(e){e(Fa(!1)),e(Ra(!0)),Na.init().then((function(){e(Ta(!0))}))}));var e,n=Object(c.a)(Ma);try{for(n.s();!(e=n.n()).done;){var r=Da(e.value);t.dispatch(r.init())}}catch(a){n.e(a)}finally{n.f()}}),[t]),a.a.createElement("div",{className:"App"},a.a.createElement(Yt,null),a.a.createElement(u.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",height:"100%",width:"100%",position:"relative",boxSizing:"border-box",overflow:"hidden"},a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/docs",exact:!0},a.a.createElement(_a,null)),a.a.createElement(s.a,{path:"/"},a.a.createElement(ba,null),a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/",exact:!0,render:function(e){return window.setTimeout((function(){return t.dispatch(zt.setProject(null))}),0),a.a.createElement(x,{message:"Try Fudomo"},"Try an example project, or create your own.")}}),a.a.createElement(s.a,{path:"/:workspaceType",component:za}))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(1429);var Ba=n(71),$a=void 0;function Va(e,t){if(t.type&&t.type.startsWith("project/")&&"project/setHasUnsavedData"!==t.type&&"project/setProject"!==t.type){var n=e.getState().project;null!==n&&(n.isLoading||(e.dispatch(zt.setHasUnsavedData(!0)),function(e,t){$a&&window.clearTimeout($a),$a=window.setTimeout((function(){$a=void 0;var n=Da(e.url.split("/")[1]);t(n.commitProject((function(){void 0===$a&&t(zt.setHasUnsavedData(!1))})))}),1e3)}(n,e.dispatch)))}}var Ja=function(e){return function(t){return function(n){return Va(e,n),t(n)}}},Wa=Object(Ba.c)({examplesWorkspace:jn,localWorkspace:vn,gdriveWorkspace:Bn,dropboxWorkspace:sr,project:qt,environment:Aa,status:st}),Ha=Object(Xe.a)({reducer:Wa,middleware:function(e){return[Ja].concat(Object(vt.a)(e()))}});Et.a.defaults.baseURL=window.public_url,l.a.initialize("UA-167809229-1",{testMode:!1}),i.a.render(a.a.createElement(b.a,{store:Ha},a.a.createElement(f.SnackbarProvider,{maxSnack:3},a.a.createElement(he.a,{basename:window.public_url},a.a.createElement(Ke,null,a.a.createElement(Lr,null,a.a.createElement(Br,null,a.a.createElement(qa,null))))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},164:function(e,t,n){var r=n(256),a=n(102),o=n(103),i=n(88),c=n(2),u=n(253),s=n(92),l=n(93),f=n(252).StackFrame,p=n(194).ObjectModel,m=n(342),d=(n(344),n(191),n(83)),h=d.offsetToRange,v=d.RangeReplaceQuickfixProposal,y=d.reMatchAll,g=n(211).getSkeletonGenerator,b=n(83).escapeHtml,k=n(1015),w=function(){"use strict";function e(){s(this,e)}return l(e,[{key:"finalize",value:function(){throw new Error("Not implemented")}},{key:"hasFunction",value:function(){var e=u(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){throw new Error("Not implemented")}},{key:"validateFunctions",value:function(){var e=u(c.mark((function e(t,n,r){var a,o,u,s,l,f,p,m=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=t||"",a=this.getFunctionSignatures(t),o=new Set(n.map((function(e){return e.functionName}))),u=a.filter((function(e){return!o.has(e.funcName)})),s=[],l=i(n);try{for(p=function(){var e=f.value,n=e.functionName,o=e.parameters,i=e.decompositionQualifiedName,c=a.find((function(e){return e.funcName===n}));if(void 0!==c)o.forEach((function(e,n){var r=c.parameters[n];void 0===r?s.push({message:'Missing parameter "'.concat(e,'"'),markerContext:{type:"function",location:c.parametersListRange},fixes:[new v('Add parameter "'.concat(e,'"'),"functions",t,c.parametersListRange,c.parameters.map((function(e){return e.name})).concat([e]).join(", ")).toJSON()]}):r.name!==e&&s.push({message:'Incorrect parameter name "'.concat(r.name,'", expected "').concat(e,'"'),markerContext:{type:"function",location:c.parametersListRange},fixes:[new v('Rename parameter "'.concat(r.name,'" to "').concat(e,'"'),"functions",t,r.nameRange,e).toJSON()]})})),c.parameters.slice(o.length).forEach((function(e,n){var r=o.length+n;s.push({message:'Unexpected parameter "'.concat(e.name,'"'),markerContext:{type:"function",location:c.parametersListRange},fixes:[new v('Remove parameter "'.concat(e.name,'"'),"functions",t,c.parametersListRange,c.parameters.map((function(e){return e.name})).filter((function(e,t){return t!==r})).join(", ")).toJSON()]})}));else{var l=function(e){return"".concat(e.funcName,"-").concat(e.parameters.map((function(e){return e.name})).join("-"))},p=m.getSkeletonGenerator().generateDecompositionFunction(r.getDecompositionBySignature(i),!0),d="".concat(n,"-").concat(o.join("-")),h=Array.from(u);h.sort((function(e,t){var n=l(e),r=l(t);return k(d,n)-k(d,r)}));var y="\n\n"+m.getSkeletonGenerator().generateDecompositionFunction(r.getDecompositionBySignature(i),!1)+"\n",g=[],b=m.getAppendNewFunctionSkeletonRange(t);if(null!==b){var w=new v('Create new function skeleton "'.concat(n,'"'),"functions",t,b,y).toJSON();g.push(w)}s.push({message:'Function "'.concat(n,'" not found'),markerContext:{type:"transformation",decompositionQualifiedName:i},fixes:g.concat(h.map((function(e){return new v('Change existing function "'.concat(e.funcName,'"'),"functions",t,e.signatureRange,p).toJSON()})))})}},l.s();!(f=l.n()).done;)p()}catch(c){l.e(c)}finally{l.f()}return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"callFunction",value:function(){var e=u(c.mark((function e(t,n){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"convertScalarValue",value:function(e,t){throw new Error("Not implemented")}},{key:"toString",value:function(){var e=u(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"exceptionToStackFrame",value:function(e){throw new Error("Not implemented")}},{key:"getAppendNewFunctionSkeletonRange",value:function(e){throw new Error("Not implemented")}},{key:"getFunctionSignatures",value:function(e){throw new Error("Not implemented")}}],[{key:"addToArgumentParser",value:function(e){}}]),e}(),j=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return s(this,n),(a=t.call(this)).idByComparableObject=new WeakMap,a.objectModelById={},a.lastId=0,a}return l(n,[{key:"finalize",value:function(){this.idByComparableObject=new WeakMap,this.objectModelById={}}},{key:"nextId",value:function(){return this.lastId++}},{key:"jsonReplacer",value:function(e,t){if(t instanceof p){var n=this.idByComparableObject.get(t.id);void 0===n&&(n=this.nextId(),this.idByComparableObject.set(t.id,n),this.objectModelById[n]=t);var r={type:t.type,id:n};return t.isScalar&&(r.val=t.scalar),r}return t instanceof Set?Array.from(t):t}},{key:"jsonReviver",value:function(e,t){if(null!==t&&"Object"==t.constructor.name&&void 0!==t.type&&void 0!==t.id){var n=this.objectModelById[t.id];if(void 0===n)throw new Error("Received ObjectModel Id that was never sent.");return n}return t}},{key:"serializeHasFunctionOp",value:function(e){if(null==e)throw new Error("Lookup of null function");return{op:"hasFunction",name:e}}},{key:"serializeCallFunctionOp",value:function(e,t){return{op:"callFunction",name:e,args:t}}},{key:"serializeValidateFunctionOp",value:function(e,t){return{op:"validateFunction",functionName:e,parameterNames:t}}},{key:"encodeObj",value:function(e){var t=this;return JSON.stringify(e,(function(e,n){return t.jsonReplacer(e,n)}))}},{key:"decodeObj",value:function(e){var t=this;return JSON.parse(e,(function(e,n){return t.jsonReviver(e,n)}))}}]),n}(w),x=function(e){"use strict";a(n,e);var t=o(n);function n(e){var r;return s(this,n),(r=t.call(this)).jsError=e,r.cause=e,r.message=e.message,r}return l(n,[{key:"location",get:function(){var e,t=i(this.jsError.stack.split("\n"));try{for(t.s();!(e=t.n()).done;){var n=e.value.split(",").slice(-1)[0],r=/.*?:(\d+):(\d+)\)/.exec(n);if(null!==r){var a=Number(r[1])-1,o=Number(r[2])-1;return[[a,o],[a,o+1]]}}}catch(c){t.e(c)}finally{t.f()}return null}},{key:"toString",value:function(){var e,t=[],n=i(this.jsError.stack.split("\n"));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.match(/\sat .* \(.*fudomo-transform\/compute\.js:\d+:\d+\)/)||r.match(/\sat .* \(.*\/node_modules\/vm2\/lib\/contextify.js:\d+:\d+\)/))break;t.push(r.replace(/    at /g,"    at (JS) "))}}catch(a){n.e(a)}finally{n.f()}return t.join("\n")}},{key:"toHtml",value:function(){var e,t=[],n=i(this.jsError.stack.split("\n"));try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.match(/\sat .* \(.*fudomo-transform\/compute\.js:\d+:\d+\)/)||r.match(/\sat .* \(.*\/node_modules\/vm2\/lib\/contextify.js:\d+:\d+\)/))break;t.push(b(r.replace(/    at /g,"    at (JS) ")))}}catch(a){n.e(a)}finally{n.f()}return t.join("\n")}}]),n}(f),E=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return s(this,n),(a=t.call(this)).languageId="js",a.initExternalFunctions(e,r),a}return l(n,[{key:"initExternalFunctions",value:function(e,t){throw new Error("Not implemented")}},{key:"finalize",value:function(){}},{key:"convertScalarValue",value:function(e,t){if("oyaml"===e){if(t.kind!==m.Kind.SCALAR)throw new Error("Expected Scalar");return t.valueObject instanceof Date?t.valueObject:m.determineScalarType(t)===m.ScalarType.string?t.value:t.valueObject}throw"js"===e?new Error("Unsupported object model type "+e):new Error("Not implemented")}},{key:"hasFunctionSync",value:function(e){return void 0!==this.externalFunctions[e]}},{key:"hasFunction",value:function(){var e=u(c.mark((function e(t){var n=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){e(n.hasFunctionSync(t))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"callFunctionSync",value:function(e,t){if(!this.hasFunctionSync(e))throw new Error('Decomposition function implementation "'.concat(e,'" could not be found.'));return this.externalFunctions[e].apply(null,t)}},{key:"callFunction",value:function(){var e=u(c.mark((function e(t,n){var r=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){try{e(r.callFunctionSync(t,n))}catch(o){a(o)}})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){return g("js")}},{key:"exceptionToStackFrame",value:function(e){return new x(e)}},{key:"toString",value:function(){var e=u(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",String(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAppendNewFunctionSkeletonRange",value:function(e){var t=y(e,/(module\.exports\s*=\s*{\s*)([\s\S]*)(})/g);if(1!=t.length)return null;var n=t[0];return[n.groupRanges[2][1],n.groupRanges[2][1]]}},{key:"getFunctionSignatures",value:function(e){var t=/(\s*)([\w\d_]+)([\s,]*)/g;return y(e,/(\/\*\*[\s\S]*?\*\/\s*)?(\/\*\*.*?\*\/)?(\s*)([\w\d_]+)(:\s*function\(([\w\d_,\s]*)\))/g).map((function(n){return{signature:n[0],signatureRange:n.groupRanges[0],funcName:n[4],funcNameRange:n.groupRanges[4],parameters:y(n[6]||"",t).map((function(t){return{name:t[2],nameRange:h(e,n.indices[6][0]+t.indices[2][0],t.indices[2][1]-t.indices[2][0])}})),parametersListRange:n.groupRanges[6],comment:n[1],commentRange:n.groupRanges[1]}}))}}]),n}(w),O=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return s(this,n),(a=t.call(this)).baseDir=path.resolve(e),a.errorObj=r,a.cause=r,a}return l(n,[{key:"toString",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n="".concat(this.errorObj.message,"\n"),r=this.errorObj.stack.slice(0).reverse(),a=i(r);try{for(a.s();!(e=a.n()).done;){var o=e.value,c=this.relPath(t,o.filename);n+="    at (PY) ".concat(c,":").concat(o.startLine,":").concat(o.startCol,"\n")}}catch(u){a.e(u)}finally{a.f()}return n.slice(0,-1)}},{key:"toHtml",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n="".concat(b(this.errorObj.message),"\n"),r=this.errorObj.stack.slice(0).reverse(),a=i(r);try{for(a.s();!(e=a.n()).done;){var o=e.value,c=this.relPath(t,o.filename),u=[[o.startLine-1,o.startCol-1],[o.endLine-1,o.endCol-1]];n+='    at (PY) <a class="fudomo-exception-source-link" href="#" data-source-loc="'.concat(b(JSON.stringify({src:c,pos:u})),'">').concat(b(c),":").concat(o.startLine,":").concat(o.startCol,"</a>\n")}}catch(s){a.e(s)}finally{a.f()}return n.slice(0,-1)}}]),n}(f),S=function(){"use strict";function e(t){s(this,e),this.errorObj=t,this.message=t.message}return l(e,[{key:"toString",value:function(){return this.message}}]),e}(),C=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return s(this,n),(a=t.call(this,r)).version=e,a}return n}(r(Error));t.UnsupportedPythonVersionError=C,t.PythonError=S,t.StackFrame=f,t.PythonStackFrame=O,t.BaseJSDecompositionFunctionRunner=E,t.JSStackFrame=x,t.DecompositionFunctionRunner=w,t.ExternalDecompositionFunctionRunner=j},194:function(e,t,n){var r=n(88),a=n(93),o=n(92),i=n(102),c=n(103),u=n(256),s=n(342),l=n(191),f=n(83).RangeReplaceQuickfixProposal;function p(e){var t=typeof e;return"function"===t||"object"===t&&!!e}var m=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return n}(u(Error));function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw null!=t?new m(t):new m}var h=function(){"use strict";function e(){o(this,e)}return a(e,[{key:"id",get:function(){throw new Error("Not Implemented")}},{key:"refId",get:function(){throw new Error("Not Implemented")}},{key:"isScalar",get:function(){throw new Error("Not implemented")}},{key:"val",get:function(){throw new Error("Not implemented")}},{key:"scalarType",get:function(){throw new Error("Not implemented")}},{key:"scalarValueLocation",get:function(){throw new Error("Not implemented")}},{key:"type",get:function(){throw new Error("Not implemented")}},{key:"typeLocation",get:function(){throw new Error("Not implemented")}},{key:"fullDefinitionLocation",get:function(){throw new Error("Not implemented")}},{key:"getFeatureNameLocation",value:function(e){throw new Error("Not implemented")}},{key:"getFeatureValueLocation",value:function(e){throw new Error("Not implemented")}},{key:"getAttributeType",value:function(e){throw new Error("Not implemented")}},{key:"getFeatureAsArray",value:function(e){var t=this.getFeature(e);return Array.isArray(t)?t:void 0===t?[]:[t]}},{key:"getFeature",value:function(e){throw new Error("Not implemented")}},{key:"featureNames",get:function(){throw new Error("Not implemented")}}]),e}(),v=0,y=function(){"use strict";function e(){o(this,e),this.wrappers=new WeakMap,this.context=null,this.id=v++,this.objectIdCounter=0}return a(e,[{key:"getObjectModel",value:function(e,t){var n=this.wrappers.get(e);return void 0===n&&(n=new g(this,"js".concat(this.id,".").concat(this.objectIdCounter++),e,t),this.wrappers.set(e,n)),n}}]),e}(),g=function(e){"use strict";i(n,e);var t=c(n);function n(e,r,a,i){var c;if(o(this,n),(c=t.call(this)).factory=e,Array.isArray(a))throw new Error("Can not create JSObject for Array");return c._id=r,c.obj=a,c.sourceLocation=i,c}return a(n,[{key:"id",get:function(){return this._id}},{key:"isScalar",get:function(){return!p(this.obj)}},{key:"val",get:function(){return this.factory.context.functionRunner.convertScalarValue("js",this.obj)}},{key:"scalarType",get:function(){return this.type}},{key:"scalarValueLocation",get:function(){return[[0,0],[0,0]]}},{key:"type",get:function(){return this.obj.constructor.name}},{key:"typeLocation",get:function(){return[[0,0],[0,0]]}},{key:"fullDefinitionLocation",get:function(){return[[0,0],[0,0]]}},{key:"getFeature",value:function(e){var t=this,n=this.obj[e];return Array.isArray(n)?n.map((function(e){return t.factory.getObjectModel(e,t.sourceLocation)})):p(n)?this.factory.getObjectModel(n,this.sourceLocation):n}},{key:"getFeatureNameLocation",value:function(e){return[[0,0],[0,0]]}},{key:"getFeatureValueLocation",value:function(e){return[[0,0],[0,0]]}},{key:"featureNames",get:function(){return Object.keys(this.obj)}},{key:"toString",value:function(){return"<JSObject obj='".concat(this.obj,"'>")}}]),n}(h),b={};b[s.ScalarType.null]=function(e){return null},b[s.ScalarType.bool]=s.parseYamlBoolean,b[s.ScalarType.int]=s.parseYamlInteger,b[s.ScalarType.float]=s.parseYamlFloat,b[s.ScalarType.string]=function(e){return e};var k=0,w=function(){"use strict";function e(){o(this,e),this.wrappers=new Map,this.context=null,this.id=k++,this.objectIdCounter=-1}return a(e,[{key:"getObjectModel",value:function(e,t,n,r){var a=this.wrappers.get(e);return void 0===a&&(this.objectIdCounter+=1,a=new E(this,"oyaml".concat(this.id,".").concat(this.objectIdCounter),e,t,n,r),this.wrappers.set(e,a)),a}}]),e}();function j(e){return e.toUpperCase()===e}function x(e,t){var n=t.fromIndex(e.startPosition)||{line:0,col:0},r=t.fromIndex(e.endPosition)||t.fromIndex(t.str.length-1);return[[n.line,n.col],[r.line,r.col]]}var E=function(e){"use strict";i(n,e);var t=c(n);function n(e,r,a,i,c,u){var l;return o(this,n),d(a.kind==s.Kind.MAP),d(i.kind==s.Kind.MAP),d(null===a.mappings[0].value||a.mappings[0].value.kind==s.Kind.SEQ||a.mappings[0].value.kind==s.Kind.SCALAR,"Value ".concat(a.mappings[0].value," has unexpected kind.")),(l=t.call(this)).factory=e,l._id=r,l.obj=a,l.root=i,l.lineColumnFinder=c,l.sourceLocation=u,l}return a(n,[{key:"getNodePosition",value:function(e){return x(e,this.lineColumnFinder)}},{key:"id",get:function(){return this._id}},{key:"refId",get:function(){var e=this.obj.mappings[0].key.value.split(/\s+/);if(1!=e.length)return e[1]}},{key:"isScalar",get:function(){if(null===this.obj.mappings[0].value)return!0;var e=this.obj.mappings[0].value.valueObject instanceof Date,t=null===this.obj.mappings[0].value,n=this.obj.mappings[0].value.kind===s.Kind.SCALAR;return e||t||n}},{key:"val",get:function(){return d(this.isScalar),this.factory.context.functionRunner.convertScalarValue("oyaml",this.obj.mappings[0].value)}},{key:"scalarType",get:function(){if(d(this.isScalar),null===this.obj.mappings[0].value)return"null";if(this.obj.mappings[0].value.valueObject instanceof Date)return"timestamp";var e=s.determineScalarType(this.obj.mappings[0].value);return s.ScalarType[e]}},{key:"scalarValueLocation",get:function(){var e=this.obj.mappings[0].value;return null===e?this.getNodePosition(this.obj.mappings[0]):this.getNodePosition(e)}},{key:"structureSeq",get:function(){return this.obj.mappings[0].value}},{key:"type",get:function(){return this.obj.mappings[0].key.value.split(" ").slice(0,1)[0]}},{key:"typeLocation",get:function(){if("Root"==this.type)return this.fullDefinitionLocation;var e=this.obj.mappings[0].key.startPosition,t=this.lineColumnFinder.fromIndex(e)||{line:0,col:0},n=t.line,r=t.col;return[[n,r],[n,r+this.type.length]]}},{key:"fullDefinitionLocation",get:function(){if("Root"==this.type){var e=this.lineColumnFinder.fromIndex(this.lineColumnFinder.str.length-1)||{line:0,col:0};return[[0,0],[e.line,e.col]]}var t=this.obj.mappings[0].key.startPosition,n=this.lineColumnFinder.fromIndex(t)||{line:0,col:0},r=this.obj.mappings[0].value,a=r;r.kind===s.Kind.SEQ&&r.items.length>0&&(a=r.items.slice(-1)[0]);var o=this.lineColumnFinder.fromIndex(a.endPosition-1);return[[n.line,n.col],[o.line,o.col+1]]}},{key:"_stripRefMarker",value:function(e){var t=e.trim();return t.endsWith(">")?t.slice(0,-1).trim():t}},{key:"getObjectById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t&&(t=new Set),t.has(this.id))return null;if(t.add(this.id),this.refId===e)return this;var n,a=r(this.getFeature("cont"));try{for(a.s();!(n=a.n()).done;){var o=n.value,i=o.getObjectById(e,t);if(null!=i)return i}}catch(c){a.e(c)}finally{a.f()}return null}},{key:"wrapValue",value:function(e){var t=this;if(Array.isArray(e))return e.map((function(e){return t.wrapValue(e)}));if(null===e||void 0===e.kind)return e;if(e.kind===s.Kind.SCALAR){if(e.valueObject instanceof Date)return e.valueObject;var n=s.determineScalarType(e);return b[n.toString()](e.value)}return e.kind===s.Kind.SEQ?e.items.map((function(e){return t.wrapValue(e)})):e.kind===s.Kind.MAP?this.factory.getObjectModel(e,this.root,this.lineColumnFinder,this.sourceLocation):void 0}},{key:"getFeature",value:function(e){var t=this;if(this.isScalar)return"cont"===e?[]:null;var n=void 0;if("cont"===e){var a=this.obj.mappings[0].value.items;return this.wrapValue(a.filter((function(e){return j(e.mappings[0].key.value[0])})))}var o=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})).filter((function(e){return!j(e.key.value[0])})),i=o.filter((function(t){return t.key.value==e}))[0];if(void 0!==i&&null===i.value)return this.wrapValue(null);if(void 0!==i&&i.value.kind==s.Kind.SEQ)return i.value.items.map((function(e){return t.wrapValue(e)}));if(void 0!==i&&void 0!==i.value.value)return this.wrapValue(i.value);var c,u=null,l=r(o);try{for(l.s();!(c=l.n()).done;){var f=c.value;if(f.key.value.trim().endsWith(">")&&this._stripRefMarker(f.key.value)==e){u=f.value.value;break}}}catch(v){l.e(v)}finally{l.f()}if(n=[],u){var p,m=r(u.split(","));try{for(m.s();!(p=m.n()).done;){var d=p.value.trim(),h=this.factory.getObjectModel(this.root,this.root,this.lineColumnFinder,this.sourceLocation).getObjectById(d);if(void 0==h)throw new Error('Could not resolve reference "'.concat(e,": ").concat(d,'"'));n.push(h.obj)}}catch(v){m.e(v)}finally{m.f()}}return 0==n.length?n=null:1==n.length&&(n=n[0]),this.wrapValue(n)}},{key:"getFeatureNameLocation",value:function(e){d(!this.isScalar);var t,n=this.obj.mappings[0].value.items,a=r(n.map((function(e){return e.mappings[0].key})));try{for(a.s();!(t=a.n()).done;){var o=t.value;if(!j(o.value.trim()[0])){var i=this._stripRefMarker(o.value);if(i==e){var c=this.lineColumnFinder.fromIndex(o.startPosition),u=c.line,s=c.col;return[[u,s],[u,s+i.length]]}}}}catch(l){a.e(l)}finally{a.f()}return[[0,0],[0,0]]}},{key:"getFeatureValueLocation",value:function(e){d(!this.isScalar);var t,n=this.obj.mappings[0].value.items,a=r(n);try{for(a.s();!(t=a.n()).done;){var o=t.value.mappings[0];if(null===o.value)return this.getNodePosition(o.key);if(this._stripRefMarker(o.key.value)==e)return this.getNodePosition(o.value)}}catch(i){a.e(i)}finally{a.f()}return[[0,0],[0,0]]}},{key:"featureNames",get:function(){var e=this;if(this.structureSeq.kind!=s.Kind.SEQ)return[];var t=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})),n=t.filter((function(e){return!j(e.key.value[0])})).map((function(t){return e._stripRefMarker(t.key.value)}));return t.filter((function(e){return j(e.key.value[0])})).length>0&&n.push("cont"),n}},{key:"_getValueType",value:function(e){if(null===e)return"null";if(e.valueObject instanceof Date)return"timestamp";if(e.kind==s.Kind.SEQ)return e.items.map(this._getValueType);var t=s.determineScalarType(e);return s.ScalarType[t]}},{key:"getAttributeType",value:function(e){var t=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})).filter((function(e){return!j(e.key.value[0])})).filter((function(t){return t.key.value==e}))[0];if(void 0!==t)return this._getValueType(t.value)}},{key:"toString",value:function(){return void 0===this.refId?this.isScalar?"<OYAMLObject type='".concat(this.scalarType,"'>"):"<OYAMLObject type='".concat(this.type,"'>"):this.isScalar?"<OYAMLObject type='".concat(this.scalarType,"' refId='").concat(this.refId,"'>"):"<OYAMLObject type='".concat(this.type,"' refId='").concat(this.refId,"'>")}}]),n}(h);function O(e,t){for(var n=new Set,a=[e];a.length>0;){var o=a.shift();if(!n.has(o.id)){n.add(o.id),t(o);var i,c=[],u=r(o.featureNames);try{for(u.s();!(i=u.n()).done;){var s,l=i.value,f=r(new S(e,o).successors(l,"Object"));try{for(f.s();!(s=f.n()).done;){var p=s.value;p._center instanceof h&&c.push(p._center)}}catch(m){f.e(m)}finally{f.f()}}}catch(m){u.e(m)}finally{u.f()}a.splice.apply(a,[0,0].concat(c))}}}var S=function(){"use strict";function e(t,n){if(o(this,e),void 0==t)throw new Error("model can't be undefined");if(void 0==n)throw new Error("center can't be undefined");if(!(t instanceof h))throw new Error('model must be instance of ObjectModel (got "'.concat(n,'")'));this.model=t,this._center=n}return a(e,[{key:"type",get:function(){return this.center.type}},{key:"center",get:function(){return this._center}},{key:"sourceLocation",get:function(){var e=this.center.sourceLocation||"unknown_source_path";return"".concat(e,":").concat(this.center.typeLocation[0][0]+1,":").concat(this.center.typeLocation[0][1]+1)}},{key:"getFeature",value:function(e){return"center"==e?this._center:"val"==e?this._center.val:this._center.getFeature(e)}},{key:"getAllInstancesByType",value:function(t){var n=[],r=this.model;return O(r,(function(a){("Object"===t||a.type===t)&&n.push(new e(r,a))})),n}},{key:"successors",value:function(t,n){var a,o=this._center.getFeatureAsArray(t),i=[],c=r(o);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(u instanceof h){var s=new e(this.model,u),l=!0;"Object"!=n&&s.type!=n&&(l=!1),l&&i.push(s)}}}catch(f){c.e(f)}finally{c.f()}return i}},{key:"predecessors",value:function(t,n){var a=this,o=new Set;return O(this.model,(function(i){var c,u=r(i.getFeatureAsArray(t));try{for(u.s();!(c=u.n()).done;){var s=c.value;if(s instanceof h&&s.id===a._center.id){var l=new e(a.model,i),f=!0;"Object"!=n&&l.type!=n&&(f=!1),f&&o.add(l)}}}catch(p){u.e(p)}finally{u.f()}})),o}},{key:"toString",value:function(){return'<CenteredModel center="'.concat(this._center,'" model="').concat(this.model,'">')}}]),e}(),C=function e(t){"use strict";o(this,e),this.cont=t},_=function(){"use strict";function e(){o(this,e)}return a(e,[{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){throw new Error("Not implemented")}},{key:"getRootCenteredModel",value:function(e){return new S(e,e)}}]),e}(),N=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return a(n,[{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Array.isArray(e))throw new Error("Root has to be Object, not Array");return(new y).getObjectModel(new C(e),t)}}]),n}(_),I=function(){"use strict";function e(t){o(this,e),this.lineColumnFinder=t,this.markers=[]}return a(e,[{key:"message",get:function(){return this.toString()}},{key:"addMarkerForNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={message:t,markerContext:{type:"input"},fixes:n};r.markerContext.location=null==e?[[0,0],[0,0]]:x(e,this.lineColumnFinder),this.markers.push(r)}},{key:"addMarkerAtLocation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.markers.push({markerContext:{type:"input",location:e},message:t,fixes:n})}},{key:"hasMarkers",get:function(){return this.markers.length>0}},{key:"toString",value:function(){return this.markers.map((function(e){return"(".concat(e.markerContext.location[0][0],":").concat(e.markerContext.location[0][1],") ").concat(e.message)})).join("\n")}}]),e}(),P=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return a(n,[{key:"isStringScalar",value:function(e){return null!==e&&(e.kind==s.Kind.SCALAR&&s.determineScalarType(e)==s.ScalarType.string)}},{key:"_getNodeText",value:function(e,t){return null===t?"":e.slice(t.startPosition,t.endPosition)}},{key:"createSingleMappingToMultipleMappingQuickfixProposal",value:function(e,t,n){var r=this,a=this._getNodeText(e,n).split("\n")[1].replace(/\t/g,"  ").search(/[^ ]/);-1===a?a=4:a-="- ".length;var o="\n"+" ".repeat(a)+"- ",i=n.mappings.map((function(t){return"".concat(r._getNodeText(e,t.key),": ").concat(r._getNodeText(e,t.value))})).join(o);return new f("Change single mapping into multiple mappings","input",e,x(n,t),i).toJSON()}},{key:"validateObject",value:function(e,t,n,a){if(null!==e&&void 0!==e)if(e.kind==s.Kind.MAP)if(1==e.mappings.length){var o=e.mappings[0].value;if(null===o||o.kind==s.Kind.SEQ||o.kind==s.Kind.SCALAR){var i=e.mappings[0].key;if(this.isStringScalar(i)){var c=i.value.trim().split(/\s+/);if((0==c.length||c.length>2)&&t.addMarkerForNode(i,'Invalid object key (must be "Type [identifier]")'),null!==o&&o.kind==s.Kind.SEQ){var u,l=r(o.items);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(null!==f)if(void 0!==f.mappings&&1==f.mappings.length){var p=f.mappings[0],m=p.key,d=p.value;if(this.isStringScalar(m)){var h=m.value.trim().split(/\s+/);if(0==h.length||h.length>2)t.addMarkerForNode(m,'Invalid object key (must be "Type [identifier]")');else{var v=m.value.trim()[0];if(void 0!==v&&j(v))this.validateObject(f,t,n,a);else if(this.isStringScalar(m)&&""!==m.value||t.addMarkerForNode(m,"Attribute, reference or contained object key must be non-empty string scalar"),m.value.trim().endsWith(">")){var y=m.value.trim().split(">");y.length>1&&(y.length>2&&t.addMarkerForNode(m,'Invalid reference key (too many ">")'),this.isStringScalar(d)||t.addMarkerForNode(d,"Reference specification must be string scalar"))}else if(null!==d){if(d.kind!=s.Kind.SCALAR&&d.kind!=s.Kind.SEQ){var g=d||p;t.addMarkerForNode(g,"Attribute has to be scalar or sequence of scalars");continue}if(d.kind,s.Kind.SCALAR,d.kind==s.Kind.SEQ){var b,k=r(d.items);try{for(k.s();!(b=k.n()).done;){var w=b.value;null!==w&&w.kind!=s.Kind.SCALAR&&t.addMarkerForNode(w,"Item in attribute sequence has to be scalar")}}catch(O){k.e(O)}finally{k.f()}}}}}else t.addMarkerForNode(m,"Attribute, reference or contained object key has to be string scalar")}else{var x=this.createSingleMappingToMultipleMappingQuickfixProposal(n,a,f);t.addMarkerForNode(f,"Attribute, reference or contained object map must have 1 mapping",[x])}else t.addMarkerForNode(o,"Null mapping not allowed")}}catch(O){l.e(O)}finally{l.f()}}}else t.addMarkerForNode(i,"Object key has to be string scalar")}else{var E=o||e;t.addMarkerForNode(E,"Object value must be sequence or scalar")}}else t.addMarkerForNode(e,"Object map must have only one key-value mapping");else t.addMarkerForNode(e,"Object has to be a map or scalar");else t.addMarkerForNode(null,"Object has to be a map or scalar")}},{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=s.load(e),a=new l(e,{origin:0}),o=new I(a);if(void 0===n)n={kind:s.Kind.SEQ,items:[]};else{var i,c=r(n.errors);try{for(c.s();!(i=c.n()).done;){var u=i.value,f=[[0,0],[0,0]];"YAMLException"==u.name&&(f=[[u.mark.line+1,u.mark.column+1],[u.mark.line+1,u.mark.column+1]]),o.addMarkerAtLocation(f,u.reason)}}catch(m){c.e(m)}finally{c.f()}n.kind!=s.Kind.SEQ&&o.addMarkerAtLocation([[0,0],[0,0]],"Root has to be Array")}if(o.hasMarkers)throw o;var p={kind:s.Kind.MAP,mappings:[{kind:s.Kind.MAPPING,key:{kind:s.Kind.SCALAR,value:"Root root"},value:n}]};if(this.validateObject(p,o,e,a),o.hasMarkers)throw o;return(new w).getObjectModel(p,p,a,t)}}]),n}(_);e.exports={CenteredModel:S,AbstractJSObjectLoader:N,AbstractOYAMLObjectLoader:P,ObjectModel:h}},211:function(e,t,n){var r=n(102),a=n(103),o=n(88),i=n(254),c=n(92),u=n(93),s=function(){"use strict";function e(t,n,r,a){c(this,e),this.commentStart=t,this.commentEnd=n,this.lineIndent=r,this.maxLineLength=a,this.lines=[]}return u(e,[{key:"wrapTextWithPrefix",value:function(e,t){var n,r=Math.max.apply(Math,i(e.split("\n").map((function(e){return e.length})))),a=this.maxLineLength-this.lineIndent.length-r;if(a<=0)return this.wrapText(e,79).wrapText(t,79);var o=this._wrapText(t,a),c=" ".repeat(r);return(n=this.lines).push.apply(n,[e+o[0]].concat(i(o.slice(1).map((function(e){return c+e}))))),this}},{key:"wrapText",value:function(e){var t,n=this.maxLineLength-this.lineIndent.length;n<=0&&(n=2);var r=this._wrapText(e,n);return(t=this.lines).push.apply(t,i(r)),this}},{key:"_wrapText",value:function(e,t){var n,r=[],a=o(e.split("\n"));try{for(a.s();!(n=a.n()).done;){var c=n.value;if(c.length<t)r.push(c);else{var u=c.slice(0,t),s=c.slice(t),l=u.lastIndexOf(" ");-1==l&&(l=t-1);var f=u.slice(l),p=u.slice(0,l),m=(f+s).trimStart();r.push(p),r.push.apply(r,i(this._wrapText(m,t)))}}}catch(d){a.e(d)}finally{a.f()}return r}},{key:"toString",value:function(){var e=this;return this.commentStart.endsWith("\n")?this.commentStart+this.lines.map((function(t){return e.lineIndent+t})).join("\n")+this.commentEnd:[this.commentStart+this.lines[0]].concat(i(this.lines.slice(1).map((function(t){return e.lineIndent+t})))).join("\n")+this.commentEnd}}]),e}(),l=function(){"use strict";function e(t,n,r){c(this,e),this.prefix=t,this.separator=n,this.suffix=r,this.parameterTypeMap=null}return u(e,[{key:"generateSkeleton",value:function(e){var t=this,n=this.prefix;return n+=e.decompositions.map((function(e){return t.generateDecompositionFunction(e)})).join(this.separator),n+=this.suffix}},{key:"generateDecompositionFunction",value:function(e){throw new Error("Not implemented")}},{key:"getFunctionValidationCriteria",value:function(e){var t,n=[],r=o(e.decompositions);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.function.type+"_"+a.function.name,c=a.links.map((function(e){return e.parameterName}));n.push({functionName:i,parameters:c,decompositionQualifiedName:a.function.qualifiedName})}}catch(u){r.e(u)}finally{r.f()}return n}}]),e}(),f=function(e){"use strict";r(n,e);var t=a(n);function n(){var e;return c(this,n),(e=t.call(this,"module.exports = {\n","\n\n","\n};\n")).parameterTypeMap={Sequence:"Array",Set:"Set"},e}return u(n,[{key:"generateDecompositionFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new s("  /**\n","\n   */","   * ",79),r=e.function.type+"_"+e.function.name,a=e.links.map((function(e){return e.parameterName}));n.wrapText(e.function.qualifiedName),e.comment&&n.wrapText(e.comment);for(var o=e.links,i=0,c=Object.keys(o);i<c.length;i++){var u=c[i],l=o[u],f=this.parameterTypeMap[l.parameterTypeDescription];f?n.wrapTextWithPrefix("@param ".concat(l.parameterName," {").concat(f,"} "),l.parameterDescription):n.wrapTextWithPrefix("@param ".concat(l.parameterName," "),l.parameterDescription)}var p=n.toString();p+="\n";var m=a.join(", ");return p+="  ".concat(r,": function(").concat(m,")"),t||(p+=" {\n",p+="    throw new Error('function ".concat(r,"(").concat(m,") not yet implemented'); // TODO\n"),p+="  },"),p}}]),n}(l),p=function(e){"use strict";r(n,e);var t=a(n);function n(){var e;return c(this,n),(e=t.call(this,"","\n\n\n","")).parameterTypeMap={Sequence:"list",Set:"set"},e}return u(n,[{key:"generateDecompositionFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new s('    """','\n    """\n',"    ",79),r=e.function.type+"_"+e.function.name,a=e.links.map((function(e){return e.parameterName})),i="def ".concat(r,"(").concat(a.join(", "),"):\n");n.wrapText(e.function.qualifiedName),e.comment&&n.wrapText(e.comment);var c,u=o(e.links);try{for(u.s();!(c=u.n()).done;){var l=c.value;n.wrapTextWithPrefix(":param ".concat(l.parameterName,": "),"".concat(l.parameterDescription));var f=this.parameterTypeMap[l.parameterTypeDescription];f&&n.wrapTextWithPrefix(":type  ".concat(l.parameterName,": "),"".concat(f))}}catch(p){u.e(p)}finally{u.f()}return i+=n.toString(),t||(i+="    raise NotImplementedError('function ".concat(r," not yet implemented')  # TODO")),i.trim()}}]),n}(l),m={javascript:f,js:f,python:p};e.exports={getSkeletonGenerator:function(e){var t=m[e];return void 0==t?null:new t},SKELETON_GENERATORS:[{id:"js",name:"Javascript",extension:"js"},{id:"python",name:"Python 3",extension:"py"}]}},230:function(module,exports,__webpack_require__){var _regeneratorRuntime=__webpack_require__(2),_asyncToGenerator=__webpack_require__(253),_classCallCheck=__webpack_require__(92),_createClass=__webpack_require__(93),_inherits=__webpack_require__(102),_createSuper=__webpack_require__(103),_require=__webpack_require__(194),ObjectModel=_require.ObjectModel,_require2=__webpack_require__(252),FudomoComputeException=_require2.FudomoComputeException,getParameterNames=__webpack_require__(344),_require3=__webpack_require__(164),DecompositionFunctionRunner=_require3.DecompositionFunctionRunner,BaseJSDecompositionFunctionRunner=_require3.BaseJSDecompositionFunctionRunner,UnsupportedPythonVersionError=_require3.UnsupportedPythonVersionError,PythonError=_require3.PythonError,JSStackFrame=_require3.JSStackFrame,JSDecompositionFunctionRunner=function(e){"use strict";_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,null,null)).externalFunctions=e||{},r}return _createClass(n,[{key:"initExternalFunctions",value:function(e,t){}}]),n}(BaseJSDecompositionFunctionRunner),RUNNERS_BY_ID={javascript:JSDecompositionFunctionRunner},RUNNER_BY_FILE_EXTENSION={js:JSDecompositionFunctionRunner};module.exports={DecompositionFunctionRunner:DecompositionFunctionRunner,getRunnerClassById:function(e){return RUNNERS_BY_ID[e]},getRunnerClassByFileExtension:function(e){return RUNNER_BY_FILE_EXTENSION[e]},importCommonJSModule:function(){var _importCommonJSModule=_asyncToGenerator(_regeneratorRuntime.mark((function _callee(moduleSource){return _regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve,reject){var module={},window={},document={};try{eval(moduleSource),resolve(module.exports)}catch(error){reject(new FudomoComputeException([new JSStackFrame(error)]))}})));case 1:case"end":return _context.stop()}}),_callee)})));function importCommonJSModule(e){return _importCommonJSModule.apply(this,arguments)}return importCommonJSModule}(),importES6Module:function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="data:text/javascript;charset=utf-8,"+encodeURIComponent(t),e.abrupt("return",new Promise((function(e,t){import(n).then((function(t){e(t)})).catch((function(e){t(new FudomoComputeException([new JSStackFrame(e)]))}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),importModule:function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",module.exports.importCommonJSModule(t).catch((function(e){return module.exports.importES6Module(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},252:function(e,t,n){var r=n(2),a=n(253),o=n(254),i=n(88),c=n(102),u=n(103),s=n(92),l=n(93),f=n(943),p=n(255),m=n(329),d=(m.Transformation,m.getFudomoParser,n(83).escapeHtml),h=function(){"use strict";function e(t,n,r){s(this,e),this.transformation=t,this.rootModel=n,this.rootModel.model.factory.context=this,this.functionRunner=r,this.stack=null}return l(e,[{key:"log",value:function(){}},{key:"logIndented",value:function(){this.indentLog(),this.log.apply(this,arguments),this.dedentLog()}},{key:"indentLog",value:function(){}},{key:"dedentLog",value:function(){}}]),e}(),v=function(){"use strict";function e(){s(this,e)}return l(e,[{key:"relPath",value:function(e,t){if(null==e)return t;if(null==t)return t;if(!p.isAbsolute(e))throw new Error("Path base must be absolute path");if(!p.isAbsolute(t))throw new Error("Path must be absolute path");return t.startsWith(e)?t.slice(e.length+1):t}},{key:"toString",value:function(){throw new Error("Not implemented")}},{key:"toHtml",value:function(){throw new Error("Not implemented")}}]),e}(),y=function(e){"use strict";c(n,e);var t=u(n);function n(e){var r;return s(this,n),(r=t.call(this)).link=e,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (LL) ".concat(this.link," (").concat(n,")")}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(d(n),":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (LL) ".concat(d(this.link),' (<a class="fudomo-exception-source-link" href="#" data-source-loc="').concat(d(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(d(r),"</a>)"):"    at (LL) ".concat(d(this.link)," (").concat(d(r),")")}}]),n}(v),g=function(e){"use strict";c(n,e);var t=u(n);function n(e){var r;return s(this,n),(r=t.call(this)).link=e,r.referredModel=null,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (GL) ".concat(this.link," (").concat(n,")\n            ").concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (GL) ".concat(d(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(d(r),"</a>)\n")+"            ".concat(d(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(d(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(d(this.referredModel.center)):"    at (GL) ".concat(d(this.link)," (").concat(d(r),")\n")+"            ".concat(d(this.link.function.type)," (").concat(d(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(d(this.referredModel.center))}}]),n}(v),b=function(e){"use strict";c(n,e);var t=u(n);function n(e){var r;return s(this,n),(r=t.call(this)).link=e,r.referredModel=null,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (FL) ".concat(this.link," (").concat(n,")\n            ").concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (FL) ".concat(d(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(d(r),"</a>)\n")+"            ".concat(d(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(d(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(d(this.referredModel.center)):"    at (FL) ".concat(d(this.link)," (").concat(d(r),")\n")+"            ".concat(d(this.link.function.type)," (").concat(d(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(d(this.referredModel.center))}}]),n}(v),k=function(e){"use strict";c(n,e);var t=u(n);function n(e){var r;return s(this,n),(r=t.call(this)).link=e,r.referredModel=null,r}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (RL) ".concat(this.link," (").concat(n,")\n")+"            ".concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (RL) ".concat(d(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(d(r),"</a>)\n")+"            ".concat(d(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(d(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(d(this.referredModel.center)):"    at (RL) ".concat(d(this.link)," (").concat(r,")\n")+"            ".concat(d(this.link.function.type)," (").concat(d(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(d(this.referredModel.center))}}]),n}(v),w=function(e){"use strict";c(n,e);var t=u(n);function n(e,r){var a;return s(this,n),(a=t.call(this)).decomposition=e,a.centeredModel=r,a}return l(n,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.decomposition.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.decomposition.node.location[0][0]+1,":").concat(this.decomposition.node.location[0][1]+1);return"    at (DC) ".concat(this.decomposition.function.qualifiedName," (").concat(n,")\n            center (").concat(this.relPath(e,this.centeredModel.sourceLocation),"): ").concat(this.centeredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.decomposition.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.decomposition.node.location[0][0]+1,":").concat(this.decomposition.node.location[0][1]+1);return null!==t?"    at (DC) ".concat(d(this.decomposition.function.qualifiedName),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:t,pos:this.decomposition.node.location})),'">').concat(d(r),"</a>})\n")+'            center (<a href="#" class="fudomo-exception-source-link" data-source-loc="'.concat(d(JSON.stringify({src:this.relPath(e,this.centeredModel.center.sourceLocation),pos:this.centeredModel.center.fullDefinitionLocation})),'">').concat(d(this.relPath(e,this.centeredModel.sourceLocation)),"</a>): ").concat(d(this.centeredModel.center)):"    at (DC) ".concat(d(this.decomposition.function.qualifiedName)," (").concat(d(r),")\n")+"            center (".concat(d(this.relPath(e,this.centeredModel.sourceLocation)),"): ").concat(d(this.centeredModel.center))}}]),n}(v),j=function(){"use strict";function e(t){s(this,e),this.fudomoStack=t}return l(e,[{key:"cause",get:function(){var e,t=i(this.fudomoStack);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(void 0!==n.cause)return n.cause}}catch(r){t.e(r)}finally{t.f()}return null}},{key:"message",get:function(){return this.fudomoStack.slice(-1)[0].message}},{key:"location",get:function(){return this.fudomoStack.slice(-1)[0].location}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o(this.fudomoStack);return t.reverse(),"<pre>"+t.map((function(t){return t.toHtml(e)})).join("\n")+"</pre>"}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o(this.fudomoStack);return t.reverse(),t.map((function(t){return t.toString(e)})).join("\n")}}]),e}();function x(e,t,n){return E.apply(this,arguments)}function E(){return(E=a(r.mark((function e(t,n,a){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.functionRunner.callFunction(n.externalName,a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n){return S.apply(this,arguments)}function S(){return(S=a(r.mark((function e(t,n,a){var o,c,u,s,l,p,m,d,h,v,j,E,S,C,_,N,I,P,F,R,T,A,L,M;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,stack.push(new w(n,a)),t.indentLog(),e.prev=3,t.log(f.red("Decomposing %s (on %s)"),n.function.qualifiedName,a.type),0!=(c=n.links).length){e.next=16;break}return e.next=9,t.functionRunner.hasFunction(n.function.externalName);case 9:if(e.sent){e.next=14;break}return o=!0,e.abrupt("return",a.getFeature(n.function.name));case 14:return o=!0,e.abrupt("return",x(t,n.function,[]));case 16:u=[],s=i(c),e.prev=18,s.s();case 20:if((l=s.n()).done){e.next=184;break}if(p=l.value,m=!1,e.prev=23,"local"!=p.kind){e.next=41;break}if(stack.push(new y(p)),d=p.function.getTargetDecomposition(a),t.log("\u2570\u2500local: %s",p.function.name),null!=d){e.next=33;break}t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,a.type),u.push(a.getFeature(p.function.name)),e.next=39;break;case 33:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",d.function.qualifiedName,a.type),e.t0=u,e.next=37,O(t,d,a);case 37:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 39:e.next=178;break;case 41:if("global"!=p.kind){e.next=88;break}stack.push(new g(p)),t.log("\u2570\u2500global: %s",p.function.qualifiedName),h=[],v=a.getAllInstancesByType(p.function.type),j=i(v),e.prev=47,j.s();case 49:if((E=j.n()).done){e.next=77;break}if(S=E.value,stack.slice(-1)[0].referredModel=S,null!=(C=p.function.getTargetDecomposition(S))){e.next=69;break}return e.next=56,t.functionRunner.hasFunction(p.function.externalName);case 56:if(!e.sent){e.next=65;break}return t.logIndented("\u2570\u2500externalFunction: %s",p.function.externalName),e.t2=h,e.next=61,x(t,p.function,[]);case 61:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=67;break;case 65:t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,S.type),h.push(S.getFeature(p.function.name));case 67:e.next=75;break;case 69:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",C.function.qualifiedName,S.type),e.t4=h,e.next=73,O(t,C,S);case 73:e.t5=e.sent,e.t4.push.call(e.t4,e.t5);case 75:e.next=49;break;case 77:e.next=82;break;case 79:e.prev=79,e.t6=e.catch(47),j.e(e.t6);case 82:return e.prev=82,j.f(),e.finish(82);case 85:u.push(h),e.next=178;break;case 88:if("forward"!=p.kind){e.next=134;break}stack.push(new b(p)),t.log("\u2570\u2500forward: %s -> %s",p.referenceName,p.function.qualifiedName),_=[],N=i(a.successors(p.referenceName,p.function.type)),e.prev=93,N.s();case 95:if((I=N.n()).done){e.next=123;break}if(P=I.value,stack.slice(-1)[0].referredModel=P,null!=(F=p.function.getTargetDecomposition(P))){e.next=115;break}return e.next=102,t.functionRunner.hasFunction(p.function.externalName);case 102:if(!e.sent){e.next=111;break}return t.logIndented("\u2570\u2500externalFunction: %s",p.function.externalName),e.t7=_,e.next=107,x(t,p.function,[]);case 107:e.t8=e.sent,e.t7.push.call(e.t7,e.t8),e.next=113;break;case 111:t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,P.type),_.push(P.getFeature(p.function.name));case 113:e.next=121;break;case 115:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",F.function.qualifiedName,P.type),e.t9=_,e.next=119,O(t,F,P);case 119:e.t10=e.sent,e.t9.push.call(e.t9,e.t10);case 121:e.next=95;break;case 123:e.next=128;break;case 125:e.prev=125,e.t11=e.catch(93),N.e(e.t11);case 128:return e.prev=128,N.f(),e.finish(128);case 131:u.push(_),e.next=178;break;case 134:if("reverse"!=p.kind){e.next=178;break}stack.push(new k(p)),t.log("\u2570\u2500reverse: %s <- %s",p.referenceName,p.function.qualifiedName),R=new Set,T=i(a.predecessors(p.referenceName,p.function.type)),e.prev=139,T.s();case 141:if((A=T.n()).done){e.next=169;break}if(L=A.value,stack.slice(-1)[0].referredModel=L,null!=(M=p.function.getTargetDecomposition(L))){e.next=161;break}return e.next=148,t.functionRunner.hasFunction(p.function.externalName);case 148:if(!e.sent){e.next=157;break}return t.logIndented("\u2570\u2500externalFunction: %s",p.function.externalName),e.t12=R,e.next=153,x(t,p.function,[]);case 153:e.t13=e.sent,e.t12.add.call(e.t12,e.t13),e.next=159;break;case 157:t.logIndented("\u2570\u2500feature: %s (of %s)",p.function.name,L.type),R.add(L.getFeature(p.function.name));case 159:e.next=167;break;case 161:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",M.function.qualifiedName,L.type),e.t14=R,e.next=165,O(t,M,L);case 165:e.t15=e.sent,e.t14.add.call(e.t14,e.t15);case 167:e.next=141;break;case 169:e.next=174;break;case 171:e.prev=171,e.t16=e.catch(139),T.e(e.t16);case 174:return e.prev=174,T.f(),e.finish(174);case 177:u.push(R);case 178:m=!0;case 179:return e.prev=179,m&&stack.pop(),e.finish(179);case 182:e.next=20;break;case 184:e.next=189;break;case 186:e.prev=186,e.t17=e.catch(18),s.e(e.t17);case 189:return e.prev=189,s.f(),e.finish(189);case 192:return o=!0,e.abrupt("return",x(t,n.function,u));case 194:return e.prev=194,t.dedentLog(),o&&stack.pop(),e.finish(194);case 198:case"end":return e.stop()}}),e,null,[[3,,194,198],[18,186,189,192],[23,,179,182],[47,79,82,85],[93,125,128,131],[139,171,174,177]])})))).apply(this,arguments)}function C(){return(C=a(r.mark((function e(t){var n,a,o,i,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.stack){e.next=3;break}throw new Error("TransformationContext can not be reused.");case 3:if(t.stack=[],n=t.transformation.decompositions[0]){e.next=7;break}throw new Error("No decomposition found.");case 7:if(a=t.rootModel,"Root"==(o=n.function.type)){e.next=18;break}if(0!=(i=t.rootModel.successors("cont",o)).length){e.next=15;break}throw new Error('No instance of first decomposition type "'.concat(o,'" found.'));case 15:if(!(i.length>1)){e.next=17;break}throw new Error('More than one instance of first decomposition type "'.concat(o,'" found.'));case 17:a=i[0];case 18:return c=null,e.prev=19,stack=[],e.next=23,O(t,n,a);case 23:c=e.sent,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(19),stack.push(t.functionRunner.exceptionToStackFrame(e.t0));case 29:if(!(stack.length>0)){e.next=31;break}throw new j(stack);case 31:return e.abrupt("return",c);case 32:return e.prev=32,t.functionRunner.finalize(),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[0,,32,35],[19,26]])})))).apply(this,arguments)}e.exports={transform:function(e){return C.apply(this,arguments)},TransformationContext:h,FudomoComputeException:j,StackFrame:v}},288:function(e,t,n){},329:function(e,t,n){var r=n(88),a=n(102),o=n(103),i=n(92),c=n(93),u=n(191);function s(){var e=n(933),t=n(934);return new e.Parser(e.Grammar.fromCompiled(t))}var l=function(){"use strict";function e(t,n,r,a){i(this,e),this.startCol=t,this.startRow=n,this.endCol=r,this.endRow=a}return c(e,[{key:"contains",value:function(e,t){return!(t<this.startRow)&&(!(t>this.endRow)&&(this.startRow===this.endRow?e>=this.startCol&&e<=this.endCol:t==this.startRow?e>=this.startCol:t!=this.endRow||e<=this.endCol))}},{key:"toArray",value:function(){return[[this.startRow,this.startCol],[this.endRow,this.endCol]]}},{key:"toString",value:function(){return"<CharacterRange startCol=".concat(this.startCol," startRow=").concat(this.startRow," endCol=").concat(this.endCol," endRow=").concat(this.endCol,">")}}],[{key:"fromOffsets",value:function(t,n,r){var a=u(t,{origin:0}),o=a.fromIndex(n),i=a.fromIndex(r)||a.fromIndex(t.length-1);return new e(o.col,o.line,i.col,i.line)}}]),e}(),f=function(){"use strict";function e(t,n){i(this,e),this.parent=t,this.node=n}return c(e,[{key:"transformation",get:function(){for(var e=this;!(e instanceof w);)e=e.parent;return e}},{key:"decomposition",get:function(){for(var e=this;!(e instanceof k);)e=e.parent;return e}},{key:"characterRange",get:function(){var e=this.node.location;return new l(e[0][1],e[0][0],e[1][1],e[1][0])}}]),e}(),p=function(e){"use strict";a(n,e);var t=o(n);function n(e,r,a){var o;return i(this,n),(o=t.call(this,e,r)).kind=a,o}return n}(f),m=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"local")}return c(n,[{key:"parameterName",get:function(){return this.function.name}},{key:"parameterDescription",get:function(){var e=this.parameterName;return"center"===e?"This ".concat(this.decomposition.function.type):"val"===e?"The value of this ".concat(this.decomposition.function.type):'The "'.concat(e,'" of this ').concat(this.decomposition.function.type)}},{key:"parameterTypeDescription",get:function(){return null}},{key:"function",get:function(){return new g(this,this.node.reference)}},{key:"location",get:function(){return[this.node.location[0],[this.node.location[1][0],this.node.location[1][1]]]}},{key:"toString",value:function(){return this.function.name}}]),n}(p),d=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"global")}return c(n,[{key:"parameterName",get:function(){return this.function.type+"_"+this.function.name}},{key:"parameterDescription",get:function(){return'The sequence of all "'.concat(this.function.name,'" values of all ').concat(this.function.type," objects")}},{key:"parameterTypeDescription",get:function(){return"Sequence"}},{key:"function",get:function(){return new b(this,this.node.typedFunction)}},{key:"toString",value:function(){return this.function.qualifiedName}}]),n}(p),h=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"forward")}return c(n,[{key:"parameterName",get:function(){return this.referenceName+"_"+this.function.type+"_"+this.function.name}},{key:"referenceName",get:function(){return this.node.reference}},{key:"referenceLocation",get:function(){return[this.node.location[0],[this.node.location[0][0],this.node.location[0][0]+this.referenceName.length]]}},{key:"parameterDescription",get:function(){return"cont"===this.referenceName?"The sequence of ".concat(this.function.pluralValueDescription," contained in this ").concat(this.decomposition.function.type):"The sequence of ".concat(this.function.pluralValueDescription,' referred to by attribute "').concat(this.referenceName,'" in this ').concat(this.decomposition.function.type)}},{key:"parameterTypeDescription",get:function(){return"Sequence"}},{key:"function",get:function(){return new b(this,this.node.typedFunction)}},{key:"toString",value:function(){return"".concat(this.referenceName," -> ").concat(this.function.qualifiedName)}}]),n}(p),v=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r,"reverse")}return c(n,[{key:"parameterName",get:function(){return"_"+this.referenceName+"_"+this.function.type+"_"+this.function.name}},{key:"referenceName",get:function(){return this.node.reference}},{key:"parameterDescription",get:function(){return"cont"===this.referenceName?"The set of ".concat(this.function.pluralValueDescription," that contain this ").concat(this.decomposition.function.type):"The set of ".concat(this.function.pluralValueDescription," that refer to this ").concat(this.decomposition.function.type,' by attribute "').concat(this.referenceName,'"')}},{key:"parameterTypeDescription",get:function(){return"Set"}},{key:"function",get:function(){return new b(this,this.node.typedFunction)}},{key:"toString",value:function(){return"".concat(this.referenceName," <- ").concat(this.function.qualifiedName)}}]),n}(p),y=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r)}return c(n,[{key:"name",get:function(){throw new Error("Not implemented")}},{key:"getTargetDecomposition",value:function(e){throw new Error("Not implemented")}}]),n}(f),g=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r)}return c(n,[{key:"qualifiedName",get:function(){return this.name}},{key:"name",get:function(){return this.node}},{key:"getTargetDecomposition",value:function(e){var t=this.decomposition,n=this.transformation,r=t.function.type,a=this.name;return n.getDecompositionBySignature(r+"."+a)}}]),n}(y),b=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r)}return c(n,[{key:"getTargetDecomposition",value:function(e){return this.isAbstract?this.transformation.getDecompositionBySignature(e.type+"."+this.name):this.transformation.getDecompositionBySignature(this.qualifiedName)}},{key:"isAbstract",get:function(){return"Object"==this.type}},{key:"name",get:function(){return this.node.untypedFunction}},{key:"pluralValueDescription",get:function(){var e='"'.concat(this.name,'" values of ').concat(this.type," objects");return"center"===this.name?e="".concat(this.type," objects"):"val"===this.name&&(e="".concat(this.type," scalar values")),e}},{key:"type",get:function(){return this.node.type}},{key:"qualifiedName",get:function(){return this.type+"."+this.name}},{key:"externalName",get:function(){return this.type+"_"+this.name}},{key:"location",get:function(){return this.node.location}},{key:"typeLocation",get:function(){return[this.node.location[0],[this.node.location[0][0],this.node.location[0][1]+this.type.length]]}}]),n}(y),k=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){return i(this,n),t.call(this,e,r)}return c(n,[{key:"function",get:function(){return new b(this,this.node.typedFunction)}},{key:"links",get:function(){var e,t=[],n=r(this.node.links);try{for(n.s();!(e=n.n()).done;){var a=e.value;if("local"==a.type)t.push(new m(this,a));else if("forward"==a.type)t.push(new h(this,a));else if("reverse"==a.type)t.push(new v(this,a));else{if("global"!=a.type)throw new Error('Unexpected link type "'.concat(a.type,'"'));t.push(new d(this,a))}}}catch(o){n.e(o)}finally{n.f()}return t}},{key:"comment",get:function(){return this.node.comment}}]),n}(f),w=function(e){"use strict";a(n,e);var t=o(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,n),(r=t.call(this,null,null)).source=e,r.sourceLocation=a;var o=s();try{if(o.feed(e),!(o.results.length>0)){var c=new Error("Can not parse decomposition");throw c.token={offset:e.length-e.trimLeft().length,value:e.trim()},c}r.tree=o.results[0]}catch(u){r.parseError=u,void 0==r.parseError.token&&(r.parseError.token={offset:0,value:""})}return r}return c(n,[{key:"hasError",get:function(){return void 0!=this.parseError}},{key:"errors",get:function(){var e=[];return this.parseError&&e.push({markerContext:{type:"transformation",location:l.fromOffsets(this.source,this.parseError.token.offset,this.parseError.token.offset+this.parseError.token.value.length).toArray()},error:this.parseError,severity:"error",message:this.parseError.toString()}),e}},{key:"decompositions",get:function(){var e=this;return this.tree.decompositions.map((function(t){return new k(e,t)}))}},{key:"getDecompositionBySignature",value:function(e){return this.decompositions.find((function(t){return t.function.qualifiedName==e}))}},{key:"getDecompositionForTextCoordinate",value:function(e,t){return this.decompositions.find((function(n){return n.characterRange.contains(e,t)}))}}]),n}(f);e.exports={Transformation:w,getFudomoParser:s,CharacterRange:l}},412:function(e,t,n){},45:function(e,t,n){var r=n(329),a=r.Transformation,o=r.getFudomoParser,i=r.CharacterRange,c=n(252),u=c.transform,s=c.FudomoComputeException,l=c.TransformationContext,f=n(211),p=f.getSkeletonGenerator,m=f.SKELETON_GENERATORS,d=n(990),h=d.MetamodelInferer,v=d.TransformationValidator,y=d.DataValidator;e.exports={FudomoParser:function(){return o()},parseFudomo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new a(e,t)},transform:u,TransformationContext:l,getSkeletonGenerator:p,SKELETON_GENERATORS:m,MetamodelInferer:h,TransformationValidator:v,DataValidator:y,FudomoComputeException:s,CharacterRange:i}},482:function(e,t,n){},83:function(e,t,n){var r=n(88),a=n(93),o=n(92),i=n(102),c=n(103),u=n(256);n(953).shim();var s=n(191),l=function(e){"use strict";i(n,e);var t=c(n);function n(){return o(this,n),t.apply(this,arguments)}return n}(u(Error));var f=function(){"use strict";function e(t,n,r){o(this,e),this.description=t,this.appliesTo=n,this.originalSource=r}return a(e,[{key:"isApplicableToSource",value:function(e){return e===this.originalSource}},{key:"applyToSource",value:function(e){if(e!==this.originalSource)throw new l;return this.apply(e)}},{key:"apply",value:function(e){throw new Error("not implemented")}}]),e}(),p=function(e){"use strict";i(n,e);var t=c(n);function n(e,r,a,i,c){var u;return o(this,n),(u=t.call(this,e,r,a)).range=i,u.replacement=c,u}return a(n,[{key:"apply",value:function(e){var t=s(e,{origin:0}),n=t.toIndex(this.range[0][0],this.range[0][1]),r=t.toIndex(this.range[1][0],this.range[1][1]);return e.slice(0,n)+this.replacement+e.slice(r)}},{key:"toJSON",value:function(){return{type:"RangeReplaceQuickfixProposal",description:this.description,appliesTo:this.appliesTo,originalSource:this.originalSource,range:this.range,replacement:this.replacement}}}],[{key:"fromObj",value:function(e){if("RangeReplaceQuickfixProposal"!==e.type)throw new Error;return new n(e.description,e.appliesTo,e.originalSource,e.range,e.replacement)}}]),n}(f);e.exports={QuickfixProposalNoLongerApplicableException:l,quickfixProposalReviver:function(e,t){return"RangeReplaceQuickfixProposal"===t.type?p.fromObj(t):t},QuickfixProposal:f,RangeReplaceQuickfixProposal:p,escapeHtml:function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},offsetToRange:function(e,t,n){if(""===e)return[[0,0],[0,0]];t>=e.length&&(t=e.length-1),t+n>=e.length&&(0==n?t=e.length-1:n=e.length-1-t);var r=s(e,{origin:0}),a=r.fromIndex(t),o=r.fromIndex(t+n);return[[a.line,a.col],[o.line,o.col]]},reMatchAll:function(e,t){var n=s(e,{origin:0});function a(t,r){var a=n.fromIndex(t)||n.fromIndex(e.length-1),o=n.fromIndex(t+r)||n.fromIndex(e.length-1);return[[a.line,a.col],[o.line,o.col]]}var o,i=[],c=r(e.matchAll(t));try{for(c.s();!(o=c.n()).done;){for(var u=o.value,l=[],f=0;f<u.length;f++)void 0!==u[f]&&(l[f]=a(u.indices[f][0],u.indices[f][1]-u.indices[f][0]));u.groupRanges=l,i.push(u)}}catch(p){c.e(p)}finally{c.f()}return i}}},912:function(e,t,n){"use strict";(function(e){var t=n(182);t.define("ace/mode/fudomo_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:"comment.fudomo",regex:/#.*/},{token:"keyword.fudomo.val",regex:/val/},{token:"keyword.fudomo.center",regex:/center/},{token:["storage.type.decomposition.fudomo","keyword.operator","entity.name.function.decomposition.fudomo","keyword.operator"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)(:)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","keyword.fudomo.center"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(center)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","keyword.fudomo.val"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(val)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","entity.name.function.forward-link.fudomo"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","keyword.fudomo.center"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(center)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","keyword.fudomo.val"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(val)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","entity.name.function.reverse-link.fudomo"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)/},{token:"variable.local-link.fudomo",regex:/[a-zA-Z][a-zA-Z0-9]*/}]},this.normalizeRules()};o.metaData={fileTypes:["fudomo"],name:"Fudomo",scopeName:"source.fudomo"},r.inherits(o,a),t.FudomoHighlightRules=o})),t.define("ace/mode/fudomo",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./text").Mode,o=e("ace/mode/fudomo_highlight_rules").FudomoHighlightRules,i=function(){this.HighlightRules=o};r.inherits(i,a),function(){}.call(i.prototype),t.Mode=i})),t.require(["ace/mode/fudomo"],(function(t){"object"==typeof exports&&e&&(e.exports=t)}))}).call(this,n(319)(e))},913:function(e,t,n){"use strict";(function(e){var t=n(34),r=n(26),a=n(130);a.define("ace/mode/oyaml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/yaml_highlight_rules"],(function(e,n,a){var o=e("../lib/oop"),i=e("./yaml_highlight_rules").YamlHighlightRules,c=function(){var e=(new i).getRules();this.$rules=Object(r.a)(Object(r.a)({},e),{},{start:[{token:["storage.type.oyaml","variable","keyword.operator"],regex:/([A-Z]\S*)(.*)(:)/}].concat(Object(t.a)(e.start))}),this.normalizeRules()};c.metaData={fileTypes:["oyaml"],name:"OYAML",scopeName:"source.oyaml"},o.inherits(c,i),n.OyamlHighlightRules=c})),a.define("ace/mode/oyaml",["require","exports","module","ace/lib/oop","ace/mode/yaml","ace/mode/oyaml_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./yaml").Mode,o=new a,i=e("ace/mode/oyaml_highlight_rules").OyamlHighlightRules,c=function(){this.HighlightRules=i,this.$outdent=o.$outdent,this.$behaviour=o.$behaviour,this.foldingRules=o.foldingRules};r.inherits(c,a),function(){}.call(c.prototype),t.Mode=c})),a.require(["ace/mode/oyaml"],(function(t){"object"==typeof exports&&e&&(e.exports=t)}))}).call(this,n(319)(e))},914:function(e,t,n){},919:function(e,t,n){},934:function(e,t,n){var r=n(92),a=n(93),o=n(88),i=n(935);!function(){function t(e){return e[0]}function c(e){return{comment:i(e,1)[0].value}}var u=n(939).compile({ws:{match:/[ \t\r\n\v\f]+/,lineBreaks:!0},comment:{match:/\n*#.*\n*/,lineBreaks:!0,value:function(e){return e.trim().slice(1)}},identifier:/[a-zA-Z][a-zA-Z0-9]*/,colon:":",dot:".",comma:",",rightArrow:"->",leftArrow:"<-"}),s=function(){"use strict";function e(t){r(this,e),this.lexer=t}return a(e,[{key:"next",value:function(){var e=this.lexer.next();return e&&"ws"===e.type?this.next():e}},{key:"save",value:function(){return this.lexer.save()}},{key:"reset",value:function(e,t){this.lexer.reset(e,t)}},{key:"formatError",value:function(e){return this.lexer.formatError(e)}},{key:"has",value:function(e){return this.lexer.has(e)}}]),e}(),l=new s(u),f={Lexer:l,ParserRules:[{name:"transformation$ebnf$1",symbols:[]},{name:"transformation$ebnf$1$subexpression$1",symbols:["decomposition"],postprocess:t},{name:"transformation$ebnf$1",symbols:["transformation$ebnf$1","transformation$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"transformation$ebnf$2",symbols:[]},{name:"transformation$ebnf$2$subexpression$1",symbols:[l.has("comment")?{type:"comment"}:c],postprocess:c},{name:"transformation$ebnf$2",symbols:["transformation$ebnf$2","transformation$ebnf$2$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"transformation",symbols:["transformation$ebnf$1","transformation$ebnf$2"],postprocess:function(e){return{decompositions:e[0]}}},{name:"decomposition$ebnf$1",symbols:[]},{name:"decomposition$ebnf$1$subexpression$1",symbols:[l.has("comment")?{type:"comment"}:c],postprocess:c},{name:"decomposition$ebnf$1",symbols:["decomposition$ebnf$1","decomposition$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"decomposition$ebnf$2",symbols:["links"],postprocess:t},{name:"decomposition$ebnf$2",symbols:[],postprocess:function(e){return null}},{name:"decomposition",symbols:["decomposition$ebnf$1","typedFunction",l.has("colon")?{type:"colon"}:colon,"decomposition$ebnf$2"],postprocess:function(e){var t=i(e,4),n=t[0],r=t[1],a=(t[2],t[3]);a=a||[];var o=n.map((function(e){return e.comment.trim()})).join("\n"),c=a.slice(-1)[0]||r;return{typedFunction:r,links:a,comment:o,location:[r.location[0],c.location[1]]}}},{name:"links$ebnf$1",symbols:[]},{name:"links$ebnf$1$subexpression$1",symbols:[l.has("comma")?{type:"comma"}:comma,"link"]},{name:"links$ebnf$1",symbols:["links$ebnf$1","links$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"links",symbols:["link","links$ebnf$1"],postprocess:function(e){var t,n=i(e,2),r=n[0],a=n[1],c=[r],u=o(a);try{for(u.s();!(t=u.n()).done;){var s=i(t.value,2),l=(s[0],s[1]);c.push(l)}}catch(f){u.e(f)}finally{u.f()}return c}},{name:"link",symbols:["localLink"],postprocess:t},{name:"link",symbols:["globalLink"],postprocess:t},{name:"link",symbols:["forwardLink"],postprocess:t},{name:"link",symbols:["reverseLink"],postprocess:t},{name:"localLink",symbols:[l.has("identifier")?{type:"identifier"}:identifier],postprocess:function(e){var t=i(e,1)[0];return{type:"local",reference:t.value,location:[[t.line-1,t.col-1],[t.line-1,t.col+t.value.length-1]]}}},{name:"globalLink",symbols:["typedFunction"],postprocess:function(e){var t=i(e,1)[0];return{type:"global",typedFunction:t,location:t.location}}},{name:"forwardLink",symbols:[l.has("identifier")?{type:"identifier"}:identifier,l.has("rightArrow")?{type:"rightArrow"}:rightArrow,"typedFunction"],postprocess:function(e){var t=i(e,3),n=t[0],r=(t[1],t[2]);return{type:"forward",reference:n.value,typedFunction:r,location:[[n.line-1,n.col-1],r.location[1]]}}},{name:"reverseLink",symbols:[l.has("identifier")?{type:"identifier"}:identifier,l.has("leftArrow")?{type:"leftArrow"}:leftArrow,"typedFunction"],postprocess:function(e){var t=i(e,3),n=t[0],r=(t[1],t[2]);return{type:"reverse",reference:n.value,typedFunction:r,location:[[n.line-1,n.col-1],r.location[1]]}}},{name:"typedFunction",symbols:["type",l.has("dot")?{type:"dot"}:dot,"untypedFunction"],postprocess:function(e){var t=i(e,3),n=t[0],r=(t[1],t[2]);return{type:n.value,untypedFunction:r.value,location:[[n.line-1,n.col-1],[r.line-1,r.col+r.value.length-1]]}}},{name:"type",symbols:[l.has("identifier")?{type:"identifier"}:identifier],postprocess:t},{name:"untypedFunction",symbols:[l.has("identifier")?{type:"identifier"}:identifier],postprocess:t}],ParserStart:"transformation"};"undefined"!==typeof e.exports?e.exports=f:window.grammar=f}()},990:function(e,t,n){var r=n(254),a=n(102),o=n(103),i=n(88),c=n(92),u=n(93),s=n(194),l=s.loadModel,f=(s.loaders,s.CenteredModel,s.ObjectModel),p=function(){"use strict";function e(){c(this,e)}return u(e,[{key:"inferMetamodelFromPaths",value:function(e){var t=e.map((function(e){return l(e)}));return this.inferMetamodel(t)}},{key:"inferMetamodel",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t||{},r=new Set,a=e.map((function(e){return e.center}));a.length>0;){var o=a.pop();if(!r.has(o.id))if(r.add(o.id),void 0==n[o.type]&&(n[o.type]=new Set),o.isScalar){var c=o.scalarType;n[o.type].add(JSON.stringify({scalarType:c}))}else{var u,s=i(o.featureNames);try{for(s.s();!(u=s.n()).done;){var l,p=u.value,m=o.getFeatureAsArray(p),d=i(m);try{for(d.s();!(l=d.n()).done;){var h=l.value,v=n[o.type],y=null,g=null;"cont"==p?(y="containment",g=h.type):h instanceof f?(y="reference",g=h.type):(y="attribute",g=o.getAttributeType(p),Array.isArray(g)&&(g={seq:Array.from(new Set(g))})),v.add(JSON.stringify({name:p,referenceType:y,objectType:g})),h instanceof f&&a.push(h)}}catch(G){d.e(G)}finally{d.f()}}}catch(G){s.e(G)}finally{s.f()}}}for(var b=new Map,k=0,w=Object.keys(n);k<w.length;k++){var j=w[k],x=new Map,E=Array.from(n[j]||[]).map((function(e){return JSON.parse(e)}));if(0!=E.length)if(E.every((function(e){return void 0!==e.scalarType}))){var O=E.map((function(e){return e.scalarType}));0==O.length?b.set(j,null):1==O.length?b.set(j,O[0]):b.set(j,O)}else{b.set(j,x);var S,C=E.filter((function(e){return"attribute"==e.referenceType})),_=E.filter((function(e){return"containment"==e.referenceType})),N=E.filter((function(e){return"reference"==e.referenceType})),I=Array.from(new Set(C.map((function(e){return e.name})))).sort(),P=Array.from(new Set(_.map((function(e){return e.name})))).sort(),F=Array.from(new Set(N.map((function(e){return e.name})))).sort(),R=i(I);try{var T=function(){var e=S.value,t=x.get(e);null==t&&(t=new Set,x.set(e,t));var n,r=i(C.filter((function(t){return t.name==e})));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a.objectType)}}catch(G){r.e(G)}finally{r.f()}};for(R.s();!(S=R.n()).done;)T()}catch(G){R.e(G)}finally{R.f()}var A,L=i(P);try{var M=function(){var e=A.value,t=x.get(e);null==t&&(t=new Set,x.set(e,t));var n,r=i(_.filter((function(t){return t.name==e})));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a.objectType)}}catch(G){r.e(G)}finally{r.f()}};for(L.s();!(A=L.n()).done;)M()}catch(G){L.e(G)}finally{L.f()}var D,z=i(F);try{var q=function(){var e=D.value,t=x.get(e);null==t&&(t=new Set,x.set(e,t));var n,r=i(N.filter((function(t){return t.name==e})));try{for(r.s();!(n=r.n()).done;){var a=n.value;t.add(a.objectType)}}catch(G){r.e(G)}finally{r.f()}};for(z.s();!(D=z.n()).done;)q()}catch(G){z.e(G)}finally{z.f()}}}var B,$=i(b.keys());try{for($.s();!(B=$.n()).done;){var V=B.value,J=b.get(V);if(J instanceof Map){var W,H=i(J.keys());try{for(H.s();!(W=H.n()).done;){var Z=W.value,Q=J.get(Z);J.set(Z,Array.from(Q).sort())}}catch(G){H.e(G)}finally{H.f()}}}}catch(G){$.e(G)}finally{$.f()}return b}}]),e}(),m=new Set(["int","float","bool","string","null"]),d=function(){"use strict";function e(t,n){c(this,e),this.metamodel=t,this.markerContextType=n}return u(e,[{key:"makeError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{context:e,message:t,markerContext:{type:this.markerContextType,location:n||[[0,0],[0,0]]}}}},{key:"typeExists",value:function(e){return!!m.has(e)||("Object"===e||"Root"===e||void 0!==this.metamodel[e])}},{key:"_isAlwaysValidFeature",value:function(e,t){return"val"===t||"center"===t||("Root"===e&&"cont"===t||"Object"===e)}},{key:"_getAttributeOrRefTypeSpec",value:function(e,t){return(this.metamodel[e]||{})[t]}},{key:"attrOrRefExists",value:function(e,t){return!!this._isAlwaysValidFeature(e,t)||void 0!==this._getAttributeOrRefTypeSpec(e,t)}},{key:"attrOrRefHasType",value:function(e,t,n){return!!this._isAlwaysValidFeature(e,t)||(this._getAttributeOrRefTypeSpec(e,t)||[]).includes(n)}}]),e}(),h=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return c(this,n),(a=t.call(this,e,"transformation")).transformation=r,a}return u(n,[{key:"decompositionExists",value:function(e,t){return!!this.transformation.getDecompositionBySignature("".concat(e,".").concat(t))}},{key:"errors",get:function(){var e,t=[],n=i(this.transformation.decompositions);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.typeExists(r.function.type)||t.push(this.makeError(r.function.qualifiedName,"Decomposition Type ".concat(r.function.type," not found in metamodel"),r.function.typeLocation));var a,o=i(r.links);try{for(o.s();!(a=o.n()).done;){var c=a.value;if("forward"==c.kind)if(this.attrOrRefExists(r.function.type,c.referenceName)?this.attrOrRefHasType(r.function.type,c.referenceName,c.function.type)||"Object"===c.function.type||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"Reference Type ".concat(c.function.type," not allowed for reference ").concat(r.function.type,".").concat(c.referenceName),c.function.typeLocation)):t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"Reference ".concat(c.referenceName," not found in type ").concat(r.function.type),c.referenceLocation)),this.typeExists(c.function.type))if(c.function.isAbstract){var u=c.function.name;if("center"!==u){var s,l=(this.metamodel[r.function.type]||{})[c.referenceName]||[],f=i(l);try{for(f.s();!(s=f.n()).done;){var p=s.value;null==this.transformation.getDecompositionBySignature("".concat(p,".").concat(u))&&t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),'No decomposition "'.concat(u,'" found for concrete type ').concat(p),c.function.typeLocation))}}catch(x){f.e(x)}finally{f.f()}}}else this.attrOrRefExists(c.function.type,c.function.name)||this.decompositionExists(c.function.type,c.function.name)||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"No attribute, reference or decomposition found for link target ".concat(c.function.qualifiedName),c.function.location));else t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"Forward Link Type ".concat(c.function.type," not found in metamodel"),c.function.typeLocation));else if("reverse"==c.kind)if(this.attrOrRefExists(c.function.type,c.referenceName)?this.attrOrRefHasType(c.function.type,c.referenceName,r.function.type)||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," <- ").concat(c.function.qualifiedName),"Reference Type ".concat(r.function.type," not allowed for reference ").concat(c.function.type,".").concat(c.referenceName),c.function.typeLocation)):t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," <- ").concat(c.function.qualifiedName),"Reference ".concat(c.referenceName," not found in type ").concat(c.function.type),c.referenceLocation)),this.typeExists(c.function.type))if(c.function.isAbstract){var m=c.function.name;if("center"!==m)for(var d=0,h=Object.keys(this.metamodel);d<h.length;d++){var v=h[d],y=this.metamodel[v];if(null!=y){var g=y[c.referenceName];if(void 0!=g&&g.includes(r.function.type))null==this.transformation.getDecompositionBySignature("".concat(v,".").concat(m))&&t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),'No decomposition "'.concat(m,'" found for concrete type ').concat(v),c.function.typeLocation))}}}else this.attrOrRefExists(c.function.type,c.function.name)||this.decompositionExists(c.function.type,c.function.name)||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," -> ").concat(c.function.qualifiedName),"No attribute, reference or decomposition found for link target ".concat(c.function.qualifiedName),c.function.location));else t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.referenceName," <- ").concat(c.function.qualifiedName),"Reverse Link Type ".concat(c.function.type," not found in metamodel"),c.function.typeLocation));else if("local"==c.kind){var b=this.attrOrRefExists(c.decomposition.function.type,c.function.name),k=null!=this.transformation.getDecompositionBySignature(c.decomposition.function.type+"."+c.function.name);b||k||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.function.name),'No attribute or decomposition with name "'.concat(c.function.name,'" found'),c.location))}else if("global"==c.kind)if("Object"===c.function.type);else if(this.typeExists(c.function.type)){var w=this.attrOrRefExists(c.function.type,c.function.name),j=null!=this.transformation.getDecompositionBySignature(c.function.type+"."+c.function.name);w||j||t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.function.qualifiedName),'No attribute or decomposition with name "'.concat(c.function.name,'" found'),c.function.location))}else t.push(this.makeError("".concat(r.function.qualifiedName,": ").concat(c.function.qualifiedName),"Global Link Type ".concat(c.function.type," not found in metamodel"),c.function.typeLocation))}}catch(x){o.e(x)}finally{o.f()}}}catch(x){n.e(x)}finally{n.f()}return t}}]),n}(d),v=function(e){"use strict";a(n,e);var t=o(n);function n(e,r){var a;return c(this,n),(a=t.call(this,e,"input")).centeredModel=r,a}return u(n,[{key:"errors",get:function(){for(var e=this,t=[],n=new Set,a=[this.centeredModel.center];a.length>0;){var o=a.pop();if(!n.has(o.id))if(n.add(o.id),this.typeExists(o.type))if(o.isScalar){var c=this.metamodel[o.type];null===c&&(c=[null]),c=Array.isArray(c)?c:[c];var u=o.scalarType;c.includes(u)||t.push(this.makeError("Object of type ".concat(o.type),"".concat(o.type," value has disallowed type ").concat(u),o.scalarValueLocation))}else{var s,l=i(o.featureNames);try{for(l.s();!(s=l.n()).done;){var p=s.value;if(this.attrOrRefExists(o.type,p))if(Array.isArray(o.getAttributeType(p)))!function(){var n=o.getAttributeType(p),a=e._getAttributeOrRefTypeSpec(o.type,p),i=new Set(a.map((function(e){return e.seq})).flat()),c=Array.from(new Set(r(n).filter((function(e){return!i.has(e)}))));c.length>0&&t.push(e.makeError("Object of type ".concat(o.type),"Attribute sequence ".concat(p," contains disallowed type(s): ").concat(c.join(", ")),o.getFeatureValueLocation(p)))}();else{var m,d=i(o.getFeatureAsArray(p));try{for(d.s();!(m=d.n()).done;){var h=m.value,v=null,y=null;h instanceof f?(v=h.type,y=h.typeLocation):(v=o.getAttributeType(p),y=o.getFeatureValueLocation(p)),this.attrOrRefHasType(o.type,p,v)||t.push(this.makeError("Object of type ".concat(o.type),"Attribute or reference ".concat(p," has disallowed type ").concat(v),y)),h instanceof f&&a.push(h)}}catch(g){d.e(g)}finally{d.f()}}else t.push(this.makeError("Object of type ".concat(o.type),"Attribute or reference ".concat(p," not found in type ").concat(o.type," in metamodel"),o.getFeatureNameLocation(p)))}}catch(g){l.e(g)}finally{l.f()}}else t.push(this.makeError("Object of type ".concat(o.type),"Type ".concat(o.type," not found in metamodel"),o.typeLocation))}return t}}]),n}(d);e.exports={MetamodelInferer:p,TransformationValidator:h,DataValidator:v}}},[[1430,1,2]]]);