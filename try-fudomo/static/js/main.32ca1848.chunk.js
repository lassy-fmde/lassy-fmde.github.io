(this["webpackJsonptry-fudomo"]=this["webpackJsonptry-fudomo"]||[]).push([[0],{122:function(e,t,n){var r=n(104),a=n(105),o=n(111),i=n(103),c=n(112),u=n(183),s=u.AbstractJSObjectLoader,l=u.AbstractOYAMLObjectLoader,f=u.CenteredModel,p=n(215).importModule,m=function(e){"use strict";function t(){return r(this,t),o(this,i(t).apply(this,arguments))}return c(t,e),a(t,[{key:"loadFromSource",value:function(e){var t=p(e);return this.loadFromData(t)}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Array.isArray(e))throw new Error("Root has to be Object, not Array");return(new JSObjectFactory).getObjectModel(new Root(e),t)}}]),t}(s),d=function(e){"use strict";function t(){return r(this,t),o(this,i(t).apply(this,arguments))}return c(t,e),a(t,[{key:"loadFromSource",value:function(e){return this.loadFromData(e)}}]),t}(l),h={js:new m,yaml:new d,oyaml:new d};e.exports={loaders:h,CenteredModel:f}},149:function(e,t,n){var r=n(315),a=n(111),o=n(103),i=n(112),c=n(2),u=n(237),s=n(104),l=n(105),f=n(236).StackFrame,p=n(183).ObjectModel,m=n(316),d=(n(318),n(180),n(85)),h=d.offsetToRange,v=d.RangeReplaceQuickfixProposal,y=d.reMatchAll,g=n(200).getSkeletonGenerator,b=n(85).escapeHtml,k=n(6724),w=function(){"use strict";function e(){s(this,e)}return l(e,[{key:"finalize",value:function(){throw new Error("Not implemented")}},{key:"hasFunction",value:function(){var e=u(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){throw new Error("Not implemented")}},{key:"validateFunctions",value:function(){var e=u(c.mark((function e(t,n,r){var a,o,i,u,s,l,f,p,m,d,h=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=t||"",a=this.getFunctionSignatures(t),o=new Set(n.map((function(e){return e.functionName}))),i=a.filter((function(e){return!o.has(e.funcName)})),u=[],s=!0,l=!1,f=void 0,e.prev=8,p=function(){var e=d.value,n=e.functionName,o=e.parameters,c=e.decompositionQualifiedName,s=a.find((function(e){return e.funcName===n}));if(void 0!==s)o.forEach((function(e,n){var r=s.parameters[n];void 0===r?u.push({message:'Missing parameter "'.concat(e,'"'),markerContext:{type:"function",location:s.parametersListRange},fixes:[new v('Add parameter "'.concat(e,'"'),"functions",t,s.parametersListRange,s.parameters.map((function(e){return e.name})).concat([e]).join(", ")).toJSON()]}):r.name!==e&&u.push({message:'Incorrect parameter name "'.concat(r.name,'", expected "').concat(e,'"'),markerContext:{type:"function",location:s.parametersListRange},fixes:[new v('Rename parameter "'.concat(r.name,'" to "').concat(e,'"'),"functions",t,r.nameRange,e).toJSON()]})})),s.parameters.slice(o.length).forEach((function(e,n){var r=o.length+n;u.push({message:'Unexpected parameter "'.concat(e.name,'"'),markerContext:{type:"function",location:s.parametersListRange},fixes:[new v('Remove parameter "'.concat(e.name,'"'),"functions",t,s.parametersListRange,s.parameters.map((function(e){return e.name})).filter((function(e,t){return t!==r})).join(", ")).toJSON()]})}));else{var l=function(e){return"".concat(e.funcName,"-").concat(e.parameters.map((function(e){return e.name})).join("-"))},f=h.getSkeletonGenerator().generateDecompositionFunction(r.getDecompositionBySignature(c),!0),p="".concat(n,"-").concat(o.join("-")),m=Array.from(i);m.sort((function(e,t){var n=l(e),r=l(t);return k(p,n)-k(p,r)}));var y="\n\n"+h.getSkeletonGenerator().generateDecompositionFunction(r.getDecompositionBySignature(c),!1)+"\n",g=[],b=h.getAppendNewFunctionSkeletonRange(t);if(null!==b){var w=new v('Create new function skeleton "'.concat(n,'"'),"functions",t,b,y).toJSON();g.push(w)}u.push({message:'Function "'.concat(n,'" not found'),markerContext:{type:"transformation",decompositionQualifiedName:c},fixes:g.concat(m.map((function(e){return new v('Change existing function "'.concat(e.funcName,'"'),"functions",t,e.signatureRange,f).toJSON()})))})}},m=n[Symbol.iterator]();!(s=(d=m.next()).done);s=!0)p();e.next=17;break;case 13:e.prev=13,e.t0=e.catch(8),l=!0,f=e.t0;case 17:e.prev=17,e.prev=18,s||null==m.return||m.return();case 20:if(e.prev=20,!l){e.next=23;break}throw f;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",u);case 26:case"end":return e.stop()}}),e,this,[[8,13,17,25],[18,,20,24]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"callFunction",value:function(){var e=u(c.mark((function e(t,n){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"convertScalarValue",value:function(e,t){throw new Error("Not implemented")}},{key:"toString",value:function(){var e=u(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not implemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"exceptionToStackFrame",value:function(e){throw new Error("Not implemented")}},{key:"getAppendNewFunctionSkeletonRange",value:function(e){throw new Error("Not implemented")}},{key:"getFunctionSignatures",value:function(e){throw new Error("Not implemented")}}],[{key:"addToArgumentParser",value:function(e){}}]),e}(),x=function(e){"use strict";function t(e,n){var r;return s(this,t),(r=a(this,o(t).call(this))).idByComparableObject=new WeakMap,r.objectModelById={},r.lastId=0,r}return i(t,e),l(t,[{key:"finalize",value:function(){this.idByComparableObject=new WeakMap,this.objectModelById={}}},{key:"nextId",value:function(){return this.lastId++}},{key:"jsonReplacer",value:function(e,t){if(t instanceof p){var n=this.idByComparableObject.get(t.id);void 0===n&&(n=this.nextId(),this.idByComparableObject.set(t.id,n),this.objectModelById[n]=t);var r={type:t.type,id:n};return t.isScalar&&(r.val=t.scalar),r}return t instanceof Set?Array.from(t):t}},{key:"jsonReviver",value:function(e,t){if(null!==t&&"Object"==t.constructor.name&&void 0!==t.type&&void 0!==t.id){var n=this.objectModelById[t.id];if(void 0===n)throw new Error("Received ObjectModel Id that was never sent.");return n}return t}},{key:"serializeHasFunctionOp",value:function(e){if(null==e)throw new Error("Lookup of null function");return{op:"hasFunction",name:e}}},{key:"serializeCallFunctionOp",value:function(e,t){return{op:"callFunction",name:e,args:t}}},{key:"serializeValidateFunctionOp",value:function(e,t){return{op:"validateFunction",functionName:e,parameterNames:t}}},{key:"encodeObj",value:function(e){var t=this;return JSON.stringify(e,(function(e,n){return t.jsonReplacer(e,n)}))}},{key:"decodeObj",value:function(e){var t=this;return JSON.parse(e,(function(e,n){return t.jsonReviver(e,n)}))}}]),t}(w),j=function(e){"use strict";function t(e){var n;return s(this,t),(n=a(this,o(t).call(this))).jsError=e,n.cause=e,n.message=e.message,n}return i(t,e),l(t,[{key:"toString",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=[],t=!0,n=!1,r=void 0;try{for(var a,o=this.jsError.stack.split("\n")[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;if(i.match(/\sat .* \(.*fudomo-transform\/compute\.js:\d+:\d+\)/)||i.match(/\sat .* \(.*\/node_modules\/vm2\/lib\/contextify.js:\d+:\d+\)/))break;e.push(i.replace(/    at /g,"    at (JS) "))}}catch(c){n=!0,r=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e.join("\n")}},{key:"toHtml",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=[],t=!0,n=!1,r=void 0;try{for(var a,o=this.jsError.stack.split("\n")[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;if(i.match(/\sat .* \(.*fudomo-transform\/compute\.js:\d+:\d+\)/)||i.match(/\sat .* \(.*\/node_modules\/vm2\/lib\/contextify.js:\d+:\d+\)/))break;e.push(b(i.replace(/    at /g,"    at (JS) ")))}}catch(c){n=!0,r=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e.join("\n")}},{key:"location",get:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.jsError.stack.split("\n")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value.split(",").slice(-1)[0],i=/.*?:(\d+):(\d+)\)/.exec(o);if(null!==i){var c=Number(i[1])-1,u=Number(i[2])-1;return[[c,u],[c,u+1]]}}}catch(s){t=!0,n=s}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}return null}}]),t}(f),E=function(e){"use strict";function t(e,n){var r;return s(this,t),(r=a(this,o(t).call(this))).languageId="js",r.initExternalFunctions(e,n),r}return i(t,e),l(t,[{key:"initExternalFunctions",value:function(e,t){throw new Error("Not implemented")}},{key:"finalize",value:function(){}},{key:"convertScalarValue",value:function(e,t){if("oyaml"===e){if(t.kind!==m.Kind.SCALAR)throw new Error("Expected Scalar");return t.valueObject instanceof Date?t.valueObject:m.determineScalarType(t)===m.ScalarType.string?t.value:t.valueObject}throw"js"===e?new Error("Unsupported object model type "+e):new Error("Not implemented")}},{key:"hasFunctionSync",value:function(e){return void 0!==this.externalFunctions[e]}},{key:"hasFunction",value:function(){var e=u(c.mark((function e(t){var n=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){e(n.hasFunctionSync(t))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"callFunctionSync",value:function(e,t){if(!this.hasFunctionSync(e))throw new Error('Decomposition function implementation "'.concat(e,'" could not be found.'));return this.externalFunctions[e].apply(null,t)}},{key:"callFunction",value:function(){var e=u(c.mark((function e(t,n){var r=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){try{e(r.callFunctionSync(t,n))}catch(o){a(o)}})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){return g("js")}},{key:"exceptionToStackFrame",value:function(e){return new j(e)}},{key:"toString",value:function(){var e=u(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",String(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAppendNewFunctionSkeletonRange",value:function(e){var t=y(e,/(module\.exports\s*=\s*{\s*)([\s\S]*)(})/g);if(1!=t.length)return null;var n=t[0];return[n.groupRanges[2][1],n.groupRanges[2][1]]}},{key:"getFunctionSignatures",value:function(e){var t=/(\s*)([\w\d_]+)([\s,]*)/g;return y(e,/(\/\*\*[\s\S]*?\*\/\s*)?(\/\*\*.*?\*\/)?(\s*)([\w\d_]+)(:\s*function\(([\w\d_,\s]*)\))/g).map((function(n){return{signature:n[0],signatureRange:n.groupRanges[0],funcName:n[4],funcNameRange:n.groupRanges[4],parameters:y(n[6]||"",t).map((function(t){return{name:t[2],nameRange:h(e,n.indices[6][0]+t.indices[2][0],t.indices[2][1]-t.indices[2][0])}})),parametersListRange:n.groupRanges[6],comment:n[1],commentRange:n.groupRanges[1]}}))}}]),t}(w),O=function(e){"use strict";function t(e,n){var r;return s(this,t),(r=a(this,o(t).call(this))).baseDir=path.resolve(e),r.errorObj=n,r.cause=n,r}return i(t,e),l(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="".concat(this.errorObj.message,"\n"),n=this.errorObj.stack.slice(0).reverse(),r=!0,a=!1,o=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value,s=this.relPath(e,u.filename);t+="    at (PY) ".concat(s,":").concat(u.startLine,":").concat(u.startCol,"\n")}}catch(l){a=!0,o=l}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t.slice(0,-1)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="".concat(b(this.errorObj.message),"\n"),n=this.errorObj.stack.slice(0).reverse(),r=!0,a=!1,o=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value,s=this.relPath(e,u.filename),l=[[u.startLine-1,u.startCol-1],[u.endLine-1,u.endCol-1]];t+='    at (PY) <a class="fudomo-exception-source-link" href="#" data-source-loc="'.concat(b(JSON.stringify({src:s,pos:l})),'">').concat(b(s),":").concat(u.startLine,":").concat(u.startCol,"</a>\n")}}catch(f){a=!0,o=f}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t.slice(0,-1)}}]),t}(f),S=function(){"use strict";function e(t){s(this,e),this.errorObj=t,this.message=t.message}return l(e,[{key:"toString",value:function(){return this.message}}]),e}(),_=function(e){"use strict";function t(e,n){var r;return s(this,t),(r=a(this,o(t).call(this,n))).version=e,r}return i(t,e),t}(r(Error));t.UnsupportedPythonVersionError=_,t.PythonError=S,t.StackFrame=f,t.PythonStackFrame=O,t.BaseJSDecompositionFunctionRunner=E,t.JSStackFrame=j,t.DecompositionFunctionRunner=w,t.ExternalDecompositionFunctionRunner=x},183:function(e,t,n){var r=n(105),a=n(104),o=n(111),i=n(103),c=n(112),u=n(315),s=n(316),l=n(180),f=n(85).RangeReplaceQuickfixProposal;function p(e){var t=typeof e;return"function"===t||"object"===t&&!!e}var m=function(e){"use strict";function t(){return a(this,t),o(this,i(t).apply(this,arguments))}return c(t,e),t}(u(Error));function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)throw null!=t?new m(t):new m}var h=function(){"use strict";function e(){a(this,e)}return r(e,[{key:"getFeatureNameLocation",value:function(e){throw new Error("Not implemented")}},{key:"getFeatureValueLocation",value:function(e){throw new Error("Not implemented")}},{key:"getAttributeType",value:function(e){throw new Error("Not implemented")}},{key:"getFeatureAsArray",value:function(e){var t=this.getFeature(e);return Array.isArray(t)?t:void 0===t?[]:[t]}},{key:"getFeature",value:function(e){throw new Error("Not implemented")}},{key:"id",get:function(){throw new Error("Not Implemented")}},{key:"refId",get:function(){throw new Error("Not Implemented")}},{key:"isScalar",get:function(){throw new Error("Not implemented")}},{key:"val",get:function(){throw new Error("Not implemented")}},{key:"scalarType",get:function(){throw new Error("Not implemented")}},{key:"scalarValueLocation",get:function(){throw new Error("Not implemented")}},{key:"type",get:function(){throw new Error("Not implemented")}},{key:"typeLocation",get:function(){throw new Error("Not implemented")}},{key:"fullDefinitionLocation",get:function(){throw new Error("Not implemented")}},{key:"featureNames",get:function(){throw new Error("Not implemented")}}]),e}(),v=0,y=function(){"use strict";function e(){a(this,e),this.wrappers=new WeakMap,this.context=null,this.id=v++,this.objectIdCounter=0}return r(e,[{key:"getObjectModel",value:function(e,t){var n=this.wrappers.get(e);return void 0===n&&(n=new g(this,"js".concat(this.id,".").concat(this.objectIdCounter++),e,t),this.wrappers.set(e,n)),n}}]),e}(),g=function(e){"use strict";function t(e,n,r,c){var u;if(a(this,t),(u=o(this,i(t).call(this))).factory=e,Array.isArray(r))throw new Error("Can not create JSObject for Array");return u._id=n,u.obj=r,u.sourceLocation=c,u}return c(t,e),r(t,[{key:"getFeature",value:function(e){var t=this,n=this.obj[e];return Array.isArray(n)?n.map((function(e){return t.factory.getObjectModel(e,t.sourceLocation)})):p(n)?this.factory.getObjectModel(n,this.sourceLocation):n}},{key:"getFeatureNameLocation",value:function(e){return[[0,0],[0,0]]}},{key:"getFeatureValueLocation",value:function(e){return[[0,0],[0,0]]}},{key:"toString",value:function(){return"<JSObject obj='".concat(this.obj,"'>")}},{key:"id",get:function(){return this._id}},{key:"isScalar",get:function(){return!p(this.obj)}},{key:"val",get:function(){return this.factory.context.functionRunner.convertScalarValue("js",this.obj)}},{key:"scalarType",get:function(){return this.type}},{key:"scalarValueLocation",get:function(){return[[0,0],[0,0]]}},{key:"type",get:function(){return this.obj.constructor.name}},{key:"typeLocation",get:function(){return[[0,0],[0,0]]}},{key:"fullDefinitionLocation",get:function(){return[[0,0],[0,0]]}},{key:"featureNames",get:function(){return Object.keys(this.obj)}}]),t}(h),b={};b[s.ScalarType.null]=function(e){return null},b[s.ScalarType.bool]=s.parseYamlBoolean,b[s.ScalarType.int]=s.parseYamlInteger,b[s.ScalarType.float]=s.parseYamlFloat,b[s.ScalarType.string]=function(e){return e};var k=0,w=function(){"use strict";function e(){a(this,e),this.wrappers=new Map,this.context=null,this.id=k++,this.objectIdCounter=-1}return r(e,[{key:"getObjectModel",value:function(e,t,n,r){var a=this.wrappers.get(e);return void 0===a&&(this.objectIdCounter+=1,a=new E(this,"oyaml".concat(this.id,".").concat(this.objectIdCounter),e,t,n,r),this.wrappers.set(e,a)),a}}]),e}();function x(e){return e.toUpperCase()===e}function j(e,t){var n=t.fromIndex(e.startPosition)||{line:0,col:0},r=t.fromIndex(e.endPosition)||t.fromIndex(t.str.length-1);return[[n.line,n.col],[r.line,r.col]]}var E=function(e){"use strict";function t(e,n,r,c,u,l){var f;return a(this,t),d(r.kind==s.Kind.MAP),d(c.kind==s.Kind.MAP),d(null===r.mappings[0].value||r.mappings[0].value.kind==s.Kind.SEQ||r.mappings[0].value.kind==s.Kind.SCALAR,"Value ".concat(r.mappings[0].value," has unexpected kind.")),(f=o(this,i(t).call(this))).factory=e,f._id=n,f.obj=r,f.root=c,f.lineColumnFinder=u,f.sourceLocation=l,f}return c(t,e),r(t,[{key:"getNodePosition",value:function(e){return j(e,this.lineColumnFinder)}},{key:"_stripRefMarker",value:function(e){var t=e.trim();return t.endsWith(">")?t.slice(0,-1).trim():t}},{key:"getObjectById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t&&(t=new Set),t.has(this.id))return null;if(t.add(this.id),this.refId===e)return this;var n=!0,r=!1,a=void 0;try{for(var o,i=this.getFeature("cont")[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value,u=c.getObjectById(e,t);if(null!=u)return u}}catch(s){r=!0,a=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return null}},{key:"wrapValue",value:function(e){var t=this;if(Array.isArray(e))return e.map((function(e){return t.wrapValue(e)}));if(null===e||void 0===e.kind)return e;if(e.kind===s.Kind.SCALAR){if(e.valueObject instanceof Date)return e.valueObject;var n=s.determineScalarType(e);return b[n.toString()](e.value)}return e.kind===s.Kind.SEQ?e.items.map((function(e){return t.wrapValue(e)})):e.kind===s.Kind.MAP?this.factory.getObjectModel(e,this.root,this.lineColumnFinder,this.sourceLocation):void 0}},{key:"getFeature",value:function(e){var t=this;if(this.isScalar)return"cont"===e?[]:null;var n=void 0;if("cont"===e){var r=this.obj.mappings[0].value.items;return this.wrapValue(r.filter((function(e){return x(e.mappings[0].key.value[0])})))}var a=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})).filter((function(e){return!x(e.key.value[0])})),o=a.filter((function(t){return t.key.value==e}))[0];if(void 0!==o&&null===o.value)return this.wrapValue(null);if(void 0!==o&&o.value.kind==s.Kind.SEQ)return o.value.items.map((function(e){return t.wrapValue(e)}));if(void 0!==o&&void 0!==o.value.value)return this.wrapValue(o.value);var i=null,c=!0,u=!1,l=void 0;try{for(var f,p=a[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;if(m.key.value.trim().endsWith(">")&&this._stripRefMarker(m.key.value)==e){i=m.value.value;break}}}catch(w){u=!0,l=w}finally{try{c||null==p.return||p.return()}finally{if(u)throw l}}if(n=[],i){var d=!0,h=!1,v=void 0;try{for(var y,g=i.split(",")[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var b=y.value.trim(),k=this.factory.getObjectModel(this.root,this.root,this.lineColumnFinder,this.sourceLocation).getObjectById(b);if(void 0==k)throw new Error('Could not resolve reference "'.concat(e,": ").concat(b,'"'));n.push(k.obj)}}catch(w){h=!0,v=w}finally{try{d||null==g.return||g.return()}finally{if(h)throw v}}}return 0==n.length?n=null:1==n.length&&(n=n[0]),this.wrapValue(n)}},{key:"getFeatureNameLocation",value:function(e){d(!this.isScalar);var t=this.obj.mappings[0].value.items,n=!0,r=!1,a=void 0;try{for(var o,i=t.map((function(e){return e.mappings[0].key}))[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;if(!x(c.value.trim()[0])){var u=this._stripRefMarker(c.value);if(u==e){var s=this.lineColumnFinder.fromIndex(c.startPosition),l=s.line,f=s.col;return[[l,f],[l,f+u.length]]}}}}catch(p){r=!0,a=p}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return[[0,0],[0,0]]}},{key:"getFeatureValueLocation",value:function(e){d(!this.isScalar);var t=this.obj.mappings[0].value.items,n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value.mappings[0];if(null===c.value)return this.getNodePosition(c.key);if(this._stripRefMarker(c.key.value)==e)return this.getNodePosition(c.value)}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return[[0,0],[0,0]]}},{key:"_getValueType",value:function(e){if(null===e)return"null";if(e.valueObject instanceof Date)return"timestamp";if(e.kind==s.Kind.SEQ)return e.items.map(this._getValueType);var t=s.determineScalarType(e);return s.ScalarType[t]}},{key:"getAttributeType",value:function(e){var t=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})).filter((function(e){return!x(e.key.value[0])})).filter((function(t){return t.key.value==e}))[0];if(void 0!==t)return this._getValueType(t.value)}},{key:"toString",value:function(){return void 0===this.refId?this.isScalar?"<OYAMLObject type='".concat(this.scalarType,"'>"):"<OYAMLObject type='".concat(this.type,"'>"):this.isScalar?"<OYAMLObject type='".concat(this.scalarType,"' refId='").concat(this.refId,"'>"):"<OYAMLObject type='".concat(this.type,"' refId='").concat(this.refId,"'>")}},{key:"id",get:function(){return this._id}},{key:"refId",get:function(){var e=this.obj.mappings[0].key.value.split(/\s+/);if(1!=e.length)return e[1]}},{key:"isScalar",get:function(){if(null===this.obj.mappings[0].value)return!0;var e=this.obj.mappings[0].value.valueObject instanceof Date,t=null===this.obj.mappings[0].value,n=this.obj.mappings[0].value.kind===s.Kind.SCALAR;return e||t||n}},{key:"val",get:function(){return d(this.isScalar),this.factory.context.functionRunner.convertScalarValue("oyaml",this.obj.mappings[0].value)}},{key:"scalarType",get:function(){if(d(this.isScalar),null===this.obj.mappings[0].value)return"null";if(this.obj.mappings[0].value.valueObject instanceof Date)return"timestamp";var e=s.determineScalarType(this.obj.mappings[0].value);return s.ScalarType[e]}},{key:"scalarValueLocation",get:function(){var e=this.obj.mappings[0].value;return null===e?this.getNodePosition(this.obj.mappings[0]):this.getNodePosition(e)}},{key:"structureSeq",get:function(){return this.obj.mappings[0].value}},{key:"type",get:function(){return this.obj.mappings[0].key.value.split(" ").slice(0,1)[0]}},{key:"typeLocation",get:function(){if("Root"==this.type)return this.fullDefinitionLocation;var e=this.obj.mappings[0].key.startPosition,t=this.lineColumnFinder.fromIndex(e)||{line:0,col:0},n=t.line,r=t.col;return[[n,r],[n,r+this.type.length]]}},{key:"fullDefinitionLocation",get:function(){if("Root"==this.type){var e=this.lineColumnFinder.fromIndex(this.lineColumnFinder.str.length-1)||{line:0,col:0};return[[0,0],[e.line,e.col]]}var t=this.obj.mappings[0].key.startPosition,n=this.lineColumnFinder.fromIndex(t)||{line:0,col:0},r=this.obj.mappings[0].value,a=r;r.kind===s.Kind.SEQ&&r.items.length>0&&(a=r.items.slice(-1)[0]);var o=this.lineColumnFinder.fromIndex(a.endPosition-1);return[[n.line,n.col],[o.line,o.col+1]]}},{key:"featureNames",get:function(){var e=this;if(this.structureSeq.kind!=s.Kind.SEQ)return[];var t=this.obj.mappings[0].value.items.filter((function(e){return e.mappings.length>0})).map((function(e){return e.mappings[0]})),n=t.filter((function(e){return!x(e.key.value[0])})).map((function(t){return e._stripRefMarker(t.key.value)}));return t.filter((function(e){return x(e.key.value[0])})).length>0&&n.push("cont"),n}}]),t}(h);function O(e,t){for(var n=new Set,r=[e];r.length>0;){var a=r.shift();if(!n.has(a.id)){n.add(a.id),t(a);var o=[],i=!0,c=!1,u=void 0;try{for(var s,l=a.featureNames[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var f=s.value,p=!0,m=!1,d=void 0;try{for(var v,y=new S(e,a).successors(f,"Object")[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var g=v.value;g._center instanceof h&&o.push(g._center)}}catch(b){m=!0,d=b}finally{try{p||null==y.return||y.return()}finally{if(m)throw d}}}}catch(b){c=!0,u=b}finally{try{i||null==l.return||l.return()}finally{if(c)throw u}}r.splice.apply(r,[0,0].concat(o))}}}var S=function(){"use strict";function e(t,n){if(a(this,e),void 0==t)throw new Error("model can't be undefined");if(void 0==n)throw new Error("center can't be undefined");if(!(t instanceof h))throw new Error('model must be instance of ObjectModel (got "'.concat(n,'")'));this.model=t,this._center=n}return r(e,[{key:"getFeature",value:function(e){return"center"==e?this._center:"val"==e?this._center.val:this._center.getFeature(e)}},{key:"getAllInstancesByType",value:function(t){var n=[],r=this.model;return O(r,(function(a){("Object"===t||a.type===t)&&n.push(new e(r,a))})),n}},{key:"successors",value:function(t,n){var r=this._center.getFeatureAsArray(t),a=[],o=!0,i=!1,c=void 0;try{for(var u,s=r[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value;if(l instanceof h){var f=new e(this.model,l),p=!0;"Object"!=n&&f.type!=n&&(p=!1),p&&a.push(f)}}}catch(m){i=!0,c=m}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return a}},{key:"predecessors",value:function(t,n){var r=this,a=new Set;return O(this.model,(function(o){var i=!0,c=!1,u=void 0;try{for(var s,l=o.getFeatureAsArray(t)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var f=s.value;if(f instanceof h&&f.id===r._center.id){var p=new e(r.model,o),m=!0;"Object"!=n&&p.type!=n&&(m=!1),m&&a.add(p)}}}catch(d){c=!0,u=d}finally{try{i||null==l.return||l.return()}finally{if(c)throw u}}})),a}},{key:"toString",value:function(){return'<CenteredModel center="'.concat(this._center,'" model="').concat(this.model,'">')}},{key:"type",get:function(){return this.center.type}},{key:"center",get:function(){return this._center}},{key:"sourceLocation",get:function(){var e=this.center.sourceLocation||"unknown_source_path";return"".concat(e,":").concat(this.center.typeLocation[0][0]+1,":").concat(this.center.typeLocation[0][1]+1)}}]),e}(),_=function e(t){"use strict";a(this,e),this.cont=t},C=function(){"use strict";function e(){a(this,e)}return r(e,[{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];throw new Error("Not implemented")}},{key:"getRootCenteredModel",value:function(e){return new S(e,e)}}]),e}(),N=function(e){"use strict";function t(){return a(this,t),o(this,i(t).apply(this,arguments))}return c(t,e),r(t,[{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Array.isArray(e))throw new Error("Root has to be Object, not Array");return(new y).getObjectModel(new _(e),t)}}]),t}(C),I=function(){"use strict";function e(t){a(this,e),this.lineColumnFinder=t,this.markers=[]}return r(e,[{key:"addMarkerForNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={message:t,markerContext:{type:"input"},fixes:n};r.markerContext.location=null==e?[[0,0],[0,0]]:j(e,this.lineColumnFinder),this.markers.push(r)}},{key:"addMarkerAtLocation",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.markers.push({markerContext:{type:"input",location:e},message:t,fixes:n})}},{key:"toString",value:function(){return this.markers.map((function(e){return"(".concat(e.markerContext.location[0][0],":").concat(e.markerContext.location[0][1],") ").concat(e.message)})).join("\n")}},{key:"message",get:function(){return this.toString()}},{key:"hasMarkers",get:function(){return this.markers.length>0}}]),e}(),F=function(e){"use strict";function t(){return a(this,t),o(this,i(t).apply(this,arguments))}return c(t,e),r(t,[{key:"isStringScalar",value:function(e){return null!==e&&(e.kind==s.Kind.SCALAR&&s.determineScalarType(e)==s.ScalarType.string)}},{key:"_getNodeText",value:function(e,t){return null===t?"":e.slice(t.startPosition,t.endPosition)}},{key:"createSingleMappingToMultipleMappingQuickfixProposal",value:function(e,t,n){var r=this,a=this._getNodeText(e,n).split("\n")[1].replace(/\t/g,"  ").search(/[^ ]/);-1===a?a=4:a-="- ".length;var o="\n"+" ".repeat(a)+"- ",i=n.mappings.map((function(t){return"".concat(r._getNodeText(e,t.key),": ").concat(r._getNodeText(e,t.value))})).join(o);return new f("Change single mapping into multiple mappings","input",e,j(n,t),i).toJSON()}},{key:"validateObject",value:function(e,t,n,r){if(null!==e&&void 0!==e)if(e.kind==s.Kind.MAP)if(1==e.mappings.length){var a=e.mappings[0].value;if(null===a||a.kind==s.Kind.SEQ||a.kind==s.Kind.SCALAR){var o=e.mappings[0].key;if(this.isStringScalar(o)){var i=o.value.trim().split(/\s+/);if((0==i.length||i.length>2)&&t.addMarkerForNode(o,'Invalid object key (must be "Type [identifier]")'),null!==a&&a.kind==s.Kind.SEQ){var c=!0,u=!1,l=void 0;try{for(var f,p=a.items[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;if(null!==m)if(void 0!==m.mappings&&1==m.mappings.length){var d=m.mappings[0],h=d.key,v=d.value;if(this.isStringScalar(h)){var y=h.value.trim().split(/\s+/);if(0==y.length||y.length>2)t.addMarkerForNode(h,'Invalid object key (must be "Type [identifier]")');else{var g=h.value.trim()[0];if(void 0!==g&&x(g))this.validateObject(m,t,n,r);else if(this.isStringScalar(h)&&""!==h.value||t.addMarkerForNode(h,"Attribute, reference or contained object key must be non-empty string scalar"),h.value.trim().endsWith(">")){var b=h.value.trim().split(">");b.length>1&&(b.length>2&&t.addMarkerForNode(h,'Invalid reference key (too many ">")'),this.isStringScalar(v)||t.addMarkerForNode(v,"Reference specification must be string scalar"))}else if(null!==v){if(v.kind!=s.Kind.SCALAR&&v.kind!=s.Kind.SEQ){var k=v||d;t.addMarkerForNode(k,"Attribute has to be scalar or sequence of scalars");continue}if(v.kind,s.Kind.SCALAR,v.kind==s.Kind.SEQ){var w=!0,j=!1,E=void 0;try{for(var O,S=v.items[Symbol.iterator]();!(w=(O=S.next()).done);w=!0){var _=O.value;null!==_&&_.kind!=s.Kind.SCALAR&&t.addMarkerForNode(_,"Item in attribute sequence has to be scalar")}}catch(I){j=!0,E=I}finally{try{w||null==S.return||S.return()}finally{if(j)throw E}}}}}}else t.addMarkerForNode(h,"Attribute, reference or contained object key has to be string scalar")}else{var C=this.createSingleMappingToMultipleMappingQuickfixProposal(n,r,m);t.addMarkerForNode(m,"Attribute, reference or contained object map must have 1 mapping",[C])}else t.addMarkerForNode(a,"Null mapping not allowed")}}catch(I){u=!0,l=I}finally{try{c||null==p.return||p.return()}finally{if(u)throw l}}}}else t.addMarkerForNode(o,"Object key has to be string scalar")}else{var N=a||e;t.addMarkerForNode(N,"Object value must be sequence or scalar")}}else t.addMarkerForNode(e,"Object map must have only one key-value mapping");else t.addMarkerForNode(e,"Object has to be a map or scalar");else t.addMarkerForNode(null,"Object has to be a map or scalar")}},{key:"loadFromFile",value:function(e){throw new Error("Not implemented")}},{key:"loadFromData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=s.load(e),r=new l(e,{origin:0}),a=new I(r);if(void 0===n)n={kind:s.Kind.SEQ,items:[]};else{var o=!0,i=!1,c=void 0;try{for(var u,f=n.errors[Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var p=u.value,m=[[0,0],[0,0]];"YAMLException"==p.name&&(m=[[p.mark.line+1,p.mark.column+1],[p.mark.line+1,p.mark.column+1]]),a.addMarkerAtLocation(m,p.reason)}}catch(h){i=!0,c=h}finally{try{o||null==f.return||f.return()}finally{if(i)throw c}}n.kind!=s.Kind.SEQ&&a.addMarkerAtLocation([[0,0],[0,0]],"Root has to be Array")}if(a.hasMarkers)throw a;var d={kind:s.Kind.MAP,mappings:[{kind:s.Kind.MAPPING,key:{kind:s.Kind.SCALAR,value:"Root root"},value:n}]};if(this.validateObject(d,a,e,r),a.hasMarkers)throw a;return(new w).getObjectModel(d,d,r,t)}}]),t}(C);e.exports={CenteredModel:S,AbstractJSObjectLoader:N,AbstractOYAMLObjectLoader:F,ObjectModel:h}},200:function(e,t,n){var r=n(111),a=n(103),o=n(112),i=n(238),c=n(104),u=n(105),s=function(){"use strict";function e(t,n,r,a){c(this,e),this.commentStart=t,this.commentEnd=n,this.lineIndent=r,this.maxLineLength=a,this.lines=[]}return u(e,[{key:"wrapTextWithPrefix",value:function(e,t){var n,r=Math.max.apply(Math,i(e.split("\n").map((function(e){return e.length})))),a=this.maxLineLength-this.lineIndent.length-r;if(a<=0)return this.wrapText(e,79).wrapText(t,79);var o=this._wrapText(t,a),c=" ".repeat(r);return(n=this.lines).push.apply(n,[e+o[0]].concat(i(o.slice(1).map((function(e){return c+e}))))),this}},{key:"wrapText",value:function(e){var t,n=this.maxLineLength-this.lineIndent.length;n<=0&&(n=2);var r=this._wrapText(e,n);return(t=this.lines).push.apply(t,i(r)),this}},{key:"_wrapText",value:function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,u=e.split("\n")[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var s=c.value;if(s.length<t)n.push(s);else{var l=s.slice(0,t),f=s.slice(t),p=l.lastIndexOf(" ");-1==p&&(p=t-1);var m=l.slice(p),d=l.slice(0,p),h=(m+f).trimStart();n.push(d),n.push.apply(n,i(this._wrapText(h,t)))}}}catch(v){a=!0,o=v}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}},{key:"toString",value:function(){var e=this;return this.commentStart.endsWith("\n")?this.commentStart+this.lines.map((function(t){return e.lineIndent+t})).join("\n")+this.commentEnd:[this.commentStart+this.lines[0]].concat(i(this.lines.slice(1).map((function(t){return e.lineIndent+t})))).join("\n")+this.commentEnd}}]),e}(),l=function(){"use strict";function e(t,n,r){c(this,e),this.prefix=t,this.separator=n,this.suffix=r,this.parameterTypeMap=null}return u(e,[{key:"generateSkeleton",value:function(e){var t=this,n=this.prefix;return n+=e.decompositions.map((function(e){return t.generateDecompositionFunction(e)})).join(this.separator),n+=this.suffix}},{key:"generateDecompositionFunction",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];throw new Error("Not implemented")}},{key:"getFunctionValidationCriteria",value:function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,i=e.decompositions[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value,u=c.function.type+"_"+c.function.name,s=c.links.map((function(e){return e.parameterName}));t.push({functionName:u,parameters:s,decompositionQualifiedName:c.function.qualifiedName})}}catch(l){r=!0,a=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t}}]),e}(),f=function(e){"use strict";function t(){var e;return c(this,t),(e=r(this,a(t).call(this,"module.exports = {\n","\n\n","\n};\n"))).parameterTypeMap={Sequence:"Array",Set:"Set"},e}return o(t,e),u(t,[{key:"generateDecompositionFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new s("  /**\n","\n   */","   * ",79),r=e.function.type+"_"+e.function.name,a=e.links.map((function(e){return e.parameterName}));n.wrapText(e.function.qualifiedName),e.comment&&n.wrapText(e.comment);for(var o=e.links,i=0,c=Object.keys(o);i<c.length;i++){var u=c[i],l=o[u],f=this.parameterTypeMap[l.parameterTypeDescription];f?n.wrapTextWithPrefix("@param ".concat(l.parameterName," {").concat(f,"} "),l.parameterDescription):n.wrapTextWithPrefix("@param ".concat(l.parameterName," "),l.parameterDescription)}var p=n.toString();p+="\n";var m=a.join(", ");return p+="  ".concat(r,": function(").concat(m,")"),t||(p+=" {\n",p+="    throw new Error('function ".concat(r,"(").concat(m,") not yet implemented'); // TODO\n"),p+="  },"),p}}]),t}(l),p={javascript:f,js:f,python:function(e){"use strict";function t(){var e;return c(this,t),(e=r(this,a(t).call(this,"","\n\n\n",""))).parameterTypeMap={Sequence:"list",Set:"set"},e}return o(t,e),u(t,[{key:"generateDecompositionFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new s('    """','\n    """\n',"    ",79),r=e.function.type+"_"+e.function.name,a=e.links.map((function(e){return e.parameterName})),o="def ".concat(r,"(").concat(a.join(", "),"):\n");n.wrapText(e.function.qualifiedName),e.comment&&n.wrapText(e.comment);var i=!0,c=!1,u=void 0;try{for(var l,f=e.links[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var p=l.value;n.wrapTextWithPrefix(":param ".concat(p.parameterName,": "),"".concat(p.parameterDescription));var m=this.parameterTypeMap[p.parameterTypeDescription];m&&n.wrapTextWithPrefix(":type  ".concat(p.parameterName,": "),"".concat(m))}}catch(d){c=!0,u=d}finally{try{i||null==f.return||f.return()}finally{if(c)throw u}}return o+=n.toString(),t||(o+="    raise NotImplementedError('function ".concat(r," not yet implemented')  # TODO")),o.trim()}}]),t}(l)};e.exports={getSkeletonGenerator:function(e){var t=p[e];return void 0==t?null:new t},SKELETON_GENERATORS:[{id:"js",name:"Javascript",extension:"js"},{id:"python",name:"Python 3",extension:"py"}]}},215:function(module,exports,__webpack_require__){var _regeneratorRuntime=__webpack_require__(2),_asyncToGenerator=__webpack_require__(237),_classCallCheck=__webpack_require__(104),_createClass=__webpack_require__(105),_possibleConstructorReturn=__webpack_require__(111),_getPrototypeOf=__webpack_require__(103),_inherits=__webpack_require__(112),_require=__webpack_require__(183),ObjectModel=_require.ObjectModel,_require2=__webpack_require__(236),FudomoComputeException=_require2.FudomoComputeException,getParameterNames=__webpack_require__(318),_require3=__webpack_require__(149),DecompositionFunctionRunner=_require3.DecompositionFunctionRunner,BaseJSDecompositionFunctionRunner=_require3.BaseJSDecompositionFunctionRunner,UnsupportedPythonVersionError=_require3.UnsupportedPythonVersionError,PythonError=_require3.PythonError,JSStackFrame=_require3.JSStackFrame,JSDecompositionFunctionRunner=function(e){"use strict";function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,null,null))).externalFunctions=e||{},n}return _inherits(t,e),_createClass(t,[{key:"initExternalFunctions",value:function(e,t){}}]),t}(BaseJSDecompositionFunctionRunner),RUNNERS_BY_ID={javascript:JSDecompositionFunctionRunner},RUNNER_BY_FILE_EXTENSION={js:JSDecompositionFunctionRunner};module.exports={DecompositionFunctionRunner:DecompositionFunctionRunner,getRunnerClassById:function(e){return RUNNERS_BY_ID[e]},getRunnerClassByFileExtension:function(e){return RUNNER_BY_FILE_EXTENSION[e]},importCommonJSModule:function(){var _importCommonJSModule=_asyncToGenerator(_regeneratorRuntime.mark((function _callee(moduleSource){return _regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve,reject){var module={},window={},document={};try{eval(moduleSource),resolve(module.exports)}catch(error){reject(new FudomoComputeException([new JSStackFrame(error)]))}})));case 1:case"end":return _context.stop()}}),_callee)})));function importCommonJSModule(e){return _importCommonJSModule.apply(this,arguments)}return importCommonJSModule}(),importES6Module:function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){var n;return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="data:text/javascript;charset=utf-8,"+encodeURIComponent(t),e.abrupt("return",new Promise((function(e,t){import(n).then((function(t){e(t)})).catch((function(e){t(new FudomoComputeException([new JSStackFrame(e)]))}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),importModule:function(){var e=_asyncToGenerator(_regeneratorRuntime.mark((function e(t){return _regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",module.exports.importCommonJSModule(t).catch((function(e){return module.exports.importES6Module(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},236:function(e,t,n){var r=n(2),a=n(237),o=n(238),i=n(111),c=n(103),u=n(112),s=n(104),l=n(105),f=n(6652),p=n(239),m=n(305),d=(m.Transformation,m.getFudomoParser,n(85).escapeHtml),h=function(){"use strict";function e(t,n,r){s(this,e),this.transformation=t,this.rootModel=n,this.rootModel.model.factory.context=this,this.functionRunner=r,this.stack=null}return l(e,[{key:"log",value:function(){}},{key:"logIndented",value:function(){this.indentLog(),this.log.apply(this,arguments),this.dedentLog()}},{key:"indentLog",value:function(){}},{key:"dedentLog",value:function(){}}]),e}(),v=function(){"use strict";function e(){s(this,e)}return l(e,[{key:"relPath",value:function(e,t){if(null==e)return t;if(null==t)return t;if(!p.isAbsolute(e))throw new Error("Path base must be absolute path");if(!p.isAbsolute(t))throw new Error("Path must be absolute path");return t.startsWith(e)?t.slice(e.length+1):t}},{key:"toString",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw new Error("Not implemented")}},{key:"toHtml",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw new Error("Not implemented")}}]),e}(),y=function(e){"use strict";function t(e){var n;return s(this,t),(n=i(this,c(t).call(this))).link=e,n}return u(t,e),l(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (LL) ".concat(this.link," (").concat(n,")")}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(d(n),":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (LL) ".concat(d(this.link),' (<a class="fudomo-exception-source-link" href="#" data-source-loc="').concat(d(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(d(r),"</a>)"):"    at (LL) ".concat(d(this.link)," (").concat(d(r),")")}}]),t}(v),g=function(e){"use strict";function t(e){var n;return s(this,t),(n=i(this,c(t).call(this))).link=e,n.referredModel=null,n}return u(t,e),l(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (GL) ".concat(this.link," (").concat(n,")\n            ").concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (GL) ".concat(d(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(d(r),"</a>)\n")+"            ".concat(d(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(d(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(d(this.referredModel.center)):"    at (GL) ".concat(d(this.link)," (").concat(d(r),")\n")+"            ".concat(d(this.link.function.type)," (").concat(d(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(d(this.referredModel.center))}}]),t}(v),b=function(e){"use strict";function t(e){var n;return s(this,t),(n=i(this,c(t).call(this))).link=e,n.referredModel=null,n}return u(t,e),l(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (FL) ".concat(this.link," (").concat(n,")\n            ").concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (FL) ".concat(d(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(d(r),"</a>)\n")+"            ".concat(d(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(d(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(d(this.referredModel.center)):"    at (FL) ".concat(d(this.link)," (").concat(d(r),")\n")+"            ".concat(d(this.link.function.type)," (").concat(d(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(d(this.referredModel.center))}}]),t}(v),k=function(e){"use strict";function t(e){var n;return s(this,t),(n=i(this,c(t).call(this))).link=e,n.referredModel=null,n}return u(t,e),l(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return"    at (RL) ".concat(this.link," (").concat(n,")\n")+"            ".concat(this.link.function.type," (").concat(this.relPath(e,this.referredModel.sourceLocation),"): ").concat(this.referredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.link.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.link.node.location[0][0]+1,":").concat(this.link.node.location[0][1]+1);return null!==t?"    at (RL) ".concat(d(this.link),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:t,pos:this.link.node.location})),'">').concat(d(r),"</a>)\n")+"            ".concat(d(this.link.function.type),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:this.relPath(e,this.referredModel.center.sourceLocation),pos:this.referredModel.center.fullDefinitionLocation})),'">').concat(d(this.relPath(e,this.referredModel.sourceLocation)),"</a>): ").concat(d(this.referredModel.center)):"    at (RL) ".concat(d(this.link)," (").concat(r,")\n")+"            ".concat(d(this.link.function.type)," (").concat(d(this.relPath(e,this.referredModel.sourceLocation)),"): ").concat(d(this.referredModel.center))}}]),t}(v),w=function(e){"use strict";function t(e,n){var r;return s(this,t),(r=i(this,c(t).call(this))).decomposition=e,r.centeredModel=n,r}return u(t,e),l(t,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.decomposition.transformation.sourceLocation)||"unknown_source_path",n="".concat(t,":").concat(this.decomposition.node.location[0][0]+1,":").concat(this.decomposition.node.location[0][1]+1);return"    at (DC) ".concat(this.decomposition.function.qualifiedName," (").concat(n,")\n            center (").concat(this.relPath(e,this.centeredModel.sourceLocation),"): ").concat(this.centeredModel.center)}},{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.relPath(e,this.decomposition.transformation.sourceLocation),n=t||"unknown_source_path",r="".concat(n,":").concat(this.decomposition.node.location[0][0]+1,":").concat(this.decomposition.node.location[0][1]+1);return null!==t?"    at (DC) ".concat(d(this.decomposition.function.qualifiedName),' (<a href="#" class="fudomo-exception-source-link" data-source-loc="').concat(d(JSON.stringify({src:t,pos:this.decomposition.node.location})),'">').concat(d(r),"</a>})\n")+'            center (<a href="#" class="fudomo-exception-source-link" data-source-loc="'.concat(d(JSON.stringify({src:this.relPath(e,this.centeredModel.center.sourceLocation),pos:this.centeredModel.center.fullDefinitionLocation})),'">').concat(d(this.relPath(e,this.centeredModel.sourceLocation)),"</a>): ").concat(d(this.centeredModel.center)):"    at (DC) ".concat(d(this.decomposition.function.qualifiedName)," (").concat(d(r),")\n")+"            center (".concat(d(this.relPath(e,this.centeredModel.sourceLocation)),"): ").concat(d(this.centeredModel.center))}}]),t}(v),x=function(){"use strict";function e(t){s(this,e),this.fudomoStack=t}return l(e,[{key:"toHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o(this.fudomoStack);return t.reverse(),"<pre>"+t.map((function(t){return t.toHtml(e)})).join("\n")+"</pre>"}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o(this.fudomoStack);return t.reverse(),t.map((function(t){return t.toString(e)})).join("\n")}},{key:"cause",get:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.fudomoStack[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;if(void 0!==o.cause)return o.cause}}catch(i){t=!0,n=i}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}return null}},{key:"message",get:function(){return this.fudomoStack.slice(-1)[0].message}},{key:"location",get:function(){return this.fudomoStack.slice(-1)[0].location}}]),e}();function j(e,t,n){return E.apply(this,arguments)}function E(){return(E=a(r.mark((function e(t,n,a){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.functionRunner.callFunction(n.externalName,a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n){return S.apply(this,arguments)}function S(){return(S=a(r.mark((function e(t,n,a){var o,i,c,u,s,l,p,m,d,h,v,x,E,S,_,C,N,I,F,P,T,R,A,L,M,D,z,q,B,$,V,J,W,H,Q,U;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,stack.push(new w(n,a)),t.indentLog(),e.prev=3,t.log(f.red("Decomposing %s (on %s)"),n.function.qualifiedName,a.type),0!=(i=n.links).length){e.next=16;break}return e.next=9,t.functionRunner.hasFunction(n.function.externalName);case 9:if(e.sent){e.next=14;break}return o=!0,e.abrupt("return",a.getFeature(n.function.name));case 14:return o=!0,e.abrupt("return",j(t,n.function,[]));case 16:c=[],u=!0,s=!1,l=void 0,e.prev=20,p=i[Symbol.iterator]();case 22:if(u=(m=p.next()).done){e.next=214;break}if(d=m.value,h=!1,e.prev=25,"local"!=d.kind){e.next=43;break}if(stack.push(new y(d)),v=d.function.getTargetDecomposition(a),t.log("\u2570\u2500local: %s",d.function.name),null!=v){e.next=35;break}t.logIndented("\u2570\u2500feature: %s (of %s)",d.function.name,a.type),c.push(a.getFeature(d.function.name)),e.next=41;break;case 35:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",v.function.qualifiedName,a.type),e.t0=c,e.next=39,O(t,v,a);case 39:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 41:e.next=207;break;case 43:if("global"!=d.kind){e.next=99;break}stack.push(new g(d)),t.log("\u2570\u2500global: %s",d.function.qualifiedName),x=[],E=a.getAllInstancesByType(d.function.type),S=!0,_=!1,C=void 0,e.prev=51,N=E[Symbol.iterator]();case 53:if(S=(I=N.next()).done){e.next=82;break}if(F=I.value,stack.slice(-1)[0].referredModel=F,null!=(P=d.function.getTargetDecomposition(F))){e.next=73;break}return e.next=60,t.functionRunner.hasFunction(d.function.externalName);case 60:if(!e.sent){e.next=69;break}return t.logIndented("\u2570\u2500externalFunction: %s",d.function.externalName),e.t2=x,e.next=65,j(t,d.function,[]);case 65:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=71;break;case 69:t.logIndented("\u2570\u2500feature: %s (of %s)",d.function.name,F.type),x.push(F.getFeature(d.function.name));case 71:e.next=79;break;case 73:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",P.function.qualifiedName,F.type),e.t4=x,e.next=77,O(t,P,F);case 77:e.t5=e.sent,e.t4.push.call(e.t4,e.t5);case 79:S=!0,e.next=53;break;case 82:e.next=88;break;case 84:e.prev=84,e.t6=e.catch(51),_=!0,C=e.t6;case 88:e.prev=88,e.prev=89,S||null==N.return||N.return();case 91:if(e.prev=91,!_){e.next=94;break}throw C;case 94:return e.finish(91);case 95:return e.finish(88);case 96:c.push(x),e.next=207;break;case 99:if("forward"!=d.kind){e.next=154;break}stack.push(new b(d)),t.log("\u2570\u2500forward: %s -> %s",d.referenceName,d.function.qualifiedName),T=[],R=!0,A=!1,L=void 0,e.prev=106,M=a.successors(d.referenceName,d.function.type)[Symbol.iterator]();case 108:if(R=(D=M.next()).done){e.next=137;break}if(z=D.value,stack.slice(-1)[0].referredModel=z,null!=(q=d.function.getTargetDecomposition(z))){e.next=128;break}return e.next=115,t.functionRunner.hasFunction(d.function.externalName);case 115:if(!e.sent){e.next=124;break}return t.logIndented("\u2570\u2500externalFunction: %s",d.function.externalName),e.t7=T,e.next=120,j(t,d.function,[]);case 120:e.t8=e.sent,e.t7.push.call(e.t7,e.t8),e.next=126;break;case 124:t.logIndented("\u2570\u2500feature: %s (of %s)",d.function.name,z.type),T.push(z.getFeature(d.function.name));case 126:e.next=134;break;case 128:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",q.function.qualifiedName,z.type),e.t9=T,e.next=132,O(t,q,z);case 132:e.t10=e.sent,e.t9.push.call(e.t9,e.t10);case 134:R=!0,e.next=108;break;case 137:e.next=143;break;case 139:e.prev=139,e.t11=e.catch(106),A=!0,L=e.t11;case 143:e.prev=143,e.prev=144,R||null==M.return||M.return();case 146:if(e.prev=146,!A){e.next=149;break}throw L;case 149:return e.finish(146);case 150:return e.finish(143);case 151:c.push(T),e.next=207;break;case 154:if("reverse"!=d.kind){e.next=207;break}stack.push(new k(d)),t.log("\u2570\u2500reverse: %s <- %s",d.referenceName,d.function.qualifiedName),B=new Set,$=!0,V=!1,J=void 0,e.prev=161,W=a.predecessors(d.referenceName,d.function.type)[Symbol.iterator]();case 163:if($=(H=W.next()).done){e.next=192;break}if(Q=H.value,stack.slice(-1)[0].referredModel=Q,null!=(U=d.function.getTargetDecomposition(Q))){e.next=183;break}return e.next=170,t.functionRunner.hasFunction(d.function.externalName);case 170:if(!e.sent){e.next=179;break}return t.logIndented("\u2570\u2500externalFunction: %s",d.function.externalName),e.t12=B,e.next=175,j(t,d.function,[]);case 175:e.t13=e.sent,e.t12.add.call(e.t12,e.t13),e.next=181;break;case 179:t.logIndented("\u2570\u2500feature: %s (of %s)",d.function.name,Q.type),B.add(Q.getFeature(d.function.name));case 181:e.next=189;break;case 183:return t.logIndented("\u2570\u2500targetDecomposition: %s (of %s)",U.function.qualifiedName,Q.type),e.t14=B,e.next=187,O(t,U,Q);case 187:e.t15=e.sent,e.t14.add.call(e.t14,e.t15);case 189:$=!0,e.next=163;break;case 192:e.next=198;break;case 194:e.prev=194,e.t16=e.catch(161),V=!0,J=e.t16;case 198:e.prev=198,e.prev=199,$||null==W.return||W.return();case 201:if(e.prev=201,!V){e.next=204;break}throw J;case 204:return e.finish(201);case 205:return e.finish(198);case 206:c.push(B);case 207:h=!0;case 208:return e.prev=208,h&&stack.pop(),e.finish(208);case 211:u=!0,e.next=22;break;case 214:e.next=220;break;case 216:e.prev=216,e.t17=e.catch(20),s=!0,l=e.t17;case 220:e.prev=220,e.prev=221,u||null==p.return||p.return();case 223:if(e.prev=223,!s){e.next=226;break}throw l;case 226:return e.finish(223);case 227:return e.finish(220);case 228:return o=!0,e.abrupt("return",j(t,n.function,c));case 230:return e.prev=230,t.dedentLog(),o&&stack.pop(),e.finish(230);case 234:case"end":return e.stop()}}),e,null,[[3,,230,234],[20,216,220,228],[25,,208,211],[51,84,88,96],[89,,91,95],[106,139,143,151],[144,,146,150],[161,194,198,206],[199,,201,205],[221,,223,227]])})))).apply(this,arguments)}function _(){return(_=a(r.mark((function e(t){var n,a,o,i,c,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.stack){e.next=3;break}throw new Error("TransformationContext can not be reused.");case 3:if(t.stack=[],n=t.transformation.decompositions[0]){e.next=7;break}throw new Error("No decomposition found.");case 7:if(a=t.rootModel,"Root"==(o=n.function.type)){e.next=18;break}if(0!=(i=t.rootModel.successors("cont",o)).length){e.next=15;break}throw new Error('No instance of first decomposition type "'.concat(o,'" found.'));case 15:if(!(i.length>1)){e.next=17;break}throw new Error('More than one instance of first decomposition type "'.concat(o,'" found.'));case 17:a=i[0];case 18:return c=null,e.prev=19,stack=[],e.next=23,O(t,n,a);case 23:c=e.sent,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(19),stack.push(t.functionRunner.exceptionToStackFrame(e.t0));case 29:if(!(stack.length>0)){e.next=31;break}throw new x(stack);case 31:return e.next=33,t.functionRunner.toString(c);case 33:return u=e.sent,e.abrupt("return",u);case 35:return e.prev=35,t.functionRunner.finalize(),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[0,,35,38],[19,26]])})))).apply(this,arguments)}e.exports={transform:function(e){return _.apply(this,arguments)},TransformationContext:h,FudomoComputeException:x,StackFrame:v}},305:function(e,t,n){var r=n(111),a=n(103),o=n(112),i=n(104),c=n(105),u=n(180);function s(){var e=n(6642),t=n(6643);return new e.Parser(e.Grammar.fromCompiled(t))}var l=function(){"use strict";function e(t,n,r,a){i(this,e),this.startCol=t,this.startRow=n,this.endCol=r,this.endRow=a}return c(e,[{key:"contains",value:function(e,t){return!(t<this.startRow)&&(!(t>this.endRow)&&(t==this.startRow?e>=this.startCol:t!=this.endRow||e<=this.endCol))}},{key:"toArray",value:function(){return[[this.startRow,this.startCol],[this.endRow,this.endCol]]}},{key:"toString",value:function(){return"<CharacterRange startCol=".concat(this.startCol," startRow=").concat(this.startRow," endCol=").concat(this.endCol," endRow=").concat(this.endCol,">")}}],[{key:"fromOffsets",value:function(t,n,r){var a=u(t,{origin:0}),o=a.fromIndex(n),i=a.fromIndex(r)||a.fromIndex(t.length-1);return new e(o.col,o.line,i.col,i.line)}}]),e}(),f=function(){"use strict";function e(t){i(this,e),this.parent=t}return c(e,[{key:"transformation",get:function(){for(var e=this;!(e instanceof w);)e=e.parent;return e}},{key:"decomposition",get:function(){for(var e=this;!(e instanceof k);)e=e.parent;return e}}]),e}(),p=function(e){"use strict";function t(e,n,o){var c;return i(this,t),(c=r(this,a(t).call(this,e))).node=n,c.kind=o,c}return o(t,e),t}(f),m=function(e){"use strict";function t(e,n){return i(this,t),r(this,a(t).call(this,e,n,"local"))}return o(t,e),c(t,[{key:"toString",value:function(){return this.function.name}},{key:"parameterName",get:function(){return this.function.name}},{key:"parameterDescription",get:function(){var e=this.parameterName;return"center"===e?"This ".concat(this.decomposition.function.type):"val"===e?"The value of this ".concat(this.decomposition.function.type):'The "'.concat(e,'" of this ').concat(this.decomposition.function.type)}},{key:"parameterTypeDescription",get:function(){return null}},{key:"function",get:function(){return new g(this,this.node.reference)}},{key:"location",get:function(){return[this.node.location[0],[this.node.location[1][0],this.node.location[1][1]]]}}]),t}(p),d=function(e){"use strict";function t(e,n){return i(this,t),r(this,a(t).call(this,e,n,"global"))}return o(t,e),c(t,[{key:"toString",value:function(){return this.function.qualifiedName}},{key:"parameterName",get:function(){return this.function.type+"_"+this.function.name}},{key:"parameterDescription",get:function(){return'The sequence of all "'.concat(this.function.name,'" values of all ').concat(this.function.type," objects")}},{key:"parameterTypeDescription",get:function(){return"Sequence"}},{key:"function",get:function(){return new b(this,this.node.typedFunction)}}]),t}(p),h=function(e){"use strict";function t(e,n){return i(this,t),r(this,a(t).call(this,e,n,"forward"))}return o(t,e),c(t,[{key:"toString",value:function(){return"".concat(this.referenceName," -> ").concat(this.function.qualifiedName)}},{key:"parameterName",get:function(){return this.referenceName+"_"+this.function.type+"_"+this.function.name}},{key:"referenceName",get:function(){return this.node.reference}},{key:"referenceLocation",get:function(){return[this.node.location[0],[this.node.location[0][0],this.node.location[0][0]+this.referenceName.length]]}},{key:"parameterDescription",get:function(){return"cont"===this.referenceName?"The sequence of ".concat(this.function.pluralValueDescription," contained in this ").concat(this.decomposition.function.type):"The sequence of ".concat(this.function.pluralValueDescription,' referred to by attribute "').concat(this.referenceName,'" in this ').concat(this.decomposition.function.type)}},{key:"parameterTypeDescription",get:function(){return"Sequence"}},{key:"function",get:function(){return new b(this,this.node.typedFunction)}}]),t}(p),v=function(e){"use strict";function t(e,n){return i(this,t),r(this,a(t).call(this,e,n,"reverse"))}return o(t,e),c(t,[{key:"toString",value:function(){return"".concat(this.referenceName," <- ").concat(this.function.qualifiedName)}},{key:"parameterName",get:function(){return"_"+this.referenceName+"_"+this.function.type+"_"+this.function.name}},{key:"referenceName",get:function(){return this.node.reference}},{key:"parameterDescription",get:function(){return"cont"===this.referenceName?"The set of ".concat(this.function.pluralValueDescription," that contain this ").concat(this.decomposition.function.type):"The set of ".concat(this.function.pluralValueDescription," that refer to this ").concat(this.decomposition.function.type,' by attribute "').concat(this.referenceName,'"')}},{key:"parameterTypeDescription",get:function(){return"Set"}},{key:"function",get:function(){return new b(this,this.node.typedFunction)}}]),t}(p),y=function(e){"use strict";function t(e){return i(this,t),r(this,a(t).call(this,e))}return o(t,e),c(t,[{key:"getTargetDecomposition",value:function(e){throw new Error("Not implemented")}},{key:"name",get:function(){throw new Error("Not implemented")}}]),t}(f),g=function(e){"use strict";function t(e,n){var o;return i(this,t),(o=r(this,a(t).call(this,e))).node=n,o}return o(t,e),c(t,[{key:"getTargetDecomposition",value:function(e){var t=this.decomposition,n=this.transformation,r=t.function.type,a=this.name;return n.getDecompositionBySignature(r+"."+a)}},{key:"qualifiedName",get:function(){return this.name}},{key:"name",get:function(){return this.node}}]),t}(y),b=function(e){"use strict";function t(e,n){var o;return i(this,t),(o=r(this,a(t).call(this,e))).node=n,o}return o(t,e),c(t,[{key:"getTargetDecomposition",value:function(e){return this.isAbstract?this.transformation.getDecompositionBySignature(e.type+"."+this.name):this.transformation.getDecompositionBySignature(this.qualifiedName)}},{key:"isAbstract",get:function(){return"Object"==this.type}},{key:"name",get:function(){return this.node.untypedFunction}},{key:"pluralValueDescription",get:function(){var e='"'.concat(this.name,'" values of ').concat(this.type," objects");return"center"===this.name?e="".concat(this.type," objects"):"val"===this.name&&(e="".concat(this.type," scalar values")),e}},{key:"type",get:function(){return this.node.type}},{key:"qualifiedName",get:function(){return this.type+"."+this.name}},{key:"externalName",get:function(){return this.type+"_"+this.name}},{key:"location",get:function(){return this.node.location}},{key:"typeLocation",get:function(){return[this.node.location[0],[this.node.location[0][0],this.node.location[0][1]+this.type.length]]}}]),t}(y),k=function(e){"use strict";function t(e,n){var o;return i(this,t),(o=r(this,a(t).call(this,e))).node=n,o}return o(t,e),c(t,[{key:"function",get:function(){return new b(this,this.node.typedFunction)}},{key:"links",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,o=this.node.links[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;if("local"==i.type)e.push(new m(this,i));else if("forward"==i.type)e.push(new h(this,i));else if("reverse"==i.type)e.push(new v(this,i));else{if("global"!=i.type)throw new Error('Unexpected link type "'.concat(i.type,'"'));e.push(new d(this,i))}}}catch(c){n=!0,r=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e}},{key:"comment",get:function(){return this.node.comment}},{key:"characterRange",get:function(){var e=this.node.location;return new l(e[0][1],e[0][0],e[1][1],e[1][0])}}]),t}(f),w=function(e){"use strict";function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t),(n=r(this,a(t).call(this,null))).source=e,n.sourceLocation=o;var c=s();try{if(c.feed(e),!(c.results.length>0)){var u=new Error("Can not parse decomposition");throw u.token={offset:e.length-e.trimLeft().length,value:e.trim()},u}n.tree=c.results[0]}catch(l){n.parseError=l,void 0==n.parseError.token&&(n.parseError.token={offset:0,value:""})}return n}return o(t,e),c(t,[{key:"getDecompositionBySignature",value:function(e){return this.decompositions.find((function(t){return t.function.qualifiedName==e}))}},{key:"getDecompositionForTextCoordinate",value:function(e,t){return this.decompositions.find((function(n){return n.characterRange.contains(e,t)}))}},{key:"hasError",get:function(){return void 0!=this.parseError}},{key:"errors",get:function(){var e=[];return this.parseError&&e.push({markerContext:{type:"transformation",location:l.fromOffsets(this.source,this.parseError.token.offset,this.parseError.token.offset+this.parseError.token.value.length).toArray()},error:this.parseError,severity:"error",message:this.parseError.toString()}),e}},{key:"decompositions",get:function(){var e=this;return this.tree.decompositions.map((function(t){return new k(e,t)}))}}]),t}(f);e.exports={Transformation:w,getFudomoParser:s}},370:function(e,t,n){},6174:function(e,t,n){e.exports=n(7117)},6192:function(e,t,n){},66:function(e,t,n){var r=n(305),a=r.Transformation,o=r.getFudomoParser,i=n(236),c=i.transform,u=i.FudomoComputeException,s=i.TransformationContext,l=n(200),f=l.getSkeletonGenerator,p=l.SKELETON_GENERATORS,m=n(6697),d=m.MetamodelInferer,h=m.TransformationValidator,v=m.DataValidator;e.exports={FudomoParser:function(){return o()},parseFudomo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new a(e,t)},transform:c,TransformationContext:s,getSkeletonGenerator:f,SKELETON_GENERATORS:p,MetamodelInferer:d,TransformationValidator:h,DataValidator:v,FudomoComputeException:u}},6620:function(e,t,n){"use strict";(function(e){var t=n(168);t.define("ace/mode/fudomo_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:"comment.fudomo",regex:/#.*/},{token:"keyword.fudomo.val",regex:/val/},{token:"keyword.fudomo.center",regex:/center/},{token:["storage.type.decomposition.fudomo","keyword.operator","entity.name.function.decomposition.fudomo","keyword.operator"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)(:)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","keyword.fudomo.center"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(center)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","keyword.fudomo.val"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(val)/},{token:["variable.forward-link.fudomo","keyword.operator","storage.type.forward-link.fudomo","keyword.operator","entity.name.function.forward-link.fudomo"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*->\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","keyword.fudomo.center"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(center)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","keyword.fudomo.val"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)(val)/},{token:["variable.reverse-link.fudomo","keyword.operator","storage.type.reverse-link.fudomo","keyword.operator","entity.name.function.reverse-link.fudomo"],regex:/([a-zA-Z][a-zA-Z0-9]*)(\s*<-\s*)([a-zA-Z][a-zA-Z0-9]*)(\.)([a-zA-Z][a-zA-Z0-9]*)/},{token:"variable.local-link.fudomo",regex:/[a-zA-Z][a-zA-Z0-9]*/}]},this.normalizeRules()};o.metaData={fileTypes:["fudomo"],name:"Fudomo",scopeName:"source.fudomo"},r.inherits(o,a),t.FudomoHighlightRules=o})),t.define("ace/mode/fudomo",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./text").Mode,o=e("ace/mode/fudomo_highlight_rules").FudomoHighlightRules,i=function(){this.HighlightRules=o};r.inherits(i,a),function(){}.call(i.prototype),t.Mode=i})),t.require(["ace/mode/fudomo"],(function(t){"object"==typeof exports&&e&&(e.exports=t)}))}).call(this,n(232)(e))},6621:function(e,t,n){"use strict";(function(e){var t=n(26),r=n(38),a=n(126);a.define("ace/mode/oyaml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/yaml_highlight_rules"],(function(e,n,a){var o=e("../lib/oop"),i=e("./yaml_highlight_rules").YamlHighlightRules,c=function(){var e=(new i).getRules();this.$rules=Object(r.a)({},e,{start:[{token:["storage.type.oyaml","variable","keyword.operator"],regex:/([A-Z]\S*)(.*)(:)/}].concat(Object(t.a)(e.start))}),this.normalizeRules()};c.metaData={fileTypes:["oyaml"],name:"OYAML",scopeName:"source.oyaml"},o.inherits(c,i),n.OyamlHighlightRules=c})),a.define("ace/mode/oyaml",["require","exports","module","ace/lib/oop","ace/mode/yaml","ace/mode/oyaml_highlight_rules"],(function(e,t,n){var r=e("../lib/oop"),a=e("./yaml").Mode,o=new a,i=e("ace/mode/oyaml_highlight_rules").OyamlHighlightRules,c=function(){this.HighlightRules=i,this.$outdent=o.$outdent,this.$behaviour=o.$behaviour,this.foldingRules=o.foldingRules};r.inherits(c,a),function(){}.call(c.prototype),t.Mode=c})),a.require(["ace/mode/oyaml"],(function(t){"object"==typeof exports&&e&&(e.exports=t)}))}).call(this,n(232)(e))},6622:function(e,t,n){},6629:function(e,t,n){},6643:function(e,t,n){var r=n(104),a=n(105),o=n(6644);!function(){function t(e){return e[0]}function i(e){return{comment:o(e,1)[0].value}}var c=n(6648).compile({ws:{match:/[ \t\r\n\v\f]+/,lineBreaks:!0},comment:{match:/\n*#.*\n*/,lineBreaks:!0,value:function(e){return e.trim().slice(1)}},identifier:/[a-zA-Z][a-zA-Z0-9]*/,colon:":",dot:".",comma:",",rightArrow:"->",leftArrow:"<-"}),u=new(function(){"use strict";function e(t){r(this,e),this.lexer=t}return a(e,[{key:"next",value:function(){var e=this.lexer.next();return e&&"ws"===e.type?this.next():e}},{key:"save",value:function(){return this.lexer.save()}},{key:"reset",value:function(e,t){this.lexer.reset(e,t)}},{key:"formatError",value:function(e){return this.lexer.formatError(e)}},{key:"has",value:function(e){return this.lexer.has(e)}}]),e}())(c),s={Lexer:u,ParserRules:[{name:"transformation$ebnf$1",symbols:[]},{name:"transformation$ebnf$1$subexpression$1",symbols:["decomposition"],postprocess:t},{name:"transformation$ebnf$1",symbols:["transformation$ebnf$1","transformation$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"transformation$ebnf$2",symbols:[]},{name:"transformation$ebnf$2$subexpression$1",symbols:[u.has("comment")?{type:"comment"}:i],postprocess:i},{name:"transformation$ebnf$2",symbols:["transformation$ebnf$2","transformation$ebnf$2$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"transformation",symbols:["transformation$ebnf$1","transformation$ebnf$2"],postprocess:function(e){return{decompositions:e[0]}}},{name:"decomposition$ebnf$1",symbols:[]},{name:"decomposition$ebnf$1$subexpression$1",symbols:[u.has("comment")?{type:"comment"}:i],postprocess:i},{name:"decomposition$ebnf$1",symbols:["decomposition$ebnf$1","decomposition$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"decomposition$ebnf$2",symbols:["links"],postprocess:t},{name:"decomposition$ebnf$2",symbols:[],postprocess:function(e){return null}},{name:"decomposition",symbols:["decomposition$ebnf$1","typedFunction",u.has("colon")?{type:"colon"}:colon,"decomposition$ebnf$2"],postprocess:function(e){var t=o(e,4),n=t[0],r=t[1],a=(t[2],t[3]);a=a||[];var i=n.map((function(e){return e.comment.trim()})).join("\n"),c=a.slice(-1)[0]||r;return{typedFunction:r,links:a,comment:i,location:[r.location[0],c.location[1]]}}},{name:"links$ebnf$1",symbols:[]},{name:"links$ebnf$1$subexpression$1",symbols:[u.has("comma")?{type:"comma"}:comma,"link"]},{name:"links$ebnf$1",symbols:["links$ebnf$1","links$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"links",symbols:["link","links$ebnf$1"],postprocess:function(e){var t=o(e,2),n=t[0],r=t[1],a=[n],i=!0,c=!1,u=void 0;try{for(var s,l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var f=o(s.value,2),p=(f[0],f[1]);a.push(p)}}catch(m){c=!0,u=m}finally{try{i||null==l.return||l.return()}finally{if(c)throw u}}return a}},{name:"link",symbols:["localLink"],postprocess:t},{name:"link",symbols:["globalLink"],postprocess:t},{name:"link",symbols:["forwardLink"],postprocess:t},{name:"link",symbols:["reverseLink"],postprocess:t},{name:"localLink",symbols:[u.has("identifier")?{type:"identifier"}:identifier],postprocess:function(e){var t=o(e,1)[0];return{type:"local",reference:t.value,location:[[t.line-1,t.col-1],[t.line-1,t.col+t.value.length-1]]}}},{name:"globalLink",symbols:["typedFunction"],postprocess:function(e){var t=o(e,1)[0];return{type:"global",typedFunction:t,location:t.location}}},{name:"forwardLink",symbols:[u.has("identifier")?{type:"identifier"}:identifier,u.has("rightArrow")?{type:"rightArrow"}:rightArrow,"typedFunction"],postprocess:function(e){var t=o(e,3),n=t[0],r=(t[1],t[2]);return{type:"forward",reference:n.value,typedFunction:r,location:[[n.line-1,n.col-1],r.location[1]]}}},{name:"reverseLink",symbols:[u.has("identifier")?{type:"identifier"}:identifier,u.has("leftArrow")?{type:"leftArrow"}:leftArrow,"typedFunction"],postprocess:function(e){var t=o(e,3),n=t[0],r=(t[1],t[2]);return{type:"reverse",reference:n.value,typedFunction:r,location:[[n.line-1,n.col-1],r.location[1]]}}},{name:"typedFunction",symbols:["type",u.has("dot")?{type:"dot"}:dot,"untypedFunction"],postprocess:function(e){var t=o(e,3),n=t[0],r=(t[1],t[2]);return{type:n.value,untypedFunction:r.value,location:[[n.line-1,n.col-1],[r.line-1,r.col+r.value.length-1]]}}},{name:"type",symbols:[u.has("identifier")?{type:"identifier"}:identifier],postprocess:t},{name:"untypedFunction",symbols:[u.has("identifier")?{type:"identifier"}:identifier],postprocess:t}],ParserStart:"transformation"};"undefined"!==typeof e.exports?e.exports=s:window.grammar=s}()},6697:function(e,t,n){var r=n(238),a=n(111),o=n(103),i=n(112),c=n(104),u=n(105),s=n(183),l=s.loadModel,f=(s.loaders,s.CenteredModel,s.ObjectModel),p=function(){"use strict";function e(){c(this,e)}return u(e,[{key:"inferMetamodelFromPaths",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.map((function(e){return l(e)}));return this.inferMetamodel(t)}},{key:"inferMetamodel",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t||{},r=new Set,a=e.map((function(e){return e.center}));a.length>0;){var o=a.pop();if(!r.has(o.id))if(r.add(o.id),void 0==n[o.type]&&(n[o.type]=new Set),o.isScalar){var i=o.scalarType;n[o.type].add(JSON.stringify({scalarType:i}))}else{var c=!0,u=!1,s=void 0;try{for(var l,p=o.featureNames[Symbol.iterator]();!(c=(l=p.next()).done);c=!0){var m=l.value,d=o.getFeatureAsArray(m),h=!0,v=!1,y=void 0;try{for(var g,b=d[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var k=g.value,w=n[o.type],x=null,j=null;"cont"==m?(x="containment",j=k.type):k instanceof f?(x="reference",j=k.type):(x="attribute",j=o.getAttributeType(m),Array.isArray(j)&&(j={seq:Array.from(new Set(j))})),w.add(JSON.stringify({name:m,referenceType:x,objectType:j})),k instanceof f&&a.push(k)}}catch(he){v=!0,y=he}finally{try{h||null==b.return||b.return()}finally{if(v)throw y}}}}catch(he){u=!0,s=he}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}}}for(var E=new Map,O=0,S=Object.keys(n);O<S.length;O++){var _=S[O],C=new Map,N=Array.from(n[_]||[]).map((function(e){return JSON.parse(e)}));if(0!=N.length)if(N.every((function(e){return void 0!==e.scalarType}))){var I=N.map((function(e){return e.scalarType}));0==I.length?E.set(_,null):1==I.length?E.set(_,I[0]):E.set(_,I)}else{E.set(_,C);var F=N.filter((function(e){return"attribute"==e.referenceType})),P=N.filter((function(e){return"containment"==e.referenceType})),T=N.filter((function(e){return"reference"==e.referenceType})),R=Array.from(new Set(F.map((function(e){return e.name})))).sort(),A=Array.from(new Set(P.map((function(e){return e.name})))).sort(),L=Array.from(new Set(T.map((function(e){return e.name})))).sort(),M=!0,D=!1,z=void 0;try{for(var q,B=function(){var e=q.value,t=C.get(e);null==t&&(t=new Set,C.set(e,t));var n=!0,r=!1,a=void 0;try{for(var o,i=F.filter((function(t){return t.name==e}))[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;t.add(c.objectType)}}catch(he){r=!0,a=he}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}},$=R[Symbol.iterator]();!(M=(q=$.next()).done);M=!0)B()}catch(he){D=!0,z=he}finally{try{M||null==$.return||$.return()}finally{if(D)throw z}}var V=!0,J=!1,W=void 0;try{for(var H,Q=function(){var e=H.value,t=C.get(e);null==t&&(t=new Set,C.set(e,t));var n=!0,r=!1,a=void 0;try{for(var o,i=P.filter((function(t){return t.name==e}))[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;t.add(c.objectType)}}catch(he){r=!0,a=he}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}},U=A[Symbol.iterator]();!(V=(H=U.next()).done);V=!0)Q()}catch(he){J=!0,W=he}finally{try{V||null==U.return||U.return()}finally{if(J)throw W}}var Z=!0,G=!1,K=void 0;try{for(var Y,X=function(){var e=Y.value,t=C.get(e);null==t&&(t=new Set,C.set(e,t));var n=!0,r=!1,a=void 0;try{for(var o,i=T.filter((function(t){return t.name==e}))[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;t.add(c.objectType)}}catch(he){r=!0,a=he}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}},ee=L[Symbol.iterator]();!(Z=(Y=ee.next()).done);Z=!0)X()}catch(he){G=!0,K=he}finally{try{Z||null==ee.return||ee.return()}finally{if(G)throw K}}}}var te=!0,ne=!1,re=void 0;try{for(var ae,oe=E.keys()[Symbol.iterator]();!(te=(ae=oe.next()).done);te=!0){var ie=ae.value,ce=E.get(ie);if(ce instanceof Map){var ue=!0,se=!1,le=void 0;try{for(var fe,pe=ce.keys()[Symbol.iterator]();!(ue=(fe=pe.next()).done);ue=!0){var me=fe.value,de=ce.get(me);ce.set(me,Array.from(de).sort())}}catch(he){se=!0,le=he}finally{try{ue||null==pe.return||pe.return()}finally{if(se)throw le}}}}}catch(he){ne=!0,re=he}finally{try{te||null==oe.return||oe.return()}finally{if(ne)throw re}}return E}}]),e}(),m=new Set(["int","float","bool","string","null"]),d=function(){"use strict";function e(t,n){c(this,e),this.metamodel=t,this.markerContextType=n}return u(e,[{key:"makeError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{context:e,message:t,markerContext:{type:this.markerContextType,location:n||[[0,0],[0,0]]}}}},{key:"typeExists",value:function(e){return!!m.has(e)||("Object"==e||"Root"==e||void 0!==this.metamodel[e])}},{key:"_isAlwaysValidFeature",value:function(e,t){return"Root"==e&&"cont"==t||"Object"==e}},{key:"_getAttributeOrRefTypeSpec",value:function(e,t){return(this.metamodel[e]||{})[t]}},{key:"attrOrRefExists",value:function(e,t){return!!this._isAlwaysValidFeature(e,t)||void 0!==this._getAttributeOrRefTypeSpec(e,t)}},{key:"attrOrRefHasType",value:function(e,t,n){return!!this._isAlwaysValidFeature(e,t)||(this._getAttributeOrRefTypeSpec(e,t)||[]).includes(n)}}]),e}(),h=function(e){"use strict";function t(e,n){var r;return c(this,t),(r=a(this,o(t).call(this,e,"transformation"))).transformation=n,r}return i(t,e),u(t,[{key:"decompositionExists",value:function(e,t){return!!this.transformation.getDecompositionBySignature("".concat(e,".").concat(t))}},{key:"errors",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,o=this.transformation.decompositions[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;this.typeExists(i.function.type)||e.push(this.makeError(i.function.qualifiedName,"Decomposition Type ".concat(i.function.type," not found in metamodel"),i.function.typeLocation));var c=!0,u=!1,s=void 0;try{for(var l,f=i.links[Symbol.iterator]();!(c=(l=f.next()).done);c=!0){var p=l.value;if("forward"==p.kind)if(this.attrOrRefExists(i.function.type,p.referenceName)?this.attrOrRefHasType(i.function.type,p.referenceName,p.function.type)||"Object"===p.function.type||e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.referenceName," -> ").concat(p.function.qualifiedName),"Reference Type ".concat(p.function.type," not allowed for reference ").concat(i.function.type,".").concat(p.referenceName),p.function.typeLocation)):e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.referenceName," -> ").concat(p.function.qualifiedName),"Reference ".concat(p.referenceName," not found in type ").concat(i.function.type),p.referenceLocation)),this.typeExists(p.function.type))if(p.function.isAbstract){var m=p.function.name;if("center"!==m){var d=(this.metamodel[i.function.type]||{})[p.referenceName]||[],h=!0,v=!1,y=void 0;try{for(var g,b=d[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var k=g.value;null==this.transformation.getDecompositionBySignature("".concat(k,".").concat(m))&&e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.referenceName," -> ").concat(p.function.qualifiedName),'No decomposition "'.concat(m,'" found for concrete type ').concat(k),p.function.typeLocation))}}catch(F){v=!0,y=F}finally{try{h||null==b.return||b.return()}finally{if(v)throw y}}}}else"val"!==p.function.name&&"center"!==p.function.name&&(this.attrOrRefExists(p.function.type,p.function.name)||this.decompositionExists(p.function.type,p.function.name)||e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.referenceName," -> ").concat(p.function.qualifiedName),"No attribute, reference or decomposition found for link target ".concat(p.function.qualifiedName),p.function.location)));else e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.referenceName," -> ").concat(p.function.qualifiedName),"Forward Link Type ".concat(p.function.type," not found in metamodel"),p.function.typeLocation));else if("reverse"==p.kind)if(this.attrOrRefExists(p.function.type,p.referenceName)?this.attrOrRefHasType(p.function.type,p.referenceName,i.function.type)||e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.referenceName," <- ").concat(p.function.qualifiedName),"Reference Type ".concat(i.function.type," not allowed for reference ").concat(p.function.type,".").concat(p.referenceName),p.function.typeLocation)):e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.referenceName," <- ").concat(p.function.qualifiedName),"Reference ".concat(p.referenceName," not found in type ").concat(p.function.type),p.referenceLocation)),this.typeExists(p.function.type))if(p.function.isAbstract){var w=p.function.name;if("center"!==w)for(var x=0,j=Object.keys(this.metamodel);x<j.length;x++){var E=j[x],O=this.metamodel[E];if(null!=O){var S=O[p.referenceName];if(void 0!=S&&S.includes(i.function.type))null==this.transformation.getDecompositionBySignature("".concat(E,".").concat(w))&&e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.referenceName," -> ").concat(p.function.qualifiedName),'No decomposition "'.concat(w,'" found for concrete type ').concat(E),p.function.typeLocation))}}}else"val"!==p.function.name&&"center"!==p.function.name&&(this.attrOrRefExists(p.function.type,p.function.name)||this.decompositionExists(p.function.type,p.function.name)||e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.referenceName," -> ").concat(p.function.qualifiedName),"No attribute, reference or decomposition found for link target ".concat(p.function.qualifiedName),p.function.location)));else e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.referenceName," <- ").concat(p.function.qualifiedName),"Reverse Link Type ".concat(p.function.type," not found in metamodel"),p.function.typeLocation));else if("local"==p.kind){if("val"!==p.function.name&&"center"!==p.function.name){var _=this.attrOrRefExists(p.decomposition.function.type,p.function.name),C=null!=this.transformation.getDecompositionBySignature(p.decomposition.function.type+"."+p.function.name);_||C||e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.function.name),'No attribute or decomposition with name "'.concat(p.function.name,'" found'),p.location))}}else if("global"==p.kind)if("Object"===p.function.type);else if(this.typeExists(p.function.type)){var N=this.attrOrRefExists(p.function.type,p.function.name),I=null!=this.transformation.getDecompositionBySignature(p.function.type+"."+p.function.name);N||I||e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.function.qualifiedName),'No attribute or decomposition with name "'.concat(p.function.name,'" found'),p.function.location))}else e.push(this.makeError("".concat(i.function.qualifiedName,": ").concat(p.function.qualifiedName),"Global Link Type ".concat(p.function.type," not found in metamodel"),p.function.typeLocation))}}catch(F){u=!0,s=F}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}}}catch(F){n=!0,r=F}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e}}]),t}(d),v=function(e){"use strict";function t(e,n){var r;return c(this,t),(r=a(this,o(t).call(this,e,"input"))).centeredModel=n,r}return i(t,e),u(t,[{key:"errors",get:function(){for(var e=this,t=[],n=new Set,a=[this.centeredModel.center];a.length>0;){var o=a.pop();if(!n.has(o.id))if(n.add(o.id),this.typeExists(o.type))if(o.isScalar){var i=this.metamodel[o.type];null===i&&(i=[null]),i=Array.isArray(i)?i:[i];var c=o.scalarType;i.includes(c)||t.push(this.makeError("Object of type ".concat(o.type),"".concat(o.type," value has disallowed type ").concat(c),o.scalarValueLocation))}else{var u=!0,s=!1,l=void 0;try{for(var p,m=o.featureNames[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var d=p.value;if(this.attrOrRefExists(o.type,d))if(Array.isArray(o.getAttributeType(d)))!function(){var n=o.getAttributeType(d),a=e._getAttributeOrRefTypeSpec(o.type,d),i=new Set(a.map((function(e){return e.seq})).flat()),c=Array.from(new Set(r(n).filter((function(e){return!i.has(e)}))));c.length>0&&t.push(e.makeError("Object of type ".concat(o.type),"Attribute sequence ".concat(d," contains disallowed type(s): ").concat(c.join(", ")),o.getFeatureValueLocation(d)))}();else{var h=!0,v=!1,y=void 0;try{for(var g,b=o.getFeatureAsArray(d)[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var k=g.value,w=null,x=null;k instanceof f?(w=k.type,x=k.typeLocation):(w=o.getAttributeType(d),x=o.getFeatureValueLocation(d)),this.attrOrRefHasType(o.type,d,w)||t.push(this.makeError("Object of type ".concat(o.type),"Attribute or reference ".concat(d," has disallowed type ").concat(w),x)),k instanceof f&&a.push(k)}}catch(j){v=!0,y=j}finally{try{h||null==b.return||b.return()}finally{if(v)throw y}}}else t.push(this.makeError("Object of type ".concat(o.type),"Attribute or reference ".concat(d," not found in type ").concat(o.type," in metamodel"),o.getFeatureNameLocation(d)))}}catch(j){s=!0,l=j}finally{try{u||null==m.return||m.return()}finally{if(s)throw l}}}else t.push(this.makeError("Object of type ".concat(o.type),"Type ".concat(o.type," not found in metamodel"),o.typeLocation))}return t}}]),t}(d);e.exports={MetamodelInferer:p,TransformationValidator:h,DataValidator:v}},6774:function(e,t){},6776:function(e,t){},6809:function(e,t){},6810:function(e,t){},7117:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),i=n.n(o),c=n(7183),u=n(100),s=n(65),l=n(141),f=(n(6192),n(14)),p=n(393),m=n.n(p),d=n(31),h=n(151),v={width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"var(--theme-neutral-500)"},y={color:"var(--theme-neutral-500)"};function g(e){return a.a.createElement("div",{style:v},a.a.createElement(h.a,{variant:"h3",style:y},e.message),e.children)}var b=n(210),k=n.n(b),w=n(288),x=Object(w.a)({container:{border:"2px solid var(--theme-neutral-200)",borderRadius:"6px 6px 0 0",backgroundColor:"white",width:"calc(100% - 4px)",height:"calc(100% - 4px)",boxShadow:"2px 2px 12px rgba(0, 0, 0, 0.05)"},headerBox:{backgroundColor:"var(--theme-primary-300)",padding:"0.5rem 0.5rem 0.5rem 1rem",boxSizing:"border-box",overflow:"hidden",borderRadius:"3.5px 3.5px 0 0"},header:{minWidth:"1em",overflow:"hidden",textOverflow:"ellipsis",flexGrow:99,flexShrink:99,fontSize:"large",fontWeight:"600",letterSpacing:"0.1em",color:"var(--theme-neutral-800)",textTransform:"uppercase",whiteSpace:"nowrap",cursor:"default"},content:{overflow:"hidden"}});function j(e){var t=Object(r.useCallback)((function(e,t){return a.a.Children.toArray(e).filter((function(e){return Object.keys(e.props).includes("tool")===t}))}),[]),n=x();return a.a.createElement(c.a,{display:"flex",width:"100%",height:"100%",flexDirection:"column",alignItems:"stretch",boxSizing:"border-box",p:2,overflow:"hidden"},a.a.createElement(c.a,{display:"flex",flexDirection:"column",className:n.container},a.a.createElement(c.a,{display:"flex",flexDirection:"row",width:"100%",alignItems:"center",className:n.headerBox},a.a.createElement(h.a,{className:n.header},e.title),t(e.children,!0)),a.a.createElement(c.a,{width:"100%",height:"100%",className:n.content},t(e.children,!1))))}var E=n(7161),O=Object(w.a)({button:{marginLeft:"0.5rem",paddingRight:"0.5rem",color:"var(--theme-neutral-800)"},label:{overflow:"hidden",textOverflow:"ellipsis",minWidth:"1em"},startIcon:{marginRight:0},buttonDisabled:{backgroundColor:"var(--theme-neutral-500) !important",color:"var(--theme-neutral-400) !important",cursor:"default"}});function S(e){var t=O(),n=Object(r.useMemo)((function(){return{backgroundColor:e.color}}),[e]),o=Object(r.useMemo)((function(){return{root:t.button,disabled:t.buttonDisabled,label:t.label,startIcon:t.startIcon}}),[t]);return a.a.createElement(E.a,{startIcon:e.startIcon,disabled:e.disabled,style:n,classes:o,size:"small",title:e.title,onClick:e.onClick},e.children)}var _=n(403),C=n(7165),N=n(405),I=n(7166),F=n(383),P=n.n(F),T=n(382),R=n.n(T),A=n(381),L=n.n(A),M=(n(6199),n(6614),n(6615),n(6616),n(6617),n(6618),n(6619),n(6620),n(6621),n(7162)),D=(n(6622),window.ResizeObserver||_.a),z={$blockScrolling:1/0},q={scrollPastEnd:1,tabSize:2,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0};var B=a.a.memo((function(e){var t=e.editorId,n=e.value,o=e.disabled,i=e.markers,c=e.language,u=(e.theme,e.onChange),s=e.onQuickfixProposalClicked,l=(i||[]).map((function(e){var t=(void 0!==e.markerContext?e.markerContext.location:e.location)||[[0,0],[0,1]];return{row:t[0][0],column:t[0][1],type:"error",text:e.message,fixes:e.fixes}})),p=(i||[]).map((function(e){var t=(void 0!==e.markerContext?e.markerContext.location:e.location)||[[0,0],[0,1]];return{startRow:t[0][0],startCol:t[0][1],endRow:t[1][0],endCol:t[1][1],type:"text",text:e.message,className:"error-marker"}})),m=Object(M.a)((function(e){u&&u(e)}),100),d=Object(f.a)(m,1)[0],h=Object(r.useCallback)((function(e){d(e)}),[d]),v=Object(r.useRef)(),y=Object(M.a)((function(e){e.resize()}),250),g=Object(f.a)(y,1)[0];Object(r.useEffect)((function(){if(null!==v.current){var e=new D((function(e){g(v.current.editor)}));return e.observe(v.current.refEditor),function(){e.disconnect()}}}),[v,g]);var b=Object(r.useState)(null),k=Object(f.a)(b,2),w=k[0],x=k[1],j=Object(r.useState)([]),E=Object(f.a)(j,2),O=E[0],S=E[1],_=Object(r.useCallback)((function(e){e.target.classList.contains("ace_error")&&function(){var t=v.current.editor.renderer.screenToTextCoordinates(e.clientX,e.clientY).row,n=v.current.editor.renderer.$gutterLayer.$annotations[t],r=[],a=!0,o=!1,i=void 0;try{for(var c,u=l.filter((function(e){return e.row===t&&n.text.includes((""+e.text).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;"))}))[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value;s.fixes&&r.push({error:s.text,proposals:s.fixes})}}catch(f){o=!0,i=f}finally{try{a||null==u.return||u.return()}finally{if(o)throw i}}S(r),r.length>0&&x(e.target)}()}),[v,l,x,S]);Object(r.useEffect)((function(){var e=v.current;return e.editor.renderer.$gutter.addEventListener("click",_),function(){e.editor.renderer.$gutter.removeEventListener("click",_)}}),[v,_]);var F=Object(r.useCallback)((function(e){s&&s(e),x(null)}),[s,x]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(N.a,{anchorEl:w,getContentAnchorEl:null,anchorOrigin:{horizontal:"left",vertical:"bottom"},open:Boolean(w),onClose:function(e){return x(null)}},O.map((function(e,t){return[a.a.createElement(C.a,{key:"fix-".concat(t),disabled:!0},a.a.createElement(I.a,null,a.a.createElement(R.a,null)),e.error),e.proposals.map((function(e,n){return a.a.createElement(C.a,{key:"fix-".concat(t,"-prop-").concat(n),onClick:function(t){return F(e)}},a.a.createElement(I.a,null,a.a.createElement(P.a,null)),e.description)}))]})).flat()),a.a.createElement(L.a,{ref:v,mode:c||"text",value:n,annotations:l,markers:p,readOnly:o,theme:"chrome",onChange:h,fontSize:16,name:"ace_editor_"+t,editorProps:z,setOptions:q,width:"100%",height:"100%"}))}));var $=function(e){return a.a.createElement(j,{title:"Metamodel"},a.a.createElement(S,{disabled:e.inferDisabled,startIcon:a.a.createElement(k.a,null),tool:!0,color:"var(--theme-accent1-500)",title:"Infer Metamodel from Input Model",onClick:e.onInferMetamodelClicked},"Infer"),a.a.createElement(B,{editorId:"metamodel",value:e.value,disabled:e.disabled,language:"yaml",markers:e.markers,onChange:e.onChange}))},V=n(119),J=n.n(V);function W(e){return a.a.createElement(j,{title:"Transformation"},a.a.createElement(S,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:a.a.createElement(J.a,null),title:"Validate Transformation wrt. Metamodel",onClick:e.onValidateTransformClicked},"Validate"),a.a.createElement(B,{editorId:"transformation",language:"fudomo",value:e.value,markers:e.markers,disabled:e.disabled,onChange:e.onChange,onQuickfixProposalClicked:e.onQuickfixProposalClicked}))}var H=n(7185),Q=n(7167);function U(e){var t=Object(r.useCallback)((function(t){e.onSelectedLanguageChanged&&e.onSelectedLanguageChanged(t.target.value)}),[e]);return a.a.createElement(j,{title:"Decomp. Functions"},a.a.createElement(Q.a,{tool:"true"},a.a.createElement(H.a,{value:e.language||"",onChange:t,className:"FudomoSelect"},a.a.createElement(C.a,{disabled:e.languageSelectDisabled,value:"javascript"},"JavaScript"),a.a.createElement(C.a,{disabled:e.languageSelectDisabled,value:"python"},"Python 3"))),a.a.createElement(S,{disabled:e.generateDisabled,tool:!0,color:"var(--theme-accent1-500)",startIcon:a.a.createElement(k.a,null),title:"Generate Decomposition Function Skeletons from Transformation",onClick:e.onGenerateSkeletonsClicked},"Generate"),a.a.createElement(S,{disabled:e.validateDisabled,tool:!0,startIcon:a.a.createElement(J.a,null),color:"var(--theme-accent2-500)",title:"Validate Decomposition Functions wrt. Transformation",onClick:e.onValidateFunctionsClicked},"Validate"),a.a.createElement(B,{editorId:"functions",value:e.value,onChange:e.onChange,disabled:e.disabled,language:e.language,markers:e.markers,onQuickfixProposalClicked:e.onQuickfixProposalClicked}))}function Z(e){return a.a.createElement(j,{title:"Input Model"},a.a.createElement(S,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:a.a.createElement(J.a,null),title:"Validate Input Model wrt. Metamodel",onClick:e.onValidateInputClicked},"Validate"),a.a.createElement(B,{editorId:"input",value:e.value,disabled:e.disabled,onChange:e.onChange,language:"oyaml",markers:e.markers,onQuickfixProposalClicked:e.onQuickfixProposalClicked}))}var G=n(384),K=n.n(G),Y=(n(6623),n(194)),X={width:"100%",height:"100%"},ee={padding:"1em",fontFamily:"monospace",whiteSpace:"pre"},te={width:"100%",height:"100%",padding:"0.5em",boxSizing:"border-box"};function ne(e){var t=Object(r.useState)(null),n=Object(f.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)(null),u=Object(f.a)(c,2),s=u[0],l=u[1],p=Object(r.useState)(null),m=Object(f.a)(p,2),d=m[0],h=m[1],v=Object(r.useCallback)((function(e){null!==e&&i(e)}),[]);return Object(r.useEffect)((function(){if(null!==o){var e=Object(Y.a)(o).graphviz({useWorker:!1}).attributer((function(e){"svg"===e.tag&&(e.attributes.style="width: 100%; height: 100%")})).onerror((function(e){h(String(e))}));l(e)}}),[o]),Object(r.useEffect)((function(){var t=null==e.dot||""===e.dot?"graph{}":e.dot;try{h(null),s.engine(e.engine||"dot").dot(t).render()}catch(d){h(String(d))}}),[e.dot,s,e.engine]),a.a.createElement("div",{style:X},null!==d&&a.a.createElement("div",{style:ee},null!==d?String(d):""),null===d&&a.a.createElement("div",{ref:v,style:te}))}var re=0,ae={width:"100%",height:"100%"},oe={boxSizing:"border-box",border:"none"};function ie(e){return a.a.createElement("div",{style:ae},a.a.createElement("iframe",{title:"iframe".concat(re++),srcDoc:e.html,width:"100%",height:"100%",style:oe}))}function ce(e){return a.a.createElement(j,{title:"Output"},a.a.createElement(H.a,{tool:"true",value:e.format||"",onChange:e.onSelectedFormatChanged,className:"FudomoSelect"},a.a.createElement(C.a,{value:"text"},"Text"),a.a.createElement(C.a,{value:"graphviz-dot"},"GraphViz (Dot)"),a.a.createElement(C.a,{value:"graphviz-neato"},"GraphViz (Neato)"),a.a.createElement(C.a,{value:"html"},"HTML")),a.a.createElement(S,{tool:!0,disabled:e.transformDisabled,startIcon:a.a.createElement(K.a,null),color:"var(--theme-accent1-500)",title:"Transform Input Model to Output",onClick:e.onTransformClicked},"Transform"),"text"===e.format&&a.a.createElement(B,{editorId:"output",value:e.value,disabled:e.disabled,format:"text"}),"graphviz-dot"===e.format&&a.a.createElement(ne,{dot:e.value,engine:"dot"}),"graphviz-neato"===e.format&&a.a.createElement(ne,{dot:e.value,engine:"neato"}),"html"===e.format&&a.a.createElement(ie,{html:e.value}))}var ue=n(59),se=n(387),le=n.n(se),fe=n(7189),pe=n(7164),me=n(7126),de=n(169),he=n.n(de),ve=n(7170),ye={height:"100%",overflowY:"auto",color:"var(--theme-neutral-700)"};function ge(e){var t=e.project;return a.a.createElement(j,{title:"Input Models"},a.a.createElement(S,{disabled:e.validateDisabled,tool:!0,color:"var(--theme-accent2-500)",startIcon:a.a.createElement(J.a,null),title:"Validate Input Models wrt. Metamodel",onClick:e.onValidateInputsClicked},"Validate"),a.a.createElement(pe.a,{style:ye},t.inputs.map((function(e,n){return a.a.createElement(ue.b,{key:n,to:".."+t.url+"/"+e.name,className:"NoLinkStyling"},a.a.createElement(me.a,{button:!0},a.a.createElement(I.a,{className:"ListItemIcon"},a.a.createElement(he.a,null)),a.a.createElement(ve.a,{primary:e.name}),e.markers&&e.markers.length>0&&a.a.createElement(fe.a,{placement:"top",arrow:!0,title:a.a.createElement("span",{style:{whiteSpace:"pre"}},e.markers.map((function(e){return"- "+e.message})).join("\n"))},a.a.createElement(le.a,{style:{color:"red"}}))))}))))}var be=n(69),ke=(n(6628),n(6629),{overflow:"hidden"}),we={width:"100%",height:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box"};function xe(e){var t=Object(r.useState)(!0),n=Object(f.a)(t,2),o=n[0],i=n[1],u=Object(r.useState)(!0),s=Object(f.a)(u,2),l=s[0],p=s[1],m=Object(r.useState)(!0),d=Object(f.a)(m,2),h=d[0],v=d[1],y=Object(r.useState)(!0),g=Object(f.a)(y,2),b=g[0],k=g[1],w=Object(r.useState)(!0),x=Object(f.a)(w,2),j=x[0],E=x[1],O=Object(r.useState)(!0),S=Object(f.a)(O,2),_=S[0],C=S[1],N=Object(r.useState)(!0),I=Object(f.a)(N,2),F=I[0],P=I[1];return a.a.createElement(c.a,{width:"100%",height:"100%",boxSizing:"border-box",overflow:"hidden"},!o&&a.a.createElement("button",{title:"Show Top Row",className:"PaneButton ShowR1Button",onClick:function(){return i(!0)}},"\u2bc6"),a.a.createElement(be.a,{orientation:"horizontal",style:we},o&&a.a.createElement(be.b,{minSize:150,style:ke},l&&a.a.createElement("button",{title:"Hide Top Row",className:"PaneButton HideR1Button",onClick:function(){return i(!1)}},"\u2bc5"),!h&&a.a.createElement("button",{title:"Show "+e.titles[0],className:"PaneButton ShowR1C1Button",onClick:function(){return v(!0)}},"\u2bc8"),a.a.createElement(be.a,{orientation:"vertical"},h&&a.a.createElement(be.b,{minSize:150,style:ke},(b||j)&&a.a.createElement("button",{title:"Hide "+e.titles[0],className:"PaneButton HideR1C1Button",onClick:function(){return v(!1)}},"\u2bc7"),e.children[0],!b&&a.a.createElement("button",{title:"Show "+e.titles[1],className:"PaneButton ShowR1C2Button1",onClick:function(){return k(!0)}},"\u2bc7\u2bc8")),h&&(b||j)&&a.a.createElement(be.c,{propagate:!0}),b&&a.a.createElement(be.b,{minSize:150,style:ke},(h||j)&&a.a.createElement("button",{title:"Hide "+e.titles[1],className:"PaneButton HideR1C2Button2",onClick:function(){return k(!1)}},"\u2bc8"),e.children[1]),b&&j&&a.a.createElement(be.c,{propagate:!0}),j&&a.a.createElement(be.b,{minSize:150,style:ke},(h||b)&&a.a.createElement("button",{title:"Hide "+e.titles[2],className:"PaneButton HideR1C3Button",onClick:function(){return E(!1)}},"\u2bc8"),!b&&a.a.createElement("button",{title:"Show "+e.titles[1],className:"PaneButton ShowR1C2Button2",onClick:function(){return k(!0)}},"\u2bc7\u2bc8"),e.children[2])),!j&&a.a.createElement("button",{title:"Show "+e.titles[2],className:"PaneButton ShowR1C3Button",onClick:function(){return E(!0)}},"\u2bc7")),o&&l&&a.a.createElement(be.c,null),l&&a.a.createElement(be.b,{minSize:150,style:ke},o&&a.a.createElement("button",{title:"Hide Bottom Row",className:"PaneButton HideR2Button",onClick:function(){return p(!1)}},"\u2bc6"),a.a.createElement(be.a,{orientation:"vertical"},_&&a.a.createElement(be.b,{minSize:150,style:ke},(_||F)&&a.a.createElement("button",{title:"Hide "+e.titles[3],className:"PaneButton HideR2C1Button",onClick:function(){return C(!1)}},"\u2bc7"),e.children[3]),_&&F&&a.a.createElement(be.c,null),F&&a.a.createElement(be.b,{minSize:150,style:ke},(_||F)&&a.a.createElement("button",{title:"Hide "+e.titles[4],className:"PaneButton HideR2C2Button",onClick:function(){return P(!1)}},"\u2bc8"),e.children[4])))),!_&&a.a.createElement("button",{title:"Show "+e.titles[3],className:"PaneButton ShowR2C1Button",onClick:function(){return C(!0)}},"\u2bc8"),!F&&a.a.createElement("button",{title:"Show "+e.titles[4],className:"PaneButton ShowR2C2Button",onClick:function(){return P(!0)}},"\u2bc7"),!l&&a.a.createElement("button",{title:"Show Bottom Row",className:"PaneButton ShowR2Button",onClick:function(){return p(!0)}},"\u2bc5"))}var je=Object(r.createContext)();var Ee=n(38),Oe=n(2),Se=n.n(Oe),_e=n(9),Ce=n(97),Ne=n(101),Ie=n.n(Ne),Fe=n(391),Pe=n(86);function Te(e){return{type:"success",message:e}}function Re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"error",message:e,formatting:t}}function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"exception",message:e.toString(),formatting:t}}var Le=Object(Ce.b)({name:"status",initialState:[{type:"success",message:null}],reducers:{setStatus:function(e,t){return Array.isArray(t.payload)?t.payload:[t.payload]}}}),Me=Le.actions.setStatus,De=Le.reducer,ze=n(66),qe=n.n(ze),Be=n(85),$e=n(122),Ve=n(215),Je=n(392),We=n(26),He=n(37),Qe=n(30),Ue=n(60),Ze=n(49),Ge=n(55),Ke=n(149),Ye=n(200),Xe=n(145),et=n.n(Xe);function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=window.document.getElementsByTagName("head")[0],a=window.document.createElement("script");r.appendChild(a),a.onload=function(){e()},a.setAttribute("async",!0),a.setAttribute("type","text/javascript"),a.setAttribute("src",t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rt=n(6741),at=function(e){function t(e){var n;if(Object(He.a)(this,t),n=Object(Ue.a)(this,Object(Ze.a)(t).call(this)),null==e)throw new Error("No exception provided");if(void 0===e.errorObj)throw new Error("No error object provided");return n.error=e.errorObj,n.message=e.message,n}return Object(Ge.a)(t,e),Object(Qe.a)(t,[{key:"toString",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e="".concat(this.error.message,"\n"),t=this.error.stack.slice(0).reverse(),n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value,u=c.line||"";e+="    at (PY) ".concat(u.trim()," (").concat(c.startLine,":").concat(c.startCol,")\n")}}catch(s){r=!0,a=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return e.slice(0,-1)}},{key:"location",get:function(){if(0===this.error.stack.length)return null;var e=this.error.stack.slice(0).reverse()[0],t=e.startLine,n=e.startCol,r=e.endLine,a=e.endCol;return t===r&&n===a&&(a=n+e.line.slice(n).trim().length+1),[[t-1,n-1],[r-1,a-1]]}}]),t}(Ke.StackFrame),ot=function(e){function t(e){var n;Object(He.a)(this,t),n=Object(Ue.a)(this,Object(Ze.a)(t).call(this));var r=window.load_python_module(e);if("ok"!==r){var a=JSON.parse(r),o=new Ke.PythonError(a),i=[n.exceptionToStackFrame(o)];throw new ze.FudomoComputeException(i)}return n}return Object(Ge.a)(t,e),Object(Qe.a)(t,null,[{key:"init",value:function(){var e=Object(_e.a)(Se.a.mark((function e(){var t,n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt("".concat(window.public_url,"/js/brython/brython.js"));case 2:return e.next=4,tt("".concat(window.public_url,"/js/brython/brython_stdlib.js"));case 4:t=window.document.getElementsByTagName("head")[0],(n=window.document.createElement("script")).setAttribute("type","text/python3"),t.appendChild(n),n.textContent="\nfrom browser import run_script, window\nimport javascript\n\nimport inspect\nimport sys\nimport traceback\nimport re\nimport json\nimport datetime\n\n_source = '' # global state: current module source. Set by calling load_python_module.\n_mod = None  # global state: current module dict. Set by calling load_python_module.\n\ndef load_python_module(py):\n  global _mod\n  global _source\n  _source = py\n  scope = {}\n\n  try:\n    exec(py, scope)\n    _mod = scope\n    return 'ok' # string is passed easily to JS side\n  except Exception as e: # eg. SyntaxError\n    return encodeException(e)\n\nwindow.load_python_module = load_python_module\n\ndef validate_function(functionName, parameterNames):\n\n  func = _mod.get(functionName, None)\n\n  errors = []\n  if func is None:\n    errors.append(f'Expected implementation of decomposition function \"{functionName}\" not found.')\n  else:\n    sig = inspect.signature(func)\n    actualParamNames = [name for name in sig.parameters.keys()]\n    if parameterNames != actualParamNames:\n      errors.append(f'''Implementation of decomposition function \"{functionName}\" does not have expected parameters \"{', '.join(parameterNames)}\"''')\n    # TODO could check parameter type (keyword, *, **)\n  return errors\nwindow.validate_function = validate_function\n\ndef has_function(name):\n  return name in _mod\nwindow.has_function = has_function\n\ndef list_to_tuple(l):\n  if isinstance(l, list):\n    return tuple(l)\n  return l\n\ndef js_date_to_datetime(js_date):\n  year = js_date.getFullYear()\n  month = js_date.getMonth() + 1\n  day = js_date.getDate()\n  hour = js_date.getHours()\n  minute = js_date.getMinutes()\n  second = js_date.getSeconds()\n  milli = js_date.getMilliseconds()\n  tz_offset = js_date.getTimezoneOffset()\n  tz = datetime.timezone(datetime.timedelta(minutes=-tz_offset))\n  res = datetime.datetime(year, month, day, hour, minute, second, milli*1000, tz)\n  return res\nwindow.js_date_to_datetime = js_date_to_datetime\n\ndef datetime_to_js_date(dt):\n  dt = dt.astimezone(datetime.timezone.utc) # js works in UTC\n  return javascript.Date.new(dt.year, dt.month - 1, dt.day, dt.hour, dt.second, dt.microsecond/1000)\nwindow.datetime_to_js_date = datetime_to_js_date\n\ndef unwrapObject(o):\n  if getattr(o, '_type', None) == 'Set':\n    # lists can not be put into sets because they are not hashable.\n    # Here, we turn lists into tuples so that they can be put.\n    return set([unwrapObject(list_to_tuple(obj)) for obj in getattr(o, 'values')])\n  elif isinstance(o, list):\n    return [unwrapObject(obj) for obj in o]\n  elif hasattr(o, 'constructor') and o.constructor.name == 'Date':\n    # turn passed-in attributes that are Javascript Dates into Python datetime objects\n    return js_date_to_datetime(o)\n  return o\n\ndef wrapObject(o):\n  if isinstance(o, set):\n    return { '_type': 'Set', 'values': [wrapObject(obj) for obj in o] }\n  elif isinstance(o, list):\n    return [wrapObject(obj) for obj in o]\n  elif isinstance(o, datetime.datetime):\n    # Turn returned Python datetime instances into Javascript dates\n    return datetime_to_js_date(o)\n  return o\n\n# adapted from fudomo-transform/src/function_runner_base.py\ndef encodeException(e):\n  t, v, tb = sys.exc_info()\n  e_str = traceback.format_exception_only(t, v)[0].strip()\n  stack = traceback.extract_tb(tb)\n  if t == SyntaxError:\n    # quick and dirty special handling of syntax errrors\n    line_nr = int(e_str.split(' ')[-1]) # TODO handle format error\n    line = _source.split('\\n')[line_nr - 1]\n    message = 'SyntaxError: ' + str(e)\n    return json.dumps({ 'message': message, 'stack': [{ 'startLine': line_nr, 'endLine': line_nr, 'startCol': len(line)-len(line.lstrip()) + 1, 'endCol': len(line.rstrip()) + 1 }] })\n\n  processed_stack = []\n  for entry in stack:\n    if entry.filename != __file__:\n\n      orig_line = entry.line\n      if not orig_line:\n        try:\n          source_lines = _source.split('\\n')\n          orig_line = source_lines[entry.lineno - 1]\n        except IndexError:\n          orig_line = None\n\n      if orig_line:\n        start_col = len(re.match(r'^(\\s*)[^\\s]', orig_line).group(1)) + 1\n      else:\n        start_col = 0\n      e = { 'filename': entry.filename, 'startLine': entry.lineno, 'endLine': entry.lineno, 'startCol': start_col, 'endCol': start_col + len(entry.line) }\n      if orig_line is not None:\n        e['line'] = orig_line\n      processed_stack.append(e)\n\n  exc_obj = { 'message': e_str, 'stack': processed_stack }\n  return json.dumps(exc_obj)\n\ndef call_function(name, args):\n  args = [unwrapObject(a) for a in args]\n  f = _mod.get(name)\n  is_exception = False\n  try:\n    res = f(*args)\n  except Exception as e:\n    is_exception = True\n    res = encodeException(e)\n  return is_exception, wrapObject(res)\nwindow.call_function = call_function\n\ndef to_string(obj):\n  return str(unwrapObject(obj))\nwindow.to_string = to_string\n",window.brython();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),Object(Qe.a)(t,[{key:"finalize",value:function(){}},{key:"hasFunction",value:function(){var e=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.has_function(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSkeletonGenerator",value:function(){return Object(Ye.getSkeletonGenerator)("python")}},{key:"convertScalarValue",value:function(e,t){if("oyaml"===e){if(null==t)return null;if(t.kind!==rt.Kind.SCALAR)throw new Error("Expected Scalar YAML node");return t.valueObject instanceof Date?window.js_date_to_datetime(t.valueObject):rt.determineScalarType(t)===rt.ScalarType.string?t.value:t.valueObject}throw"js"===e?new Error("Not implemented"):new Error("Unsupported object model type "+e)}},{key:"wrapObject",value:function(e){var t=this;return e instanceof Set?{_type:"Set",values:Object(We.a)(e).map((function(e){return t.wrapObject(e)}))}:e instanceof Array?e.map((function(e){return t.wrapObject(e)})):e}},{key:"unwrapObject",value:function(e){var t=this;return"Set"===e._type?new Set(e.values.map(this.unwrapObject)):e instanceof Array?e.map((function(e){return t.unwrapObject(e)})):void 0!==e.__class__&&"NoneType"===e.__class__.$infos.__name__?null:e}},{key:"callFunction",value:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){var r,a,o,i,c,u,s=this;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.map((function(e){return s.wrapObject(e)})),a=window.call_function(t,r),o=Object(f.a)(a,2),i=o[0],c=o[1],!i){e.next=5;break}throw u=JSON.parse(c),new Ke.PythonError(u);case 5:return e.abrupt("return",this.unwrapObject(c));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toString",value:function(){var e=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.to_string(this.wrapObject(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exceptionToStackFrame",value:function(e){return new at(e)}},{key:"getAppendNewFunctionSkeletonRange",value:function(e){return Object(Be.offsetToRange)(e,e.length,0)}},{key:"getFunctionSignatures",value:function(e){var t=Object(Je.a)(/(def[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)([0-9A-Z_a-z][0-9A-Z_a-z]*)([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\()([\n #,0-9A-Z_a-z]+)?(\)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*:)([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*#[\0-\t\x0B-\uFFFF]*\n)?(([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*?)(("""|'''|"|')(\n|.)*?(\10)))?/g,{fname:2,params:4,comment:9}),n=/(\s*)([\w\d_]+)([\s,]*)/g;return Object(Be.reMatchAll)(e,t).map((function(t){return{signature:t[0],signatureRange:t.groupRanges[0],funcName:t[2],funcNameRange:t.groupRanges[2],parameters:Object(Be.reMatchAll)(t[4]||"",n).map((function(n){return{name:n[2],nameRange:Object(Be.offsetToRange)(e,t.indices[4][0]+n.indices[2][0],n.indices[2][1]-n.indices[2][0])}})),parametersListRange:t.groupRanges[4],comment:t[9],commentRange:t.groupRanges[9]}}))}}]),t}(Ke.DecompositionFunctionRunner),it=ot;function ct(e,t){var n=[];try{var r=$e.loaders.oyaml.loadFromSource(e.inputs.find((function(e){return e.name===t})).input),a=new $e.CenteredModel(r,r);if(!e.metamodel)return[Re("Can not validate input: metamodel is empty")];var o=Ie.a.parse(e.metamodel);n=new qe.a.DataValidator(o,a).errors}catch(i){if(void 0===i.markers)throw console.error(i),i;n=n.concat(i.markers)}return n}function ut(e,t){try{var n=ct(e,t);e.inputs.find((function(e){return e.name===t})).markers=n;var r=n.length>0?Re("Input validation error(s) found:\n"+n.map((function(e){return e.message})).join("\n"),"pre"):Te("Input data validation successful.");e.status=r}catch(a){e.status=Ae(a)}return e}function st(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(_e.a)(Se.a.mark((function e(t){var n,r,a;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,"python"===t.functionsLanguage&&(n=new it(t.functions)),"javascript"!==t.functionsLanguage){e.next=8;break}return r=Object(Ve.getRunnerClassById)("javascript"),e.next=6,Object(Ve.importModule)(t.functions);case 6:a=e.sent,n=new r(a);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e,t){return pt.apply(this,arguments)}function pt(){return(pt=Object(_e.a)(Se.a.mark((function e(t,n){var r,a,o,i,c,u,s,l,f,p;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,n(ht.setFunctionsMarkers([])),n(ht.setTransformationMarkers([])),a=null,e.prev=5,e.next=8,st(t);case 8:a=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),n(ht.setFunctionsMarkers([{message:e.t0.message,markerContext:{type:"functions",location:e.t0.location}}])),r.push(Ae(e.t0));case 15:if((o=qe.a.parseFudomo(t.transformation)).hasError&&(i=o.errors,n(ht.setTransformationMarkers(i)),r.push(Re("Transformation error(s) found:\n"+i.map((function(e){return e.error})).join("\n"),"pre")),o=null),null===a||null===o){e.next=30;break}return c=qe.a.getSkeletonGenerator(t.functionsLanguage),u=c.getFunctionValidationCriteria(o),e.next=22,a.validateFunctions(t.functions,u,o);case 22:return s=e.sent,l=s.filter((function(e){return"function"===e.markerContext.type})),f=s.filter((function(e){return"transformation"===e.markerContext.type})),n(ht.setFunctionsMarkers(l)),p=f.map((function(e){return{message:e.message,markerContext:{type:"transformation",location:o.getDecompositionBySignature(e.markerContext.decompositionQualifiedName).characterRange.toArray()},fixes:e.fixes}})),n(ht.setTransformationMarkers(p)),s.length>0&&r.push(Re("Decomposition function validation error(s) found:\n"+s.map((function(e){return e.message})).join("\n"),"pre")),e.abrupt("return",0===s.length);case 30:e.next=36;break;case 32:return e.prev=32,e.t1=e.catch(1),r.push(Ae(e.t1)),e.abrupt("return",!1);case 36:return e.prev=36,n(ht.setProjectStatus(r)),e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[1,32,36,39],[5,11]])})))).apply(this,arguments)}var mt=Object(Ce.b)({name:"project",initialState:null,reducers:{inferMetamodel:function(e){s.a.event({category:"Project",action:"Inferred Metamodel",label:e.url});try{var t=new qe.a.MetamodelInferer,n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e.inputs[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value;try{var l=$e.loaders.oyaml.loadFromSource(u.input);n.push(new $e.CenteredModel(l,l)),u.markers=[]}catch(p){return e.status=Re('Error in input "'.concat(u.name,'":\n').concat(p.message),"pre"),void(u.markers=p.markers)}}}catch(m){a=!0,o=m}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}var f=t.inferMetamodel(n);Fe.nullOptions.nullStr="",e.metamodel=f.size>0?Ie.a.stringify(f):"Root:",e.status=Te("Metamodel successfully inferred.")}catch(p){e.status=Ae(p)}},generateSkeletons:function(e){s.a.event({category:"Project",action:"Generated Skeletons",label:e.url+" ("+e.functionsLanguage+")"});try{var t=qe.a.getSkeletonGenerator(e.functionsLanguage),n=qe.a.parseFudomo(e.transformation);if(n.hasError)e.transformationMarkers=n.errors,e.status=Re("Transformation has error(s): "+n.errors.map((function(e){return e.message})).join("\n"),"pre");else{var r=t.generateSkeleton(n);e.functions=r,e.functionMarkers=[],e.status=Te("Decomposition function skeletons successfully generated.")}}catch(a){e.status=Ae(a)}},validateTransformation:function(e){s.a.event({category:"Project",action:"Validated Transformation",label:e.url});try{if(e.metamodel){var t=Ie.a.parse(e.metamodel),n=qe.a.parseFudomo(e.transformation);if(n.hasError)e.transformationMarkers=n.errors,e.status=Re("Can not parse transformation");else{var r=new qe.a.TransformationValidator(t,n),a=r.errors.length>0?Re("Transformation validation error(s) found:\n"+r.errors.map((function(e){return e.message})).join("\n"),"pre"):Te("Transform validation successful.");e.transformationMarkers=r.errors,e.status=a}}else e.status=Re("Can not validate transformation: metamodel is empty")}catch(o){e.status=Ae(o)}},validateInput:function(e,t){if(void 0===t.payload)throw new Error("inputId missing");s.a.event({category:"Project",action:"Validated Input",label:e.url+"."+t.payload}),ut(e,t.payload)},validateInputs:function(e){s.a.event({category:"Project",action:"Validated Inputs",label:e.url}),function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,i=e.inputs[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;try{var u=ct(e,c.name);c.markers=u,u.length>0&&t.push('Input "'.concat(c.name,'" error(s):\n')+u.map((function(e){return"- "+e.message})).join("\n"))}catch(s){t.push(String(s))}}}catch(l){r=!0,a=l}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}e.status=0===t.length?Te("Input data validation successful."):Re(t.join("\n"),"pre")}(e)},setMetamodel:function(e,t){e.metamodel=t.payload,e.status=null},setMetamodelMarkers:function(e,t){e.metamodelMarkers=t.payload,e.status=null},setTransformation:function(e,t){e.transformation=t.payload,e.status=null},setTransformationMarkers:function(e,t){e.transformationMarkers=t.payload,e.status=null},setFunctions:function(e,t){e.functions=t.payload,e.status=null},setFunctionsMarkers:function(e,t){e.functionsMarkers=t.payload,e.status=null},setFunctionsLanguage:function(e,t){e.functionsLanguage=t.payload,e.status=null},createInput:function(e,t){if(console.log(e,t),null===e)return e;t.payload.projectName===e.name&&(e.inputs.push({name:t.payload.name,input:t.payload.value||""}),e.status=null)},deleteInput:function(e,t){if(null===e)return e;t.payload.projectName===e.name&&(e.inputs.splice(e.inputs.findIndex((function(e){return e.name===t.payload.name})),1),e.status=null)},renameInput:function(e,t){if(null===e)return e;if(t.payload.projectName===e.name){var n=!0,r=!1,a=void 0;try{for(var o,i=e.inputs[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;c.name===t.payload.name&&(c.name=t.payload.newName,e.status=null)}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}},setInput:function(e,t){if(void 0===t.payload.inputId)throw new Error("inputId missing");var n=e.inputs.find((function(e){return e.name===t.payload.inputId}));null!==n&&(n.input=t.payload.value),e.status=null},setInputMarkers:function(e,t){if(void 0===t.payload.inputId)throw new Error("inputId missing");e.inputs.find((function(e){return e.name===t.payload.inputId})).markers=t.payload.value,e.status=null},setOutput:function(e,t){e.output=t.payload,e.status=null},setOutputFormat:function(e,t){e.outputFormat=t.payload,e.status=null},setProject:function(e,t){var n=null;return t.payload&&((n=Object.assign({},t.payload)).status=null),n},setProjectStatus:function(e,t){e.status=Array.isArray(t.payload)?t.payload:[t.payload]},setHasUnsavedData:function(e,t){t.payload?e.hasUnsavedData=!0:delete e.hasUnsavedData}}}),dt={transform:function(e){return function(){var t=Object(_e.a)(Se.a.mark((function t(n,r){var a,o,i,c,u,l,f,p,m,d,h,v,y,g,b,k,w,x,j,E,O,S;return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}throw new Error("inputId missing");case 2:return a=r().project,s.a.event({category:"Project",action:"Ran Transformation",label:a.url}),n(ht.setOutput("")),n(ht.setMetamodelMarkers([])),n(ht.setInputMarkers({inputId:e,value:[]})),n(ht.setFunctionsMarkers([])),n(ht.setTransformationMarkers([])),o=[],t.prev=10,i=!0,c=null,t.prev=13,t.next=16,st(a);case 16:c=t.sent,t.next=23;break;case 19:t.prev=19,t.t0=t.catch(13),o.push(Ae(t.t0)),i=!1;case 23:u=void 0;try{u=$e.loaders.oyaml.loadFromSource(a.inputs.find((function(t){return t.name===e})).input)}catch(_){n(ht.setInputMarkers({inputId:e,value:_.markers})),o.push(Ae(_)),i=!1}return(l=qe.a.parseFudomo(a.transformation)).hasError&&(f=l.errors,n(ht.setTransformationMarkers(f)),o.push(Re("Transformation error(s) found:\n"+f.map((function(e){return e.error})).join("\n"),"pre")),l=null,i=!1),t.next=29,ft(a,n);case 29:t.sent||(i=!1),p=null;try{p=Ie.a.parse(a.metamodel)}catch(_){m=_.message,d=[[0,0],[0,0]],_.source&&_.source.rangeAsLinePos&&(h=_.source.rangeAsLinePos,d=[[h.start.line-1,h.start.col-1],[h.end.line-1,h.end.col-1]]),n(ht.setMetamodelMarkers([{message:m,markerContext:{type:"metamodel",location:d}}])),o.push(Ae(_)),i=!1}if(0===a.metamodel.trim().length&&(v="Empty metamodel is not allowed. Click <Infer> to create metamodel for current input data.",n(ht.setMetamodelMarkers([{message:v,markerContext:{type:"metamodel",location:[[0,0],[0,0]]}}])),o.push(Re(v)),i=!1),void 0!==u&&null!==p&&(y=new $e.CenteredModel(u,u),(g=new qe.a.DataValidator(p,y)).errors.length>0&&(n(ht.setInputMarkers({inputId:e,value:g.errors})),b=Re("Input validation error(s) found:\n"+g.errors.map((function(e){return e.message})).join("\n"),"pre"),o.push(b),i=!1)),null!==l&&null!==p&&(l.hasError||(k=new qe.a.TransformationValidator(p,l)).errors.length>0&&(n(ht.setTransformationMarkers(k.errors)),w=Re("Transformation validation error(s) found:\n"+k.errors.map((function(e){return e.message})).join("\n"),"pre"),o.push(w),i=!1)),!i){t.next=47;break}return x=new $e.CenteredModel(u,u),j=new qe.a.TransformationContext(l,x,c),E=performance.now(),t.next=42,qe.a.transform(j);case 42:O=t.sent,S=performance.now(),console.log("Transformation took ".concat(S-E," ms")),n(ht.setOutput(String(O))),o.push(Te("Transformation successful."));case 47:t.next=53;break;case 49:t.prev=49,t.t1=t.catch(10),t.t1.fudomoStack&&n(ht.setFunctionsMarkers([{message:t.t1.message,markerContext:{type:"functions",location:t.t1.location}}])),o.push(Ae(t.t1));case 53:return t.prev=53,n(ht.setProjectStatus(o)),t.finish(53);case 56:case"end":return t.stop()}}),t,null,[[10,49,53,56],[13,19]])})));return function(e,n){return t.apply(this,arguments)}}()},applyQuickfix:function(e){return function(){var t=Object(_e.a)(Se.a.mark((function t(n,r){var a,o,i,c,u,s;return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r().project,o=Be.RangeReplaceQuickfixProposal.fromObj(e.proposal),i=null,"functions"!==o.appliesTo){t.next=7;break}i=a.functions,t.next=16;break;case 7:if("transformation"!==o.appliesTo){t.next=11;break}i=a.transformation,t.next=16;break;case 11:if("input"!==o.appliesTo){t.next=15;break}i=a.inputs.find((function(t){return t.name===e.inputId})).input,t.next=16;break;case 15:throw new Error;case 16:if(t.prev=16,c=o.applyToSource(i),"functions"===o.appliesTo?n(ht.setFunctions(c)):"transformation"===o.appliesTo?n(ht.setTransformation(c)):"input"===o.appliesTo&&n(ht.setInput({inputId:e.inputId,value:c})),u=Object(Pe.a)(a),"functions"!==o.appliesTo){t.next=25;break}u.functions=c,ft(u,n),t.next=36;break;case 25:if("transformation"!==o.appliesTo){t.next=28;break}t.next=36;break;case 28:if("input"!==o.appliesTo){t.next=35;break}(s=u.inputs.find((function(t){return t.name===e.inputId}))).input=c,ut(u,e.inputId),n(ht.setInputMarkers({inputId:e.inputId,value:s.markers})),t.next=36;break;case 35:throw new Error("Not implemented");case 36:t.next=42;break;case 38:if(t.prev=38,t.t0=t.catch(16),t.t0 instanceof Be.QuickfixProposalNoLongerApplicableException){t.next=42;break}throw t.t0;case 42:case"end":return t.stop()}}),t,null,[[16,38]])})));return function(e,n){return t.apply(this,arguments)}}()},validateFunctions:function(){return function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){var r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n().project,s.a.event({category:"Project",action:"Validated Functions",label:r.url}),ft(r,t)&&t(ht.setProjectStatus(Te("Decomposition function validation successful.")));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},ht=Object(Ee.a)({},mt.actions,{},dt),vt=mt.reducer,yt={color:"var(--theme-neutral-500)",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},gt=["Metamodel","Transformation","Functions","Input","Output"];function bt(e){var t=Object(d.c)().dispatch,n=Object(d.b)((function(e){return e.project})),o=e.inputId||void 0,i=e.projectName,s=e.workspace,l=e.workspaceActions,p=Object(r.useContext)(je).showStatus,h=Object(d.b)((function(e){var t;return null===(t=e.project)||void 0===t?void 0:t.status})),v=Object(d.b)((function(e){var t;return!0===(null===(t=e.project)||void 0===t?void 0:t.hasUnsavedData)})),y=Object(r.useState)(!1),b=Object(f.a)(y,2),k=b[0],w=b[1];Object(r.useEffect)((function(){function e(e){v&&(e.preventDefault(),e.returnValue="")}return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[v]),Object(r.useEffect)((function(){p(h)}),[p,h]),Object(r.useEffect)((function(){k&&t(l.loadProject(i))}),[i,t,k,l]),Object(r.useEffect)((function(){w(s&&s.isInitialized)}),[s,w]);var x=Object(r.useCallback)((function(e){t(ht.setMetamodel(e))}),[t]),E=Object(r.useCallback)((function(e){t(ht.setTransformation(e))}),[t]),O=Object(r.useCallback)((function(e){t(ht.setFunctions(e))}),[t]),S=Object(r.useCallback)((function(e){t(ht.setFunctionsLanguage(e)),t(ht.setFunctions(""))}),[t]),_=Object(r.useCallback)((function(e){t(ht.setInput({inputId:o,value:e}))}),[t,o]),C=Object(r.useCallback)((function(e){t(ht.setOutput(e))}),[t]),N=Object(r.useCallback)((function(e){t(ht.setOutputFormat(e.target.value))}),[t]),I=Object(r.useCallback)((function(e){t(ht.inferMetamodel())}),[t]),F=Object(r.useCallback)((function(e){t(ht.generateSkeletons())}),[t]),P=Object(r.useCallback)((function(e){t(ht.transform(o))}),[t,o]),T=Object(r.useCallback)((function(e){t(ht.validateInput(o))}),[t,o]),R=Object(r.useCallback)((function(e){t(ht.validateInputs())}),[t]),A=Object(r.useCallback)((function(e){t(ht.validateTransformation())}),[t]),L=Object(r.useCallback)((function(e){t(ht.validateFunctions())}),[t]),M=Object(r.useCallback)((function(e){var n={proposal:e};"input"===e.appliesTo&&(n.inputId=o),t(ht.applyQuickfix(n))}),[t,o]),D=Object(d.b)((function(e){if(e.project&&!n.isLoading)return n.inputs.find((function(e){return e.name===o}))}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(u.a,{when:v,message:"You have unsaved changes, are you sure you want to leave?"}),!k&&a.a.createElement(g,{message:"Please wait..."}),k&&!n&&a.a.createElement(g,{message:"Project could not be found."}),n&&n.isLoading&&a.a.createElement("div",{style:yt},a.a.createElement(m.a,null)),n&&!n.isLoading&&a.a.createElement(c.a,{height:"100%",width:"100%",position:"relative",boxSizing:"border-box",overflow:"hidden"},a.a.createElement(xe,{titles:gt},a.a.createElement($,{value:n.metamodel,disabled:n.readOnly,inferDisabled:e.metamodelInferDisabled||n.readOnly,markers:n.metamodelMarkers,onInferMetamodelClicked:I,onChange:x}),a.a.createElement(W,{value:n.transformation,disabled:n.readOnly,validateDisabled:e.transformationValidateDisabled,markers:n.transformationMarkers,onValidateTransformClicked:A,onChange:E,onQuickfixProposalClicked:M}),a.a.createElement(U,{value:n.functions,disabled:n.readOnly,markers:n.functionsMarkers,language:n.functionsLanguage,languageSelectDisabled:e.functionsLanguageSelectDisabled||n.readOnly,generateDisabled:e.functionsGenerateDisabled||n.readOnly,validateDisabled:e.functionsValidateDisabled,onChange:O,onSelectedLanguageChanged:S,onGenerateSkeletonsClicked:F,onValidateFunctionsClicked:L,onQuickfixProposalClicked:M}),a.a.createElement("div",{style:{width:"100%",height:"100%"}},void 0!==o&&void 0!==D&&a.a.createElement(Z,{value:D?D.input:"",disabled:n.readOnly,markers:D?D.markers:[],onChange:_,validateDisabled:e.inputValidateDisabled,onValidateInputClicked:T,onQuickfixProposalClicked:M}),void 0!==o&&void 0===D&&a.a.createElement(j,{title:"Input Models"},a.a.createElement(g,{message:"Input could not be found."})),void 0===o&&a.a.createElement(ge,{project:n,onValidateInputsClicked:R})),a.a.createElement(ce,{value:n.output,disabled:n.readOnly,format:n.outputFormat,onSelectedFormatChanged:N,onChange:C,onTransformClicked:P,transformDisabled:void 0===o||e.outputTransformDisabled}))))}var kt=n(7177),wt=n(7178),xt=n(7179),jt=n(7184),Et=n(7176),Ot=n(274),St=n(7175),_t=n(397),Ct=n.n(_t),Nt=n(398),It=n.n(Nt),Ft=n(7171),Pt=n(7172),Tt=n(7173),Rt=n(7174),At=n(7188),Lt=n(7186),Mt=n(395),Dt=n.n(Mt),zt=n(396),qt=n.n(zt),Bt=n(394),$t=n.n(Bt),Vt={color:"var(--theme-neutral-500)"};function Jt(e){var t=Object(r.useCallback)((function(){window.open("mailto:?subject=Fudomo%20Decomposition&body="+e.exportCode)}),[e.exportCode]),n=Object(r.useCallback)((function(){""!==e.exportCode&&$t()(e.exportCode)}),[e.exportCode]),o=Object(r.useCallback)((function(e){n()}),[n]);return a.a.createElement(At.a,{onClose:e.onCloseClicked,onEntered:o,open:e.isOpen,fullWidth:!0,maxWidth:"md"},a.a.createElement(Ft.a,null,"Export Fudomo Transformation"),a.a.createElement(Pt.a,null,a.a.createElement(Tt.a,null,"Share the following block of text with another user to let them import your transformation:"),a.a.createElement(Lt.a,{value:e.exportCode,multiline:!0,fullWidth:!0,rows:10,rowsMax:20})),a.a.createElement(Rt.a,null,a.a.createElement(E.a,{onClick:e.onCloseClicked,style:Vt},"Close"),a.a.createElement(E.a,{startIcon:a.a.createElement(Dt.a,null),title:"Copy to Clipboard",color:"primary",onClick:n},"Copy"),a.a.createElement(E.a,{startIcon:a.a.createElement(qt.a,null),title:"Open as Email",color:"primary",onClick:t},"Email")))}var Wt={color:"var(--theme-neutral-500)"};function Ht(e){var t=e.isOpen,n=e.onImportConfirmed,o=e.onCloseClicked,i=Object(r.useState)(""),c=Object(f.a)(i,2),u=c[0],s=c[1],l=Object(r.useCallback)((function(e){s("")}),[s]),p=Object(r.useCallback)((function(e){n&&n(u)}),[n,u]),m=Object(r.useCallback)((function(e){s(e.target.value)}),[s]);return a.a.createElement(At.a,{onEnter:l,onClose:o,open:t,fullWidth:!0,maxWidth:"md"},a.a.createElement(Ft.a,null,"Import Fudomo Transformation"),a.a.createElement(Pt.a,null,a.a.createElement(Tt.a,null,"Importing a transformation will overwrite the current project."),a.a.createElement(Lt.a,{autoFocus:!0,placeholder:"Paste transformation code here...",multiline:!0,fullWidth:!0,onChange:m,rows:10,rowsMax:20})),a.a.createElement(Rt.a,null,a.a.createElement(E.a,{onClick:o,style:Wt},"Close"),a.a.createElement(E.a,{onClick:p,color:"primary"},"Import")))}function Qt(e,t,n){return Object(Ce.b)({name:e,initialState:t,reducers:{_setInitialized:function(e){e.isInitialized=!0},_setProjects:function(e,t){e.projects=t.payload},_addProject:function(e,t){var n=t.payload;e.projects.push({name:n.name,url:n.url,inputs:n.inputs.map((function(e){return e.name}))})},_deleteProject:function(e,t){var n=e.projects.findIndex((function(e){return e.name===t.payload}));e.projects.splice(n,1)},_renameProject:function(e,t){var n=t.payload,r=n.name,a=n.newName,o=e.projects.find((function(e){return e.name===r}));o.name=a,o.url=o.url.slice(0,-r.length)+a},_createInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name;e.projects.find((function(e){return e.name===r})).inputs.push(a)},_deleteInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name,o=e.projects.find((function(e){return e.name===r}));o.inputs.splice(o.inputs.findIndex((function(e){return e===a})),1)},_renameInput:function(e,t){var n=t.payload,r=n.projectName,a=n.name,o=n.newName,i=e.projects.find((function(e){return e.name===r}));i.inputs=i.inputs.map((function(e){return e===a?o:e}))},_setSignedIn:function(e,t){e.isSignedIn=t.payload},_setCapabilities:function(e,t){Object.assign(e.capabilities,t.payload)},_setProgressing:function(e,t){e.progressing=t.payload}}})}function Ut(e,t){var n={init:function(){return function(){var r=Object(_e.a)(Se.a.mark((function r(a,o){var i;return Se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),i=Object(Ee.a)({},t,{},n),r.next=5,e.init(a,i);case 5:return r.next=7,a(n.reload());case 7:a(t._setInitialized());case 8:return r.prev=8,a(t._setProgressing(!1)),r.finish(8);case 11:case"end":return r.stop()}}),r,null,[[0,,8,11]])})));return function(e,t){return r.apply(this,arguments)}}()},reload:function(){return function(){var r=Object(_e.a)(Se.a.mark((function r(a,o){var i,c,u,s,l,f,p,m,d;return Se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),i=o(),r.next=5,e.getProjectsMetadata();case 5:for(c=r.sent,a(t._setProjects(c)),u=!0,s=!1,l=void 0,r.prev=10,f=c[Symbol.iterator]();!(u=(p=f.next()).done);u=!0)d=p.value,(null===(m=i.project)||void 0===m?void 0:m.url)===d.url&&a(n.loadProject(d.name));r.next=18;break;case 14:r.prev=14,r.t0=r.catch(10),s=!0,l=r.t0;case 18:r.prev=18,r.prev=19,u||null==f.return||f.return();case 21:if(r.prev=21,!s){r.next=24;break}throw l;case 24:return r.finish(21);case 25:return r.finish(18);case 26:r.next=31;break;case 28:r.prev=28,r.t1=r.catch(0),a(Me(Re(r.t1.message)));case 31:return r.prev=31,a(t._setProgressing(!1)),r.finish(31);case 34:case"end":return r.stop()}}),r,null,[[0,28,31,34],[10,14,18,26],[19,,21,25]])})));return function(e,t){return r.apply(this,arguments)}}()},loadProject:function(n){return function(){var r=Object(_e.a)(Se.a.mark((function r(a,o){var i,c;return Se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=window.location.pathname,a(ht.setProject({url:e.getUrlForProjectName(n),name:n,isLoading:!0})),r.prev=2,a(t._setProgressing(!0)),r.next=6,e.loadProject(n);case 6:if(c=r.sent,window.location.pathname===i){r.next=9;break}return r.abrupt("return");case 9:a(ht.setProject(c)),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(2),a(Me(Re('Can not load project "'.concat(n,'": ').concat(r.t0.message)))),a(ht.setProject(null));case 16:return r.prev=16,a(t._setProgressing(!1)),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[2,12,16,19]])})));return function(e,t){return r.apply(this,arguments)}}()},unloadProject:function(e){return function(){var e=Object(_e.a)(Se.a.mark((function e(t,r){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(n.commitProject((function(){t(ht.setProject(null))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},createProject:function(n){var r=n.name,a=n.onCreated;return(function(){var n=Object(_e.a)(Se.a.mark((function n(o,i){var c;return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(t._setProgressing(!0)),n.next=4,e.createProject(r);case 4:c=n.sent,o(t._addProject(c)),a&&a(c),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),o(Me(Re(n.t0.toString())));case 12:return n.prev=12,o(t._setProgressing(!1)),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(e,t){return n.apply(this,arguments)}}())},deleteProject:function(n){return function(){var r=Object(_e.a)(Se.a.mark((function r(a,o){return Se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),r.next=4,e.deleteProject(n);case 4:a(t._deleteProject(n));case 5:return r.prev=5,a(t._setProgressing(!1)),r.finish(5);case 8:case"end":return r.stop()}}),r,null,[[0,,5,8]])})));return function(e,t){return r.apply(this,arguments)}}()},renameProject:function(n){var r=n.name,a=n.newName,o=n.onRename;return(function(){var n=Object(_e.a)(Se.a.mark((function n(i,c){return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i(t._setProgressing(!0)),n.next=4,e.renameProject(r,a);case 4:i(t._renameProject({name:r,newName:a})),o&&o(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),i(Me(Re(n.t0.toString())));case 11:return n.prev=11,i(t._setProgressing(!1)),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})));return function(e,t){return n.apply(this,arguments)}}())},createInput:function(e){return function(){var n=Object(_e.a)(Se.a.mark((function n(r,a){return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(t._setProgressing(!0)),r(t._createInput(e)),r(ht.createInput(e))}finally{r(t._setProgressing(!1))}case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},deleteInput:function(e){return function(){var n=Object(_e.a)(Se.a.mark((function n(r,a){var o,i;return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e.projectName,i=e.name;try{r(t._setProgressing(!0)),r(t._deleteInput({projectName:o,name:i})),r(ht.deleteInput({projectName:o,name:i}))}finally{r(t._setProgressing(!1))}case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},renameInput:function(e){var n=e.projectName,r=e.name,a=e.newName,o=e.onRename;return(function(){var e=Object(_e.a)(Se.a.mark((function e(i,c){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{i(t._setProgressing(!0)),i(t._renameInput({projectName:n,name:r,newName:a})),i(ht.renameInput({projectName:n,name:r,newName:a})),o&&o()}finally{i(t._setProgressing(!1))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},setInput:function(e){return function(){var t=Object(_e.a)(Se.a.mark((function t(n,r){return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(ht.setInput(e));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},signIn:function(){return function(){var r=Object(_e.a)(Se.a.mark((function r(a,o){return Se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(t._setProgressing(!0)),r.next=4,e.signIn(a,Object(Ee.a)({},t,{},n));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),a(Me(Ae(r.t0)));case 9:return r.prev=9,a(t._setProgressing(!1)),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[0,6,9,12]])})));return function(e,t){return r.apply(this,arguments)}}()},signOut:function(r){return function(){var a=Object(_e.a)(Se.a.mark((function a(o,i){return Se.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o(t._setProgressing(!0)),a.next=4,e.signOut(o,Object(Ee.a)({},t,{},n));case 4:r&&r(),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),o(Me(Ae(a.t0)));case 10:return a.prev=10,o(t._setProgressing(!1)),a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})));return function(e,t){return a.apply(this,arguments)}}()},commitProject:function(n){return function(){var r=Object(_e.a)(Se.a.mark((function r(a,o){var i,c;return Se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===(i=o()).project){r.next=14;break}return r.prev=2,a(t._setProgressing(!0)),delete(c=Object(Ee.a)({},i.project)).hasUnsavedData,delete c.status,delete c.isLoading,r.next=10,e.saveProject(c);case 10:n&&n();case 11:return r.prev=11,a(t._setProgressing(!1)),r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[2,,11,14]])})));return function(e,t){return r.apply(this,arguments)}}()}};return n}var Zt="tryFudomoLocalProjectsV2";function Gt(e){var t=JSON.parse(localStorage[Zt]||"[]"),n=e(t);void 0===n&&(n=t),localStorage[Zt]=JSON.stringify(n)}function Kt(e){return e.name||e.url?e.url.split("/").slice(-1)[0]:null}var Yt={init:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==window.localStorage.localProjects&&void 0===window.localStorage[Zt]&&(window.localStorage[Zt]=window.localStorage.localProjects,Gt((function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;i.name=Kt(i)}}catch(c){n=!0,r=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}})),console.log("Migrated localStorage.localProjects to localStorage.".concat(Zt))),window.addEventListener("storage",(function(e){t(n.reload())}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/local/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(_e.a)(Se.a.mark((function e(){var t;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage[Zt]||"[]"),e.abrupt("return",t.filter((function(e){return Object.keys(e).length>0})).map((function(e){return{name:e.name||e.url.slice("/local/".length),url:e.url,inputs:e.inputs.map((function(e){return e.name}))}})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:t,url:"/local/"+t,inputs:[{name:"input1",input:""}],metamodel:"",transformation:"",functions:"",functionsLanguage:"javascript",output:"",outputFormat:"text"},Gt((function(e){return[].concat(Object(We.a)(e),[n])})),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Gt((function(e){var r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value;Kt(u)===t&&(u.name=n,u.url="/local/"+n)}}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(n=JSON.parse(localStorage[Zt]||"[]").find((function(e){return Kt(e)===t}))).hasUnsavedData,e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Gt((function(e){return e.filter((function(e){return Kt(e)!==t}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("local"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-local project");case 2:n=!1,Gt((function(e){var r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value;u.url===t.url&&(Object.assign(u,t),n=!0)}}catch(s){a=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}})),n||Gt((function(e){e.push(t)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Xt=Qt("localWorkspace",{name:"local",isInitialized:!1,isSignedIn:!0,capabilities:{canAddProject:!0,canImportProject:!0,canDeleteProject:!0,canRenameProject:!0,canAddInput:!0,canRenameInput:!0,canDeleteInput:!0,requiresSignIn:!1},status:[{type:"success",message:null}],projects:[]}),en=Ut(Yt,Xt.actions),tn=Object(Ee.a)({},Xt.actions,{},en),nn=Xt.reducer,rn={name:"example",isInitialized:!1,isSignedIn:!0,capabilities:{canAddProject:!1,canImportProject:!1,canDeleteProject:!1,canRenameProject:!1,canAddInput:!1,canRenameInput:!1,canDeleteInput:!1,requiresSignIn:!1},status:[{type:"success",message:null}],projects:[{url:"/example/concat",name:"concat",inputs:["example1","example2"]},{url:"/example/family2persons",name:"family2persons",inputs:["example1"]},{url:"/example/presi2beamer",name:"presi2beamer",inputs:["example1"]},{url:"/example/presisnippets2html",name:"presisnippets2html",inputs:["example1"]}]},an={init:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/example/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(_e.a)(Se.a.mark((function e(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn.projects);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n,r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==rn.projects.find((function(e){return e.name===t}))){e.next=2;break}throw new Error("Unknown example project");case 2:return e.next=4,et.a.get("/examples/".concat(t,".yaml"));case 4:return n=e.sent,(r=Ie.a.parse(n.data)).isLoading=!1,r.readOnly=!0,r.name=t,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},on=Qt("examplesWorkspace",rn),cn=Ut(an,on.actions),un=Object(Ee.a)({},on.actions,{},cn),sn=on.reducer;function ln(){return fn.apply(this,arguments)}function fn(){return(fn=Object(_e.a)(Se.a.mark((function e(){var t,n,r,a;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=void 0;case 2:return r={spaces:"appDataFolder",pageSize:100,fields:"nextPageToken, files(id, name)"},void 0!==n&&(r.pageToken=n),e.next=6,window.gapi.client.drive.files.list(r);case 6:a=e.sent,t=[].concat(Object(We.a)(t),Object(We.a)(a.result.files)),n=a.result.nextPageToken;case 9:if(void 0!==n){e.next=2;break}case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pn(e){return mn.apply(this,arguments)}function mn(){return(mn=Object(_e.a)(Se.a.mark((function e(t){var n,r,a;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={q:"name='".concat(t.replace(/'/g,"\\'"),"'"),spaces:"appDataFolder",pageSize:2,fields:"nextPageToken, files(id, name)"},e.next=3,window.gapi.client.drive.files.list(n);case 3:if(0!==(r=e.sent).result.files.length){e.next=6;break}return e.abrupt("return",null);case 6:return a=r.result.files[0].id,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dn(e){return hn.apply(this,arguments)}function hn(){return(hn=Object(_e.a)(Se.a.mark((function e(t){var n,r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pn(t);case 3:return n=e.sent,e.next=6,window.gapi.client.drive.files.get({fileId:n,alt:"media"});case 6:return r=e.sent,e.abrupt("return",r.body);case 10:if(e.prev=10,e.t0=e.catch(0),403!==e.t0.status){e.next=14;break}throw new Error("Not logged into Google Drive");case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function vn(e,t,n){return yn.apply(this,arguments)}function yn(){return(yn=Object(_e.a)(Se.a.mark((function e(t,n,r){var a,o,i,c,u,s;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn(t);case 2:return a=e.sent,"foo_bar_baz","\r\n--foo_bar_baz\r\n","\r\n--foo_bar_baz--",o={name:t,parents:["appDataFolder"],mimeType:r},i="POST",c="https://www.googleapis.com/upload/drive/v3/files",null!==a&&(c=c+"/"+a,i="PATCH",delete o.parents),u="\r\n--foo_bar_baz\r\nContent-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify(o)+"\r\n--foo_bar_baz\r\nContent-Type: "+r+"\r\n\r\n"+n+"\r\n\r\n--foo_bar_baz--",s=window.gapi.client.request({path:c,method:i,params:{uploadType:"multipart"},headers:{"Content-Type":"multipart/related; boundary=foo_bar_baz"},body:u}),e.abrupt("return",new Promise((function(e,t){s.then((function(t){e(t)}),(function(e){t(e)}))})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gn(e){return bn.apply(this,arguments)}function bn(){return(bn=Object(_e.a)(Se.a.mark((function e(t){var n,r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(Ee.a)({},t)).inputs=n.inputs||[],delete n.status,delete n.isLoading,r={url:n.url,name:n.url.slice("/gdrive/".length),inputs:n.inputs.map((function(e){return e.name}))},e.next=7,vn("metadata-".concat(r.name,".json"),JSON.stringify(r),"application/json");case 7:return e.next=9,vn("project-".concat(r.name,".json"),JSON.stringify(n),"application/json");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kn(e){return wn.apply(this,arguments)}function wn(){return(wn=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn(t);case 2:if(null!==(n=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,window.gapi.client.drive.files.delete({fileId:n});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xn(e){return jn.apply(this,arguments)}function jn(){return(jn=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn("project-".concat(t,".json"));case 2:return e.next=4,kn("metadata-".concat(t,".json"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var En={init:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){var r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){var r={canAddProject:e,canImportProject:e,canDeleteProject:e,canRenameProject:e,canAddInput:e,canRenameInput:e,canDeleteInput:e};t(n._setCapabilities(r)),t(n._setSignedIn(e))},e.abrupt("return",new Promise((function(e,a){window.gapi.load("client:auth2",(function(){window.gapi.client.init({apiKey:"AIzaSyDD7_sgciu8fRVTrgGeCzIaLl_1g7s66Lo",clientId:"937789607311-rfogt5dmebkjcnfehbtshe13s1s433us.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"https://www.googleapis.com/auth/drive.metadata.readonly https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file"}).then((function(){window.gapi.auth2.getAuthInstance().isSignedIn.listen((function(e){r(e),t(n.reload())})),r(window.gapi.auth2.getAuthInstance().isSignedIn.get()),e()}),(function(e){console.log(e)}))}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.auth2.getAuthInstance().signIn();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.gapi.auth2.getAuthInstance().signOut();case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/gdrive/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(_e.a)(Se.a.mark((function e(){var t,n,r,a,o,i,c,u,s,l;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.prev=2,e.next=5,ln();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),403!==e.t0.status&&console.log(e.t0);case 11:r=!0,a=!1,o=void 0,e.prev=14,i=n[Symbol.iterator]();case 16:if(r=(c=i.next()).done){e.next=27;break}if(null===(u=c.value).name.match(/metadata-.*\.json/)){e.next=24;break}return e.next=21,window.gapi.client.drive.files.get({fileId:u.id,alt:"media"});case 21:s=e.sent,l=JSON.parse(s.body),t.push(l);case 24:r=!0,e.next=16;break;case 27:e.next=33;break;case 29:e.prev=29,e.t1=e.catch(14),a=!0,o=e.t1;case 33:e.prev=33,e.prev=34,r||null==i.return||i.return();case 36:if(e.prev=36,!a){e.next=39;break}throw o;case 39:return e.finish(36);case 40:return e.finish(33);case 41:return e.abrupt("return",t);case 42:case"end":return e.stop()}}),e,null,[[2,8],[14,29,33,41],[34,,36,40]])})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(t,'" is not allowed.'));case 2:return n={name:t,url:"/gdrive/"+t,inputs:[{name:"input1",input:""}],metamodel:"",transformation:"",functions:"",functionsLanguage:"javascript",output:"",outputFormat:"text"},e.next=5,gn(n);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){var r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(n,'" is not allowed.'));case 2:return e.next=4,En.loadProject(t);case 4:return(r=e.sent).url="/gdrive/"+n,r.name=n,e.next=9,gn(r);case 9:return e.next=11,xn(t);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n,r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dn("project-".concat(t,".json"));case 2:return n=e.sent,(r=JSON.parse(n)).isLoading=!1,r.readOnly=!1,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xn(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("gdrive"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-gdrive project");case 2:if(!t.isLoading){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,gn(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},On=Qt("gdriveWorkspace",{name:"gdrive",isInitialized:!1,isSignedIn:!1,capabilities:{canAddProject:!1,canImportProject:!1,canDeleteProject:!1,canRenameProject:!1,canAddInput:!1,canRenameInput:!1,canDeleteInput:!1,requiresSignIn:!0},status:[{type:"success",message:null}],projects:[]}),Sn=Ut(En,On.actions),_n=Object(Ee.a)({},On.actions,{},Sn),Cn=On.reducer,Nn=n(275);function In(e){return{canAddProject:e,canImportProject:e,canDeleteProject:e,canRenameProject:e,canAddInput:e,canRenameInput:e,canDeleteInput:e,requiresSignIn:!0}}var Fn={name:"dropbox",isInitialized:!1,isSignedIn:!1,capabilities:In(!1),status:[{type:"success",message:null}],projects:[]};function Pn(){return Tn.apply(this,arguments)}function Tn(){return(Tn=Object(_e.a)(Se.a.mark((function e(){var t;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==Wn){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Wn.filesListFolder({path:""});case 4:return t=e.sent,e.abrupt("return",t.result.entries.map((function(e){return{name:e.name}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(e){return An.apply(this,arguments)}function An(){return(An=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==Wn){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,Wn.filesDownload({path:"/"+t});case 4:return n=e.sent,e.abrupt("return",new Promise((function(e,t){var r=new FileReader;r.onloadend=function(t){e(r.result)},r.onerror=function(e){t(r.error)},r.readAsText(n.result.fileBlob)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ln(e,t,n){return Mn.apply(this,arguments)}function Mn(){return(Mn=Object(_e.a)(Se.a.mark((function e(t,n,r){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==Wn){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,Wn.filesUpload({path:"/"+t,contents:n,mode:"overwrite"});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dn(e){return zn.apply(this,arguments)}function zn(){return(zn=Object(_e.a)(Se.a.mark((function e(t){var n,r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(Ee.a)({},t)).inputs=n.inputs||[],delete n.status,delete n.isLoading,r={url:n.url,name:n.url.slice("/dropbox/".length),inputs:n.inputs.map((function(e){return e.name}))},e.next=7,Ln("metadata-".concat(r.name,".json"),JSON.stringify(r),"application/json");case 7:return e.next=9,Ln("project-".concat(r.name,".json"),JSON.stringify(n),"application/json");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qn(e){return Bn.apply(this,arguments)}function Bn(){return(Bn=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==Wn){e.next=2;break}throw new Error("Not logged into Dropbox");case 2:return e.next=4,Wn.filesDelete({path:"/"+t});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(e){return Vn.apply(this,arguments)}function Vn(){return(Vn=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn("project-".concat(t,".json"));case 2:return e.next=4,qn("metadata-".concat(t,".json"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jn(e){var t=Object.create(null);return"string"!==typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),r=n.shift(),a=n.length>0?n.join("="):void 0;r=decodeURIComponent(r),a=void 0===a?null:decodeURIComponent(a),void 0===t[r]?t[r]=a:Array.isArray(t[r])?t[r].push(a):t[r]=[t[r],a]})),t):t}var Wn=null,Hn={init:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){var r,a;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){void 0!==window.localStorage.tryFudomoDropboxAccessToken?(Wn=new Nn.Dropbox({accessToken:window.localStorage.tryFudomoDropboxAccessToken}),t(n._setCapabilities(In(!0))),t(n._setSignedIn(!0))):t(n._setSignedIn(!1))},window.dropBoxLoginWorkflowCompleted=function(){r(),Wn&&t(n.reload())},!window.opener||!window.opener.dropBoxLoginWorkflowCompleted){e.next=13;break}if(!(a=Jn(window.location.hash).access_token)){e.next=9;break}return window.localStorage.tryFudomoDropboxAccessToken=a,window.opener.dropBoxLoginWorkflowCompleted(),window.close(),e.abrupt("return");case 9:"access_denied"===Jn(window.location.hash).error&&window.close(),e.next=14;break;case 13:r();case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signIn:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){var r,a,o;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Nn.Dropbox({clientId:"qplk44ju2ohi85a"}),a="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.public_url,"/"),o=r.auth.getAuthenticationUrl(a),800,window.open(o,"_blank","scrollbars=yes,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=".concat(800,",height=").concat(.85*window.innerHeight,",top=").concat(.1*window.innerHeight,",left=").concat((window.innerWidth-800)/2));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete window.localStorage.tryFudomoDropboxAccessToken,Wn=null,t(n._setCapabilities(In(!1))),t(n._setSignedIn(!1)),t(n.reload());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getUrlForProjectName:function(e){return"/dropbox/".concat(e,"/")},getProjectsMetadata:function(){var e=Object(_e.a)(Se.a.mark((function e(){var t,n,r,a,o,i,c,u,s;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],e.prev=2,e.next=5,Pn();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),403!==e.t0.status&&console.log(e.t0);case 11:r=!0,a=!1,o=void 0,e.prev=14,i=n[Symbol.iterator]();case 16:if(r=(c=i.next()).done){e.next=28;break}if(null===(u=c.value).name.match(/metadata-.*\.json/)){e.next=25;break}return e.t1=JSON,e.next=22,Rn(u.name);case 22:e.t2=e.sent,s=e.t1.parse.call(e.t1,e.t2),t.push(s);case 25:r=!0,e.next=16;break;case 28:e.next=34;break;case 30:e.prev=30,e.t3=e.catch(14),a=!0,o=e.t3;case 34:e.prev=34,e.prev=35,r||null==i.return||i.return();case 37:if(e.prev=37,!a){e.next=40;break}throw o;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return e.abrupt("return",t);case 43:case"end":return e.stop()}}),e,null,[[2,8],[14,30,34,42],[35,,37,41]])})));return function(){return e.apply(this,arguments)}}(),createProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(t,'" is not allowed.'));case 2:return n={name:t,url:"/dropbox/"+t,inputs:[{name:"input1",input:""}],metamodel:"",transformation:"",functions:"",functionsLanguage:"javascript",output:"",outputFormat:"text"},e.next=5,Dn(n);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),renameProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){var r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.match(/\//)){e.next=2;break}throw new Error('Name "'.concat(n,'" is not allowed.'));case 2:return e.next=4,Hn.loadProject(t);case 4:return(r=e.sent).url="/dropbox/"+n,r.name=n,e.next=9,Dn(r);case 9:return e.next=11,$n(t);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),loadProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n,r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn("project-".concat(t,".json"));case 2:return n=e.sent,(r=JSON.parse(n)).isLoading=!1,r.readOnly=!1,void 0===r.output&&(r.output=""),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$n(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveProject:function(){var e=Object(_e.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("dropbox"===t.url.split("/")[1]){e.next=2;break}throw new Error("Can not save non-dropbox project");case 2:if(!t.isLoading){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Dn(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Qn=Qt("dropboxWorkspace",Fn),Un=Ut(Hn,Qn.actions),Zn=Object(Ee.a)({},Qn.actions,{},Un),Gn=Qn.reducer,Kn=[{type:"example",actions:un,attr:"examplesWorkspace"},{type:"local",actions:tn,attr:"localWorkspace"},{type:"gdrive",actions:_n,attr:"gdriveWorkspace"},{type:"dropbox",actions:Zn,attr:"dropboxWorkspace"}],Yn=Kn.map((function(e){return e.type}));function Xn(e){var t=Kn.find((function(t){return t.type===e}));if(!t)throw new Error('Unknown workspace type "'.concat(e,'"'));return t.actions}function er(e){var t=Object(d.c)(),n=Object(d.b)((function(e){return e.project})),o=Object(d.b)((function(e){if(null!==e.project){var t=e.project.url.split("/")[1],n=Kn.find((function(e){return e.type===t}));if(!n)throw new Error('Unknown workspace type "'.concat(t,'"'));return{workspace:e[n.attr],actions:n.actions}}return{workspace:null,actions:null}})),i=o.workspace,c=o.actions,l=t.dispatch,p=Object(d.b)((function(e){return!e.environment.isRuntimeReady||(null===i||void 0===i?void 0:i.progressing)||null===n})),m=Object(d.b)((function(e){return!e.environment.isRuntimeReady||(null===i||void 0===i?void 0:i.progressing)||null===i||!i.capabilities.canImportProject})),h=Object(r.useContext)(je),v=h.showError,y=h.showSuccess,g=Object(r.useState)(!1),b=Object(f.a)(g,2),k=b[0],w=b[1],x=Object(r.useState)(""),j=Object(f.a)(x,2),E=j[0],O=j[1],S=Object(r.useCallback)((function(e){var t=Object(Ee.a)({},n);delete t.url,delete t.isLoading,delete t.status,delete t.readOnly,O(btoa(Object(Ot.deflate)(JSON.stringify(n),{to:"string"}))),w(!0),s.a.event({category:"Project",action:"Opened Export Dialog",label:n.url})}),[O,w,n]),_=Object(r.useCallback)((function(e){w(!1)}),[w]),C=Object(r.useState)(!1),N=Object(f.a)(C,2),I=N[0],F=N[1],P=Object(r.useCallback)((function(e){F(!0)}),[F]),T=Object(r.useCallback)((function(e){F(!1)}),[F]),R=Object(u.g)(),A=Object(r.useCallback)((function(e){F(!1);try{if(null===e||0===e.length)throw new Error("Can not import empty project data.");var t=JSON.parse(Object(Ot.inflate)(atob(e),{to:"string"}));t.url="/".concat(i.name,"/").concat(n.name),t.name=n.name,t.readOnly=!1,t.isLoading=!1,t.status=null,l(ht.setProject(t)),l(c.commitProject((function(){l(c.reload()),R.push(t.url),y("Project successfully imported.")}))),s.a.event({category:"Project",action:"Imported Project",label:n.url})}catch(r){v(String(r))}}),[F,c,n,y,v,R,l,i]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(St.a,{disabled:p,color:"inherit",title:"Export",onClick:S},a.a.createElement(Ct.a,null)),a.a.createElement(St.a,{disabled:m,color:"inherit",title:"Import",onClick:P},a.a.createElement(It.a,null)),a.a.createElement(Jt,{isOpen:k,exportCode:E,onCloseClicked:_}),a.a.createElement(Ht,{isOpen:I,onCloseClicked:T,onImportConfirmed:A}))}function tr(e){var t=Object(d.b)((function(e){return!e.environment.isEditorReady||!e.environment.isRuntimeReady})),n=Object(u.h)();return a.a.createElement("div",{className:"AppBar"},a.a.createElement(kt.a,{position:"static",className:"AppBar"},a.a.createElement(wt.a,null,a.a.createElement(h.a,{className:"AppTitle",variant:"h6"},"Try Fudomo!"),a.a.createElement(jt.a,{className:"ToolBarTabs",value:"/docs"===n.pathname&&0},a.a.createElement((function(e){return a.a.createElement(Et.a,Object.assign({component:"a"},e))}),{label:"Documentation",href:"/try-fudomo/docs",target:"_blank",rel:"opener"})),t&&a.a.createElement(xt.a,{className:"Progress",color:"inherit"}),a.a.createElement(er,null))))}var nr=n(400),rr=n.n(nr),ar=n(7182),or=n(220),ir=n(7180),cr=n(278),ur=n.n(cr),sr=n(219),lr=n.n(sr),fr=n(201),pr=n.n(fr),mr=n(171),dr=n.n(mr),hr=n(217),vr=n.n(hr),yr=n(218),gr=n.n(yr),br=n(291),kr=n(7181),wr=n(216),xr=function(e,t){switch(t.type){case"RESET":return"";case"SET":return t.value;default:throw new Error}};function jr(e){var t=Object(r.useReducer)(xr,e.name||""),n=Object(f.a)(t,2),o=n[0],i=n[1],c=Object(r.useCallback)((function(t){13===t.charCode&&(t.preventDefault(),void 0!==o&&o.length>0&&e.onConfirmed(o))}),[e,o]),u=Object(r.useCallback)((function(e){i({type:"SET",value:e.target.value})}),[i]),s=Object(r.useCallback)((function(t){e.onConfirmed(o)}),[e,o]),l=Object(r.useCallback)((function(t){i({type:"SET",value:e.name||""})}),[i,e.name]);return a.a.createElement("div",null,a.a.createElement(At.a,{open:e.isOpen,onClose:e.onCloseClicked,onEnter:l,"aria-labelledby":"form-dialog-title"},a.a.createElement(Ft.a,{id:"form-dialog-title"},e.title||"Enter a string"),a.a.createElement(Pt.a,null,a.a.createElement(Tt.a,null,e.text||"A message"),a.a.createElement(Lt.a,{required:!0,autoFocus:!0,margin:"dense",id:"name",label:"Name",fullWidth:!0,value:o,onChange:u,onKeyPress:c})),a.a.createElement(Rt.a,null,a.a.createElement(E.a,{onClick:e.onCloseClicked,color:"primary"},"Cancel"),a.a.createElement(E.a,{disabled:void 0===o||0===o.length,onClick:s,color:"primary"},"Save"))))}var Er=Object(r.createContext)();var Or=n(276),Sr=n.n(Or),_r=n(277),Cr=n.n(_r),Nr=n(399),Ir=n.n(Nr);function Fr(e){var t=e.actions||[{color:"primary",autoFocus:!1,text:"Cancel",value:!1},{color:"primary",autoFocus:!0,text:"Ok",value:!0}];return a.a.createElement("div",null,a.a.createElement(At.a,{open:e.isOpen,onClose:e.onCanceled,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},a.a.createElement(Ft.a,{id:"alert-dialog-title"},e.title||"Confirm?"),a.a.createElement(Pt.a,null,a.a.createElement(Tt.a,{id:"alert-dialog-description"},e.message||"Do you agree?")),a.a.createElement(Rt.a,null,t.map((function(t,n){return a.a.createElement(E.a,{key:n,onClick:function(){return e.onButtonClicked(t.value)},autoFocus:t.autoFocus,color:t.color},t.text)})))))}var Pr=Object(r.createContext)();n(370);var Tr=["yml","yaml","csv"],Rr={yml:function(e,t){try{return Ie.a.parse(t),t}catch(n){throw Error('File "'.concat(e,'" is not syntactically valid yaml.'))}},csv:function(e,t){var n=Ir.a.parse(t).data,r=[],a=!0,o=!1,i=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value,l=[],f=!0,p=!1,m=void 0;try{for(var d,h=s[Symbol.iterator]();!(f=(d=h.next()).done);f=!0){var v=d.value;l.push({Value:v})}}catch(y){p=!0,m=y}finally{try{f||null==h.return||h.return()}finally{if(p)throw m}}r.push({Row:l})}}catch(y){o=!0,i=y}finally{try{a||null==u.return||u.return()}finally{if(o)throw i}}return Ie.a.stringify(r)}};function Ar(e){var t=new FileReader;return t.readAsText(e,"UTF-8"),new Promise((function(e,n){t.onload=function(t){return e(t.target.result)},t.onerror=function(e){return n(e)}}))}function Lr(e){var t=e.workspace,n=e.project,o=e.actions,i=e.dispatch,c=Object(wr.a)("expandedProjectLocations-"+e.title,[]),s=Object(f.a)(c,2),l=s[0],p=s[1],m=Object(u.h)(),d=Object(u.g)(),h=Object(r.useContext)(Er),v=Object(r.useContext)(Pr),y=Object(r.useCallback)(function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.push("".concat(t.url)),n=t.url.split("/").slice(-1)[0],e.next=4,v({title:"Delete Project?",message:'Irreversibly delete project "'.concat(n,'"?')});case 4:if(e.sent)try{i(o.deleteProject(t.name)),d.push("/")}catch(r){i(Me(Re(r.message)))}case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,i,o,d]),g=Object(r.useCallback)(function(){var e=Object(_e.a)(Se.a.mark((function e(n){var r,a;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.push("".concat(n.url)),r=n.url.split("/").slice(-1)[0],e.next=4,h({title:"Rename Project",text:'Enter a new name for project "'.concat(r,'":'),name:r});case 4:if(null===(a=e.sent)){e.next=15;break}if(e.prev=6,!t.projects.find((function(e){return e.name===a}))){e.next=9;break}throw new Error('Project named "'.concat(a,'" already exists.'));case 9:i(o.renameProject({name:n.name,newName:a,onRename:function(){var e=n.url.split("/").slice(0,2).join("/");d.push("".concat(e,"/").concat(a))}})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),i(Me(Re(e.t0.message)));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),[h,i,o,d,t]),b=Object(r.useCallback)(function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.push("".concat(t.url)),e.next=3,h({title:"Add Input",text:"Enter a name for the input data:"});case 3:if(null===(n=e.sent)){e.next=14;break}if(e.prev=5,!t.inputs.includes(n)){e.next=8;break}throw new Error('Input named "'.concat(n,'" already exists.'));case 8:i(o.createInput({projectName:t.name,name:n})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),i(Me(Re(e.t0.message)));case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[h,i,o,d]),k=Object(r.useCallback)(function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){var r,a,c,u,s,l,f,p,m,d,h,y;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:r=[],a=null,c=!0,u=!1,s=void 0,e.prev=7,l=Se.a.mark((function e(){var n,i,c,u,s,l,f;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.value,i=n.name.split(".").slice(-1)[0].toLowerCase(),Tr.includes(i)){e.next=5;break}return r=[Me(Re('File "'.concat(n.name,'" has invalid extension, expected ').concat(Tr.join("/"),". Import aborted.")))],e.abrupt("return","break");case 5:return e.next=7,Ar(n);case 7:c=e.sent,u="",e.prev=9,u=Rr[i](n.name,c),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(9),r=[Me(Re(e.t0.message))],e.abrupt("return","break");case 17:if(s=n.name.split(".").slice(0,-1).join("."),!t.inputs.some((function(e){return e===s}))){e.next=37;break}if(l=[{color:"primary",autoFocus:!1,text:"Cancel",value:"cancel"},{color:"primary",autoFocus:!1,text:"Skip all",value:"skipAll"},{color:"primary",autoFocus:!1,text:"Overwrite all",value:"overWriteAll"},{color:"primary",autoFocus:!1,text:"Skip",value:"skip"},{color:"primary",autoFocus:!0,text:"Overwrite",value:"overwrite"}],f=null,null!==a){e.next=32;break}return e.next=25,v({title:'Overwrite existing input "'.concat(s,'"?'),message:'An input named "'.concat(s,'" already exists in the project. Overwrite it?'),actions:l});case 25:if("cancel"!==(f=e.sent)){e.next=28;break}return e.abrupt("return",{v:void 0});case 28:"skipAll"===f&&(a="skip",f="skip"),"overWriteAll"===f&&(a="overwrite",f="overwrite"),e.next=33;break;case 32:f=a;case 33:"overwrite"===f&&r.push(o.setInput({projectName:t.name,inputId:s,value:u})),e.next=38;break;case 37:r.push(o.createInput({projectName:t.name,name:s,value:u}));case 38:case"end":return e.stop()}}),e,null,[[9,13]])})),f=n[Symbol.iterator]();case 10:if(c=(p=f.next()).done){e.next=22;break}return e.delegateYield(l(),"t0",12);case 12:m=e.t0,e.t1=m,e.next="break"===e.t1?16:17;break;case 16:return e.abrupt("break",22);case 17:if("object"!==typeof m){e.next=19;break}return e.abrupt("return",m.v);case 19:c=!0,e.next=10;break;case 22:e.next=28;break;case 24:e.prev=24,e.t2=e.catch(7),u=!0,s=e.t2;case 28:e.prev=28,e.prev=29,c||null==f.return||f.return();case 31:if(e.prev=31,!u){e.next=34;break}throw s;case 34:return e.finish(31);case 35:return e.finish(28);case 36:for(d=0,h=r;d<h.length;d++)y=h[d],i(y);case 37:case"end":return e.stop()}}),e,null,[[7,24,28,36],[29,,31,35]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,o,v]),w=Object(r.useCallback)(function(){var e=Object(_e.a)(Se.a.mark((function e(t){var n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.push("".concat(t.url)),(n=document.createElement("input")).type="file",n.multiple=!0,n.accept=Tr.map((function(e){return"."+e})).join(","),n.onchange=function(){var e=Object(_e.a)(Se.a.mark((function e(n){var r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Array.from(n.target.files),k(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.click();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,d]),x=Object(r.useCallback)(function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){var r;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({title:"Rename Input",text:'Enter a new name for input "'.concat(n,'":'),name:n});case 2:if(null===(r=e.sent)){e.next=13;break}if(e.prev=4,!t.inputs.includes(r)){e.next=7;break}throw new Error('Input named "'.concat(r,'" already exists.'));case 7:i(o.renameInput({projectName:t.name,name:n,newName:r,onRename:function(){d.push(t.url+"/"+r)}})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),i(Me(Re(e.t0.message)));case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}(),[h,i,o,d]),j=Object(r.useCallback)(function(){var e=Object(_e.a)(Se.a.mark((function e(t,n){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.push("".concat(t.url,"/").concat(n)),e.next=3,v({title:"Delete Input?",message:'Irreversibly delete input "'.concat(n,'"?')});case 3:e.sent&&(d.push(t.url),i(o.deleteInput({projectName:t.name,inputId:n})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[v,i,o,d]),E=Object(r.useCallback)((function(e){l.includes(e.url)?p(l.filter((function(t){return t!==e.url}))):p([].concat(Object(We.a)(l),[e.url]))}),[l,p]),O=Object(r.useCallback)((function(e,t){e.preventDefault(),e.currentTarget.classList.remove("dropHovering"),k(t,e.dataTransfer.files)}),[k]),S=Object(r.useCallback)((function(e){e.currentTarget.classList.add("dropHovering")}),[]),_=Object(r.useCallback)((function(e){e.currentTarget.contains(e.relatedTarget)||e.currentTarget.classList.remove("dropHovering")}),[]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(ue.c,{to:n.url},a.a.createElement(me.a,{button:!0,className:"ListItemIndented WorkspaceListItem",selected:m.pathname===n.url},l.includes(n.url)?a.a.createElement(vr.a,{onClick:function(){return E(n)}}):a.a.createElement(gr.a,{onClick:function(){return E(n)}}),a.a.createElement(I.a,{className:"ListItemIcon"},a.a.createElement(he.a,{className:"SideBarIcon"})),a.a.createElement(ve.a,{primary:n.url.split("/").slice(-1)[0]}),a.a.createElement(ir.a,{className:"Actions"},t.capabilities.canRenameProject&&a.a.createElement(St.a,{edge:"end",title:"Rename",className:"SideBarIcon Tight",onClick:function(){return g(n)}},a.a.createElement(Sr.a,null)),t.capabilities.canDeleteProject&&a.a.createElement(St.a,{edge:"end",title:"Delete",className:"SideBarIcon Tight",onClick:function(){return y(n)}},a.a.createElement(Cr.a,null))))),!0===l.includes(n.url)&&a.a.createElement(pe.a,{onDragEnter:S,onDragLeave:_,onDragOver:function(e){return e.preventDefault()},onDrop:function(e){return O(e,n)}},(n.inputs||["input"]).map((function(r,o){return a.a.createElement(ue.c,{key:n.url+"-"+o,to:n.url+"/"+r},a.a.createElement(me.a,{button:!0,disabled:e.disabled,className:"ListItemIndented2 WorkspaceListItem",selected:m.pathname===n.url+"/"+r},a.a.createElement(I.a,{className:"ListItemIcon"},a.a.createElement(he.a,{className:"SideBarIcon"})),a.a.createElement(ve.a,{primary:r}),a.a.createElement(ir.a,{className:"Actions"},t.capabilities.canRenameInput&&a.a.createElement(St.a,{edge:"end",title:"Rename",className:"SideBarIcon Tight",onClick:function(){return x(n,r)}},a.a.createElement(Sr.a,null)),t.capabilities.canDeleteInput&&a.a.createElement(St.a,{edge:"end",title:"Delete",className:"SideBarIcon Tight",onClick:function(){return j(n,r)}},a.a.createElement(Cr.a,null)))))})),t.capabilities.canAddInput&&a.a.createElement(a.a.Fragment,null,a.a.createElement(me.a,{className:"ListItemIndented2 WorkspaceListItem",key:n.url+"-add-input",button:!0,onClick:function(e){return b(n)}},a.a.createElement(I.a,{className:"ListItemIcon"},a.a.createElement(dr.a,{className:"SideBarIcon"})),a.a.createElement(ve.a,{primary:"Add Input..."})),a.a.createElement(me.a,{className:"ListItemIndented2 WorkspaceListItem",key:n.url+"-import-input",button:!0,onClick:function(e){return w(n)}},a.a.createElement(I.a,{className:"ListItemIcon"},a.a.createElement(dr.a,{className:"SideBarIcon"})),a.a.createElement(ve.a,{primary:"Import Input..."})))))}Rr.yaml=Rr.yml;var Mr={whiteSpace:"nowrap"};function Dr(e){var t=Object(d.c)().dispatch,n=e.workspace,o=e.actions,i=e.icon||a.a.createElement(ur.a,null),c=Object(r.useContext)(Er),s=Object(wr.a)("workspaceBrowserCollapsed-"+e.title,!1),l=Object(f.a)(s,2),p=l[0],m=l[1],h=Object(u.g)(),v=Object(r.useCallback)(Object(_e.a)(Se.a.mark((function e(){var r,a;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({title:"Enter Project Name",text:"Enter a name for the new project"});case 2:if(null===(r=e.sent)){e.next=14;break}if(e.prev=4,!n.projects.find((function(e){return e.name===r}))){e.next=7;break}throw new Error('Project named "'.concat(r,'" already exists.'));case 7:a=o.createProject({name:r,onCreated:function(e){h.push(e.url)}}),t(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t(Me(Re(e.t0.message)));case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),[c,t,o,h,n]),y=Object(r.useCallback)((function(e){t(o.signOut((function(){h.push("/")})))}),[h,t,o]),g=Object(r.useCallback)((function(e){t(o.signIn()),m(!1)}),[t,o,m]),b=Object(r.useCallback)((function(e){!n.capabilities.requiresSignIn||n.isSignedIn?m(!p):g(e)}),[m,p,n,g]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(pe.a,null,a.a.createElement(me.a,{button:!0,onClick:b},n.isSignedIn?p?a.a.createElement(gr.a,null):a.a.createElement(vr.a,null):a.a.createElement("div",{style:{height:"24px",width:"24px"}}),a.a.createElement(I.a,{className:"ListItemIcon"},i||a.a.createElement(ur.a,{className:"SideBarIcon"})),a.a.createElement(ve.a,{style:Mr},e.title,n.progressing&&a.a.createElement("div",{className:"WorkspaceProgressWrapper"},a.a.createElement(kr.a,{variant:"query",className:"CloudLoginProgress"}))),n.capabilities.requiresSignIn&&a.a.createElement(ir.a,null,n.isSignedIn?a.a.createElement(St.a,{title:"Disconnect Cloud Storage",className:"SideBarIcon Tight CloudLogout",onClick:y},a.a.createElement(lr.a,null)):a.a.createElement(St.a,{title:"Connect to Cloud Storage",className:"SideBarIcon Tight",onClick:g},a.a.createElement(pr.a,null)))),a.a.createElement(br.a,{in:!p},a.a.createElement(pe.a,{component:"div",disablePadding:!0},n.projects.map((function(e,r){return a.a.createElement("div",{key:r},a.a.createElement(Lr,{workspace:n,project:e,actions:o,dispatch:t}))})),n.capabilities.canAddProject&&a.a.createElement(me.a,{className:"ListItemIndented WorkspaceListItem",key:1e7,button:!0,onClick:v},a.a.createElement(I.a,{className:"ListItemIcon"},a.a.createElement(dr.a,{className:"SideBarIcon"})),a.a.createElement(ve.a,{primary:"Create Project..."}))))),a.a.createElement(ar.a,null))}function zr(e){var t=Object(d.b)((function(e){return e.examplesWorkspace})),n=Object(d.b)((function(e){return e.localWorkspace})),r=Object(d.b)((function(e){return e.gdriveWorkspace})),o=Object(d.b)((function(e){return e.dropboxWorkspace})),i=Object(u.i)("/");return a.a.createElement(c.a,{height:"100%",minWidth:"240px",width:"240px",position:"relative",boxSizing:"border-box",className:"SideBar"},a.a.createElement(ue.b,{to:"/"},a.a.createElement(pe.a,null,a.a.createElement(me.a,{key:"0",selected:i&&i.isExact},a.a.createElement(I.a,{className:"ListItemIcon"},a.a.createElement(rr.a,{className:"SideBarIcon"})),a.a.createElement(ve.a,{primary:"Overview"})))),a.a.createElement(ar.a,null),a.a.createElement(Dr,{title:"Example Projects",workspace:t,actions:un}),a.a.createElement(Dr,{title:"Local Projects",workspace:n,actions:tn}),a.a.createElement(Dr,{title:"Google Drive",workspace:r,actions:_n,icon:a.a.createElement(or.b,null)}),a.a.createElement(Dr,{title:"Dropbox",workspace:o,actions:Zn,icon:a.a.createElement(or.a,null)}))}var qr=n(402),Br=n.n(qr),$r=n(279),Vr=n.n($r),Jr=n(404),Wr={display:"flex",flexDirection:"row",flexWrap:"nowrap",flexGrow:1,overflow:"hidden"},Hr={padding:"1em 2em",overflow:"auto"};function Qr(e,t){return"string"===typeof t?e+t:a.a.Children.toArray(t.props.children).reduce(Qr,e)}function Ur(e){var t=function(e){var t=Object(r.useState)(null),n=Object(f.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(!1),c=Object(f.a)(i,2),u=c[0],s=c[1],l=Object(r.useState)(null),p=Object(f.a)(l,2),m=p[0],d=p[1];return Object(r.useEffect)((function(){d(null),s(!0),et.a.get(e).then((function(e){o(e.data),s(!1)})).catch((function(e){o(null),d("".concat(e)),s(!1)}))}),[e]),[a,u,m]}("FudomoDocs.md"),n=Object(f.a)(t,1)[0],o=null!==window.opener;return a.a.createElement("div",{style:Wr},a.a.createElement("div",{className:"DocumentationOutline"},a.a.createElement(pe.a,null,o&&a.a.createElement(ue.b,{to:"/docs",onClick:function(){return window.close()}},a.a.createElement(me.a,{divider:!0},a.a.createElement(I.a,{className:"ListItemIcon"},a.a.createElement(lr.a,{className:"SideBarIcon"})),a.a.createElement(ve.a,{primary:"Close Documentation"}))),!o&&a.a.createElement(ue.b,{to:"/"},a.a.createElement(me.a,{divider:!0},a.a.createElement(I.a,{className:"ListItemIcon"},a.a.createElement(Br.a,{className:"SideBarIcon"})),a.a.createElement(ve.a,{primary:"Back to Try-Fudomo!"}))),a.a.createElement(Vr.a,{source:n,allowedTypes:["heading","text"],renderers:{heading:function(e){var t=a.a.Children.toArray(e.children).reduce(Qr,"").toLowerCase().replace(/\W/g,"-"),n={marginLeft:e.level-1+"em"},r={fontWeight:1===e.level?"bold":"normal"};return a.a.createElement("a",{href:"#"+t},a.a.createElement(me.a,null,a.a.createElement(ve.a,{primary:e.children,style:n,primaryTypographyProps:{style:r}})))}}}))),a.a.createElement("div",{style:Hr},a.a.createElement(Vr.a,{source:n,linkTarget:"_blank",renderers:Object(Ee.a)({},Jr.a,{heading:function(e){var t=a.a.Children.toArray(e.children).reduce(Qr,"").toLowerCase().replace(/\W/g,"-");return a.a.createElement("h"+e.level,{id:t},e.children)}})})))}var Zr=ot,Gr=Object(Ce.b)({name:"environment",initialState:{isLoading:!0,isEditorReady:!1,isRuntimeReady:!1},reducers:{setLoading:function(e,t){e.isLoading=t.payload},setEditorReady:function(e,t){e.isEditorReady=t.payload},setRuntimeReady:function(e,t){e.isRuntimeReady=t.payload}}}),Kr=Gr.actions,Yr=Kr.setLoading,Xr=Kr.setEditorReady,ea=Kr.setRuntimeReady,ta=Gr.reducer;function na(e){var t,n,r=Object(d.c)(),o=(t=e.match.params.workspaceType,Object(d.b)((function(e){var n=Kn.find((function(e){return e.type===t}));return n?e[n.attr]:null})));try{n=Xn(e.match.params.workspaceType)}catch(i){return a.a.createElement(g,{message:"Error loading project"},i.message)}return a.a.createElement(u.d,null,a.a.createElement(u.b,{path:e.match.path+"/:projectId/:inputId",exact:!0,render:function(e){return a.a.createElement(bt,{projectName:e.match.params.projectId,inputId:e.match.params.inputId,workspace:o,workspaceActions:n})}}),a.a.createElement(u.b,{path:e.match.path+"/:projectId/",exact:!0,render:function(e){return a.a.createElement(bt,{projectName:e.match.params.projectId,workspace:o,workspaceActions:n})}}),a.a.createElement(u.b,{path:e.match.path,exact:!0,render:function(e){return r.dispatch(ht.setProject(null)),a.a.createElement(g,{message:"Please select a project."})}}))}var ra=Object(l.withSnackbar)((function(e){var t=Object(d.c)(),n=Object(r.useContext)(je).showStatus,o=Object(d.b)((function(e){return e.status}));Object(r.useEffect)((function(){n(o)}),[o,n]);var i=Object(u.h)();return Object(r.useEffect)((function(){s.a.set({page:i.pathname}),s.a.pageview(i.pathname)}),[i]),Object(r.useEffect)((function(){t.dispatch((function(e){e(Yr(!1)),e(Xr(!0)),Zr.init().then((function(){e(ea(!0))}))}));var e=!0,n=!1,r=void 0;try{for(var a,o=Yn[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=Xn(a.value);t.dispatch(i.init())}}catch(c){n=!0,r=c}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}),[t]),a.a.createElement("div",{className:"App"},a.a.createElement(tr,null),a.a.createElement(c.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",height:"100%",width:"100%",position:"relative",boxSizing:"border-box",overflow:"hidden"},a.a.createElement(u.d,null,a.a.createElement(u.b,{path:"/docs",exact:!0},a.a.createElement(Ur,null)),a.a.createElement(u.b,{path:"/"},a.a.createElement(zr,null),a.a.createElement(u.d,null,a.a.createElement(u.b,{path:"/",exact:!0,render:function(e){return window.setTimeout((function(){return t.dispatch(ht.setProject(null))}),0),a.a.createElement(g,{message:"Try Fudomo"},"Try an example project, or create your own.")}}),a.a.createElement(u.b,{path:"/:workspaceType",component:na}))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(7116);var aa=n(75),oa=void 0;function ia(e,t){if(t.type&&t.type.startsWith("project/")&&"project/setHasUnsavedData"!==t.type&&"project/setProject"!==t.type){var n=e.getState().project;null!==n&&(n.isLoading||(e.dispatch(ht.setHasUnsavedData(!0)),function(e,t){oa&&window.clearTimeout(oa),oa=window.setTimeout((function(){var n=Xn(e.url.split("/")[1]);t(n.commitProject((function(){t(ht.setHasUnsavedData(!1))})))}),1e3)}(n,e.dispatch)))}}var ca=function(e){return function(t){return function(n){return ia(e,n),t(n)}}},ua=Object(aa.c)({examplesWorkspace:sn,localWorkspace:nn,gdriveWorkspace:Cn,dropboxWorkspace:Gn,project:vt,environment:ta,status:De}),sa=Object(Ce.a)({reducer:ua,middleware:function(e){return[ca].concat(Object(We.a)(e()))}});et.a.defaults.baseURL=window.public_url,s.a.initialize("UA-167809229-1"),i.a.render(a.a.createElement(d.a,{store:sa},a.a.createElement(l.SnackbarProvider,{maxSnack:3},a.a.createElement(ue.a,{basename:window.public_url},a.a.createElement((function(e){var t=Object(l.useSnackbar)(),n=t.enqueueSnackbar,o=t.closeSnackbar,i=Object(r.useCallback)((function(e){e=Array.isArray(e)?e:[e];var t=!0,r=!1,i=void 0;try{for(var c,u=function(){var e=c.value;if(null===e||void 0===e)return"continue";var t="pre"===e.formatting?{whiteSpace:"pre"}:{},r="success"===e.type?"success":"error",i=e.message;"exception"===e.type&&(t.whiteSpace="pre",t.fontFamily="'Droid Sans Mono', monospace"),i||(i="Unknown Status");var u=n(a.a.createElement("p",{style:t},String(i)),{variant:r,onClick:function(){return o(u)}})},s=e[Symbol.iterator]();!(t=(c=s.next()).done);t=!0)u()}catch(l){r=!0,i=l}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}}),[n,o]),c=Object(r.useCallback)((function(e){i([{type:"success",message:e}])}),[i]),u=Object(r.useCallback)((function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];i([{type:"error",message:e}])}),[i]),s=Object(r.useCallback)((function(e){i([{type:"error",message:e,formatting:"pre"}])}),[i]),f=Object(r.useCallback)((function(e){i([{type:"exception",error:e}])}),[i]),p={showStatus:i,showSuccess:c,showError:u,showErrorPre:s,showException:f};return a.a.createElement(je.Provider,{value:p,children:e.children})}),null,a.a.createElement((function(e){var t=Object(r.useState)(!1),n=Object(f.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)({}),u=Object(f.a)(c,2),s=u[0],l=u[1],p=Object(r.useRef)({resolve:function(){},reject:function(){}});return a.a.createElement(a.a.Fragment,null,a.a.createElement(Er.Provider,{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Promise((function(e,t){p.current.resolve=e,p.current.reject=t}));return l(e),i(!0),t},children:e.children}),a.a.createElement(jr,Object.assign({isOpen:o,onCloseClicked:function(){i(!1),p.current.resolve(null)},onConfirmed:function(e){i(!1),p.current.resolve(e)}},s)))}),null,a.a.createElement((function(e){var t=Object(r.useState)(!1),n=Object(f.a)(t,2),o=n[0],i=n[1],c=Object(r.useState)({}),u=Object(f.a)(c,2),s=u[0],l=u[1],p=Object(r.useRef)({resolve:function(){},reject:function(){}}),m=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Promise((function(e,t){p.current.resolve=e,p.current.reject=t}));return l(e),i(!0),t}),[l,i,p]),d=Object(r.useCallback)((function(e){i(!1),p.current.resolve(e)}),[i,p]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Pr.Provider,{value:m,children:e.children}),a.a.createElement(Fr,Object.assign({isOpen:o,onButtonClicked:d},s)))}),null,a.a.createElement(ra,null))))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,n){"use strict";n.r(t),n.d(t,"QuickfixProposalNoLongerApplicableException",(function(){return l})),n.d(t,"quickfixProposalReviver",(function(){return f})),n.d(t,"QuickfixProposal",(function(){return p})),n.d(t,"RangeReplaceQuickfixProposal",(function(){return m})),n.d(t,"escapeHtml",(function(){return d})),n.d(t,"offsetToRange",(function(){return h})),n.d(t,"reMatchAll",(function(){return v}));var r=n(30),a=n(37),o=n(60),i=n(49),c=n(55),u=n(221);n(6660).shim();var s=n(180),l=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),t}(Object(u.a)(Error));function f(e,t){return"RangeReplaceQuickfixProposal"===t.type?m.fromObj(t):t}var p=function(){function e(t,n,r){Object(a.a)(this,e),this.description=t,this.appliesTo=n,this.originalSource=r}return Object(r.a)(e,[{key:"isApplicableToSource",value:function(e){return e===this.originalSource}},{key:"applyToSource",value:function(e){if(e!==this.originalSource)throw new l;return this.apply(e)}},{key:"apply",value:function(e){throw new Error("not implemented")}}]),e}(),m=function(e){function t(e,n,r,c,u){var s;return Object(a.a)(this,t),(s=Object(o.a)(this,Object(i.a)(t).call(this,e,n,r))).range=c,s.replacement=u,s}return Object(c.a)(t,e),Object(r.a)(t,[{key:"apply",value:function(e){var t=s(e,{origin:0}),n=t.toIndex(this.range[0][0],this.range[0][1]),r=t.toIndex(this.range[1][0],this.range[1][1]);return e.slice(0,n)+this.replacement+e.slice(r)}},{key:"toJSON",value:function(){return{type:"RangeReplaceQuickfixProposal",description:this.description,appliesTo:this.appliesTo,originalSource:this.originalSource,range:this.range,replacement:this.replacement}}}],[{key:"fromObj",value:function(e){if("RangeReplaceQuickfixProposal"!==e.type)throw new Error;return new t(e.description,e.appliesTo,e.originalSource,e.range,e.replacement)}}]),t}(p);function d(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function h(e,t,n){if(""===e)return[[0,0],[0,0]];t>=e.length&&(t=e.length-1),t+n>=e.length&&(0==n?t=e.length-1:n=e.length-1-t);var r=s(e,{origin:0}),a=r.fromIndex(t),o=r.fromIndex(t+n);return[[a.line,a.col],[o.line,o.col]]}function v(e,t){var n=s(e,{origin:0});function r(t,r){var a=n.fromIndex(t)||n.fromIndex(e.length-1),o=n.fromIndex(t+r)||n.fromIndex(e.length-1);return[[a.line,a.col],[o.line,o.col]]}var a=[],o=!0,i=!1,c=void 0;try{for(var u,l=e.matchAll(t)[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){for(var f=u.value,p=[],m=0;m<f.length;m++)void 0!==f[m]&&(p[m]=r(f.indices[m][0],f.indices[m][1]-f.indices[m][0]));f.groupRanges=p,a.push(f)}}catch(d){i=!0,c=d}finally{try{o||null==l.return||l.return()}finally{if(i)throw c}}return a}}},[[6174,1,2]]]);